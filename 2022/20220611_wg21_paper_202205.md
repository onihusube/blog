# ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2022å¹´04æœˆï¼‰

æ–‡æ›¸ã®ä¸€è¦§

- [JTC1/SC22/WG21 - Papers 2022 mailing2022-05](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/#mailing2022-05)

å…¨éƒ¨ã§36æœ¬ã‚ã‚Šã¾ã™ã€‚

[:contents]

### [N4912 2022-11 Kona hybrid meeting information](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/n4912.pdf)

2022å¹´11æœˆã®WG21å…¨ä½“ä¼šè­°ã®å‘¨çŸ¥æ–‡æ›¸ã€‚

2022å¹´11æœˆã®å…¨ä½“ä¼šè­°ãŒå¯¾é¢éƒ½ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã®ä¸¡æ–¹åŒæ™‚é–‹å‚¬ã«ãªã‚‹ã“ã¨ãŒæ±ºå®šã•ã‚ŒãŸã‚ˆã†ã§ã€ä¸»ã«ãã®é–‹å‚¬å ´æ‰€ã«ã¤ã„ã¦ã®æƒ…å ±ãŒè¨˜è¼‰ã•ã‚Œã¦ã„ã¾ã™ã€‚

### [N4913 PL22.16/WG21 agenda: 25 July 2022, Virtual Meeting](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/n4913.html)

2022å¹´6æœˆã®å…¨ç”°ä¼šè­°ã®ã‚¢ã‚¸ã‚§ãƒ³ãƒ€ã€‚

### [P0543R1 Saturation arithmetic](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p0543r1.html)

æ•´æ•°ã®é£½å’Œæ¼”ç®—ã‚’è¡Œã†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªæ©Ÿèƒ½ã®ææ¡ˆã€‚

C++ã®æ•´æ•°å‹ã«ã‚ˆã‚‹è¨ˆç®—æ™‚ã€ãã®è¨ˆç®—çµæœãŒã‚ªãƒ¼ãƒãƒ¼ãƒ•ãƒ­ãƒ¼ï¼ˆãã®å‹ã®æœ€å¤§å€¤/æœ€å°å€¤ã‚’è¶…ãˆãŸå€¤ã«ãªã‚‹ï¼‰ã™ã‚‹å ´åˆã€ç¬¦å·ä»˜ãæ•´æ•°å‹ã¯æœªå®šç¾©å‹•ä½œã¨ãªã‚Šã€ç¬¦å·ãªã—æ•´æ•°å‹ã¯2^Nã‚’æ³•ã¨ã—ãŸãƒ¢ã‚¸ãƒ¥ãƒ­æ¼”ç®—ã«ã‚ˆã£ã¦çµæœãŒå–å¾—ã•ã‚Œã¾ã™ã€‚

```cpp
int main() {
  std::uint32_t un1 = std::uint32_t(4294967295) + 1u; // 0
  std::uint32_t un2 = 0u - 1u;  // 4294967295

  std::int32_t sn1 = std::int32_t(2147483647) + 1; // UB
  std::int32_t sn2 = -2147483648 - 1;  // UB
}
```

ã„ãšã‚Œã®å ´åˆã§ã‚‚ã€å ´åˆã«ã‚ˆã£ã¦ã¯ã‚ªãƒ¼ãƒãƒ¼ãƒ•ãƒ­ãƒ¼ã™ã‚‹ã¨ãã«ä¸Šé™ãƒ»ä¸‹é™å€¤ã§å€¤ã‚’æ­¢ã‚ã¦ã»ã—ã„ã¨ããŒã‚ã‚Šã¾ã™ã€‚ãã®ãŸã‚ã®ã‚ˆãçŸ¥ã‚‰ã‚ŒãŸæ–¹æ³•ãŒé£½å’Œæ¼”ç®—ï¼ˆ*saturation arithmetic*ï¼‰ã§ã€è¨ˆç®—çµæœãŒã‚ªãƒ¼ãƒãƒ¼ãƒ•ãƒ­ãƒ¼ã™ã‚‹å ´åˆã«è¡¨ç¾å¯èƒ½ãªç¯„å›²å†…ã«åã‚ã‚‹å½¢ã§çµæœã‚’è¿”ã—ã¾ã™ã€‚

C++ã«ã¯ä»Šã¾ã§ã“ã®é£½å’Œæ¼”ç®—ã‚’è¡Œã†æ¨™æº–çš„ãªæ–¹æ³•ãŒã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸãŒã€ã“ã®ææ¡ˆã¯ãã‚Œã‚’è¿½åŠ ã—ã‚ˆã†ã¨ã™ã‚‹ã‚‚ã®ã§ã™ã€‚

ææ¡ˆæ–‡æ›¸ã‚ˆã‚Šã€ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã€‚

```cpp
#include <saturation> // æ–°ãƒ˜ãƒƒãƒ€ã«é…ç½®

int main() {
  int x1 = add_sat(3, 4);               // 7
  int x2 = sub_sat(INT_MIN, 1);         // INT_MIN
  unsigned char x3 = add_sat(255, 4);   // 3ã€å¼•æ•°ã¯intå‹
  unsigned char x4 = add_sat<unsigned char>(255, 4);   // 255
  unsigned char x5 = add_sat(252, x3);  // errorã€2ã¤ã®å¼•æ•°ã®å‹ã¯åŒä¸€ã§ãªã‘ã‚Œã°ãªã‚‰ãªã„
  unsigned char x6 = add_sat<unsigned char>(251, x1);  // 255ã€2ã¤ç›®ã®å¼•æ•°x1ã¯int -> unsigned charã¸å¤‰æ›ã•ã‚Œã¦ã„ã‚‹
}
```

è¿½åŠ ã•ã‚Œã‚‹ã®ã¯å››å‰‡æ¼”ç®—ã«å¯¾å¿œã™ã‚‹4ã¤ã®é–¢æ•°ã¨ã€é£½å’Œçš„ãªã‚­ãƒ£ã‚¹ãƒˆã‚’è¡Œã†`std::saturate_cast()`ã®5ã¤ã§ã™ã€‚

```cpp
namespace std {
  template<class T>
  constexpr T add_sat(T x, T y) noexcept;

  template<class T>
  constexpr T sub_sat(T x, T y) noexcept;

  template<class T>
  constexpr T mul_sat(T x, T y) noexcept;

  template<class T>
  constexpr T div_sat(T x, T y) noexcept;

  template<class T, class U>
  constexpr T saturate_cast(U x) noexcept;
}
```

`std::saturate_cast()`ã¯æ•´æ•°å‹`T`ã‹ã‚‰æ•´æ•°å‹`U`ã¸ã®ã‚­ãƒ£ã‚¹ãƒˆã‚’è¡Œã†ã‚‚ã®ã§ã™ãŒã€`U`ã®å€¤`x`ãŒ`T`ã§è¡¨ç¾ã§ããªã„ï¼ˆã‚ªãƒ¼ãƒãƒ¼ãƒ•ãƒ­ãƒ¼ã™ã‚‹ï¼‰å ´åˆã«æœ€å¤§å€¤ã‹æœ€å°å€¤ã«ä¸¸ã‚ã¦å€¤ã‚’è¿”ã™å½¢ã§ã‚­ãƒ£ã‚¹ãƒˆã—ã¾ã™ã€‚

ã¾ãŸã€ã“ã‚Œã‚‰ã®é–¢æ•°ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¯ä»»æ„ã®æ•´æ•°å‹ï¼ˆç¬¦å·æœ‰ç„¡ã«ã‹ã‹ã‚ã‚‰ãšï¼‰ã«ãŠã„ã¦ä½¿ç”¨å¯èƒ½ã§ã™ã€‚

- [é£½å’Œæ¼”ç®— - é€šä¿¡ç”¨èªã®åŸºç¤çŸ¥è­˜](https://www.wdic.org/w/SCI/é£½å’Œæ¼”ç®—)
- [P0543 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/1218)

### [P0792R9 `function_ref`: a non-owning reference to a Callable](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p0792r9.html)

*Callable*ã‚’æ‰€æœ‰ã—ãªã„`std::function`ã§ã‚ã‚‹`std::function_ref`ã®ææ¡ˆã€‚

ä»¥å‰ã®è¨˜äº‹ã‚’å‚ç…§

- [P0792R6 function_ref: a non-owning reference to a Callable - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2022å¹´01æœˆï¼‰](https://onihusube.hatenablog.com/entry/2022/02/19/181101#P0792R6-function_ref-a-non-owning-reference-to-a-Callable)
- [P0792R8 function_ref: a non-owning reference to a Callable - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2022å¹´02æœˆï¼‰](https://onihusube.hatenablog.com/entry/2022/03/19/224729#P0792R8-function_ref-a-non-owning-reference-to-a-Callable)

ã“ã®ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã§ã®å¤‰æ›´ã¯ã€ãƒ—ãƒ©ã‚¤ãƒãƒªãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’å¯å¤‰é•·ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§å®£è¨€ã™ã‚‹ã‚ˆã†ã«ã—ãŸã“ã¨ï¼ˆå°†æ¥ã®æ‹¡å¼µã®ãŸã‚ï¼‰ã¨ã€`function_ref`ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’`constinit`ã§åˆæœŸåŒ–ã§ãã‚‹ã‚ˆã†ã«ã—ãŸï¼ˆ*Callable*ã‚’å‚ç…§ã§å—ã‘å–ã‚‹ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‚’`constexpr`åŒ–ã—ãŸï¼‰ã“ã¨ãªã©ã§ã™ã€‚

ã“ã®ææ¡ˆã¯ç¾åœ¨ã€LEWGã‹ã‚‰LWGã¸é€²ã‚€ãŸã‚ã®æŠ•ç¥¨å¾…ã¡ã‚’ã—ã¦ã„ã¾ã™ã€‚

- [P0792 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/256)

### [P0901R9 Size feedback in `operator new`](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p0901r9.html)

`::operator new`ãŒå®Ÿéš›ã«ç¢ºä¿ã—ãŸãƒ¡ãƒ¢ãƒªã®ã‚µã‚¤ã‚ºã‚’çŸ¥ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚ªãƒ¼ãƒãƒ¼ãƒ­ãƒ¼ãƒ‰ã‚’è¿½åŠ ã™ã‚‹ææ¡ˆã€‚

ä»¥å‰ã®è¨˜äº‹ã‚’å‚ç…§

- [P0901R7 Size feedback in operator new interface - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2020å¹´11æœˆï¼‰](https://onihusube.hatenablog.com/entry/2020/12/06/015108#P0901R7-Size-feedback-in-operator-new)
- [P0901R8 Size feedback in operator new interface - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´01æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/01/17/005823#P0901R8-Size-feedback-in-operator-new)

ã“ã®ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã§ã®å¤‰æ›´ã¯ã€CWGã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ãªã©ã‚’å—ã‘ã¦ææ¡ˆã™ã‚‹æ–‡è¨€ã‚’å¤‰æ›´ã—ãŸã“ã¨ã§ã™ã€‚ãŸã ã—ã€ãã‚Œã«ã‚ˆã£ã¦EWGã®ç¢ºèªãŒå¿…è¦ãªå•é¡ŒãŒç™ºç”Ÿã—ã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚

- [P0901 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/18)

### [P1021R6 Filling holes in Class Template Argument Deduction](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p1021r6.html)

C++17ã§å°å…¥ã•ã‚ŒãŸã‚¯ãƒ©ã‚¹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®å®Ÿå¼•æ•°æ¨å®šï¼ˆCTADï¼‰ã«ã¤ã„ã¦ã€æ¬ ã‘ã¦ã„ã‚‹éƒ¨åˆ†ã‚’åŸ‹ã‚ã‚‹ææ¡ˆã€‚

ã“ã“ã§ææ¡ˆã•ã‚Œã¦ã„ã‚‹ã®ã¯ã€é›†æˆä½“åˆæœŸåŒ–æ™‚ã®CTADã€ã‚¨ã‚¤ãƒªã‚¢ã‚¹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§ã®CTADã€ç¶™æ‰¿ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‹ã‚‰ã®CTADã®3ã¤ã§ã€æœ€åˆã®äºŒã¤ã¯C++20ã§å¯èƒ½ã«ãªã£ã¦ã„ã¾ã™ã€‚

ã“ã®ææ¡ˆã®ã“ã®ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã§ã®å¤‰æ›´ã¯ã€æœ€å¾Œã®ç¶™æ‰¿ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‹ã‚‰ã®CTADã®ææ¡ˆã‚’è¡Œã†æ–‡æ›¸ã¸ã®ãƒªãƒ³ã‚¯ã‚’è¿½è¨˜ã—ãŸã“ã¨ã§ã™ï¼ˆP2582R0ã€ä¸‹ã®æ–¹ã§è§£èª¬ï¼‰ã€‚

### [P1255R7 A view of 0 or 1 elements: `views::maybe`](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p1255r7.html)

`std::optional`ã‚„ãƒã‚¤ãƒ³ã‚¿ç­‰ã®maybeãƒ¢ãƒŠãƒ‰ãªå¯¾è±¡ã‚’ã€ãã®çŠ¶æ…‹ã«ã‚ˆã£ã¦è¦ç´ æ•°0ã‹1ã®ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ã«å¤‰æ›ã™ã‚‹Rangeã‚¢ãƒ€ãƒ—ã‚¿`views::maybe`ã®ææ¡ˆã€‚

ä»¥å‰ã®è¨˜äº‹ã‚’å‚ç…§

- [P1255R6 : A view of 0 or 1 elements: `views::maybe` - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2020å¹´04æœˆï¼‰](https://onihusube.hatenablog.com/entry/2020/05/01/194425#P1255R6--A-view-of-0-or-1-elements-viewsmaybe)

ã“ã®ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã§ã®å¤‰æ›´ã¯

- ãƒªã‚¹ãƒˆå†…åŒ…è¡¨è¨˜ã‚µãƒãƒ¼ãƒˆã®ãŸã‚ã«å¯¾è±¡ã‚’å…¨ã¦ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå‹ã«æ‹¡å¼µ
- `borrowed_range`ã«é–¢ã™ã‚‹è­°è«–ã®è¿½è¨˜
    - ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å€¤ã§ä¿æŒã—ã¦ã„ãªã„å ´åˆã¯`views::meybe`ã¯`borrowed_range`ã«ãªã‚‹
      - ãƒã‚¤ãƒ³ã‚¿ã‚ã‚‹ã„ã¯`reference_warapper`ã§ä¿æŒã—ã¦ã„ã‚‹å ´åˆ
- ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã§å‚ç…§ãŒä½¿ç”¨ã•ã‚Œã‚‹ä¾‹ã‚’è¿½åŠ 
- ãƒ—ãƒ­ã‚¯ã‚·ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã®ã‚µãƒãƒ¼ãƒˆã®è¿½åŠ 
- `const`ä¼æ’­ã«é–¢ã™ã‚‹è­°è«–ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ï¼ˆæœªæ±ºå®šï¼‰

ãªã©ã§ã™ã€‚

- [P1255 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/60)

### [P1642R9 Freestanding Library: Easy [utilities], [ranges], and [iterators]](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p1642r9.html)

[[utility]](https://timsong-cpp.github.io/cppwp/n4861/#utilities)ã€`<ranges>`ã€`<iterator>`ã‹ã‚‰ä¸€éƒ¨ã®ã‚‚ã®ã‚’ãƒ•ãƒªãƒ¼ã‚¹ã‚¿ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«è¿½åŠ ã™ã‚‹ææ¡ˆã€‚

å‰å›ã®è¨˜äº‹ã‚’å‚ç…§

- [P1642R3 Freestanding Library: Easy [utilities], [ranges], and [iterators] - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2020å¹´6æœˆï¼‰](https://onihusube.hatenablog.com/entry/2020/07/05/003248#P1642R3--Freestanding-Library-Easy-utilities-ranges-and-iterators)
- [P1642R4 Freestanding Library: Easy [utilities], [ranges], and [iterators] - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2020å¹´7æœˆï¼‰](https://onihusube.hatenablog.com/entry/2020/08/12/014639#P1642R4--Freestanding-Library-Easy-utilities-ranges-and-iterators)
- [P1642R5 Freestanding Library: Easy [utilities], [ranges], and [iterators] - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2020å¹´12æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/01/17/005823#P1642R5-Freestanding-Library-Easy-utilities-ranges-and-iterators)
- [P1642R6 Freestanding Library: Easy [utilities], [ranges], and [iterators] - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´06æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/07/12/182757#P1642R6-Freestanding-Library-Easy-utilities-ranges-and-iterators)
- [P1642R7 Freestanding Library: Easy [utilities], [ranges], and [iterators] - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´10æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/11/13/193322#P1642R7-Freestanding-Library-Easy-utilities-ranges-and-iterators)
- [P1642R8 Freestanding Library: Easy [utilities], [ranges], and [iterators] - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2022å¹´04æœˆï¼‰](https://onihusube.hatenablog.com/entry/2022/05/08/195618#P1642R8-Freestanding-Library-Easy-utilities-ranges-and-iterators)

ã“ã®ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã§ã®å¤‰æ›´ã¯

- ææ¡ˆã™ã‚‹æ–‡è¨€ã®æ”¹å–„
- *hidden friend*ã‚’ãƒ•ãƒªãƒ¼ã‚¹ã‚¿ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã¨ã—ã¦æ‰±ã†ã‚ˆã†ã«
- `std::bind`ã®ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ã‚’ãƒ•ãƒªãƒ¼ã‚¹ã‚¿ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã«å«ã‚€ã“ã¨ã‚’æ˜ç¢ºåŒ–
- `allocation_result`ã¨`allocate_at_least`ã‚’è¿½åŠ 
- `wistream_view`ã¨`views::istream`ã‚’å¯¾è±¡ã‹ã‚‰å‰Šé™¤
- `<memory>`ã‚µãƒãƒ¼ãƒˆã®ãŸã‚`<algorithm>`ã‹ã‚‰`in_out_result`ã‚’è¿½åŠ 

ãªã©ã§ã™ã€‚

- [P1642 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/429)

### [P1673R8 A free function linear algebra interface based on the BLAS](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p1673r8.html)

æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ã€BLASã‚’ãƒ™ãƒ¼ã‚¹ã¨ã—ãŸå¯†è¡Œåˆ—ã®ãŸã‚ã®ç·šå½¢ä»£æ•°ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’è¿½åŠ ã™ã‚‹ææ¡ˆã€‚

ä»¥å‰ã®è¨˜äº‹ã‚’å‚ç…§

- [P1673R3 A free function linear algebra interface based on the BLAS - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´04æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/05/14/214016#P1673R3-A-free-function-linear-algebra-interface-based-on-the-BLAS)
- [P1673R4 A free function linear algebra interface based on the BLAS - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´08æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/09/03/230045#P1673R4-A-free-function-linear-algebra-interface-based-on-the-BLAS)
- [P1673R5 A free function linear algebra interface based on the BLAS - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´10æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/11/13/193322#P1673R5-A-free-function-linear-algebra-interface-based-on-the-BLAS)
- [P1673R6 A free function linear algebra interface based on the BLAS - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´12æœˆï¼‰](https://onihusube.hatenablog.com/entry/2022/01/10/235544#P1673R6-A-free-function-linear-algebra-interface-based-on-the-BLAS)
- [P1673R7 A free function linear algebra interface based on the BLAS - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2022å¹´04æœˆï¼‰](https://onihusube.hatenablog.com/entry/2022/05/08/195618#P1673R7-A-free-function-linear-algebra-interface-based-on-the-BLAS)

ã“ã®ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã§ã®å¤‰æ›´ã¯

- ã‚³ãƒ¬ã‚¹ã‚­ãƒ¼TSQRã®ä¾‹ã§`Triangle`ã¨`R[0,0]`ã‚’ä¿®æ­£
- BLASãŒå…¥åŠ›è¡Œåˆ—ã«`UPLO`ã‚’é©ç”¨ã™ã‚‹ã®ã«å¯¾ã—ã¦ã€è¿”é‚„ã•ã‚Œã‚‹å¯èƒ½æ€§ã®ã‚ã‚‹å…¥åŠ›è¡Œåˆ—ã«å¯¾ã—ã¦`Triangle`ã‚’é©ç”¨ã™ã‚‹ç†ç”±ã®èª¬æ˜ã®è¿½åŠ 
- å¿…è¦ãªã„å ´åˆã«`layout_transpose`ã‚’ä½¿ç”¨ã—ãªã„ã‚ˆã†ã«ã€æ—¢çŸ¥ã®ã™ã¹ã¦ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã«å¯¾ã—ã¦`transposed`ã‚’æœ€é©åŒ–
    - è»¢ç½®å¾Œãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã®ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰è¨ˆç®—ã‚’ä¿®æ­£
- `symmetric_matrix_rank_k_update`ã¨`hermitian_matrix_rank_k_update`åˆ¶ç´„ã¨*mandates*å†…ã®è¡Œåˆ—ã®ã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ãƒˆã‚’ä¿®æ­£
- `transposed`ã®æˆ»ã‚Šå€¤ã®`const`æ€§ã®æ›–æ˜§ã•ã®è§£æ¶ˆ
- `scaled`ã®æˆ»ã‚Šå€¤ã®`const`æ€§ã®æ›–æ˜§ã•ã‚’è§£æ¶ˆã—ã€ãã®è¦ç´ å‹ã‚’å…ƒã®`mdspan`ã®è¦ç´ å‹ã«æˆ»ã™ã®ã§ã¯ãªãã€ç©ã®å‹ã«ã™ã‚‹
- `accessor_conjugate`ã¨`accessor_scaled`ã‹ã‚‰`decay()`ãƒ¡ãƒ³ãƒé–¢æ•°ã‚’å‰Šé™¤ï¼ˆ`mdspan`ã®è¦ä»¶ã§ã¯ãªããªã£ãŸãŸã‚ï¼‰
- `accessor_conjugate`ã¨`conjugated`ãŒãƒ¦ãƒ¼ã‚¶ãƒ¼å®šç¾©è¤‡ç´ æ•°å‹ã«å¯¾ã—ã¦æ­£ã—ãæ©Ÿèƒ½ã™ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã€ãã®æˆ»ã‚Šå€¤å‹ã®`const`æ€§ã®æ›–æ˜§ã•ã‚’è§£æ¶ˆã—ãŸ
- typoã®ä¿®æ­£

ãªã©ã§ã™ã€‚

- [P1673 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/557)

### [P1674R2 Evolving a Standard C++ Linear Algebra Library from the BLAS](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p1674r2.html)

C++æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ææ¡ˆã™ã‚‹ç·šå½¢ä»£æ•°ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®è¨­è¨ˆã«é–¢ã—ã¦è¨˜è¿°ã—ãŸæ–‡æ›¸ã€‚

- [P1674R1 Evolving a Standard C++ Linear Algebra Library from the BLAS - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2022å¹´04æœˆï¼‰](https://onihusube.hatenablog.com/entry/2022/05/08/195618#P1674R1-Evolving-a-Standard-C-Linear-Algebra-Library-from-the-BLAS)

ã“ã®ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã§ã®å¤‰æ›´ã¯ã€P1673ã®æœ€æ–°ã®ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã®å†…å®¹ã‚’åæ˜ ã—ãŸã“ã¨ã¨ã€å‚ç…§æ–‡çŒ®ãƒªã‚¹ãƒˆã®è¿½åŠ ãƒ»æ›´æ–°ãªã©ã§ã™ã€‚

### [P1774R7 Portable assumptions](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p1774r7.pdf)

ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã«ã‚³ãƒ¼ãƒ‰ã®å†…å®¹ã«ã¤ã„ã¦ã®ä»®å®šã‚’ä¼ãˆã¦æœ€é©åŒ–ã‚’ä¿ƒé€²ã™ã‚‹ãŸã‚ã®`[[assume(expr)]]`ã®ææ¡ˆã€‚

ä»¥å‰ã®è¨˜äº‹ã‚’å‚ç…§

- [P1774R4 Portable assumptions - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´10æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/12/11/220126#P1774R4-Portable-assumptions)
- [P1774R5 Portable assumptions - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´12æœˆï¼‰](https://onihusube.hatenablog.com/entry/2022/01/10/235544#P1774R4-Portable-assumptions)
- [P1774R6 Portable assumptions - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2022å¹´02æœˆï¼‰](https://onihusube.hatenablog.com/entry/2022/03/19/224729#P1774R6-Portable-assumptions)

ã“ã®ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã§ã®å¤‰æ›´ã¯

- [P2507](https://wg21.link/p2507r1)ã®å†…å®¹ã‚’åæ˜ ã—ãŸã“ã¨
- CWGã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’å—ã‘ã¦ææ¡ˆã™ã‚‹æ–‡è¨€ã‚’æ”¹å–„ã—ãŸã“ã¨
- ã„ãã¤ã‹ã®ãƒ‡ã‚¤ã‚¹ã‚«ãƒƒã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã—ãŸã“ã¨ã§ã™

ã“ã®ææ¡ˆã§è¿½è¨˜ã•ã‚ŒãŸãƒ‡ã‚£ã‚¹ã‚«ãƒƒã‚·ãƒ§ãƒ³ã¯ã€ã»ã¼ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ãŒæ¨™æº–å±æ€§ã‚’ç„¡è¦–ã™ã‚‹å ´åˆã®ç„¡è¦–ã®ä»•æ–¹ã«é–¢ã—ã¦ã®ã‚‚ã®ã§ã™ã€‚ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ãŒæ¨™æº–å±æ€§ã‚’ç„¡è¦–ã™ã‚‹å ´åˆã€ç„¡è¦–ã™ã‚‹ã¨ã„ã†ã®ã¯å±æ€§ã®åŠ¹æœãªã®ã‹ã€å±æ€§ã®ãƒ‘ãƒ¼ã‚¹ãã®ã‚‚ã®ãªã®ã‹ã¯ç‰¹ã«è¦å®šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ã“ã‚Œã¾ã§ã¯å¼ã‚’å–ã‚‹ã‚ˆã†ãªå±æ€§ãŒãªã‹ã£ãŸãŸã‚ã‚ã¾ã‚Šå•é¡Œã«ãªã‚Šã¾ã›ã‚“ã§ã—ãŸãŒã€`[[assume(expr)]]`ã¯ä»»æ„ã®å¼ã‚’å–ã‚‹ãŸã‚ãã‚ŒãŒå•é¡Œã«ãªã‚Šã¾ã™ã€‚

ã¤ã¾ã‚Šã€å±æ€§ã®ç„¡è¦–ã®ä»•æ–¹ãŒæœªè¦å®šã®ã¾ã¾ã ã¨ã€`[[assume(expr)]]`ã¨æ›¸ã„ã¦ã‚ã‚‹æ™‚ã«ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãŒã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–ã•ã‚Œã‚‹ã‹ã©ã†ã‹ã€ãƒ©ãƒ ãƒ€ãŒã‚­ãƒ£ãƒ—ãƒãƒ£ã™ã‚‹ã‹ã©ã†ã‹ãªã©ãŒå¤‰ã‚ã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚ãã‚Œã¯ã¨ã‚‚ã™ã‚Œã°ABIç ´å£Šã‚’æ‹›ãã¾ã™ã€‚

ã“ã®ææ¡ˆã§ã¯`[[assume(expr)]]`ã‚’ç„¡è¦–ã™ã‚‹ã«ã—ã¦ã‚‚ç„¡è¦–ã™ã‚‹ã®ã¯ãã®åŠ¹æœã ã‘ã§ã‚ã‚Šã€å¼ã®ãƒ‘ãƒ¼ã‚¹ã‚„ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–ã‚’è¡Œã‚ã‚Œã‚‹ã¨ã„ã†ã“ã¨ã§ã€CWGã§ã¯ã‚³ã‚¢è¨€èªã‚‚ãã®ã‚ˆã†ã«å¤‰æ›´ã™ã‚‹æ–¹å‘ã§è­°è«–ãŒé€²ã‚“ã§ã„ã‚‹ã‚ˆã†ã§ã™ã€‚

ã“ã®ææ¡ˆã¯ã€ã™ã§ã«CWGã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’çµ‚ãˆã¦ãŠã‚Šã€æ¬¡ã®å…¨ä½“ä¼šè­°ã§æŠ•ç¥¨ã«ã‹ã‘ã‚‰ã‚Œã‚‹äº‹ãŒæ±ºã¾ã£ã¦ã„ã¾ã™ã€‚

- [P2507R0 Only [[assume]] conditional-expressions - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´12æœˆï¼‰](https://onihusube.hatenablog.com/entry/2022/01/10/235544#P2507R0-Only-assume-conditional-expressions)
- [CWG Issue 2538. Can standard attributes be syntactically ignored?](https://cplusplus.github.io/CWG/issues/2538.html)
- [P1774 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/529)

### [P1967R6 `#embed` - a simple, scannable preprocessor-based resource acquisition method](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p1967r6.html)

ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ï¼ˆãƒ—ãƒªãƒ—ãƒ­ã‚»ã‚¹æ™‚ï¼‰ã«ãƒã‚¤ãƒŠãƒªãƒ‡ãƒ¼ã‚¿ã‚’ã‚¤ãƒ³ã‚¯ãƒ«ãƒ¼ãƒ‰ã™ã‚‹ãŸã‚ã®ãƒ—ãƒªãƒ—ãƒ­ã‚»ãƒƒã‚·ãƒ³ã‚°ãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–`#embed`ã®ææ¡ˆã€‚

ä»¥å‰ã®è¨˜äº‹ã‚’å‚ç…§

- [P1967R3 `#embed` - a simple, scannable preprocessor-based resource acquisition method - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´04æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/05/14/214016#P1967R3-embed---a-simple-scannable-preprocessor-based-resource-acquisition-method)
- [P1967R4 `#embed` - a simple, scannable preprocessor-based resource acquisition method - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´06æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/07/12/182757#P1967R4-embed---a-simple-scannable-preprocessor-based-resource-acquisition-method)

ã“ã®ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã§ã®å¤‰æ›´ã¯
- ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã«åŸºã¥ãæ§‹æ–‡ã®å¤‰æ›´
- WG21å‘ã‘æ–‡æ›¸ã¨WG14å‘ã‘æ–‡æ›¸ã®åˆ†é›¢
- `__has_embed`ã®æ§‹æ–‡ã®å¤‰æ›´
    - ãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã—ã¦ã„ã¦ãã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒç©ºã§ã‚ã‚Šã€æŒ‡å®šã•ã‚ŒãŸ`embed`å¼•æ•°ãŒæ­£ã—ã„å ´åˆã€`2`ã‚’è¿”ã™ã‚ˆã†ã«ã•ã‚ŒãŸ
    - ä»¥å‰ã¯æœªè¦å®šã ã£ãŸ
- typoä¿®æ­£ã‚„æ–‡è¨€ã®ä¿®æ­£
- `limit`å¼•æ•°ã§ã¯ã€å°‘ãªãã¨ã‚‚1å›ã¯ãƒã‚¯ãƒ­ã‚’å±•é–‹ã™ã‚‹ã‚ˆã†ã«æ–‡è¨€ã‚’èª¿æ•´
  
ãªã©ã§ã™ã€‚

- [P1967 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/700)

### [P2286R8 Formatting Ranges](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2286r8.html)

ä»»æ„ã®ç¯„å›²ã‚’æ‰‹è»½ã«å‡ºåŠ›ã§ãã‚‹æ©Ÿèƒ½ã‚’è¿½åŠ ã™ã‚‹ææ¡ˆã€‚

ä»¥å‰ã®è¨˜äº‹ã‚’å‚ç…§

- [P2286R0 Formatting Ranges - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´1æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/02/11/153333#P2286R0-Formatting-Ranges)
- [P2286R1 Formatting Ranges - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´2æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/03/12/225547#P2286R1-Formatting-Ranges)
- [P2286R2 Formatting Ranges - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´8æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/09/03/230045#P2286R2-Formatting-Ranges)
- [P2286R3 Formatting Ranges - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´11æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/12/11/220126#P2286R3-Formatting-Ranges)
- [P2286R4 Formatting Ranges - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´11æœˆï¼‰](https://onihusube.hatenablog.com/entry/2022/01/10/235544#P2286R4-Formatting-Ranges)
- [P2286R5 Formatting Ranges - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2022å¹´01æœˆï¼‰](https://onihusube.hatenablog.com/entry/2022/01/10/235544#P2286R4-Formatting-Ranges)

ã“ã®ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã§ã®å¤‰æ›´ã¯ã€ææ¡ˆã™ã‚‹æ–‡è¨€ã®èª¿æ•´ã®ã¿ï¼ˆæ–‡å­—ã®ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã¾ã‚ã‚Šï¼‰ã§ã™ã€‚

ã“ã®ææ¡ˆã¯ã™ã§ã«LWGã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’çµ‚ãˆã€æ¬¡ã®å…¨ä½“ä¼šè­°ã§æŠ•ç¥¨ã«ã‹ã‘ã‚‰ã‚Œã‚‹äº‹ãŒæ±ºã¾ã£ã¦ã„ã¾ã™ã€‚

- [P2285 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/977)

### [P2429R0 Concepts Error Messages for Humans](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2429r0.pdf)

C++ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã®å‡ºåŠ›ã™ã‚‹ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®æ”¹å–„ã«ã¤ã„ã¦ã®å ±å‘Šæ›¸ã€‚

C++ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒæ™‚ã«ä½•ã‚’è¨€ã£ã¦ã„ã‚‹ã®ã‹ã‚ã‹ã‚‰ãªããªã‚ŠãŒã¡ãªã®ã¯è‰¯ãçŸ¥ã‚‰ã‚Œã¦ã„ã‚‹ã“ã¨ã§ã™ãŒã€C++20ã§ã‚³ãƒ³ã‚»ãƒ—ãƒˆãŒå°å…¥ã•ã‚Œã¦ãã‚ŒãŒæ”¹å–„ã•ã‚Œã‚‹ã‹ã¨æ€ã„ãã‚„ã‚ˆã‚Šæ„å‘³ãŒã‚ã‹ã‚‰ãªããªã£ã¦ã„ã‚‹ãªã©ã€äº‹æ…‹ã¯æ·±åˆ»ã•ã‚’å¢—ã—ã¦ã„ã¾ã™ã€‚

ã“ã®æ–‡æ›¸ã¯ãã®ã‚ˆã†ãªç¾çŠ¶ã‚’å ±å‘Šã™ã‚‹ã¨ã¨ã‚‚ã«ã€ç‰¹ã«ã‚³ãƒ³ã‚»ãƒ—ãƒˆé–¢é€£ã®ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«å¯¾ã—ã¦ã®æ”¹å–„å¯èƒ½æ€§ã‚’ç¤ºã—ã€C++ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®æ”¹å–„ã®è­°è«–ã®å‘¼ã³æ°´ã¨ãªã‚‹ã“ã¨ç›®çš„ã¨ã—ãŸã‚‚ã®ã§ã™ã€‚

- [RFC: Improving Clangâ€™s Diagnostics - LLVM Discussion Forums](https://discourse.llvm.org/t/rfc-improving-clang-s-diagnostics/62584)
- [P2429 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/1239)

### [P2445R1 `forward_like`](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2445r1.pdf)

ã‚¯ãƒ©ã‚¹å‹ã®ãƒ¡ãƒ³ãƒå¤‰æ•°ã«ã¤ã„ã¦ã€`const`æ€§ã‚‚å«ã‚ãŸæ­£ã—ã„å®Œå…¨è»¢é€ã‚’è¡Œã†`std::forward_like`ã®ææ¡ˆã€‚

- [P2445R0 forward_like - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´10æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/11/13/193322#P2445R0-forward_like)

ã“ã®ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã§ã®å¤‰æ›´ã¯ã€ææ¡ˆã™ã‚‹æ–‡è¨€ã®èª¿æ•´ã®ã¿ã§ã™ã€‚

ã“ã®ææ¡ˆã¯ã™ã§ã«LWGã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’çµ‚ãˆã¦ãŠã‚Šã€æ¬¡ã®å…¨ä½“ä¼šè­°ã§æŠ•ç¥¨ã«ã‹ã‘ã‚‰ã‚Œã‚‹ã“ã¨ãŒæ±ºã¾ã£ã¦ã„ã¾ã™ã€‚

- [P2445 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/1117)

### [P2460R1 Relax requirements on `wchar_t` to match existing practices](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2460r1.pdf)

`wchar_t`ã®ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã«ã¤ã„ã¦ã®å®Ÿæ…‹ã«ãªã˜ã¾ãªã„åˆ¶ç´„ã‚’å–ã‚Šé™¤ãææ¡ˆã€‚

- [P2460R0 Relax requirements on `wchar_t` to match existing practices - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´10æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/11/13/193322#P2460R0-Relax-requirements-on-wchar_t-to-match-existing-practices)

ã“ã®ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã§ã®å¤‰æ›´ã¯ã€ææ¡ˆã™ã‚‹æ–‡è¨€ã®èª¿æ•´ã®ã¿ã§ã™ã€‚

ã“ã®ææ¡ˆã¯ã€ä»¥å‰ã®å…¨ã¦ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«å¯¾ã™ã‚‹Defect Reportã¨ã™ã‚‹ã“ã¨ã§åˆæ„ã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚

- [P2460 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/1122)

### [P2472R3 make `function_ref` more functional](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2472r3.html)

`function_ref`ã®ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£ã¨å®‰å…¨æ€§ã‚’å‘ä¸Šã•ã›ã‚‹ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‚’è¿½åŠ ã™ã‚‹ææ¡ˆã€‚

ä»¥å‰ã®è¨˜äº‹ã‚’å‚ç…§

- [P2467R0 Support exclusive mode for fstreams - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´10æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/12/11/220126#P2467R0-Support-exclusive-mode-for-fstreams)
- [P2467R1 Support exclusive mode for fstreams - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2022å¹´02æœˆï¼‰](https://onihusube.hatenablog.com/entry/2022/03/19/224729#P2472R1-make-function_ref-more-functional)
- [P2467R2 Support exclusive mode for fstreams - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2022å¹´04æœˆï¼‰](https://onihusube.hatenablog.com/entry/2022/05/08/195618#P2472R2-make-function_ref-more-functional)


ã“ã®ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã§ã®å¤‰æ›´ã¯ã€è¿½åŠ ã™ã‚‹ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã«`constexpr`ã‚’ä»˜åŠ ã—ãŸã“ã¨ã§ã™ã€‚

- [P2472 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/1130)

### [P2510R3 Formatting pointers](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2510r3.pdf)

`std::format`ã«ã¤ã„ã¦ã€ãƒã‚¤ãƒ³ã‚¿å‹ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’å……å®Ÿã•ã›ã‚‹ææ¡ˆã€‚

ä»¥å‰ã®è¨˜äº‹ã‚’å‚ç…§

- [P2510R0 Formatting pointers - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´12æœˆï¼‰](https://onihusube.hatenablog.com/entry/2022/01/10/235544#P2510R0-Formatting-pointers)
- [P2510R1 Formatting pointers - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2022å¹´03æœˆï¼‰](https://onihusube.hatenablog.com/entry/2022/04/02/175835#P2510R1-Formatting-pointers)
- [P2510R2 Formatting pointers - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2022å¹´04æœˆï¼‰](https://onihusube.hatenablog.com/entry/2022/05/08/195618#P2510R2-Formatting-pointers)

ã“ã®ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã§ã®å¤‰æ›´ã¯ã€ãƒã‚¤ãƒ³ã‚¿å‹ã«å¯¾ã™ã‚‹`#`ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆæŒ‡å®šï¼ˆ16é€²æ•°å€¤ã«å¯¾ã™ã‚‹`0x`ãƒ—ãƒªãƒ•ã‚£ãƒƒã‚¯ã‚¹ã®ã‚ˆã†ã«ã€æ•°å€¤å½¢å¼ã‚’æ˜ç¢ºåŒ–ã™ã‚‹æŒ‡å®šï¼‰ã‚’ææ¡ˆã‹ã‚‰å‰Šé™¤ã—ãŸäº‹ãªã©ã§ã™ã€‚

- [P2510 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/1165)

### [P2513R2 `char8_t` Compatibility and Portability Fix](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2513r2.html)

`char8_t`ã®éäº’æ›æ€§ã‚’ç·©å’Œã™ã‚‹ææ¡ˆã€‚

ä»¥å‰ã®è¨˜äº‹ã‚’å‚ç…§

- [P2513R0 `char8_t` Compatibility and Portability Fixes - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´12æœˆï¼‰](https://onihusube.hatenablog.com/entry/2022/02/19/181101#P2513R0-char8_t-Compatibility-and-Portability-Fixes)
- [P2513R1 `char8_t` Compatibility and Portability Fixes - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2022å¹´02æœˆï¼‰](https://onihusube.hatenablog.com/entry/2022/02/19/181101#P2513R0-char8_t-Compatibility-and-Portability-Fixes)

ã“ã®ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã§ã®å¤‰æ›´ã¯ã€`u8""`æ–‡å­—åˆ—ãƒªãƒ†ãƒ©ãƒ«ã‹ã‚‰å¤‰æ›å¯èƒ½ãªé…åˆ—ã‹ã‚‰`signed char`ã‚’é™¤å¤–ã—ãŸã“ã¨ãªã©ã§ã™ã€‚

æ–°ãŸã«æ²è¼‰ã•ã‚ŒãŸã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã‚ˆã‚Š

```cpp
                                    // pre C++20 | C++20 | This proposal  
const char* ptr0 = u8"";            //    âœ…        ğŸ’”         ğŸ’”
const unsigned char* ptr1 = u8"";   //    âŒ        âŒ         âŒ
const char arr0[] = u8"";           //    âœ…        ğŸ’”         âœ…
const unsigned char arr1[] = u8"";  //    âœ…        ğŸ’”         âœ…
```

âœ… : okã€ğŸ’” : ç ´å£Šçš„å¤‰æ›´ã€âŒ : ng


```cpp
// C++20ä»¥å‰ã¯ok, C++20ã§ng
constexpr const char* resource_id () {
  return u8"o(*ï¿£â–½ï¿£*)o";
}

// ã“ã®ææ¡ˆå¾Œã€ã“ã†æ›¸ã‘ã°ok
constexpr const char* resource_id () {
  const char res_id[] = u8"o(*ï¿£â–½ï¿£*)o";
  return res_id;
}
```

- [P2513 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/1171)

### [P2542R2 `views::concat`](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2542r2.html)

åŒã˜è¦ç´ å‹ã‚’æŒã¤ç•°ãªã‚‹å‹ã®ç¯„å›²ã‚’é€£çµã™ã‚‹Rangeãƒ•ã‚¡ã‚¯ãƒˆãƒªã€`views::concat`ã®ææ¡ˆã€‚

- [P2542R0 `views::concat` - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2022å¹´02æœˆï¼‰](https://onihusube.hatenablog.com/entry/2022/03/19/224729#P2542R0-viewsconcat)
- [P2542R1 `views::concat` - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2022å¹´04æœˆï¼‰](https://onihusube.hatenablog.com/entry/2022/05/08/195618#P2542R1-viewsconcat)

ã“ã®ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã§ã®å¤‰æ›´ã¯ã€`concat-indirectly-readable`ã‚³ãƒ³ã‚»ãƒ—ãƒˆã«è¿½åŠ ã®æ„å‘³è«–åˆ¶ç´„ï¼ˆç­‰ã—ã•ã‚’ä¿æŒã—ãªã„`*`ã‚„`iter_move`ã®ç¦æ­¢ï¼‰ã‚’è¿½åŠ ã—ãŸäº‹ãªã©ã§ã™ã€‚

- [P2542 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/1204)

### [P2551R1 Clarify intent of P1841 numeric traits](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2551r1.pdf)

[P1841R2](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p1841r2.pdf)ã§ææ¡ˆã•ã‚Œã¦ã„ã‚‹æ•°å€¤ç‰¹æ€§ï¼ˆ*numeric traits*ï¼‰å–å¾—ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã«ã¤ã„ã¦ã€å®Ÿè£…çµŒé¨“ã‹ã‚‰ã®ç–‘å•ç‚¹ã‚’å ±å‘Šã™ã‚‹æ–‡æ›¸ã€‚

- [P2551R0 Clarify intent of P1841 numeric traits - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2022å¹´02æœˆï¼‰](https://onihusube.hatenablog.com/entry/2022/03/19/224729#P2551R0-Clarify-intent-of-P1841-numeric-traits)


ã“ã®ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã§ã®å¤‰æ›´ã¯ã€å›ç­”ãŒå¾—ã‚‰ã‚Œã¦è§£æ±ºã•ã‚ŒãŸç–‘å•ã‚’å‰Šé™¤ã—ãŸäº‹ã€`reciprocal_overflow_threshold`ã«ã¤ã„ã¦ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è¿½è¨˜ã—ãŸäº‹ã§ã™ã€‚

- [P2551 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/1211)

### [P2558R1 Add @, $, and ` to the basic character set](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2558r1.html)

@ $ `ã®3ç¨®é¡ã®æ–‡å­—ã‚’ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®åŸºæœ¬æ–‡å­—é›†åˆã«è¿½åŠ ã™ã‚‹ææ¡ˆã€‚

- [P2558R0 Add @, $, and ` to the basic character set - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2022å¹´03æœˆï¼‰](https://onihusube.hatenablog.com/entry/2022/04/02/175835#P2558R0-Add---and--to-the-basic-character-set)

ã“ã®ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã§ã®å¤‰æ›´ã¯ã€ã“ã‚Œã«ã‚ˆã‚‹å½±éŸ¿ã«ã¤ã„ã¦ã®èª¬æ˜ã‚’è¿½è¨˜ã—ãŸäº‹ã§ã™ã€‚

- [P2558 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/1220)

### [P2577R1 C++ Modules Discovery in Prebuilt Library Releases](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2577r1.pdf)
### [P2577R2 C++ Modules Discovery in Prebuilt Library Releases](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2577r2.pdf)
### [P2580R0 Tuple protocol for C-style arrays `T[N]`](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2580r0.html)

ç”Ÿé…åˆ—ã«ã‚¿ãƒ—ãƒ«ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®ã‚µãƒãƒ¼ãƒˆã‚’è¿½åŠ ã™ã‚‹ææ¡ˆã€‚

ã‚¿ãƒ—ãƒ«-likeãªå‹ã¨ã„ã†è¦³ç‚¹ã‹ã‚‰ã¯ã€`T[N]`ã¨`std::array<T, N>`ã¯åŒä¸€ã®æ€§è³ªã‚’æŒã£ã¦ã„ã‚‹ã¯ãšã§ã™ã€‚ã—ã‹ã—ã€`std::array<T, N>`ã¯ã‚¿ãƒ—ãƒ«ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’å‚™ãˆã¦ã„ã‚‹ã®ã«å¯¾ã—ã¦ã€`T[N]`ã¯ãã†ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

`T[N]`ã«ã‚¿ãƒ—ãƒ«ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®ã‚µãƒãƒ¼ãƒˆã‚’è¿½åŠ ã™ã‚Œã°ã€ã‚¿ãƒ—ãƒ«ã‚’æ¸¡ã›ã‚‹ã¨ã“ã‚ï¼ˆ`std::apply`ã‚„`std::make_from_tupe`ãªã©ï¼‰ã«ç”Ÿé…åˆ—ã‚’æ¸¡ã™ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ä»–ã«ã‚‚ã€`std::array<T, N>`ã‚ˆã‚Šã‚‚`T[N]`ã®æ–¹ãŒå¥½ã¾ã‚Œã‚‹ã‚ˆã†ãªå ´åˆã«ãŠã„ã¦ã‚‚ã€ç”Ÿé…åˆ—ã‹ã‚‰`std::array`ã‚’ä¸€æ™‚çš„ã«æ§‹ç¯‰ã—ãªãã¦ã‚‚ã‚¿ãƒ—ãƒ«æ“ä½œã‚’åˆ©ç”¨ã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ãªã©ã®ãƒ¡ãƒªãƒƒãƒˆãŒã‚ã‚Šã¾ã™ã€‚

```cpp
#include <array>

// ã‚µã‚¤ã‚ºã®è‡ªå‹•æ¨å®š
void auto_size_deduct() {
  int c_arr[] = {1, 2, 3};          // okã€è¦ç´ æ•°3
  std::array<int> arr = {1, 2, 3};  // ng
}


// C APIãƒ©ã‚¤ãƒ–ãƒ©ãƒªé–¢æ•°
struct ReferenceFrame;
int get_origin(struct ReferenceFrame* frame, double (*pt)[3]);

// C APIã¨ã®ç›¸äº’é‹ç”¨æ€§
std::optional<Point> get_origin(ReferenceFrame& frame) {
  // ã“ã®ææ¡ˆã®å¾Œã§ã¯ã€ã“ã®ã‚ˆã†ã«æ›¸ã‘ã‚‹ã‚ˆã†ã«ãªã‚‹

  double pt[3] { };

  if (get_origin(&frame, &pt) != 0) {
    return { };
  }

  return std::make_from_tuple<Point>(pt);
}

// ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ã®å¢ƒç•Œãƒã‚§ãƒƒã‚¯
void ctbc() {
  int c_arr[42]{};

  c_arr[42] = 42;           // UB
  std::get<42>(c_arr) = 42; // ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼
}
```

ã“ã®ææ¡ˆã¯ã€ã“ã‚Œã‚‰ã®ãƒ¡ãƒªãƒƒãƒˆã®ãŸã‚ã«ã€ç”Ÿé…åˆ—ã«å¯¾ã—ã¦ã‚¿ãƒ—ãƒ«ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚µãƒãƒ¼ãƒˆã‚’è¿½åŠ ã—ã‚ˆã†ã¨ã™ã‚‹ã‚‚ã®ã§ã™ã€‚

ã‚¿ãƒ—ãƒ«ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®å®Ÿä½“ã¯ã€æ¬¡ã®3ã¤ã®æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªæ©Ÿèƒ½ã‹ã‚‰ãªã£ã¦ã„ã¾ã™ã€‚

- `std::tuple_size<T>` ã‚¯ãƒ©ã‚¹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
    - ã‚¿ãƒ—ãƒ«ã®é•·ã•ã‚’æ±‚ã‚ã‚‹
- `std::tuple_element<T>` ã‚¯ãƒ©ã‚¹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
    - ã‚¿ãƒ—ãƒ«ã®è¦ç´ å‹ã‚’æ±‚ã‚ã‚‹
- `std::get<I>` é–¢æ•°
    - ã‚¿ãƒ—ãƒ«ã®è¦ç´ ã‚’å¼•ãå½“ã¦ã‚‹

ã“ã®ææ¡ˆã§ã¯ã€ã“ã‚Œã‚‰ã®ã‚‚ã®ã«å¯¾ã—ã¦ç”Ÿé…åˆ—`T[N]`ã®ï¼ˆéƒ¨åˆ†ï¼‰ç‰¹æ®ŠåŒ–ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã§ç”Ÿé…åˆ—ã«å¯¾ã™ã‚‹ã‚¿ãƒ—ãƒ«ã‚µãƒãƒ¼ãƒˆã‚’æœ‰åŠ¹ã«ã—ã‚ˆã†ã¨ã—ã¦ã„ã¾ã™ã€‚

ãã®éš›ã€`T const [N]`ã«å¯¾ã—ã¦æ–°è¦è¿½åŠ ã™ã‚‹ã‚‚ã®ã¨æ—¢å­˜ã®ã‚‚ã®ï¼ˆ`tuple_size, tuple_element`ï¼‰ãŒãƒãƒƒãƒ†ã‚£ãƒ³ã‚°ã™ã‚‹ãŸã‚ã€`T const [N]`ã«å¯¾ã™ã‚‹ç‰¹æ®ŠåŒ–ã‚‚åŒæ™‚ã«è¿½åŠ ã—ã¦ã„ã¾ã™ã€‚ã¾ãŸã€ã‚³ãƒ³ã‚»ãƒ—ãƒˆã‚’ä½¿ç”¨ã—ãŸå®Ÿè£…ã«ã‚ˆã£ã¦ã€ãã®ã‚ˆã†ãª`const`å•é¡Œã‚’å›é¿ã§ãã‚‹ä»–`std::get`ã«ã‚³ãƒ³ã‚»ãƒ—ãƒˆã«ã‚ˆã‚‹ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹åˆ¶ç´„ã‚’ã™ã‚‹å®Ÿè£…ã‚‚å¯èƒ½ã¨ã®ã“ã¨ã§ã™ï¼ˆç¾åœ¨ã®ææ¡ˆã§ã¯ã‚ã‚Šã¾ã›ã‚“ï¼‰ã€‚

- [P2580 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/1240)

### [P2581R0 Specifying the Interoperability of Binary Module Interface Files](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2581r0.pdf)

ãƒ“ãƒ«ãƒ‰æ¸ˆã¿ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’æ‰±ã†éš›ã«ã€ãƒ“ãƒ«ãƒ‰ã‚·ã‚¹ãƒ†ãƒ ãŒãã®ãƒ“ãƒ«ãƒ‰ã‚ºãƒ ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç›´æ¥æ‰±ã†ã“ã¨ãŒã§ãã‚‹ã‹ã©ã†ã‹ã‚’èª¿ã¹ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ã™ã‚‹ææ¡ˆã€‚

ãƒã‚¤ãƒŠãƒªãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆBMIï¼‰ã¯ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹éƒ¨åˆ†ã‚’ãƒ“ãƒ«ãƒ‰ã—ãŸã‚‚ã®ã§ã‚ã‚Šã€ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ãƒ‘ãƒ¼ã‚¹ã—ç›´ã—ãŸã‚Šãƒ“ãƒ«ãƒ‰ã—ãªãŠã—ãŸã‚Šã™ã‚‹ã“ã¨ãªããƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’èª¿ã¹ãŸã‚Šã€ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒãƒ“ãƒ«ãƒ‰ã•ã‚ŒãŸæ™‚ã®æƒ…å ±ã‚’å–å¾—ã—ãŸã‚Šã™ã‚‹ã®ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚ãã®å½¢å¼ã¯å®Ÿè£…å®šç¾©ã§ã‚ã‚Šã€clangã¨GCCã®é–“ã§ã¯ç›¸äº’é‹ç”¨å¯èƒ½ã§ã‚ã‚‹ã‚ˆã†ã§ã™ãŒã€åŸºæœ¬çš„ã«ã¯ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã«ã‚ˆã£ã¦ç‹¬è‡ªã®å½¢å¼ã§ã™ã€‚

ãƒ“ãƒ«ãƒ‰æ¸ˆã¿ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã—ã¦é…å¸ƒã™ã‚‹å ´åˆã€ãã“ã«å«ã¾ã‚Œã‚‹BMIãŒãã®ç’°å¢ƒã®ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã«ã‚ˆã£ã¦ä½¿ç”¨å¯èƒ½ã§ã‚ã£ãŸã¨ã—ã¦ã‚‚ç›´æ¥ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒã§ããªã„å ´åˆãŒã‚ã‚Šã¾ã™ï¼ˆãƒ“ãƒ«ãƒ‰ã•ã‚ŒãŸã¨ãã®è¨­å®šã¨ä½¿ç”¨æ™‚ã®è¨­å®šãŒç•°ãªã‚‹ãªã©ï¼‰ã€‚

SG15ã®ã‚³ãƒ³ã‚»ãƒ³ã‚µã‚¹ã¨ã—ã¦ã¯ã€ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®æ¢ç´¢ã«ã¯ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨ã™ã‚‹æ–¹å‘æ€§ãŒæ±ºã¾ã£ã¦ã„ã¾ã™ã€‚ãã®æ¢ç´¢ã®æ–¹æ³•ã‚„ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãªã©ã¯ã¾ã è­°è«–ä¸­ã§ã™ãŒã€ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒBMIã‚’æä¾›ã—ãã‚ŒãŒä½¿ç”¨å¯èƒ½ã‹ã©ã†ã‹ã‚’ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã«çŸ¥ã‚‰ã›ã‚‹å¿…è¦ãŒã‚ã‚‹ã“ã¨ã¯ç¢ºå®Ÿã§ã™ã€‚ãã—ã¦ã€ãã‚Œã¯ãƒ“ãƒ«ãƒ‰ã‚·ã‚¹ãƒ†ãƒ ã«ã‚ˆã£ã¦èªè­˜ã•ã‚Œã‚‹å¿…è¦ãŒã‚ã‚Šã€ç¾åœ¨ãã®æ–¹æ³•ã¯ã¾ã ã‚ã‚Šã¾ã›ã‚“ã€‚

ã“ã®ææ¡ˆã¯ã€ãƒ“ãƒ«ãƒ‰ã‚·ã‚¹ãƒ†ãƒ ãŒBMIã‚’èª­ã‚“ã ã‚Šã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã‚’å‘¼ã³å‡ºã—ãŸã‚Šã™ã‚‹ã“ã¨ãªããã‚Œã‚’èªè­˜ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã®ãƒ¡ã‚«ãƒ‹ã‚ºãƒ ã‚’ç¢ºç«‹ã—ã‚ˆã†ã¨ã™ã‚‹ã‚‚ã®ã§ã™ã€‚

ã“ã®ææ¡ˆã§ã¯ã€ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ¢ç´¢æ™‚ã«ä½¿ç”¨ã™ã‚‹ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿å†…ã«ã€BMIã®å ´æ‰€ã¨ã¨ã‚‚ã«ãã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’ç¤ºã™è­˜åˆ¥å­ã‚’å¿…ãšå«ã‚€ã‚ˆã†ã«ã™ã‚‹ã“ã¨ã‚’ææ¡ˆã—ã¦ã„ã¾ã™ã€‚ãã®è­˜åˆ¥å­ã¯å°‘ãªãã¨ã‚‚ä»¥ä¸‹ã®ã‚‚ã®ã‚’å«ã‚“ã§ã„ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™

- ãƒ“ãƒ«ãƒ‰ã«ä½¿ç”¨ã•ã‚ŒãŸã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ç¨®åˆ¥ã¨ãƒãƒ¼ã‚¸ãƒ§ãƒ³
- è¨€èªãƒãƒ¼ã‚¸ãƒ§ãƒ³
- ISA/ABIã«é–¢ã™ã‚‹ã‚ªãƒ—ã‚·ãƒ§ãƒ³

ã¾ãŸã€ãã‚‚ãã‚‚BMIã‚’ç”Ÿæˆã™ã‚‹æ™‚ã‚„é…å¸ƒã•ã‚ŒãŸBMIãŒä½¿ç”¨å¯èƒ½ã§ã¯ãªã‹ã£ãŸã¨ãã€ãã®ç’°å¢ƒã¨ãƒ“ãƒ«ãƒ‰ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã§ä½¿ç”¨å¯èƒ½ãªBMIã‚’ç”Ÿæˆã™ã‚‹å¿…è¦ãŒã‚ã‚Šã€ãã®ãŸã‚ã«ã“ã®è­˜åˆ¥å­ã‚’å–å¾—å¯èƒ½ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ãã“ã§ã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ãŒãã®ã‚ˆã†ãªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ï¼ˆã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«ã‚ˆã£ã¦ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å‡ºåŠ›ã™ã‚‹ãªã©ï¼‰ã‚’å‚™ãˆã‚‹ã‚ˆã†ã«ã™ã‚‹ã“ã¨ã‚‚ææ¡ˆã—ã¦ã„ã¾ã™ã€‚

- [P2580 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/1240)

### [P2582R0 Wording for class template argument deduction from inherited constructors](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2582r0.pdf)

ã‚¯ãƒ©ã‚¹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®å®Ÿå¼•æ•°æ¨å®šï¼ˆCTADï¼‰ã‚’ç¶™æ‰¿ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‹ã‚‰ã§ã‚‚è¡Œãˆã‚‹ã‚ˆã†ã«ã™ã‚‹ææ¡ˆã€‚

CTADã¯C++17ã§å°å…¥ã•ã‚Œã€ãã®æ™‚ã¯éé›†æˆä½“ã®ã‚¯ãƒ©ã‚¹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãã®ã‚‚ã®ã§ã—ã‹ä½¿ç”¨ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚C++20ã§ã¯é›†æˆä½“ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¨ã‚¨ã‚¤ãƒªã‚¢ã‚¹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«æ‹¡å¤§ã•ã‚Œã¾ã—ãŸãŒã€ç¶™æ‰¿ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‹ã‚‰CTADã¯ã§ããªã„ã¾ã¾ã§ã—ãŸã€‚

ã“ã®ææ¡ˆã¯ãã‚Œã‚’è§£æ¶ˆã—ã€ç¶™æ‰¿ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‚’ã‚‚ã¡ã„ã¦CTADã§ãã‚‹ã‚ˆã†ã«ã—ã‚ˆã†ã¨ã™ã‚‹ã‚‚ã®ã§ã™ã€‚

```cpp
template <typename T>
struct Base {
  Base(T&&);
};

template <typename T>
struct Derived : public Base<T> {
  using Base<T>::Base;  // Baseã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‚’ç¶™æ‰¿
}

Derived d(42); // ã“ã®ææ¡ˆå¾Œokã€Derived<int>ã¨æ¨è«–ã•ã‚Œã‚‹
```

ã“ã®æ‰‹é †ã¯ã€æ´¾ç”Ÿã‚¯ãƒ©ã‚¹ã«å¯¾ã™ã‚‹åŸºåº•ã‚¯ãƒ©ã‚¹ã‚’ã‚¨ã‚¤ãƒªã‚¢ã‚¹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ã‚ˆã†ã«æ‰±ã£ã¦ã€ã‚¨ã‚¤ãƒªã‚¢ã‚¹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‹ã‚‰ã®CTADã®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’æµç”¨ã™ã‚‹ã¨ã¨ã‚‚ã«ã€ç¶™æ‰¿ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‹ã‚‰ç”Ÿæˆã•ã‚ŒãŸæ¨è«–è£œåŠ©ï¼ˆé–¢æ•°ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼‰ã‚’æ´¾ç”Ÿã‚¯ãƒ©ã‚¹ã§ç›´æ¥ç”Ÿæˆã•ã‚ŒãŸæ¨è«–è£œåŠ©ã‚ˆã‚Šã‚‚ã‚ªãƒ¼ãƒãƒ¼ãƒ­ãƒ¼ãƒ‰é †ã§å„ªå…ˆã™ã‚‹ã“ã¨ã§è¡Œã‚ã‚Œã¦ã„ã¾ã™ã€‚

æœ€åˆã®æ¨è«–è£œåŠ©ã®æŠ½å‡ºã¯ã€ã‚¯ãƒ©ã‚¹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ`C`ã®åŸºåº•ã‚¯ãƒ©ã‚¹ã«ã‚¯ãƒ©ã‚¹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ`B`ãŒå«ã¾ã‚Œã¦ã„ã‚‹å ´åˆã€`C`ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æŒã¡å³è¾ºãŒ`B`ã§ã‚ã‚‹ã‚ˆã†ãªã‚¨ã‚¤ãƒªã‚¢ã‚¹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ç”Ÿæˆã—ã€ã“ã®ã‚¨ã‚¤ãƒªã‚¢ã‚¹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ç”¨ã„ã¦æ¨è«–è£œåŠ©ã‚’å–å¾—ã—ã¾ã™ã€‚

ä¸Šè¨˜ã®ä¾‹ã§ã¯æ¬¡ã®ã‚ˆã†ã«ã‚¨ã‚¤ãƒªã‚¢ã‚¹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¨ãã“ã‹ã‚‰ã®æ¨è«–è£œåŠ©ãŒæŠ½å‡ºã•ã‚Œã¾ã™ã€‚

```cpp
// ç”Ÿæˆã•ã‚ŒãŸã€ä»®æƒ³çš„ãªã‚¨ã‚¤ãƒªã‚¢ã‚¹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
template <typename T>
using D = Base<T>;

// â†‘ã‹ã‚‰ç”Ÿæˆã•ã‚ŒãŸæ¨è«–è£œåŠ©
template<typename T>
Derived(T&&) -> Derived<T>;
```

ã“ã®ææ¡ˆã¯æ—¢ã«R1ãŒå­˜åœ¨ã™ã‚‹ã‚‰ã—ãã€R1ãŒæ¬¡ã®å…¨ä½“ä¼šè­°ã§æŠ•ç¥¨ã«ã‹ã‘ã‚‰ã‚Œã‚‹ã“ã¨ãŒæ±ºã¾ã£ã¦ã„ã¾ã™ã€‚

- [ï¼»C++ï¼½`std::array`ã®ã‚¨ã‚¤ãƒªã‚¢ã‚¹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¨CTAD - åœ°é¢ã‚’è¦‹ä¸‹ã‚ã™å°‘å¹´ã®è¶³è¹´ã«ã•ã‚Œã‚‹ç§](https://onihusube.hatenablog.com/entry/2021/11/10/191519)
- [P2582 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/1242)

### [P2584R0 A More Composable `from_chars`](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2584r0.pdf)

`std::from_chars`ã‚’`range`å¯¾å¿œã•ã›ã¤ã¤ä½¿ã„ã‚„ã™ãã™ã‚‹ææ¡ˆã€‚

[`std::from_chars`](https://cpprefjp.github.io/reference/charconv/from_chars.html)ã¯æ–‡å­—åˆ—ã‹ã‚‰æ•°å€¤ã¸ã®å¤‰æ›ã‚’è¡Œã†ã‚‚ã®ã§ã™ã€‚å¼•æ•°ã«ã¯å…¥åŠ›æ–‡å­—ç¯„å›²ã®å…ˆé ­ã¨çµ‚ç«¯ã‚’å–ã‚Šï¼ˆC++17ã¾ã§ã®ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ãƒšã‚¢ã‚’å—ã‘å–ã‚‹ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã¨åŒæ§˜ï¼‰ã€çµæœã¯å¼•æ•°ã«ã¨ã£ãŸå‡ºåŠ›ç”¨å¤‰æ•°ã¸ã®å‚ç…§ã«å‡ºåŠ›ã•ã‚Œã¾ã™ã€‚æˆ»ã‚Šå€¤ã«ã¯å¤‰æ›çµæœã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãŒè¿”ã•ã‚Œã¾ã™ã€‚

```cpp
template<std::size_t N>
int to_int(char(&input)[N]) {
  using namespace std::ranges;

  int result;

  // æ–‡å­—åˆ— -> intå€¤ã¸å¤‰æ›
  auto [p, err] = std::from_chars(begin(input), end(input), result);

  // ã‚¨ãƒ©ãƒ¼ãƒã‚§ãƒƒã‚¯
  if (err == std::errc{}) {
    return result;
  } else {
    return 0;
  }
}
```

ã“ã‚Œã¯ã“ã‚Œã§ã‚·ãƒ³ãƒ—ãƒ«ã§ä½¿ã„ã‚„ã™ã„ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã§ã¯ã‚ã‚‹ã®ã§ã™ãŒã€å…¥åŠ›ã«ç¯„å›²ï¼ˆ`range`ï¼‰ã‚’å–ã‚Œãªã„ã“ã¨ã‚„ã€çµæœã‚’å—ã‘ã‚‹ãŸã‚ã«ä¸€åº¦ãƒ­ãƒ¼ã‚«ãƒ«å¤‰æ•°ã‚’ç”¨æ„ã—ãªã‘ã‚Œã°ã‚‰ãªã„ãªã©ã€å°‘ã—é¢å€’ãªã¨ã“ã‚ãŒã‚ã‚Šã¾ã™ã€‚ä¾‹ãˆã°ã€ä»»æ„ã®æ–‡å­—ç¯„å›²ï¼ˆ`range`ï¼‰ã§ä½¿ç”¨ã™ã‚‹ã«ã¯æ¬¡ã®ã‚ˆã†ã«æ›¸ãå¿…è¦ãŒã‚ã‚Šã¾ã™

```cpp
template<std::ranges::contiguous_range R>
int to_int(R&& input) {
  using namespace std::ranges;

  int result;

  // æ–‡å­—åˆ— -> intå€¤ã¸å¤‰æ›
  auto [p, err] = std::from_chars(std::to_addres(begin(input)), std::to_addres(end(input)), result);

  // ã‚¨ãƒ©ãƒ¼ãƒã‚§ãƒƒã‚¯
  if (err == std::errc{}) {
    return result;
  } else {
    return 0;
  }
}
```

`contiguous_range`ã¯å¿…ãšã—ã‚‚`sized_range`ã§ã¯ãªãã€ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã¯å¿…ãšã—ã‚‚ãƒã‚¤ãƒ³ã‚¿ã¨ã¯é™ã‚‰ãªã„ãŸã‚ã€ã“ã®ã‚ˆã†ã«æ›¸ãã®ãŒæœ€é©ã§ã™ã€‚


ã“ã®ææ¡ˆã¯ã€`std::from_chars`ã«ã‚ªãƒ¼ãƒãƒ¼ãƒ­ãƒ¼ãƒ‰ã‚’è¿½åŠ ã—ã¦`range`å¯¾å¿œã•ã›ã‚‹ã¨å…±ã«ã€æˆ»ã‚Šå€¤ã§å¤‰æ›çµæœã‚’è¿”ã™ã‚ˆã†ã«ã™ã‚‹ã‚‚ã®ã§ã™ã€‚æ¬¡ã®ã‚ˆã†ãªã‚ªãƒ¼ãƒãƒ¼ãƒ­ãƒ¼ãƒ‰ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã‚’ææ¡ˆã—ã¦ã„ã¾ã™

```cpp
namespace std {
  // æ–°ã—ã„ã‚ªãƒ¼ãƒãƒ¼ãƒ­ãƒ¼ãƒ‰ã®æˆ»ã‚Šå€¤å‹
  template <typename T>
  struct from_chars_result_range {
    T value;  // å¤‰æ›çµæœ
    std::errc ec;
    std::span<const char> unparsed;
  };

  // æ•´æ•°å‹ç”¨
  template <integral T>
    requires (!std::same_as<bool, T>)
  constexpr from_chars_result_range<T> from_chars(std::span<const char> rng, int base = 10);

  // æµ®å‹•å°æ•°ç‚¹æ•°å‹ç”¨
  template <floating_point T>
  from_chars_result_range<T> from_chars(std::span<const char> rng, chars_format fmt = chars_format::general);
}
```

å…¥åŠ›ç¯„å›²ã¨ã—ã¦`std::span<const char>`ã‚’å–ã‚‹ã®ã¯ã€`std::string_view`ã®`range`ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãŒ`explicit`ã•ã‚Œãã†ãªã“ã¨ã¨ã€ã‚ˆã‚Šä¸€èˆ¬ã®å…¥åŠ›æ–‡å­—ç¯„å›²ã¯å¿…ãšã—ã‚‚æ–‡å­—åˆ—ã§ã¯ãªã„ã¨è€ƒãˆã‚‰ã‚Œã‚‹ãŸã‚ã§ã™ã€‚

ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿`T`ã«ã¯å¤‰æ›å…ˆã®æ•°å€¤å‹ã‚’æŒ‡å®šã—ã¾ã™ã€‚ä¾‹ãˆã°å…ˆã»ã©ã®ã‚³ãƒ¼ãƒ‰ã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™

```cpp
template<std::ranges::contiguous_range R>
int to_int(R&& input) {
  // æ–‡å­—åˆ— -> intå€¤ã¸å¤‰æ›
  auto [result, p, err] = std::from_chars<int>(input);

  // ã‚¨ãƒ©ãƒ¼ãƒã‚§ãƒƒã‚¯
  if (err == std::errc{}) {
    return result;
  } else {
    return 0;
  }
}
```

ææ¡ˆæ–‡æ›¸ã‚ˆã‚Šã€`views::split`ã¨çµ„ã¿åˆã‚ã›ã‚‹å ´åˆã®æ¯”è¼ƒä¾‹ã€‚

<table>
<tr>
<th>ç¾åœ¨</th>
<th>ã“ã®ææ¡ˆ</th>
</tr>
<tr>
<td valign="top">

```cpp
std::string s = "1.2.3.4";

auto ints =
  s | std::views::split('.')
    | std::views::transform([](const auto & v){
        int i = 0;
        std::from_chars(std::to_address(v.begin()),
                        std::to_address(v.end(), i);
        return i;
      });
```

</td>
<td valign="top">

```cpp
std::string s = "1.2.3.4";

auto ints =
  s | std::views::split('.')
    | std::views::transform([](const auto & v) {
        return std::from_chars<int>(v).value;
      });
```

</pre>
</td>
</tr>
</table>

ææ¡ˆã§ã¯ã€åˆ¥ã®å®Ÿè£…ã¨ã—ã¦`std::expected<std::from_chars_result_range<T>, std::errc>`ã‚’è¿”ã™ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã«é–¢ã—ã¦ã‚‚è¨€åŠã•ã‚Œã¦ã„ã¾ã™ãŒã€ä»Šã®æ‰€ã¯ãã¡ã‚‰ã¯ã‚µãƒ–æ¡ˆã§ã™ã€‚

- [P2584 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/1243)

### [P2585R0 Improving default container formatting](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2585r0.html)

`std::format`ã®ã‚³ãƒ³ãƒ†ãƒŠã«å¯¾ã™ã‚‹ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’æ”¹å–„ã™ã‚‹ææ¡ˆã€‚

`std::format`ã®ã‚³ãƒ³ãƒ†ãƒŠã«å¯¾ã™ã‚‹ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã¯C++23ã«å‘ã‘ã¦ææ¡ˆä¸­ï¼ˆ[P2286](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2286r8.html)ï¼‰ã§ã™ã€‚ãã“ã§ã¯ã€ã‚³ãƒ³ãƒ†ãƒŠï¼ˆ`range`ï¼‰ã®è¦ç´ å‹ãŒãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆå¯èƒ½ã§ã‚ã‚Œã°ã€ã‚³ãƒ³ãƒ†ãƒŠã®è¦ç´ åˆ—ã‚’ã‚³ãƒ³ãƒ†ãƒŠã”ã¨ã«é©ã—ãŸå½¢å¼ã§ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã—ã¾ã™ã€‚

|ã‚³ãƒ³ãƒ†ãƒŠ|å‡ºåŠ›|
|---|---|
|`std::vector<std::pair<int, int>>{{1, 2}, {3, 4}}`|`[(1, 2), (3, 4)]`|
|`std::set<std::pair<int, int>>{{1, 2}, {3, 4}}`|`{(1, 2), (3, 4)}`|
|`std::map<int, int>{{1, 2}, {3, 4}}`|`{1: 2, 3: 4}`|

ã“ã‚Œã¯ãã‚Œãã‚Œã®ã‚³ãƒ³ãƒ†ãƒŠå‹ã”ã¨ã«`std::formatter`ã‚’ç‰¹æ®ŠåŒ–ã™ã‚‹ã“ã¨ã§è¡Œã‚ã‚Œã¦ãŠã‚Šã€éæ¨™æº–ã®ã‚³ãƒ³ãƒ†ãƒŠã«å¯¾ã—ã¦ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã‚³ãƒ³ãƒ†ãƒŠãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼ˆ`std::vector`ã¨åŒæ§˜ã®ã‚‚ã®ï¼‰ã—ã‹æä¾›ã•ã‚Œã¾ã›ã‚“ã€‚

|ã‚³ãƒ³ãƒ†ãƒŠ|å‡ºåŠ›|
|---|---|
|`boost::container::flat_set<int>{1, 2, 3}`|`[1, 2, 3]`|
|`absl::flat_hash_map<int, int>{{1, 2}, {3, 4}}`|`[(1, 2), (3, 4)]`|

`{fmt}`ã§ã¯ã€`formatter`ã¯ç‰¹å®šã®æ¨™æº–ã‚³ãƒ³ãƒ†ãƒŠã«å¯¾ã—ã¦ç‰¹æ®ŠåŒ–ã•ã‚Œã¦ã„ã‚‹ã®ã§ã¯ãªãã€`map`-likeï¼ˆ`::mapped_type`ã®å­˜åœ¨ã«ã‚ˆã£ã¦åˆ¤å®šï¼‰ã€ã‚ã‚‹ã„ã¯`set`-likeï¼ˆ`key_type`ã®å­˜åœ¨ã«ã‚ˆã£ã¦åˆ¤å®šï¼‰ãªã‚ˆã‚Šåºƒã„å‹ã«å¯¾ã—ã¦ç‰¹æ®ŠåŒ–ã•ã‚Œã¦ã„ã¾ã™ã€‚ã—ãŸãŒã£ã¦ã€`{fmt}`ã§ã¯éæ¨™æº–ã®é€£æƒ³ã‚³ãƒ³ãƒ†ãƒŠã«å¯¾ã—ã¦ã‚‚æ¨™æº–ã®ã‚‚ã®ã¨åŒæ§˜ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’è¡Œã†ã“ã¨ãŒã§ãã¾ã™ã€‚

ã“ã®ææ¡ˆã¯ã€`{fmt}`ãŒã‚³ãƒ³ãƒ†ãƒŠãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®ãŸã‚ã«`formatter`ã§è¡Œãªã£ã¦ã„ã‚‹ã“ã¨ã¨ã»ã¼åŒæ§˜ã®ã“ã¨ã‚’P2286ã®ã‚³ãƒ³ãƒ†ãƒŠãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã«å¯¾ã—ã¦ã‚‚é©ç”¨ã™ã‚‹ã‚‚ã®ã§ã™ã€‚

ææ¡ˆã§ã¯ã€`format_kind`ã¨ã„ã†ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆå¯¾è±¡ã®ç¨®åˆ¥ã‚’è¡¨ã™å¤‰æ•°ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼ˆæ•´æ•°oråˆ—æŒ™å€¤ï¼‰ã‚’ç”¨æ„ã—ã¦ã€`input_range`ã«å¯¾ã—ã¦ã¯`range_format_kind`ã¨ã„ã†åˆ—æŒ™å€¤ã‚’`format_kind`ã¨ã—ã¦ç‰¹æ®ŠåŒ–ã—ã¾ã™ã€‚`range`ç”¨`format_kind`ã§ã¯ã€`range`ã®ç¨®åˆ¥ï¼ˆ`map`or`set`ã€ãã‚Œä»¥å¤–ãªã©ï¼‰ã«ã‚ˆã£ã¦`range_format_kind`ã®å€¤ã‚’å¤‰åŒ–ã•ã›ã¾ã™ã€‚

```cpp
namespace std {

  // rangeå‹ã®ç¨®åˆ¥ã‚’è¡¨ã™åˆ—æŒ™å€¤
  enum class range_format_kind {
    disabled,
    map,
    set,
    sequence,
    string,
    debug_string,
  };

  // ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆç¨®åˆ¥ã‚’æŒ‡å®šã™ã‚‹ä»»æ„ã®å€¤
  template <class R>
  inline constexpr auto format_kind = unspecified;

  // format_kindã®rangeå‹ã«å¯¾ã™ã‚‹ç‰¹æ®ŠåŒ–
  template <input_range R>
  inline constexpr range_format_kind format_kind<R> = []{
    if constexpr (requires { typename R::key_type; typename R::mapped_type; }
                  and is-2-tuple<range_reference_t<R>>) {
      return range_format_kind::map;  // map-likeã®åˆ¤å®š
    } else if constexpr (requires { typename R::key_type; }) {
      return range_format_kind::set;  // set-likeã®åˆ¤å®š
    } else {
      return range_format_kind::sequence; // ãã®ä»–ã®ã‚³ãƒ³ãƒ†ãƒŠï¼ˆç¯„å›²ï¼‰
    }
  }();
}
```

`input_range`ã«å¯¾ã™ã‚‹`formatter`ç‰¹æ®ŠåŒ–ã§ã¯ã€å…±é€šå®Ÿè£…ã§ã‚ã‚‹*default-range-formatter*ã¨ã„ã†å‹ã‚’ç¶™æ‰¿ã™ã‚‹ã‚ˆã†ã«ã—ãŸä¸Šã§ã€*default-range-formatter*ã«ã“ã®`format_kind`ã‚’æ¸¡ã™ã‚ˆã†ã«ã—ã¾ã™ã€‚

```cpp
namespace std {

  // rangeå‹ã«å¯¾ã™ã‚‹ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼å…±é€šå®Ÿè£…
  template<range_format_kind K, ranges::input_range R, class charT>
    struct default-range-formatter; // exposition only

  // rangeå‹ã«å¯¾ã™ã‚‹formatterç‰¹æ®ŠåŒ–
  template<ranges::input_range R, class charT>
      requires (format_kind<R> != range_format_kind::disabled)
                && formattable<ranges::range_reference_t<R>, charT>
    struct formatter<R, charT> : default-range-formatter<format_kind<R>, R, charT> { };
}
```

ã“ã®ã‚ˆã†ã«ã—ã¦ã€`std::formatter`ã®ã‚·ã‚°ãƒãƒãƒ£ã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ãªãã€ãã®ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼å®Ÿè£…ã«å¯¾ã—ã¦ã“ã®`format_kind<R>`ã‚’ä¼ãˆã€*default-range-formatter*ã§ã¯å„`range_format_kind`ã®å€¤ã«å¯¾ã—ã¦ç‰¹æ®ŠåŒ–ã—ã¦ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’èª¿æ•´ã—ã¾ã™

```cpp
namespace std {
  // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã‚³ãƒ³ãƒ†ãƒŠãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
  template <ranges::input_range R, class charT>
  struct default-range-formatter<range_format_kind::sequence, R, charT> {
    ...
  };

  // map-likeã‚³ãƒ³ãƒ†ãƒŠã«å¯¾ã™ã‚‹ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
  template <ranges::input_range R, class charT>
  struct default-range-formatter<range_format_kind::map, R, charT> {
    ...
  };

  // set-likeã‚³ãƒ³ãƒ†ãƒŠã«å¯¾ã™ã‚‹ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
  template <ranges::input_range R, class charT>
  struct default-range-formatter<range_format_kind::set, R, charT> {
    ...
  };
}
```

ã“ã‚Œã«ã‚ˆã£ã¦ã€ç¾åœ¨ã®`std::set/std::map`å°‚ç”¨ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’ãã‚Œã«è¿‘ã„ï¼ˆåŒç­‰ãªï¼‰å‹ã¸ã¨åºƒã’ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ã¾ãŸã€`format_kind`ã¯`range`ä»¥å¤–ã®å‹ã«å¯¾ã—ã¦ã¯ãã®å€¤ã‚’æœªè¦å®šã¨ã—ã¦ãŠãã“ã¨ã§ã€å°†æ¥çš„ã«ä»–ã®å‹ã«å¯¾ã—ã¦ã“ã®ã‚ˆã†ãªãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆèª¿æ•´ã‚’è¡Œãˆã‚‹ä½™åœ°ã‚’æ®‹ã—ã¦ã„ã¾ã™ã€‚

- [P2585 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/1244)

### [P2587R0 `to_string` or not `to_string`](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2587r0.html)

`std::to_string`ã®æµ®å‹•å°æ•°ç‚¹æ•°å‡ºåŠ›ã‚’ä¿®æ­£ã™ã‚‹ææ¡ˆã€‚

ä¾‹ãˆã°æ¬¡ã®ã‚³ãƒ¼ãƒ‰ã®å‡ºåŠ›ã¯

```cpp
auto loc = std::locale("uk_UA.UTF-8");
std::locale::global(loc);
std::cout.imbue(loc);
setlocale(LC_ALL, "C");

std::cout << "iostreams:\n";
std::cout << 1234 << "\n";
std::cout << 1234.5 << "\n";

std::cout << "\nto_string:\n";
std::cout << std::to_string(1234) << "\n";
std::cout << std::to_string(1234.5) << "\n";

setlocale(LC_ALL, "uk_UA.UTF-8");

std::cout << "\nto_string (uk_UA.UTF-8 C locale):\n";
std::cout << std::to_string(1234) << "\n";
std::cout << std::to_string(1234.5) << "\n";
```

ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™

```
iostreams:
1 234
1 234,5

to_string:
1234
1234.500000

to_string (uk_UA.UTF-8 C locale):
1234
1234,500000
```

`std::to_string`ã®æ•´æ•°å‹ã‚ªãƒ¼ãƒãƒ¼ãƒ­ãƒ¼ãƒ‰ã¯ã€ã‚°ãƒ­ãƒ¼ãƒãƒ«Cãƒ­ã‚±ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã—ã¾ã™ãŒã‚°ãƒ«ãƒ¼ãƒ”ãƒ³ã‚°ã‚’è¡Œã‚ãšã€å®Ÿè³ªçš„ã«ãƒ­ãƒ¼ã‚«ãƒ©ã‚¤ã‚ºã•ã‚Œã¾ã›ã‚“ã€‚ä¸€æ–¹ã€æµ®å‹•å°æ•°ç‚¹æ•°å‹ã‚ªãƒ¼ãƒãƒ¼ãƒ­ãƒ¼ãƒ‰ã¯ã€ã‚°ãƒ­ãƒ¼ãƒãƒ«Cãƒ­ã‚±ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã—ã¦å°æ•°ç‚¹ã‚’å–å¾—ã—ã€ã‚°ãƒ«ãƒ¼ãƒ”ãƒ³ã‚°ã‚’è¡Œã„ã¾ã›ã‚“ã€‚ãã®ãŸã‚ã€ã“ã®ã‚ˆã†ãªçµæœã«ãªã‚Šã¾ã™ã€‚

ã¾ãŸã€æµ®å‹•å°æ•°ç‚¹æ•°å‹ã‚ªãƒ¼ãƒãƒ¼ãƒ­ãƒ¼ãƒ‰ã§ã¯å›ºå®šå°æ•°ç‚¹å½¢å¼ã‚’å¸¸ã«ä½¿ç”¨ã™ã‚‹ãŸã‚ã€ãã®å‡ºåŠ›ãŒæœ‰ç”¨ãªã®ã¯é™ã‚‰ã‚ŒãŸç¯„å›²ã®æ•°å€¤ã«å¯¾ã—ã¦ã®ã¿ã§ã™ã€‚

```cpp
std::cout << std::to_string(std::numeric_limits<double>::max()) << "\n";
std::cout << std::to_string(-1e-7);
```

```
179769313486231570814527423731704356798070567525844996598917476803157260780028538760589558632766878171540458953514382464234321326889464182768467546703537516986049910576551282076245490090389328944075868508455133942304583236903222948165808559332123348274797826204144723168738177180919299881250404026184124858368.000000
-0.000000
```

1ã¤ç›®ã®å‡ºåŠ›ã§ã¯æœ€åˆã®17æ¡ã ã‘ãŒæœ‰åŠ¹ã§æ®‹ã‚Šã®æ¡ã¯æœ‰ç”¨ã§ã¯ãªã„å€¤ã§ã™ã€‚ã•ã‚‰ã«ã€å°æ•°ç‚¹ä»¥ä¸‹ã«ç„¡æ„å‘³ãªã‚¼ãƒ­ãŒã‚ã‚Šã¾ã™ã€‚2ã¤ç›®ã®å‡ºåŠ›ã‚‚ã€å°æ•°ç‚¹ä»¥ä¸‹ã®0ã¯ç„¡æ„å‘³ã§ã™ã€‚

ã“ã‚Œã‚‰ã®ã“ã¨ã¯ã€`std::to_string`ã¯`sprintf`ã‚’ç”¨ã„ã¦å®šç¾©ã•ã‚Œã¦ã„ã‚‹ãŸã‚ã«iostreamã®æŒ¯ã‚‹èˆã„ã¨ç•°ãªã£ã¦ã„ã‚‹ã“ã¨ãŒåŸå› ã§ã™ã€‚

ã“ã®ææ¡ˆã¯ã“ã‚Œã‚‰ã®å•é¡Œã®ä¿®æ­£ã®ãŸã‚ã«ã€`std::to_string(v)`ã‚’`std::format("{}", v)`ã§å®šç¾©ã—ç›´ãã†ã¨ã™ã‚‹ã‚‚ã®ã§ã™ã€‚

å…ˆã»ã©ã®ä¾‹ã®å‡ºåŠ›ã¯æ¬¡ã®ã‚ˆã†ã«ä¿®æ­£ã•ã‚Œã¾ã™

```
iostreams:
1 234
1 234,5

to_string:
1234
1234.5

to_string (uk_UA.UTF-8 C locale):
1234
1234.5
```

```
1.7976931348623157e+308
-1e-7
```

ã“ã®å¤‰æ›´ã§ã¯æ•´æ•°å‹ã®å‡ºåŠ›ã¯å¾“æ¥é€šã‚Šã®ã¾ã¾ã§ã€æµ®å‹•å°æ•°ç‚¹æ•°å‹ã®å‡ºåŠ›ã ã‘ãŒå¤‰æ›´ã•ã‚Œã¾ã™ã€‚

- [P2587 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/1245)

### [P2588R0 Relax `std::barrier` phase completion step guarantees](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2588r0.html)

`std::barrier`ã®ãƒãƒªã‚¢ãƒ•ã‚§ãƒ¼ã‚ºå®Œäº†æ™‚å‡¦ç†ãŒã€åŒã˜ãƒãƒªã‚¢ã§åŒæœŸã™ã‚‹ä»»æ„ã®ã‚¹ãƒ¬ãƒƒãƒ‰ã‹ã‚‰èµ·å‹•ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ææ¡ˆã€‚

`std::barrier`ã¯Fork-Joinãƒ¢ãƒ‡ãƒ«ã®ã‚ˆã†ãªä¸¦è¡Œå‡¦ç†ã®å®Ÿè£…ã«æ´»ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ç¹°ã‚Šè¿”ã—ä½¿ç”¨å¯èƒ½ãªå‹•æ©Ÿæ©Ÿæ§‹ã§ã™ã€‚å…¸å‹çš„ã«ã¯ã€åŒæœŸã«å‚åŠ ã™ã‚‹å…¨ã‚¹ãƒ¬ãƒƒãƒ‰ãŒä¸¦åˆ—å®Ÿè¡Œã•ã‚Œã‚‹éƒ¨åˆ†ã¨ä¸€ã¤ã®ã‚¹ãƒ¬ãƒƒãƒ‰ã ã‘ã§å®Ÿè¡Œã•ã‚Œã‚‹åŒæœŸéƒ¨åˆ†ã‹ã‚‰æ§‹æˆã•ã‚Œã‚‹å‡¦ç†å˜ä½ã®ç¹°ã‚Šè¿”ã—ã®ã‚ˆã†ãªå‡¦ç†ã«ãªã‚Šã€ãã®1ã¤ã®å‡¦ç†å˜ä½ã®ã“ã¨ã‚’ãƒãƒªã‚¢ãƒ•ã‚§ãƒ¼ã‚ºã¨å‘¼ã³ã¾ã™ã€‚

![](https://upload.wikimedia.org/wikipedia/commons/thumb/f/f1/Fork_join.svg/2880px-Fork_join.svg.png)  
Fork-Joinãƒ¢ãƒ‡ãƒ«ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ï¼ˆWikipediaã‚ˆã‚Šï¼‰

`std::barrier`ã¯ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå¼•æ•°ã¨ã—ã¦å®Œäº†é–¢æ•°ï¼ˆ`CompletionFunction`ï¼‰ã®å‹ã‚’å—ã‘å–ã£ã¦ã€ãã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä¿æŒã—ã¦ãŠãã“ã¨ã§ãƒãƒªã‚¢ãƒ•ã‚§ãƒ¼ã‚ºã®æœ€å¾Œã«ã©ã“ã‹ä¸€ã¤ã®ã‚¹ãƒ¬ãƒƒãƒ‰ã§ãã‚Œã‚’å®Ÿè¡Œã—ã¦ã‹ã‚‰ã€å¾…æ©Ÿã—ã¦ã„ã‚‹ã‚¹ãƒ¬ãƒƒãƒ‰ã‚’å†é–‹ã—ã¾ã™ã€‚

```cpp
// è¤‡æ•°ã®ã‚¹ãƒ¬ãƒƒãƒ‰ã§å‘¼ã°ã‚Œã‚‹å‡¦ç†
template<typename CF>
void fork_proc(std::barrier<CF>& sync) {
  // ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã•ã‚Œã‚‹ã¾ã§è¡Œã‚ã‚Œã‚‹é€£ç¶šå‡¦ç†
  // ãƒ«ãƒ¼ãƒ—ã”ã¨ã«å…¨ã‚¹ãƒ¬ãƒƒãƒ‰ã§åŒæœŸã—ã¤ã¤å®Ÿè¡Œã•ã‚Œã‚‹
  while(/*ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã®æ¤œå‡º*/) {

    // ãƒ¡ã‚¤ãƒ³ã®å‡¦ç†
    ...

    // å…¨ã‚¹ãƒ¬ãƒƒãƒ‰ã¯ã“ã“ã§å¾…ã¡åˆã‚ã›ã‚‹ï¼ˆ1ãƒ«ãƒ¼ãƒ—ã®å‡¦ç†ã®å®Œäº†ã‚’åŒæœŸã™ã‚‹ï¼‰
    // ãƒãƒªã‚¢ãƒ•ã‚§ãƒ¼ã‚ºã«å‚åŠ ã™ã‚‹å…¨ã¦ã®ã‚¹ãƒ¬ãƒƒãƒ‰ãŒã“ã“ã«åˆ°é”ã—ãŸæ™‚ã€CFã®å‡¦ç†ã‚’å®Ÿè¡Œã—ã¦ã‹ã‚‰æ¬¡ã®ãƒãƒªã‚¢ãƒ•ã‚§ãƒ¼ã‚ºã‚’é–‹å§‹ã™ã‚‹
    sync.arrive_and_wait(); // åŒæœŸãƒã‚¤ãƒ³ãƒˆ
  }
}

int main() {
  // ä¸¦åˆ—æ•°
  constexpr std::size_t N = 10;

  // ã‚¹ãƒ¬ãƒƒãƒ‰æ•°ã§ãƒãƒªã‚¢ã‚’åˆæœŸåŒ–
  // åŒæ™‚ã«ã€åŒæœŸãƒã‚¤ãƒ³ãƒˆã§å†é–‹ç›´å‰ã«å®Ÿè¡Œã™ã‚‹å®Œäº†é–¢æ•°ã‚’æŒ‡å®š
  std::barrier sync{N, [] {
    // å‡¦ç†å¯¾è±¡ãƒ‡ãƒ¼ã‚¿ã®æ›´æ–°ãªã©ã€åŒæœŸãŒå¿…è¦ãªã‚·ãƒ³ã‚°ãƒ«ã‚¹ãƒ¬ãƒƒãƒ‰å‡¦ç†
    ...
  }};

  for ([[maybe_unused]] auto i : std::views::iota(0, N)) {
    std::thread{[&sync]{
      fork_proc(sync);
    }}.detach();
  }
}
```

ãƒãƒªã‚¢ã§åŒæœŸã™ã‚‹ï¼ˆãƒãƒªã‚¢ãƒ•ã‚§ãƒ¼ã‚ºã«å‚åŠ ã™ã‚‹ï¼‰å„ã‚¹ãƒ¬ãƒƒãƒ‰ã¯`.arive()`ï¼ˆåŒæœŸãƒã‚¤ãƒ³ãƒˆåˆ°é”é€šçŸ¥ï¼‰ã¨`.wait()`ï¼ˆä»–ã‚¹ãƒ¬ãƒƒãƒ‰ã®å¾…æ©Ÿï¼‰ã‚‚ã—ãã¯`.arrive_and_wait()`ï¼ˆ`.arive()`ã¨`.wait()`ã®è¤‡åˆæ“ä½œï¼‰ã‚’å‘¼ã³å‡ºã™ã“ã¨ã§åŒæœŸã‚’å–ã‚Šã¾ã™ã€‚å®Œäº†é–¢æ•°ã¯ã€ãƒãƒªã‚¢ãƒ•ã‚§ãƒ¼ã‚ºã«å‚åŠ ã—ã¦ã„ã‚‹ã‚¹ãƒ¬ãƒƒãƒ‰ãŒå…¨ã¦åŒæœŸãƒã‚¤ãƒ³ãƒˆã«åˆ°é”ã—ãŸå¾Œã€ãƒãƒªã‚¢ãƒ•ã‚§ãƒ¼ã‚ºã«å‚åŠ ã™ã‚‹ã‚¹ãƒ¬ãƒƒãƒ‰ã®ã„ãšã‚Œã‹ã§å®Ÿè¡Œã•ã‚Œã€ãã®å®Ÿè¡ŒãŒå®Œäº†ã—ãŸå¾Œã§æ¬¡ã®ãƒãƒªã‚¢ãƒ•ã‚§ãƒ¼ã‚ºãŒé–‹å§‹ã•ã‚Œã¾ã™ã€‚

ç¾åœ¨ã®æ¨™æº–ã®è¦å®šã§ã¯ã€ã“ã®å®Œäº†é–¢æ•°ãŒã©ã®ã‚¹ãƒ¬ãƒƒãƒ‰ã§å®Ÿè¡Œã•ã‚Œã‚‹ã‹ã¯å®Ÿè£…ã®è‡ªç”±ã¨ã—ã¦æ˜ç¢ºã«è¦å®šã—ã¦ã„ã¾ã›ã‚“ã€‚ã—ã‹ã—ã€`std::barrier`ã®ä¿è¨¼ã‚„ãƒ¡ãƒ³ãƒé–¢æ•°ã®è¦å®šãªã©ã®ç›¸äº’ä½œç”¨ã‹ã‚‰ç”Ÿã˜ã‚‹æ„å›³ã—ãªã„åˆ¶ç´„ã«ã‚ˆã£ã¦ã€å®Ÿè³ªçš„ã«åŒæœŸãƒã‚¤ãƒ³ãƒˆã«æœ€å¾Œã«åˆ°é”ã—ãŸã‚¹ãƒ¬ãƒƒãƒ‰ã§å®Ÿè¡Œã™ã‚‹å®Ÿè£…ã—ã‹å–ã‚Œãªã„ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚

ãã‚Œã«ã‚ˆã£ã¦ã€ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ï¼ˆGPUãªã©ï¼‰ãŒæŒã£ã¦ã„ã‚‹ã‚¹ãƒ¬ãƒƒãƒ‰åŒæœŸæ©Ÿæ§‹ã‚„ãã®ã‚µãƒãƒ¼ãƒˆæ©Ÿæ§‹ã‚’ç”¨ã„ã¦`std::barrier`ã‚’åŠ¹ç‡çš„ã«å®Ÿè£…ã™ã‚‹ã“ã¨ãŒå¦¨ã’ã‚‰ã‚Œã¦ãŠã‚Šã€ã“ã®ææ¡ˆã¯ã€ã“ã®æ„å›³ã—ãªã„åˆ¶é™ã‚’å–ã‚Šæ‰•ã†ã“ã¨ã§ã€`std::barrier`ã®åŠ¹ç‡çš„ãªå®Ÿè£…ã‚’è¨±å¯ã—ã‚ˆã†ã¨ã™ã‚‹ã‚‚ã®ã§ã™ã€‚

ã“ã‚Œã«ã‚ˆã‚‹å¤‰æ›´ã¯è¦å®šã®å¤‰æ›´ã®ã¿ã§ã™ãŒã€ä¿è¨¼å†…å®¹ã‚„æ„å‘³è«–ãŒå¤‰åŒ–ã™ã‚‹ãŸã‚ã«ç ´å£Šçš„å¤‰æ›´ã¨ãªã‚Šã¾ã™ã€‚ææ¡ˆã§ã¯ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã«ã‚ˆã‚‹åŠ¹ç‡åŒ–ã«æœ€ã‚‚é©ã—ãŸé¸æŠè‚¢ã‚’é¸ã‚“ã§ã„ã¾ã™ãŒã€ã“ã®æŒ¯ã‚‹èˆã„ã¯`std::barrier`ææ¡ˆè€…ã‚„ãã‚Œã‚’æ—¢ã«ä½¿ç”¨ã—ã¦ã„ã‚‹äººã«ã‚ˆã£ã¦ã‚‚æ„å¤–ãªã‚‚ã®ã§ã‚ã‚Šã€ã¾ã å…¥ã£ãŸã°ã‹ã‚Šãªã“ã¨ã‚‚ã‚ã‚Šå½±éŸ¿ã‚’å—ã‘ã‚‹ã‚³ãƒ¼ãƒ‰ã¯å­˜åœ¨ã—ãªã„ã¨æ€ãˆã‚‹ãŸã‚ç ´å£Šçš„å¤‰æ›´ã®å½±éŸ¿ã¯ãƒ¡ãƒªãƒƒãƒˆã‚’ä¸Šå›ã‚‹ã¨ä¸»å¼µã—ã¦ã„ã¾ã™ã€‚ãã—ã¦ã€ã“ã®å¤‰æ›´ã‚’C++20ã«å¯¾ã™ã‚‹DRã¨ã™ã‚‹ã“ã¨ã‚’ææ¡ˆã—ã¦ã„ã¾ã™ã€‚

- [`std::barrier` - cpprefjp](https://cpprefjp.github.io/reference/barrier/barrier.html)
- [Forkâ€“join model - Wikipedia](https://en.wikipedia.org/wiki/Forkâ€“join_model)
- [P2588 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/1246)

#### è©³ç´°

ã“ã®æ„å›³ã—ãªã„åˆ¶é™ã¨ã„ã†ã®ã¯ã€`.arive()`ï¼ˆåŒæœŸãƒã‚¤ãƒ³ãƒˆåˆ°é”é€šçŸ¥ï¼‰ã¨`.wait()`ï¼ˆä»–ã‚¹ãƒ¬ãƒƒãƒ‰ã®å¾…æ©Ÿï¼‰ã®æ“ä½œãŒåˆ†ã‹ã‚Œã¦ã„ã‚‹äº‹ã«åŸå› ãŒã‚ã‚Šã¾ã™ã€‚`.arive()`ã¯æˆ»ã‚Šå€¤ã¨ã—ã¦`arrival_token`ã¨ã„ã†ã‚‚ã®ã‚’è¿”ã—ã€`.wait()`ã¯ãã®`arrival_token`ã‚’å—ã‘å–ã£ã¦å¾…æ©Ÿã—ã¾ã™ã€‚ã™ãªã‚ã¡ã€ã“ã®2ã¤ã®æ“ä½œãŒåˆ†å‰²ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã«ã‚ˆã£ã¦ã€ãƒãƒªã‚¢åŒæœŸãƒã‚¤ãƒ³ãƒˆé€šçŸ¥ã¨ãƒãƒªã‚¢åŒæœŸã®å¾…æ©Ÿã‚’ç•°ãªã‚‹ã‚¹ãƒ¬ãƒƒãƒ‰ã§è¡Œã†ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚

ã“ã‚Œã«ã‚ˆã£ã¦ã€æ£æ„çš„ã§ã¯ã‚ã‚Šã¾ã™ãŒã€æ¬¡ã®ã‚ˆã†ãªã“ã¨ãŒèµ·ã“ã‚Šã¾ã™ã€‚

```cpp
// å‚åŠ ã‚¹ãƒ¬ãƒƒãƒ‰æ•°2ã§åˆæœŸåŒ–ã€å®Œäº†é–¢æ•°cfã‚’ã‚»ãƒƒãƒˆ
std::barrier<CF> b{2, cf};

// arrival_tokenã®å‹
using tok_t = decltype(b.arrive());

void thread() {
    new tok_t(b.arrive());      // A: åŒæœŸãƒã‚¤ãƒ³ãƒˆåˆ°é”ã‚’é€šçŸ¥ã™ã‚‹ãŒã€è¿”ã•ã‚Œã‚‹ãƒˆãƒ¼ã‚¯ãƒ³ã‚’æ¶ˆè²»ã—ãªã„ï¼ˆãƒªãƒ¼ã‚¯ã—ã¦ã‚‹
}                               // B: ã‚¹ãƒ¬ãƒƒãƒ‰çµ‚äº†

// C: 2ã¤ã®ã‚¹ãƒ¬ãƒƒãƒ‰ã‚’èµ·å‹•
auto t0 = std::thread(thread);
auto t1 = std::thread(thread);

// D: 2ã¤ã®ã‚¹ãƒ¬ãƒƒãƒ‰çµ‚äº†å¾…æ©Ÿ
t0.join();                      
t1.join();

// E: å®Œäº†é–¢æ•°cfãŒå‘¼ã°ã‚Œã¦ã„ã‚‹ã“ã¨ãŒä¿è¨¼ã•ã‚Œã‚‹
```

ã“ã®ä¾‹ã§ã¯ã€2ã¤ã®`arrival_token`ãŒæœ‰åŠ¹ã§ã‚ã‚Šç¶šã‘ãªãŒã‚‰`std::barrier`ã®`.wait()`ã¯å‘¼ã°ã‚Œã¦ãŠã‚‰ãšã€ãƒãƒªã‚¢ãƒ•ã‚§ãƒ¼ã‚ºã«å‚åŠ ã—ã¦ã„ã‚‹ï¼ˆå®Œäº†ã‚’å¾…æ©Ÿã—ã¦ã„ã‚‹ï¼‰ã‚¹ãƒ¬ãƒƒãƒ‰ãŒå±…ãªããªã£ã¦ã„ã¾ã™ã€‚ç¾åœ¨ã®æ¨™æº–ã®è¦å®šã¯ã“ã®æ™‚ã§ã‚‚å®Œäº†é–¢æ•°ãŒå‘¼ã°ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ä¿è¨¼ã—ã¦ãŠã‚Šã€ãã‚Œã‚’ã“ã®å ´åˆã§ã‚‚ç¢ºå®Ÿã«é”æˆã™ã‚‹ãŸã‚ã«ã¯ã€æœ€å¾Œã«`.arive()`ã—ãŸã‚¹ãƒ¬ãƒƒãƒ‰ã§å®Œäº†é–¢æ•°ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã„ã†å®Ÿè£…ã‚’å–ã‚‰ã–ã‚‹ã‚’å¾—ã¾ã›ã‚“ã€‚

ã“ã‚Œã¯ã€ç¾åœ¨ã®`std::barrier`ä»•æ§˜ãŒä¿è¨¼ã—ã¦ã„ã‚‹æ¬¡ã®2ã¤ã®ã“ã¨ã®ç›¸äº’ä½œç”¨ã®çµæœã§ã™

- ã‚¹ãƒ¬ãƒƒãƒ‰ãŒ`.wait()`ã‚’å‘¼ã³å‡ºã•ãªãã¦ã‚‚ã„ã„è‡ªç”±
- å®Œäº†é–¢æ•°ï¼ˆãƒãƒªã‚¢ãƒ•ã‚§ãƒ¼ã‚ºå®Œäº†ã‚¹ãƒ†ãƒƒãƒ—ï¼‰ãŒ**ã„ã¤**ã€**ã©ã“ã§**å®Ÿè¡Œã•ã‚Œã‚‹ã‹ã®ä¿è¨¼

æ•°ç™¾ä¸‡ã®HWã‚¹ãƒ¬ãƒƒãƒ‰ã‚’æŒã¤ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã§ã¯ã€ã‚ãšã‹ãªä¸¦åˆ—åŒ–ã•ã‚Œã¦ã„ãªã„å‡¦ç†ã«ã‚ˆã£ã¦å¤§ããä¸¦åˆ—åŒ–ã®ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ãŒåˆ¶é™ã•ã‚Œã¾ã™ï¼ˆã‚¢ãƒ ãƒ€ãƒ¼ãƒ«ã®æ³•å‰‡ï¼‰ã€‚`.arive()`ã¨`.wait()`ã‚’åˆ†å‰²ã—ã¦ã„ã‚‹APIã¯ãã®å½±éŸ¿ã¯å‰Šæ¸›ã™ã‚‹ãŸã‚ã®ã‚‚ã®ã§ã€å®Œäº†é–¢æ•°ãŒå®Ÿè¡Œã™ã‚‹ã‚·ãƒ³ã‚°ãƒ«ã‚¹ãƒ¬ãƒƒãƒ‰å‡¦ç†ã¨`std::barrier`ã®åŒæœŸã®å‡¦ç†ã‚’ä¸¦åˆ—åŒ–ã—ã€åŒæœŸã‚’ã•ã‚‰ã«åˆ¥ã®ã‚¹ãƒ¬ãƒƒãƒ‰ã‚„HWã‚¢ã‚¯ã‚»ãƒ©ãƒ¬ãƒ¼ã‚¿ï¼ˆNVIDIA GPUã¯ãã‚Œã‚’æŒã£ã¦ã„ã‚‹ï¼‰ã§å®Ÿè¡Œã™ã‚‹ã“ã¨ã§åŒæœŸã®ã‚³ã‚¹ãƒˆã‚’å®Œäº†é–¢æ•°ã®å‡¦ç†ã®èƒŒå¾Œã«éš ã—ã¦ã—ã¾ã†ã“ã¨ã‚’ç›®çš„ã¨ã™ã‚‹ã‚‚ã®ã§ã™ã€‚ã—ã‹ã—ã€ä¸Šè¨˜ã®å•é¡Œã«ã‚ˆã£ã¦ãã®ã‚ˆã†ãªå®Ÿè£…ã¯ç¾åœ¨å¯èƒ½ã¨ãªã£ã¦ã„ã¾ã›ã‚“ãƒ»ãƒ»ãƒ»

ã“ã®ææ¡ˆã§ã¯ã€`std::barrier`ã®ä¿è¨¼ã‚’æ¬¡ã®ã‚ˆã†ã«å¤‰æ›´ã™ã‚‹ã“ã¨ã§ã“ã®å•é¡Œã®è§£æ±ºã‚’å›³ã‚Šã¾ã™

- ç´¯ç©æ€§ã¯ä»¥ä¸‹ã®2ã¤ã®ã¨ã“ã‚ã§ç¢ºç«‹ã•ã‚Œã‚‹
    - ãƒãƒªã‚¢ãƒ•ã‚§ãƒ¼ã‚ºã«å‚åŠ ã—ã¦ã„ã‚‹ã™ã¹ã¦ã®ã‚¹ãƒ¬ãƒƒãƒ‰ã¨å®Œäº†é–¢æ•°ã‚’å®Ÿè¡Œã™ã‚‹ã‚¹ãƒ¬ãƒƒãƒ‰ã®é–“
    - å®Œäº†é–¢æ•°ã‚’å®Ÿè¡Œã™ã‚‹ã‚¹ãƒ¬ãƒƒãƒ‰ã¨`.wait()`ã®å‘¼ã³å‡ºã—ã«ã‚ˆã£ã¦ãƒãƒªã‚¢ãƒ•ã‚§ãƒ¼ã‚ºå®Œäº†ã‚’å¾…æ©Ÿã—ã¦ã„ã‚‹ã™ã¹ã¦ã®ã‚¹ãƒ¬ãƒƒãƒ‰ã®é–“
- ãƒãƒªã‚¢ãƒ•ã‚§ãƒ¼ã‚ºå®Œäº†ã‚’å¾…æ©Ÿã™ã‚‹ã‚¹ãƒ¬ãƒƒãƒ‰ãŒç„¡ã„å ´åˆã€å®Œäº†é–¢æ•°ãŒå®Ÿè¡Œã•ã‚Œã‚‹ã‹ã¯æœªè¦å®š
- å®Œäº†é–¢æ•°ã¯ãƒãƒªã‚¢ãƒ•ã‚§ãƒ¼ã‚ºã«å‚åŠ ã—ã¦ã„ã‚‹ï¼ˆå‚åŠ ã—ã¦ã„ãŸï¼‰ã‚¹ãƒ¬ãƒƒãƒ‰ã®ä¸€ã¤ã€ã‚‚ã—ãã¯æ–°ã—ã„ã‚¹ãƒ¬ãƒƒãƒ‰ã§å®Ÿè¡Œã•ã‚Œã‚‹
- å®Œäº†é–¢æ•°ã‚’å®Ÿè¡Œã™ã‚‹ã‚¹ãƒ¬ãƒƒãƒ‰ã¯æœªè¦å®šã§ã‚ã‚Šã€æ—¢å­˜ã®ãƒãƒªã‚¢ã¨ç„¡é–¢ä¿‚ãªã‚¹ãƒ¬ãƒƒãƒ‰ã‚‚å«ã¾ã‚Œã€ãã®ã‚¹ãƒ¬ãƒƒãƒ‰ã®ä»»æ„ã®æ™‚ç‚¹ã§ã‚³ãƒ¼ãƒ‰ãŒå®Ÿè¡Œã•ã‚Œã‚‹

ç´¯ç©æ€§ï¼ˆ*Cumulativity*ï¼‰ã¨ã¯ã€2ã¤ã®å‡¦ç†ï¼ˆA, Bï¼‰ã‚’æ¥ç¶šã™ã‚‹ã‚ã‚‹åœ°ç‚¹ï¼ˆA -> C -> Bã®Cï¼‰ã«ã¤ã„ã¦ã€AãŒCã«åˆ°é”ã—ã¦ã‹ã‚‰BãŒå®Ÿè¡Œã•ã‚Œã‚‹ã¨ã„ã†é †åºé–¢ä¿‚ã‚’è¨€ã†ã‚‚ã®ã§ã€ç‰¹ã«ãƒãƒ«ãƒã‚¹ãƒ¬ãƒƒãƒ‰å‡¦ç†ã®å ´åˆã«ã¯Aã®ä¸¦è¡Œå‡¦ç†ãŒã™ã¹ã¦çµ‚ã‚ã£ã¦ã‹ã‚‰ï¼ˆå„ã‚¹ãƒ¬ãƒƒãƒ‰ã®å®Œäº†ãŒCã«ç´¯ç©ã—ã¦ã‹ã‚‰ï¼‰ã€Bã®å‡¦ç†é–‹å§‹ãŒå®Ÿè¡Œï¼ˆç´¯ç©ï¼‰ã•ã‚Œã‚‹ã“ã¨ã‚’è¡¨ç¾ã—ã¦ã„ã¾ã™

ã“ã‚Œã‚‰ã®å¤‰æ›´ã«ã‚ˆã£ã¦ã€å®Œäº†é–¢æ•°ã®å®Ÿè¡Œã¨`std::barrier`ã«ã‚ˆã‚‹åŒæœŸã¯ç´¯ç©æ€§ãŒåˆ‡ã‚Šé›¢ã•ã‚Œã¦ãŠã‚Šã€ãã‚Œã«ã‚ˆã£ã¦ãã®2ã¤ã®å‡¦ç†ã‚’ä¸¦åˆ—ã«å®Ÿè¡Œã™ã‚‹ã“ã¨ãŒè¨±å¯ã•ã‚Œã€ãªãŠã‹ã¤ãã‚Œã‚‰ã®å‡¦ç†ã‚’å®Ÿè¡Œã™ã‚‹ã‚¹ãƒ¬ãƒƒãƒ‰ã¯ãƒãƒªã‚¢ãƒ•ã‚§ãƒ¼ã‚ºã¨ç„¡é–¢ä¿‚ãªã‚¹ãƒ¬ãƒƒãƒ‰ã§ã‚‚è‰¯ããªã‚Šã€åŒæœŸãƒã‚¤ãƒ³ãƒˆã§ãƒãƒªã‚¢ãƒ•ã‚§ãƒ¼ã‚ºã«å‚åŠ ã—ã¦ã„ã‚‹ã‚¹ãƒ¬ãƒƒãƒ‰ãŒç„¡ã„å ´åˆã«ã¯å¿…ãšã—ã‚‚å®Œäº†é–¢æ•°ã‚’å®Ÿè¡Œã—ãªãã¦ã‚‚è‰¯ã„ï¼ˆã—ã¦ã‚‚ã„ã„ï¼‰ã€ã¨ãªã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

### [P2589R0 `static operator[]`](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2589r0.pdf)

æ·»ãˆå­—æ¼”ç®—å­ï¼ˆ`operator[]`ï¼‰ã‚’é™çš„ãƒ¡ãƒ³ãƒé–¢æ•°ã¨ã—ã¦å®šç¾©ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ææ¡ˆã€‚

ã“ã®ææ¡ˆã®ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã¯[P1169](https://wg21.link/p1169)ã¨åŒã˜ã§ã™ã€‚

- [P1169R1 `static operator()` - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´04æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/05/14/214016#P1169R1-static-operator)

`operator[]`ã¯[P2128](https://wg21.link/p2128)ã«ã‚ˆã£ã¦ä»»æ„å€‹æ•°ã®å¼•æ•°ã‚’å–ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ãŠã‚Šã€`operator()`ã¨ã®é•ã„ã¯ã»ã¼æ¼”ç®—å­ã®è¦‹ãŸç›®ã ã‘ã«ãªã£ã¦ã„ã¾ã™ã€‚å¾“ã£ã¦ã€`operator[]`ã‚’`operator()`ã¨åŒç­‰ã«æ‰±ãˆã‚‹ã‚ˆã†ã«ã™ã‚‹ã“ã¨ã§æ§‹æ–‡ã¨æ„å‘³è«–ã®ä¸€è²«æ€§ãŒå‘ä¸Šã—ã€ä½¿ã„ã‚„ã™ã•ã‚„æ•™ãˆã‚„ã™ã•ã®å‘ä¸Šã«ã¤ãªãŒã‚Šã¾ã™ã€‚

`operator()`ã§ã¯ãƒ©ãƒ ãƒ€å¼ã§ã‚ã£ãŸã‚Š`std::function`ã®æ§˜ãªã‚³ãƒ¼ãƒ«ãƒ©ãƒƒãƒ‘ã‚’è€ƒæ…®ã—ãªã‘ã‚Œã°ãªã‚‰ãªã‹ã£ãŸã‚Šã—ã¾ã™ãŒã€`operator[]`ã®å ´åˆã¯ãã‚Œã‚‰ã®è€ƒæ…®ã¯å¿…è¦ãªã„ãŸã‚ã€å¤‰æ›´ã¯ã¨ã¦ã‚‚å°ã•ãæœ€å°é™ã§æ¸ˆã¿ã¾ã™ã€‚

- [P2589 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/1247)

### [P2590R0 Explicit lifetime management](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2590r0.pdf)

ãƒ¡ãƒ¢ãƒªé ˜åŸŸä¸Šã«ã‚ã‚‹ãƒˆãƒªãƒ“ã‚¢ãƒ«ãªå‹ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ç”Ÿå­˜æœŸé–“ã‚’é–‹å§‹ã•ã›ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªæ©Ÿèƒ½ã®ææ¡ˆã€‚

ä¾‹ãˆã°ã€æ¬¡ã®ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ã¯C++17ã¾ã§ã¯å³å¯†ã«ã¯æœªå®šç¾©å‹•ä½œã§ã—ãŸ

```cpp
struct X { int a, b; };

X* make_x() {
  X *p = (X*)malloc(sizeof(struct X));
  p->a = 1; // UB
  p->b = 2; // UB
  return p;
}
```

ãªãœãªã‚‰ã€`malloc`ã§ç¢ºä¿ã—ãŸãƒ¡ãƒ¢ãƒªé ˜åŸŸã«ã¯`X`ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒæ§‹ç¯‰ã•ã‚Œã¦ãŠã‚‰ãšã€ãã®ãŸã‚`X`ã®ãƒã‚¤ãƒ³ã‚¿ã¯ç”Ÿå­˜æœŸé–“å¤–ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å‚ç…§ã—ã¦ã„ã‚‹ä¸æ­£ãªãƒã‚¤ãƒ³ã‚¿ã§ã‚ã‚Šã€ãã‚Œã‚’ä»‹ã—ãŸã‚¢ã‚¯ã‚»ã‚¹ã¯æœªå®šç¾©å‹•ä½œã¨ãªã‚‹ãŸã‚ã§ã™ã€‚

ã¨ã¯ã„ãˆã“ã®ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ã¯Cã§ã¯å•é¡Œãªãã€ã¾ãŸC++ã«ãŠã„ã¦ã‚‚ä½ãƒ¬ãƒ™ãƒ«ãªæ“ä½œã§ã‚ˆãä½¿ç”¨ã•ã‚Œã‚‹ã‚‚ã®ã§ã‚ã‚Šã¾ã™ã€‚ãã®ãŸã‚C++20ã§ã¯ã€ç‰¹å®šã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªé–¢æ•°ã«ã‚ˆã£ã¦æ“ä½œã•ã‚Œã‚‹ãƒ¡ãƒ¢ãƒªé ˜åŸŸä¸Šã«ãƒˆãƒªãƒ“ã‚¢ãƒ«ãªå‹ï¼ˆ*implicit-lifetime type*ï¼‰ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æš—é»™çš„ã«æ§‹ç¯‰ã™ã‚‹ã‚ˆã†ã«ã•ã‚Œã¾ã—ãŸã€‚ãã®å¯¾è±¡ã¯`malloc`ã‚„`memcpy`ã€`std::bit_cast`ãªã©ã§ã™ã€‚

ã“ã‚Œä»¥å¤–ã«ã‚‚å®Ÿè£…å®šç¾©ãªã‚‚ã®ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ãŒã€ãƒ¦ãƒ¼ã‚¶ãƒ¼å®šç¾©ã®é–¢æ•°ã¯ãã“ã«ã¯å«ã¾ã‚Œã¾ã›ã‚“ã€‚ä¾‹ãˆã°ã€ãƒ¡ãƒ¢ãƒªãƒ—ãƒ¼ãƒ«ã‹ã‚‰ãƒ¡ãƒ¢ãƒªã‚’å‰²ã‚Šå½“ã¦ã‚‹é–¢æ•°ãªã©ã€ãƒ©ã‚¤ãƒ–ãƒ©ãƒªä½œæˆè€…ãŒC++ã‚³ãƒ¼ãƒ‰ã§è¨˜è¿°ã™ã‚‹ãƒ¡ãƒ¢ãƒªå‰²ã‚Šå½“ã¦é–¢æ•°ã‚’ä¸Šè¨˜ä¾‹ã®`malloc`ã®ä»£ã‚ã‚Šã«ä½¿ãˆã°ã€ç›¸å¤‰ã‚ã‚‰ãšæœªå®šç¾©å‹•ä½œã§ã™ã€‚

P0593R6ã§ã¯ã€ã“ã®å ´åˆã«æ˜ç¤ºçš„ã«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ç”Ÿå­˜æœŸé–“ã‚’ä»‹ã™ã‚‹ãŸã‚ã®é–¢æ•°`std::start_lifetime_as<T>`ã‚’ææ¡ˆã¨ã—ã¦å«ã‚“ã§ã„ã¾ã—ãŸã€‚ãã‚Œã¯LEWGã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’é€šéã—ã¦ã„ã¾ã—ãŸãŒã€LWGã®æ™‚é–“ä¸è¶³ã®ãŸã‚ã«C++20ã«ã¯é–“ã«åˆã„ã¾ã›ã‚“ã§ã—ãŸã€‚

ã“ã®ææ¡ˆã¯ã€ãã®`std::start_lifetime_as<T>`ã‚’æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«å«ã‚ã‚‹ãŸã‚ã®ã‚‚ã®ã§ã™ã€‚

```cpp
struct X { int a, b; };

X* make_x() {
  // pã®é ˜åŸŸä¸Šã§Xã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ç”Ÿå­˜æœŸé–“ã‚’é–‹å§‹
  X *p = (std::start_lifetime_as<X>(malloc(sizeof(struct X)));
  p->a = 1; // ok
  p->b = 2; // ok
  return p;
}
```

ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå¼•æ•°ã®`T`ã¯*implicit-lifetime type*ã¨å‘¼ã°ã‚Œã‚‹å‹ï¼ˆãƒˆãƒªãƒ“ã‚¢ãƒ«å‹ã‚„é›†æˆä½“å‹ãªã©ï¼‰ã§ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚

`std::start_lifetime_as<T>(p)`ã¯å˜ä¸€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ãŸã‚ã®ã‚‚ã®ã§ã™ãŒã€ã“ã®ã‚ˆã†ãªå ´åˆå®Ÿéš›ã«ã¯é…åˆ—ã‚’ä½œæˆã™ã‚‹ã“ã¨ã®æ–¹ãŒå¤šã„ã¨æ€ã‚ã‚Œã¾ã™ã€‚ãã®ãŸã‚ã«ã€`std::start_lifetime_as_array<T>(p, n)`ã‚‚ææ¡ˆã•ã‚Œã¦ã„ã¾ã™ã€‚

```cpp
void process(Stream *stream) {
  unique_ptr<char[]> buffer = stream->read();

  // stream->read()å†…ã§ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæ§‹ç¯‰ã—ã¦ã„ãŸã¨ã—ã¦ã‚‚ã€ã©ã¡ã‚‰ã‹ã®ãƒ‘ã‚¹ã¯æœªå®šç¾©å‹•ä½œã¨ãªã‚‹
  if (buffer[0] == FOO) {
    process_foo(reinterpret_cast<Foo*>(buffer.get())); // UB
  } else {
    process_bar(reinterpret_cast<Bar*>(buffer.get())); // UB
  }

  // start_lifetime_as_arrayã‚’ä½¿ç”¨ã™ã‚Œã°æœªå®šç¾©å‹•ä½œã‚’å›é¿ã§ãã‚‹
  // ãŸã ã—ã€è¦ç´ æ•°nãŒå¿…è¦
  if (buffer[0] == FOO) {
    process_foo(std::start_lifetime_as_array<Foo>(buffer.get(), n)); // ok
  } else {
    process_bar(std::start_lifetime_as_array<Bar>(buffer.get(), n)); // ok
  }
}
```

`std::start_lifetime_as_array<T>(p, n)`ã¯`p`ã®é ˜åŸŸã§`T[n]`ã®é…åˆ—ã®ç”Ÿå­˜æœŸé–“ã‚’é–‹å§‹ã™ã‚‹ã‚‚ã®ã§ã™ã€‚

ã“ã‚Œã‚‰ã®é–¢æ•°ã¯å®Ÿéš›ã«ã¯ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‚’å‘¼ã³å‡ºã—ãŸã‚Šã™ã‚‹ã‚‚ã®ã§ã¯ãªãã€ã‚ãã¾ã§æœªå®šç¾©å‹•ä½œå›é¿ã®ãŸã‚ã«ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã«ã‚¢ãƒ”ãƒ¼ãƒ«ã™ã‚‹ã‚‚ã®ã§ã™ã€‚å¾“ã£ã¦ã€å®Ÿéš›ã«ã¯ä½•ã‚‚ã—ãªã„é–¢æ•°ã¨ãªã‚‹ã§ã—ã‚‡ã†ã€‚

- [P0593R6 Implicit creation of objects for low-level object manipulation](https://wg21.link/p0593r6)
- [ãƒˆãƒªãƒ“ã‚¢ãƒ«ãªå‹ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æš—é»™çš„ã«æ§‹ç¯‰ã™ã‚‹ - C++20 ã‚³ã‚¢è¨€èªæ©Ÿèƒ½](https://github.com/onihusube/books/blob/master/cpp20_lang/document.md)
- [P2590 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/1248)

### [P2591R0 Concatenation of strings and string views](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2591r0.html)

`std::string`ã¨`std::string_view`ã‚’`+`ã§çµåˆã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ææ¡ˆã€‚

ç¾åœ¨ã¯ã€`std::string`ã¨`std::string_view`ã®é–“ã§`+`ã‚’ä½¿ç”¨ã§ãã¾ã›ã‚“ã€‚

```cpp
std::string calculate(std::string_view prefix)
{
  return prefix + get_string(); // ERROR
}
```

ã—ã‹ã—ã€ã“ã®ã“ã¨ã¯`std::string`ã®ä»–ã®APIã¨ä¸€è²«ã—ã¦ã„ã¾ã›ã‚“ã€‚`.apend()`ãªã©ã®ä»–ã®APIã¯ã€ã™ã§ã«`string_view`ï¼ˆã‚‚å«ã‚ãŸviewå‹ï¼‰ã‚’å—ã‘å–ã‚Œã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹ãŸã‚ã§ã™ã€‚

```cpp
std::string str;
std::string view;

// Appending
str + view;              // ERROR
str + std::string(view); // OK, but inefficient
str + view.data();       // Compiles, but BUG!

std::string copy = str;
copy += view;            // OK, but tedious to write (requires explicit copy)
copy.append(view);       // OK, ditto


// Prepending
view + str;              // ERROR

std::string copy = str;
str.insert(0, view);     // OK, but tedious and inefficient
```

ã¾ãŸã€ã“ã®ã“ã¨ã¯ç”Ÿã®æ–‡å­—åˆ—ã¨ã‚‚ä¸€è²«ã—ã¦ã„ã¾ã›ã‚“ã€‚

```cpp
std::string str;

str + "hello";    // OK
str + "hello"sv;  // ERROR

"hello"   + str;  // OK
"hello"sv + str;  // ERROR
```

ã“ã®ææ¡ˆã¯`std::string`ã¨`std::string_view`ã®é–“ã®`operator+`ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã§ã“ã‚Œã‚‰ã®å•é¡Œã‚’è§£æ±ºã—ã‚ˆã†ã¨ã™ã‚‹ã‚‚ã®ã§ã™ã€‚

ãã‚‚ãã‚‚ã€C++17ã§ã“ã®`+`ãŒä»–ã®ã‚‚ã®ã¨ä¸€ç·’ã«å°å…¥ã•ã‚Œãªã‹ã£ãŸç†ç”±ã¯ã€`std::string`ã¨`std::string_view`ã®é–“ã®`operator+`ãŒãã‚Œã‚’é…å»¶ã—ã¦çµåˆã™ã‚‹ã‚ˆã†ãªä¸­é–“ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’è¿”ã™ã€string builderçš„ãªå®Ÿè£…ã‚’å°†æ¥çš„ã«è€ƒæ…®ã™ã‚‹ã‚‚ã®ã ã£ãŸã‚ˆã†ã§ã™ï¼ˆC++17æ™‚ç‚¹ã§ã€LLVMã®`string_view`ã«è¿‘ã„ã‚¯ãƒ©ã‚¹ã®å®Ÿè£…ãŒãã†ãªã£ã¦ã„ãŸæ§˜å­ï¼‰ã€‚ã—ã‹ã—ã€ãã®ã‚ˆã†ãªææ¡ˆã¯ç¾åœ¨ã§ã‚‚ãªãã€ãã‚Œã‚’è€ƒæ…®ã—ãŸã¨ã—ã¦ã‚‚ç”Ÿã®æ–‡å­—åˆ—ã¨ã®é–“ã§ãã†ãªã£ã¦ã„ãªã„ã®ã§`+`ã‚’é¸æŠã™ã‚‹ã®ã¯é–“é•ã£ã¦ã„ã‚‹ã€ã¨ç­†è€…ã®æ–¹ã¯è¿°ã¹ã¦ã„ã¾ã™ã€‚

- [P2591 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/1249)

### [P2592R0 Hashing support for `std::chrono` value classes](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2592r0.html)

[`<chrono>`](https://cpprefjp.github.io/reference/chrono.html)ã®æ™‚é–“ã‚„æ—¥ä»˜ã‚’è¡¨ã™å‹ã«å¯¾ã—ã¦ãƒãƒƒã‚·ãƒ¥ã‚µãƒãƒ¼ãƒˆã‚’è¿½åŠ ã™ã‚‹ææ¡ˆã€‚

`<chrono>`ã«å®šç¾©ã•ã‚Œã¦ã„ã‚‹æ™‚é–“ã‚„æ—¥ä»˜ã‚’è¡¨ã™å‹ã«ã¯ãƒãƒƒã‚·ãƒ¥ã‚µãƒãƒ¼ãƒˆãŒãªãã€ãã®ãŸã‚ãã‚Œã‚‰ã®å‹ã‚’éé †åºé€£æƒ³ã‚³ãƒ³ãƒ†ãƒŠã®ã‚­ãƒ¼ã¨ã—ã¦ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã›ã‚“ã€‚

```cpp
std::unordered_set<std::chrono::milliseconds> unique_measurements;
```

ãŸã ã—ã€ãã‚Œã‚‰ã®å‹ã®å®Ÿä½“ã¯æ•´æ•°å‹ç­‰ã®æ•°å€¤å‹ã§ã‚ã‚‹ãŸã‚ã€ãƒãƒƒã‚·ãƒ¥ã‚’å®šç¾©ã™ã‚‹ã“ã¨ã¯å®¹æ˜“ã§ã™ã€‚

```cpp
truct duration_hash
{
    template <class Rep, class Period>
    constexpr auto operator()(const std::chrono::duration<Rep, Period> &d) const
        noexcept(/* ... */)
    {
        std::hash<Rep> h;
        return h(d.count());  // 
    }
};

std::unordered_set<std::chrono::milliseconds, duration_hash> unique_measurements; // OK
```

`<chrono>`ã«ã‚ã‚‹ã»ã¨ã‚“ã©ã®å‹ã¯åŒæ§˜ã«ã—ã¦ãƒãƒƒã‚·ãƒ¥ã‚µãƒãƒ¼ãƒˆã‚’ç”¨æ„ã«è¿½åŠ ã§ãã‚‹ãŸã‚ã€æ¨™æº–ãŒã“ã‚Œã‚’æä¾›ã—ãªã„ç†ç”±ã¯ãªã„ã¨è€ƒãˆã‚‰ã‚Œã‚‹ãŸã‚ã€ã“ã®ã‚ˆã†ãªã‚µãƒãƒ¼ãƒˆã‚’è¿½åŠ ã—ã‚ˆã†ã¨ã™ã‚‹ææ¡ˆã§ã™ã€‚

ææ¡ˆã®å¯¾è±¡ã¯æ¬¡ã®ã‚‚ã®ã§ã™

- `std::chrono::duration`
- `std::chrono::time_point`
- `std::chrono::day`
- `std::chrono::month`
- `std::chrono::year`
- `std::chrono::weekday`
- `std::chrono::weekday_indexed`
- `std::chrono::weekday_last`
- `std::chrono::month_day`
- `std::chrono::month_day_last`
- `std::chrono::month_weekday`
- `std::chrono::month_weekday_last`
- `std::chrono::year_month`
- `std::chrono::year_month_day`
- `std::chrono::year_month_day_last`
- `std::chrono::year_month_weekday`
- `std::chrono::year_month_weekday_last`
- `std::chrono::zoned_time`
- `std::chrono::leap_second`

`time_zone`ã¨`time_zone_link`ã¯[`ragular`](https://cpprefjp.github.io/reference/concepts/regular.html)ã§ã¯ãªã„ï¼ˆã‚³ãƒ”ãƒ¼ã§ããªã„ï¼‰ã“ã¨ã‹ã‚‰ã€ãƒãƒƒã‚·ãƒ¥ã‚µãƒãƒ¼ãƒˆã¯å¿…è¦ãªã„ã¨è€ƒãˆã‚‰ã‚Œã‚‹ãŸã‚é™¤å¤–ã•ã‚Œã¦ã„ã¾ã™ã€‚

- [P2592 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/1250)

### [P2593R0 Allowing static_assert(false)](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2593r0.html)

`static_assert(false)`ãŒãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®å®Ÿä½“åŒ–å‰ã«ã‚¨ãƒ©ãƒ¼ã¨ãªã‚‰ãªã„ã‚ˆã†ã«ã™ã‚‹ææ¡ˆã€‚

`if constexpr`ã®`false`ã¨ãªã‚‹ãƒ–ãƒ­ãƒƒã‚¯ã§`static_assert(false)`ã‚’ä½¿ç”¨ã—ãŸã¨ãã€æ„å›³é€šã‚Šã«ãªã‚‰ãšå¸¸ã«ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã«ãªã£ã¦ã—ã¾ã†å•é¡Œã¯C++17ã§å°å…¥ã•ã‚ŒãŸå½“åˆã‹ã‚‰å‰²ã¨æœ‰åãªç½ ã§ã—ãŸã€‚

```cpp
template<typename T>
void f(T t) {
  if constexpr (sizeof(T) == 4) {
    ...
  } else {
    static_assert(false); // å¸¸ã«ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼
  }
}
```

ã“ã‚Œã¯ã€constexpr ifæ–‡ãŒæ¡ä»¶ä»˜ãã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå®Ÿä½“åŒ–æŠ‘åˆ¶ã‚’è¡Œã†æ©Ÿèƒ½ã§ã‚ã‚Šã€`static_assert(false)`ã¯ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«ä¾å­˜ã—ã¦ã„ãªã„ã“ã¨ã‹ã‚‰ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå®Ÿä½“åŒ–å‰ã«è©•ä¾¡ã•ã‚Œã¦ã—ã¾ã†ãŸã‚ã«èµ·ãã¦ã„ã‚‹ã“ã¨ã§ã™ã€‚

ã‚ˆã‚Šæ­£ç¢ºã«ã¯ã€ã“ã‚Œã¯è¨ºæ–­ä¸è¦ã®ill-formedã¨ãªã‚Šã»ã¼æœªå®šç¾©å‹•ä½œã¨ãªã£ã¦ã„ã¾ã™ãŒã€ç¾åœ¨ã«ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã¯ã©ã‚Œã‚‚ã“ã‚Œã‚’ã‚¨ãƒ©ãƒ¼ã¨ã—ã¦è¨ºæ–­ã—ã¦ã„ã¾ã™ã€‚

[N4861 [temp.res]/8](https://timsong-cpp.github.io/cppwp/n4861/temp.res#8)ã‚ˆã‚Š

> The validity of a template may be checked prior to any instantiation. [ Note: Knowing which names are type names allows the syntax of every template to be checked in this way. â€” end note ] The program is ill-formed, no diagnostic required, if:
> - no valid specialization can be generated for a template or a substatement of a constexpr if statement within a template and the template is not instantiated, or
> - ...

ã“ã“ã§ã¯ã€ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–å‰ã«ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®æœ‰åŠ¹æ€§ã‚’ãƒã‚§ãƒƒã‚¯ã§ãã‚‹ã“ã¨ã‚’è¦å®šã—ã¦ã„ã¦ï¼ˆã„ã‚ã‚†ã‚‹two-phase name lookupã®ä¸€æ®µéšç›®ã«è¡Œã‚ã‚Œã‚‹ï¼‰ã€ãã®ä¸­ã§ã‚‚æ¤œå‡ºã•ã‚ŒãŸã‚‰è¨ºæ–­ä¸è¦ã®ill-formedã¨ãªã‚‹äº‹é …ã‚’åˆ—æŒ™ã—ã¦ã„ã¾ã™ã€‚ãã®ä¸€ç•ªæœ€åˆã®é …ç›®ãŒ

> ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¾ãŸã¯ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå†…constexpr ifã®ã‚µãƒ–ã‚¹ãƒ†ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆã«å¯¾ã—ã¦æœ‰åŠ¹ãªç‰¹æ®ŠåŒ–ã‚’ç”Ÿæˆã§ããªã„äº‹ãŒåˆ†ã‹ã£ã¦ã„ã¦ã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãŒã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–ã•ã‚Œãªã„å ´åˆï¼ˆã¯è¨ºæ–­ä¸è¦ã®ill-formedï¼‰

ã¨ã‚ã‚Šã€`static_assert(false)`ã¯ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿`T`ã¨ç„¡é–¢ä¿‚ã«`static_assert`ãŒç™ºå‹•ã™ã‚‹äº‹ãŒã‚ã‹ã‚‹ãŸã‚ã€ã¾ã•ã«ã“ã‚Œã«è©²å½“ã—ã¦ã„ã¾ã™ã€‚

ã“ã®å•é¡Œã®å›é¿ç­–ã«ã¯ä¾‹ãˆã°

- `static_assert(sizeof(T) == 0);`
- `static_assert(sizeof(T*) == 0);`
- `[]<bool flag=false>(){ static_assert(flag); }();`
- `static_assert([]{return false;}());`

ãªã©ãŒçŸ¥ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚ã—ã‹ã—ã€å…ˆã»ã©ã®è¦å®šã«ç…§ã‚‰ã›ã°ã©ã‚Œã‚‚è¨ºæ–­ä¸è¦ã®ill-formedã‹ã‚‰è„±ã—åˆ‡ã‚Œã¦ãŠã‚‰ãšï¼ˆå°‘ãªãã¨ã‚‚ä¸Š3ã¤ã¯ï¼‰ã€ã“ã‚Œã‚‰ã®ãƒ¯ãƒ¼ã‚¯ã‚¢ãƒ©ã‚¦ãƒ³ãƒ‰ã¯ãŸã¾ãŸã¾å‹•ã„ã¦ã„ã‚‹ã«éãã¾ã›ã‚“ã€‚

ã“ã®å•é¡Œã®ã‚ˆãçŸ¥ã‚‰ã‚Œã¦ã„ã‚‹æ­£ã—ã„å›é¿ç­–ã¯ã€*always false*ã¨å‘¼ã°ã‚Œã‚‹ã‚¤ãƒ‡ã‚£ã‚ªãƒ ã§ã™ã€‚

```cpp
template<typename T>
inline constepxr bool always_false = false;

template<typename T>
void f(T t) {
  if constexpr (sizeof(T) == 4) {
    ...
  } else {
    static_assert(always_false<T>); // Tã®ã‚µã‚¤ã‚ºãŒ4ä»¥å¤–ã®æ™‚ã«ã ã‘ã‚¨ãƒ©ãƒ¼ 
  }
}
```

ã“ã‚Œã‚’æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ã„ã‚Œã‚‹ææ¡ˆã‚‚ã‚ã‚Šã¾ã—ãŸãŒã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒå€¤ã§ã‚ã‚‹å ´åˆã«ãã®ã¾ã¾ä½¿ç”¨ã§ããšã€`static_assert<T>`ã®ã‚ˆã†ãªã‚‚ã®ã¯è¦šãˆã‚‹ã¹ãã“ã¨ã‚’å¢—ã‚„ã—ã¦æœ¬è³ªçš„ãªå•é¡Œã«è“‹ã‚’ã—ã¦ã„ã‚‹ã«éãã¾ã›ã‚“ã€‚

ã“ã®ææ¡ˆã§ã¯ã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä¸­ã®`static_assert(false)`ãŒãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–æ™‚ã«ã®ã¿åŠ¹æœã‚’æŒã¤ã‚ˆã†ã«ã™ã‚‹ã“ã¨ã§ã€ã“ã®å•é¡Œã®è§£æ±ºã‚’å›³ã‚‹ã‚‚ã®ã§ã™ã€‚

- [constexpr ifã®è½ã¨ã—ç©´ - æœ¬ã®è™«](https://cpplover.blogspot.com/2017/05/constexpr-if.html)
- [C++17 constexpr if æ–‡ - cpprefjp](https://cpprefjp.github.io/lang/cpp17/if_constexpr.html)
- [constexpr if and static_assert - stack overflow](https://stackoverflow.com/questions/38304847/constexpr-if-and-static-assert)
- [P2593 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/1251)
