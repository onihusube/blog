# ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2022å¹´01æœˆï¼‰

æ–‡æ›¸ã®ä¸€è¦§

- [JTC1/SC22/WG21 - Papers 2022 mailing2022-01](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/#mailing2022-01)

å…¨éƒ¨ã§52æœ¬ã‚ã‚Šã¾ã™ï¼ˆSG22ã®WG14ã‹ã‚‰ã®ã‚‚ã®ã¯é™¤ãã¾ã™ï¼‰ã€‚

[:contents]

### [P0447R18 Introduction of std::hive to the standard library](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p0447r18.html)

è¦ç´ ãŒå‰Šé™¤ã•ã‚Œãªã„é™ã‚Šãã®ãƒ¡ãƒ¢ãƒªä½ç½®ãŒå®‰å®šãªã‚³ãƒ³ãƒ†ãƒŠã§ã‚ã‚‹`std::hive`ï¼ˆæ—§å`std::colony`ï¼‰ã®ææ¡ˆã€‚

ä»¥å‰ã®è¨˜äº‹ã‚’å‚ç…§

- [P0447R11 Introduction of std::colony to the standard library - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2020å¹´12æœˆï¼‰](https://onihusube.hatenablog.com/entry/2020/12/06/015108#P0447R11-Introduction-of-stdcolony-to-the-standard-library)
- [P0447R12 Introduction of std::colony to the standard library - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´01æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/02/11/153333#P0447R12-Introduction-of-stdcolony-to-the-standard-library)
- [P0447R13 Introduction of std::colony to the standard library - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´04æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/05/14/214016#P0447R13-Introduction-of-stdcolony-to-the-standard-library)
- [P0447R14 Introduction of std::colony to the standard library - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´05æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/06/13/165215#P0447R14-Introduction-of-stdcolony-to-the-standard-library)
- [P0447R15 Introduction of std::hive to the standard library - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´06æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/07/12/182757#P0447R15-Introduction-of-stdhive-to-the-standard-library)
- [P0447R16 Introduction of std::hive to the standard library - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´09æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/10/03/193523#P0447R16-Introduction-of-stdhive-to-the-standard-library)
- [P0447R17 Introduction of std::hive to the standard library - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´11æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/12/11/220126#P0447R17-Introduction-of-stdhive-to-the-standard-library)

ã“ã®ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã§ã®å¤‰æ›´ã¯ã€`<=>`ã‚’è¿½åŠ ã—ãŸã“ã¨ã€æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªå†…å¤–ã®ã‚³ãƒ³ãƒ†ãƒŠé¸æŠã‚¬ã‚¤ãƒ‰ã‚’apendixã«è¿½åŠ ã—ãŸã“ã¨ã€ææ¡ˆã™ã‚‹æ–‡è¨€ã®æ”¹å–„ã€ãªã©ã§ã™ã€‚

- [P0447 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/328)

### [P0792R6 function_ref: a non-owning reference to a Callable](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p0792r6.html)

*Callable*ã‚’æ‰€æœ‰ã—ãªã„`std::function`ã§ã‚ã‚‹`std::function_ref`ã®ææ¡ˆã€‚

C++ã«ãŠã„ã¦é«˜éšé–¢æ•°ï¼ˆé–¢æ•°ã‚’å—ã‘å–ã‚‹/è¿”ã™é–¢æ•°ï¼‰ã‚’æ›¸ãã¨ãã«ã€æ—¢å­˜ã®é–¢æ•°ï¼ˆ*Callable*ï¼‰ã‚’å‚ç…§ã—ãŸã„ã“ã¨ãŒã‚ˆãã‚ã‚Šã¾ã™ã€‚ã—ã‹ã—ã€ç¾åœ¨ã®æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ã¯ãã®ãŸã‚ã«ä½¿ç”¨ã§ãã‚‹åŠ¹æœçš„ãªã‚‚ã®ãŒã‚ã‚Šã¾ã›ã‚“ã€‚æ—¢å­˜ã®ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã«ã¯ä»¥ä¸‹ã®3ã¤ãŒã‚ã‚Šã¾ã™

- é–¢æ•°ãƒã‚¤ãƒ³ã‚¿
    - å‚ç…§ã™ã‚‹ã‚‚ã®ãŒã‚¹ãƒ†ãƒ¼ãƒˆãƒ¬ã‚¹ã§ã‚ã‚‹å ´åˆã«ã®ã¿ä½¿ç”¨å¯èƒ½ã€‚ã¾ãŸã€ãƒ¡ãƒ³ãƒé–¢æ•°ãƒã‚¤ãƒ³ã‚¿ã‚„ãƒ¡ãƒ³ãƒå¤‰æ•°ãƒã‚¤ãƒ³ã‚¿ã‚’å‡¦ç†ã—ãªã‘ã‚Œã°ãªã‚‰ãªã„
- `std::function`
    - æ ¼ç´ã™ã‚‹*Callable*ã‚’æ‰€æœ‰ã™ã‚‹ãŸã‚ã€æ„å›³ã—ãªã„ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰ãŒç™ºç”Ÿã—ã†ã‚‹
    - æ‰€æœ‰æ¨©ãŒå¿…è¦ãªã„å ´åˆã«ã¯ä¸é©æ ¼
- ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
    - ç‰¹å®šã®ã‚·ã‚°ãƒãƒãƒ£ã«åˆ¶ç´„ã™ã‚‹ã®ãŒé›£ã—ãã€ãƒ˜ãƒƒãƒ€ã«ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã‹ãªã‘ã‚Œã°ãªã‚‰ãªã„

ç‰¹å®šã®*Callablel*ã‚’å˜ã«å‚ç…§ã—ãŸã„ã ã‘ã®å ´åˆã«æœ€é©ãªã‚‚ã®ãŒç¾åœ¨ã®C++ã«ã¯æ¬ ã‘ã¦ãŠã‚Šã€`std::function_ref`ã¯ãã®ã‚®ãƒ£ãƒƒãƒ—ã‚’åŸ‹ã‚ã‚‹ãŸã‚ã®ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã§ã™ã€‚`std::function_ref`ã¯ãã®åå‰ã®é€šã‚Šå—ã‘å–ã£ãŸ*Callable*ã‚’æ‰€æœ‰ã›ãšå‚ç…§ã—ã€ãªãŠã‹ã¤`std::function`ã¨ã»ã¼åŒç­‰ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã¨å‹æ¶ˆå»ã‚’æä¾›ã—ã¾ã™ã€‚

`std::function_ref`ã¯ç‰¹ã«ã€é–¢æ•°ã®å¼•æ•°ã§ä»»æ„ã®*Callablel*ã‚’å—ã‘å–ã‚ŠãŸã„å ´åˆã«æœ‰ç”¨ã§ã™ã€‚ä¾‹ãˆã°æ¬¡ã®ã‚ˆã†ãªé–¢æ•°ã‚’æ›¸ãã¨ã

```cpp
struct payload { /* ... */ };

// timeså›ã¾ã§actionã‚’ç¹°ã‚Šè¿”ã™
// actionãŒæœ‰åŠ¹ãªpayloadã‚’è¿”ã—ãŸã¨ãã¯ãã“ã§çµ‚äº†
// ãã‚Œä»¥å¤–ã®å ´åˆã¯nulloptã‚’è¿”ã™
std::optional<payload> retry(std::size_t times, /* ????? */ action);
```

ã“ã®`/* ????? */`ã®éƒ¨åˆ†ã«ã¯å‰è¿°ã®ã„ãã¤ã‹ã®æ›¸ãæ–¹ãŒã‚ã‚Šã¾ã™

```cpp
// é–¢æ•°ãƒã‚¤ãƒ³ã‚¿
// åˆ©ç‚¹ : å®Ÿè£…ãŒç°¡å˜ã§è¿½åŠ ã®åˆ¶ç´„ãŒå¿…è¦ãªãã€ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰ã‚‚æœ€å°ï¼ˆã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã¯å‘¼ã³å‡ºã—ã‚’ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³åŒ–ã§ãã‚‹ã¯ãšï¼‰
// æ¬ ç‚¹ : ã‚¹ãƒ†ãƒ¼ãƒˆãƒ•ãƒ«ãªCallableã‚’æ‰±ãˆãªã„
std::optional<payload> retry(std::size_t times,
                             std::optional<payload>(*action)())
{
    /* ... */
}

// std::function
// åˆ©ç‚¹ : ã‚¹ãƒ†ãƒ¼ãƒˆãƒ•ãƒ«ã‚‚å«ã‚ã¦ã€æŒ‡å®šã—ãŸã‚·ã‚°ãƒãƒãƒ£ã«åˆã†ä»»æ„ã®Callableã‚’å—ã‘å–ã‚Œã‚‹
// æ¬ ç‚¹ : æ‰€æœ‰æ¨©ãŒä¸æ˜ç­ï¼ˆreference_wrapperã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ï¼‰ã€å¤§ããªã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰ã‚’ç™ºç”Ÿã•ã›ã†ã‚‹ï¼ˆå‹•çš„å‰²ã‚Šå½“ã¦ã€åˆ†å²ã€ä¾‹å¤–ã€ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³åŒ–å›°é›£ï¼‰
std::optional<payload> retry(std::size_t times,
                             std::function<std::optional<payload>()> action)
{
    /* ... */
}

// ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
// åˆ©ç‚¹ : ã‚¹ãƒ†ãƒ¼ãƒˆãƒ•ãƒ«ã‚‚å«ã‚ã¦ä»»æ„ã®Callableã‚’å—ã‘å–ã‚Œã‚‹ã€ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰ãŒãªã„
// æ¬ ç‚¹ : å®Ÿè£…ã—ã¥ã‚‰ãèª­ã¿ã¥ã‚‰ã„ï¼ˆenable_ifã‚„is_invocableã«ã‚ˆã‚‹åˆ¶ç´„å‘¨ã‚Šï¼‰ã€ãƒ˜ãƒƒãƒ€ã«æ›¸ã‹ã–ã‚‹ã‚’å¾—ãªã„
template <typename F>
auto retry(std::size_t times, F&& action)
    -> std::enable_if_t<std::is_invocable_r_v<std::optional<payload>, F&&>,
                        std::optional<payload>>
{
    /* ... */
}
```

`std::function_ref`ã¯ã“ã‚Œã‚‰ã®ã„ã„ã¨ã“å–ã‚Šã‚’ã™ã‚‹ã‚‚ã®ã§ã€æ¬¡ã®ã‚ˆã†ã«ä½¿ç”¨ã§ãã¾ã™

```cpp
// function_ref
template <typename F>
auto retry(std::size_t times, std::function_ref<std::optional<payload>()> action)
{
    /* ... */
}
```

ä½¿ç”¨æ„Ÿã¯`std::fucntion`ã¨åŒæ§˜ã§ã€`std::fucntion`ã®ãƒ¡ãƒªãƒƒãƒˆã‚’ãã®ã¾ã¾äº«å—ã§ãã€æ‰€æœ‰æ¨©ã¯æ˜ç¢ºï¼ˆæ‰€æœ‰ã—ã¦ã„ãªã„ï¼‰ã§ã™ã€‚ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰ã«é–¢ã—ã¦ã¯é–¢æ•°ãƒã‚¤ãƒ³ã‚¿ã¨ã»ã¼åŒç­‰ã§ã‚ã‚Šã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã«ã‚ˆã‚‹ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³å±•é–‹ã‚’æœŸå¾…ã§ãã¾ã™ã€‚ã¾ãŸã€`std::function_ref`ã¯ç©ºã®çŠ¶æ…‹ãŒãªã„ãŸã‚å‘¼ã³å‡ºã—æ™‚ã®nullãƒã‚§ãƒƒã‚¯ãŒä¸è¦ã§ã€`target_type`ãªã©ã®RTTIãŒå¿…è¦ãªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚‚æŒã¡ã¾ã›ã‚“ã€‚

ä»–ã«ã‚‚ã€`std::function_ref`ã¯`std::move_only_function`ã¨åŒæ§˜ã«`const, noexcept`ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```cpp
struct A {
  int operator()() const noexcept { return 1; }
  int operator()() { return 2;}
} obj;

function_ref<int() const noexcept> fr = obj;
fr();  // 1
```

ã“ã®ææ¡ˆã¯ã€C++23ã‚’ç›®æŒ‡ã—ã¦LWGã§ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸­ã§ã™ã€‚

- [P0792 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/866)

### [P1018R14 C++ Language Evolution status ğŸ¦  pandemic edition ğŸ¦  2021/09â€“2022/01](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p1018r14.html)

2021å¹´9æœˆã‹ã‚‰2022å¹´1æœˆã®é–“ã®EWGã®æ´»å‹•ã«ã¤ã„ã¦ã®ãƒ¬ãƒãƒ¼ãƒˆã€‚

2022å¹´1æœˆæœ«ã¾ã§ã«EWGã®é›»å­æŠ•ç¥¨ã«ã‹ã‘ã‚‰ã‚Œã‚‹ææ¡ˆã¯ä»¥ä¸‹ã®ã‚‚ã®ã§ã™

- [P2280R3 Using unknown references in constant expressions](https://wg21.link/P2280R3)
- [P2468R1 The Equality Operator You Are Looking For](https://wg21.link/P2468R1)
- [P2327R1 De-deprecating volatile compound operations](https://wg21.link/P2327R1)
- [P2266R2 Simpler implicit move](https://wg21.link/P2266R2)
- [P1467R8 Extended floating-point types and standard names](https://wg21.link/P1467R8)
- [P2350R2 constexpr class](https://wg21.link/P2350R2)
- [P1169R3 static operator()](https://wg21.link/P1169R3)
- [P1774R5 Portable assumptions](https://wg21.link/P1774R5)
- [P1494R2 Partial program correctness](https://wg21.link/P1494R2)
- [P2448R0 Relaxing some constexpr restrictions](https://wg21.link/P2448R0)
- [P2437R0 Support for #warning](https://wg21.link/P2437R0)
- [P2324R1 Labels at the end of compound statements (C compatibility)](https://wg21.link/P2324R1)
- [P2071R1 Named universal character escapes](https://wg21.link/P2071R1)
- [P2295R5 Support for UTF-8 as a portable source file encoding](https://wg21.link/P2295R5)
- [P2290R2 Delimited escape sequences](https://wg21.link/P2290R2)
- [P2362R3 Remove non-encodable wide character literals and multicharacter wide character literals](https://wg21.link/P2362R3)
- [P2348R2 Whitespaces Wording Revamp](https://wg21.link/P2348R2)

ã“ã‚Œã‚‰ã®ææ¡ˆã¯å…¨ã¦ã€C++23ã«å°å…¥ã™ã‚‹ã¹ãEWGã‹ã‚‰CWGã¸è»¢é€ã™ã‚‹ãŸã‚ã®æœ€çµ‚ç¢ºèªã®æŠ•ç¥¨ã«ã‹ã‘ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚ç‰¹ã«ã€æœ€åˆã®3ã¤ã¨P2448R0ã¯DRã§ã™ã€‚

C++23ã«å‘ã‘ãŸEWGã®æ´»å‹•ã¨ã—ã¦ã¯ã‚ã¨ã¯ã‚³ã‚¢è¨€èªIssueã®è§£æ±ºã®ã¿ã§ã€ãŠãã‚‰ãã“ã‚Œä»¥ä¸Šã‚³ã‚¢è¨€èªã«å¯¾ã™ã‚‹æ©Ÿèƒ½è¿½åŠ ãŒC++23ã«å¯¾ã—ã¦è¡Œã‚ã‚Œã‚‹ã“ã¨ã¯ãªã•ãã†ã§ã™ã€‚

### [P1083R4 Move `resource_adaptor` from Library TS to the C++ WP](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p1083r4.pdf)

`pmr::resource_adaptor`ã‚’Library Foundermental TSã‹ã‚‰ãƒ¯ãƒ¼ã‚­ãƒ³ã‚°ãƒ‰ãƒ©ãƒ•ãƒˆã¸ç§»å‹•ã™ã‚‹ææ¡ˆã€‚

`pmr::resource_adaptor`ã¯ä»»æ„ã®ã‚¢ãƒ­ã‚±ãƒ¼ã‚¿ã‚’`memory_resource`ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã«ã‚¢ãƒ€ãƒ—ãƒˆã•ã›ã‚‹ã‚‚ã®ã§ã™ã€‚ã“ã‚Œã«ã‚ˆã£ã¦ã€`std::pmr::polymorphic_allocator`ã§ä»»æ„ã®ã‚¢ãƒ­ã‚±ãƒ¼ã‚¿ã‚’ã‚ˆã‚Šç°¡æ˜“ã«åˆ©ç”¨ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

```cpp
template<typename Alloc>
class resource_adaptor_impl : std::memory_resource {
  // ...
};

template<typename Alloc>
using resource_adaptor = resource_adaptor_impl<typename std::allocator_traits<Allocator>::template rebind_alloc<char>>;
```

ã“ã®`resource_adaptor_impl`ã®ã‚ˆã†ãªã‚‚ã®ã¯èª¬æ˜å°‚ç”¨ã®ã‚¯ãƒ©ã‚¹ã¨ã—ã¦æŒ‡å®šã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€å®Ÿéš›ã«ã¯ã“ã®åå‰ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ã“ã‚Œã¯ä¾‹ãˆã°æ¬¡ã®ã‚ˆã†ã«ä½¿ç”¨ã—ã¾ã™

```cpp
// ã‚ªãƒ¬ã‚ªãƒ¬ã‚¢ãƒ­ã‚±ãƒ¼ã‚¿
class my_allocator;

int main() {
  std::pmr::resource_adaptor<my_allocator> mr{};

  std::pmr::polymorphic_allocator<> pmralloc{&mr};
}
```

`pmr::resource_adaptor`ãŒãªã„å ´åˆã€`my_allocator`ã‚’ãƒ©ãƒƒãƒ—ã—ã¦`memory_resource`ã«ã‚¢ãƒ€ãƒ—ãƒˆã™ã‚‹ã‚ˆã†ãªã‚¯ãƒ©ã‚¹ã‚’æ‰‹æ›¸ãã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã—ãŸã€‚

`polymorphic_allocator`ã¯ã‚¢ãƒ­ã‚±ãƒ¼ã‚¿ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºãƒã‚¤ãƒ³ãƒˆã¨ã—ã¦ä¾¿åˆ©ã§ã‚ã‚‹ãŸã‚ã€ä»Šå¾Œãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§ã‚¢ãƒ­ã‚±ãƒ¼ã‚¿ã‚’å–ã‚‹ä»£ã‚ã‚Šã«åˆ©ç”¨ã•ã‚Œã‚‹ã“ã¨ãŒå¢—ãˆã¦ã„ãã¨æ€ã‚ã‚Œã¾ã™ã€‚ãã“ã«ã‚¢ãƒ­ã‚±ãƒ¼ã‚¿ã‚’æ¸¡ã™ã«ã¯ã€ãã‚ŒãŒã™ã§ã«`polymorphic_allocator`ãã®ã‚‚ã®ã§ã‚ã‚‹ã‹`memory_resource`ã«ã‚¢ãƒ€ãƒ—ãƒˆã•ã‚Œã¦ã„ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚`resource_adaptor`ã¯å¾Œè€…ã®ã‚±ãƒ¼ã‚¹ã®ãƒ˜ãƒ«ãƒ‘ã¨ãªã‚‹ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã§ã‚ã‚Šã€ã“ã‚ŒãŒã‚ã‚‹ã“ã¨ã§`polymorphic_allocator`ã®åˆ©ç”¨ãŒã‚ˆã‚Šä¿ƒé€²ã•ã‚Œã¾ã™ã€‚ã¾ãŸã€`resource_adaptor`ã¯é•·æœŸé–“Library Foundermental TSã«å­˜åœ¨ã—ã¦ãŠã‚Šã€ãã®å®Ÿè£…ã¯å®‰å®šã—ã¦ã„ã‚‹ãŸã‚ãƒ¯ãƒ¼ã‚­ãƒ³ã‚°ãƒ‰ãƒ©ãƒ•ãƒˆã¸ã®å°å…¥ã®æ•·å±…ã‚‚ä½ã„ã¨æ€ã‚ã‚Œã‚‹ã¾ã™ã€‚ã“ã®ææ¡ˆã¯ã“ã‚Œã‚‰ã®ç†ç”±ã‹ã‚‰`resource_adaptor`ã®æ¨™æº–å…¥ã‚Šã‚’ç›®æŒ‡ã™ã‚‚ã®ã§ã™ã€‚

ãŸã ã—ã€ã“ã®ææ¡ˆã§ã¯ã‚¢ãƒ©ã‚¤ãƒ¡ãƒ³ãƒˆæŒ‡å®šå‘¨ã‚Šã®è¨­è¨ˆãŒå°‘ã—å¤‰æ›´ã•ã‚Œã¦ã„ã¾ã™ã€‚`memory_resource`ã®`.do_allocate()`ï¼ˆãŠã‚ˆã³`.do_deallocate()`ï¼‰ã§ã¯ç¬¬äºŒå¼•æ•°ã«ã‚¢ãƒ©ã‚¤ãƒ¡ãƒ³ãƒˆæŒ‡å®šã‚’å—ã‘å–ã‚Šã¾ã™ã€‚`resource_adaptor`ãŒãƒ©ãƒƒãƒ—ã—ã¦ã„ã‚‹ã‚¢ãƒ­ã‚±ãƒ¼ã‚¿ã«æ­£ã—ãã“ã®ã‚¢ãƒ©ã‚¤ãƒ¡ãƒ³ãƒˆæŒ‡å®šã‚’ä¼é”ã™ã‚‹ã«ã¯ã€ãã®ã‚¢ãƒ©ã‚¤ãƒ¡ãƒ³ãƒˆæŒ‡å®šã«æ²¿ã£ãŸã‚¢ãƒ©ã‚¤ãƒ¡ãƒ³ãƒˆã‚’æŒã¤åˆ¥ã®å‹`U`ã§å…ƒã®ã‚¢ãƒ­ã‚±ãƒ¼ã‚¿ã‚’`rebind`ã™ã‚‹ã“ã¨ã§ã™ãŒã€`.do_allocate()`ã«ã¯ã‚¢ãƒ©ã‚¤ãƒ¡ãƒ³ãƒˆæŒ‡å®šãŒå®Ÿè¡Œæ™‚ã«æ¸¡ã£ã¦ãã¾ã™ã€‚ãã®ãŸã‚ã€`resource_adaptor::do_allocate()`ã§ã¯ã€å¯èƒ½ãªã‚¢ãƒ©ã‚¤ãƒ¡ãƒ³ãƒˆæŒ‡å®šæ¯ã«ãã®ã‚¢ãƒ©ã‚¤ãƒ¡ãƒ³ãƒˆã‚’æŒã¤å‹ã‚’æ±‚ã‚ã¦ãã‚Œã«ã‚ˆã£ã¦å…ƒã®ã‚¢ãƒ­ã‚±ãƒ¼ã‚¿ã‚’`rebind`ã—ã¦ã‹ã‚‰`allocate()`ã‚’å‘¼ã³å‡ºã—ã¾ã™ã€‚

```cpp
template<typename Alloc>
class resource_adaptor_impl : std::memory_resource {
  Alloc m_alloc;

  // ...

  void* do_allocate(std::size_t bytes, std::size_t alignment) override {
    // alignmentã¯2ã®ã¹ãä¹—ã®å€¤ã ã‘ã‚’è€ƒæ…®ã™ã‚‹
    // alignmentã®å€¤æ¯ã«é©åˆ‡ãªå‹Uã§rebindã™ã‚‹
    switch(alignment) {
      case 4 :
        {
          using U = int32_t;
          const std::size_t n = (bytes + sizeof(U) - 1) / sizeof(U);
          return allocator_traits<Alloc>::template rebind_traits<int32_t>::allocate(m_alloc, n);
        }
      case 8 :
        {
          using U = int64_t;
          const std::size_t n = (bytes + sizeof(U) - 1) / sizeof(U);
          return allocator_traits<Alloc>::template rebind_traits<int32_t>::allocate(m_alloc, n);
        }
      case 16 :
        ...
      case 32 :
        ...
      case 64 :
      ...
      default : assert(false);
    };

  }
};
```

ãŠãŠã‚ˆãã“ã®ã‚ˆã†ãªå®Ÿè£…ãŒè¡Œã‚ã‚Œã‚‹ã‚‰ã—ã„ã§ã™ãŒã€ã“ã®å®Ÿè£…ã¯æ˜ã‚‰ã‹ã«ä½™è¨ˆãªãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®å®Ÿä½“åŒ–ã‚’ä¼´ã†ãŸã‚ã€ã‚³ãƒ¼ãƒ‰ã®è‚¥å¤§åŒ–ã‚„ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚é–“ã®å¢—å¤§ã¨ã„ã£ãŸå•é¡ŒãŒã‚ã‚Šã¾ã™ã€‚ãã‚Œã¯ã©ã†ã—ã‚ˆã†ã‚‚ãªã„ã§ã™ãŒã€ã›ã‚ã¦è€ƒæ…®ã™ã¹ãæ•°ã‚’æ¸›ã‚‰ã™ãŸã‚ã«ã“ã®ææ¡ˆã®`resource_adaptor`ã¯ç¬¬äºŒãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå¼•æ•°ã«ã“ã®ã‚¢ãƒ©ã‚¤ãƒ¡ãƒ³ãƒˆã®æœ€å¤§å€¤ã‚’æŒ‡å®šã§ãã‚‹ã‚ˆã†ã«ä¿®æ­£ã•ã‚Œã¦ã„ã¾ã™ã€‚ã“ã®æœ€å¤§å€¤ã«ã‚ˆã£ã¦ä¸Šè¨˜ã®ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ç”Ÿæˆã®ä¸Šé™ã‚’æŒ‡å®šã—ã¾ã™ã€‚

ã¾ãŸã€ä¸Šè¨˜ä¾‹ã§ã¯`U`ã«`int32_t`ãªã©ã‚’ä½¿ç”¨ã—ã¾ã—ãŸãŒã“ã‚Œã‚‚é©åˆ‡ã§ã¯ãªãã€ã“ã®æŒ‡å®šã—ãŸã‚¢ãƒ©ã‚¤ãƒ¡ãƒ³ãƒˆã‚’æŒã¤`U`ã‚’æ±‚ã‚ã‚‹ãŸã‚ã®`aligned_raw_storage<Align, Size>`ï¼ˆã‚ªãƒ¼ãƒãƒ¼ã‚¢ãƒ©ã‚¤ãƒ³ã•ã‚Œã‚‹å ´åˆã®`U`ã‚’æ±‚ã‚ã‚‹ï¼‰ã€`aligned_type<Align>`ï¼ˆã‚ªãƒ¼ãƒãƒ¼ã‚¢ãƒ©ã‚¤ãƒ³ã•ã‚Œãªã„å ´åˆã«`U`ã¨ã—ã¦é©åˆ‡ãªã‚¹ã‚«ãƒ©å‹ã‚’æŒ‡å®šã™ã‚‹ï¼‰ã€`aligned_object_storage<T>`ï¼ˆ`T`ã«ã¤ã„ã¦`aligned_raw_storage<sizeof(T), sizeof(T)>`ã‚’æ±‚ã‚ã€ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã¨ã—ã¦åˆ©ç”¨ã—ã‚„ã™ãã™ã‚‹ãƒ˜ãƒ«ãƒ‘å‹ï¼‰ã¨ã„ã£ãŸå‹ç‰¹æ€§ã‚¯ãƒ©ã‚¹ã‚‚åŒæ™‚ã«ææ¡ˆã•ã‚Œã¦ã„ã¾ã™

- [`std::experimental::pmr::resource_adaptor` - cppreference](https://en.cppreference.com/w/cpp/experimental/resource_adaptor)
- [P1083 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/33)

### [P1206R7 Conversions from ranges to containers](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p1206r7.pdf)

ä»»æ„ã®*range*ã‚’ã‚³ãƒ³ãƒ†ãƒŠã¸å¤‰æ›/å®Ÿä½“åŒ–ã•ã›ã‚‹ãŸã‚ã®`std::ranges::to`ã®ææ¡ˆã€‚

- [P1206R2 ranges::to: A function to convert any range to a container - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2020å¹´10æœˆï¼‰](https://onihusube.hatenablog.com/entry/2020/11/02/221657#P1206R2-rangesto-A-function-to-convert-any-range-to-a-container)
- [P1206R3 ranges::to: A function to convert any range to a container - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2020å¹´11æœˆï¼‰](https://onihusube.hatenablog.com/entry/2020/12/06/015108#P1206R3-rangesto-A-function-to-convert-any-range-to-a-container)
- [P1206R4 Conversions from ranges to containers - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´07æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/08/14/213339#P1206R4-Conversions-from-ranges-to-containers)
- [P1206R6 Conversions from ranges to containers - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´08æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/09/03/230045#P1206R6-Conversions-from-ranges-to-containers)

ã“ã®ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã§ã®å¤‰æ›´ã¯ã€å…¨ä½“çš„ãªtypoã®ä¿®æ­£ã¨ã€ææ¡ˆã™ã‚‹æ–‡è¨€ã®æ”¹å–„ã§ã™ã€‚

ã“ã®ææ¡ˆã¯ã€2æœˆã®å…¨ä½“ä¼šè­°ã«æŠ•ç¥¨ã«ã‹ã‘ã‚‰ã‚Œã€C++23WDå…¥ã‚ŠãŒæ±ºå®šã—ã¦ã„ã¾ã™ã€‚

- [P1206 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/145)

### [P1240R2 Scalable Reflection](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p1240r2.pdf)

å€¤ãƒ™ãƒ¼ã‚¹ã®é™çš„ãƒªãƒ•ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã®ææ¡ˆã€‚

ç¾åœ¨ã®Reflection TSï¼ˆN4766ï¼‰ã¯ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ¡ã‚¿ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã¨ã®è¦ªå’Œæ€§ã‚’æ„è­˜ã—ã¦å‹ãƒ™ãƒ¼ã‚¹ã®ãƒªãƒ•ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã¨ã—ã¦è¨­è¨ˆã•ã‚Œã¦ã„ã¾ã™ã€‚ãã“ã§ã¯ã€`reflexpr()`ã¨ã„ã†æ§‹æ–‡ã«ã‚ˆã£ã¦ä»»æ„ã®ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‹ã‚‰ãƒ¡ã‚¿æƒ…å ±ã‚’å‹ã¨ã—ã¦æŠ½å‡ºã—ã€å„ç¨®traitså‹ã«ã‚ˆã£ã¦ãã‚Œã‚’å‡¦ç†ã—ã¾ã™ã€‚

```cpp
#include <reflect>

// å‹åã‚’å–å¾—ã™ã‚‹
template <typename T>
std::string get_type_name() {
  namespace reflect = std::experimental::reflect;
  
  // Tï¼ˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼‰ã®ãƒ¡ã‚¿æƒ…å ±ã‚’å–å¾—
  using T_t = reflexpr(T);

  // ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‹ã‚‰å…ƒã®å‹ã®ãƒ¡ã‚¿æƒ…å ±ã‚’å¾—ã‚‹
  using aliased_T_t = reflect::get_aliased_t<T_t>;

  // Tã®å…ƒã®å‹åã‚’stringã§å–å¾—
  return reflect::get_name_v<aliased_T_t>;
}
```

ã“ã®ã‚ˆã†ãªå‹ãƒ™ãƒ¼ã‚¹ãƒªãƒ•ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã¯TMPã®æ–‡è„ˆã§ã¯æ‰±ã„ã‚„ã™ã„ã‚‚ã®ã§ã™ãŒ`constexpr`ã®æ–‡è„ˆã«ãŠã„ã¦ã¯æ‰±ã„ã¥ã‚‰ãã€é™çš„ãƒªãƒ•ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã§å¾—ãŸãƒ¡ã‚¿æƒ…å ±ã‹ã‚‰ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã‚’ã™ã‚‹å‡¦ç†ãªã©ãŒæ›¸ãã¥ã‚‰ããªã‚Šã¾ã™ã€‚ãã“ã§ã€`constexpr`ã¨è¦ªå’Œæ€§ã®é«˜ã„å€¤ãƒ™ãƒ¼ã‚¹ã®ãƒªãƒ•ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ãŒææ¡ˆã•ã‚Œï¼ˆP0425R0ï¼‰ã€SG7(Reflection Study Group)ã§ã¯ãã®æ–¹å‘æ€§ã§ãƒªãƒ•ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’æ¤œè¨ã—ã¦ã„ãã“ã¨ã«ã—ãŸã‚ˆã†ã§ã™ã€‚

ã“ã®ææ¡ˆã¯ãã®å¾Œã®è­°è«–ã‚„ææ¡ˆã®ä½œæ¥­ã‚’åæ˜ ã—ãŸã€å€¤ãƒ™ãƒ¼ã‚¹ã®é™çš„ãƒªãƒ•ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’ææ¡ˆã™ã‚‹ã‚‚ã®ã§ã™ã€‚

å…ˆã»ã©ã®å‹åå–å¾—ã‚³ãƒ¼ãƒ‰ã¯ã€ã“ã®ææ¡ˆã§ã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

```cpp
#include <meta>

template<typename T>
std::string get_type_name() {

  // Tã®ãƒ¡ã‚¿æƒ…å ±ã‚’å–å¾—
  constexpr std::meta::info reflected = ^T;

  // Tã®å‹åã‚’string_viewã§å–å¾—
  std::string_view name = std::meta::name_of(reflected);

  return std::string(name);
}
```

`reflexpr`ã¯`^`ã«ãªã‚Šã€ãã®çµæœã¯å‹ã§ã¯ãªãå€¤ã¨ãªã‚Šã¾ã™ã€‚ãã®å¾Œã§ã‚‚ã€`get_name_v<T>`ã®ã‚ˆã†ãªå‹ç‰¹æ€§ã‚¯ãƒ©ã‚¹ã§ã¯ãªã`name_of()`ã®ã‚ˆã†ãªé–¢æ•°ã«ã‚ˆã£ã¦ãƒ¡ã‚¿æƒ…å ±ã‚’å‡¦ç†ã—ã¦ã„ãã“ã¨ãŒã§ãã¾ã™ã€‚ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«å¯¾ã™ã‚‹`reflexpr(T)`ã§ã¯ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãã®ã‚‚ã®ã®ãƒ¡ã‚¿æƒ…å ±ãŒã¾ãšå¾—ã‚‰ã‚Œã¦ã„ã¾ã—ãŸãŒã€`^T`ã§ã¯ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–å¾Œã€å…·ä½“çš„ãªå‹ã§ç½®ãæ›ãˆã‚‰ã‚ŒãŸ`T`ã«ã¤ã„ã¦ã®ãƒ¡ã‚¿æƒ…å ±ï¼ˆã™ãªã‚ã¡ä¸ãˆã‚‰ã‚ŒãŸå‹ã®ç›´æ¥ã®ãƒ¡ã‚¿æƒ…å ±ï¼‰ãŒå¾—ã‚‰ã‚Œã¾ã™ã€‚ã‚€ã—ã‚ã€ã“ã®ææ¡ˆã§ã¯ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãã®ã‚‚ã®ã®ãƒ¡ã‚¿æƒ…å ±ã‚’å¾—ã‚‹æ‰‹æ®µã‚’æä¾›ã—ã¦ã„ã¾ã›ã‚“ã€‚

åˆ¥ã®ã‚µãƒ³ãƒ—ãƒ«

```cpp
// åˆ—æŒ™å€¤åã‚’æ–‡å­—åˆ—åŒ–ã™ã‚‹
template<Enum T>
std::string to_string(T value) {
  // Tã®åˆ—æŒ™å€¤ã®ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ã‚’å–å¾—
  template for (constexpr auto e : std::meta::members_of(^T)) {
    // valueã«ä¸€è‡´ã™ã‚‹åˆ—æŒ™å€¤åã‚’è¿”ã™
    if ([:e:] == value) {
      return std::string(std::meta::name_of(e));
    }
  }

  return "<unnamed>";
}
```

ã“ã®ã‚³ãƒ¼ãƒ‰ã¯æ¬¡ã®3ã¤ã®ã“ã¨ã‚’è¡Œãªã£ã¦ã„ã¾ã™

1. åˆ—æŒ™å‹ã‹ã‚‰åˆ—æŒ™å€¤ã®ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ã‚’å–å¾—ã™ã‚‹
2. åˆ—æŒ™å€¤ã®ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ã‹ã‚‰ã€`value`ã¨ä¸€è‡´ã™ã‚‹ã‚‚ã®ã‚’æ¢ã™
3. ä¸€è‡´ã—ãŸåˆ—æŒ™å€¤ã®åå‰ã‚’è¿”ã™

1ã¯ã€`^T`ã«ã‚ˆã£ã¦å–å¾—ã—ãŸ`T`ã®ãƒ¡ã‚¿æƒ…å ±ã‹ã‚‰`members_of()`ã«ã‚ˆã£ã¦åˆ—æŒ™å‹`T`ã®ãƒ¡ãƒ³ãƒï¼ˆã™ãªã‚ã¡åˆ—æŒ™å€¤ï¼‰ã®ãƒ¡ã‚¿æƒ…å ±ã®ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ã‚’å–å¾—ã—ã¾ã™ã€‚`T`ã®åˆ—æŒ™å€¤ãã‚Œãã‚Œã«å¯¾ã—ã¦`^`ã—ãŸçµæœã®å‹ã‚’`info`ã¨ã™ã‚‹ã¨ï¼ˆã“ã‚Œã¯å®Ÿéš›ã«`std::meta::info`ã¨ã„ã†å‹ã§ã™ï¼‰ã€`members_of()`ã®æˆ»ã‚Šå€¤å‹ã¯`std::span<info, N>`ã¨ãªã‚Šã¾ã™ã€‚

2ã¯`template for`æ§‹æ–‡ã«ã‚ˆã£ã¦è¡Œã‚ã‚Œã¦ãŠã‚Šã€ã“ã‚Œã¯*expansion-statement*ã¨ã„ã†æ§‹æ–‡ã§ã™ã€‚`members_of()`ã®æˆ»ã‚Šå€¤ã®`span`ã®å„è¦ç´ ã«å¯¾ã—ã¦ãã®æœ¬ä½“ãŒç¹°ã‚Šè¿”ã—é©ç”¨ã•ã‚Œã¾ã™ãŒã€ã“ã‚Œã¯å®Ÿè¡Œæ™‚ãƒ«ãƒ¼ãƒ—ã§ã¯ãªãã€`I = 0...N-1`æ¯ã«æ¬¡ã®ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ã®ç¹°ã‚Šè¿”ã—ã¨ã—ã¦å±•é–‹ã•ã‚Œã¾ã™ã€‚

```cpp
{
  constexpr std::meta::info e = s[I];
  if ([:e:] == value)
    return std::meta::name_of(e);
}
```

*expansion-statement*å†…ã§ã¯ã€`[:e:]`ã®æ§‹æ–‡ã«ã‚ˆã£ã¦`T`ã®åˆ—æŒ™å€¤ã®ãƒ¡ã‚¿æƒ…å ±`e`ã‹ã‚‰ãã®å€¤ã‚’å¾©å…ƒã—ã¾ã™ã€‚ã“ã®å‡¦ç†ã¯ã‚¹ãƒ—ãƒ©ã‚¤ã‚·ãƒ³ã‚°ã¨å‘¼ã°ã‚Œã€ã“ã‚Œã«ã‚ˆã£ã¦å®Ÿè¡Œæ™‚ã®å€¤`value`ã¨ã®æ¯”è¼ƒãŒå¯èƒ½ã¨ãªã‚Šã€æœ€åˆã«ãƒãƒƒãƒã—ãŸ`e`ã«ã¤ã„ã¦ã€ãã®åå‰ï¼ˆã‚³ãƒ¼ãƒ‰ä¸Šã§ã®åˆ—æŒ™å€¤åï¼‰ã‚’`name_of()`ã«ã‚ˆã£ã¦å–å¾—ï¼ˆ`std::string_view`ã§å¾—ã‚‰ã‚Œã‚‹ï¼‰ã—ã¦è¿”ã—ã¾ã™ã€‚ã‚‚ã—ä¸€è‡´ã™ã‚‹ã‚‚ã®ãŒè¦‹ã¤ã‹ã‚‰ãªã„å ´åˆï¼ˆ`|`ã§ãƒ“ãƒƒãƒˆåˆæˆã—ãŸåˆ—æŒ™å€¤ãªã©ï¼‰ã€`"<unnamed>"`ã‚’è¿”ã—ã¾ã™ã€‚

ã“ã®ã‚³ãƒ¼ãƒ‰ã¯å®Ÿè¡Œæ™‚ã¨ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ãŒå…¥ã‚Šä¹±ã‚Œã¦ã„ã¦ã‚ã‹ã‚Šã¥ã‚‰ã„ã§ã™ãŒã€`^`ãªã©ã«ã‚ˆã£ã¦å¾—ã‚‰ã‚Œã‚‹ãƒ¡ã‚¿æƒ…å ±ã‚„*expansion-statement*ã«ã‚ˆã‚‹ã‚¤ãƒ†ãƒ¬ãƒ¼ãƒˆã€`[:...:]`ã«ã‚ˆã‚‹ã‚¹ãƒ—ãƒ©ã‚¤ã‚·ãƒ³ã‚°ãªã©ã¯å…¨ã¦ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ã«å®Ÿè¡Œã•ã‚Œã¦ãŠã‚Šã€ã“ã‚Œã‚‰ã®æ©Ÿèƒ½ã«ã‚ˆã£ã¦ç”Ÿæˆãƒ»è¿½åŠ ã•ã‚Œã‚‹å®Ÿè¡Œæ™‚ãƒ¡ã‚¿æƒ…å ±ã¯ä½•ã‚‚ã‚ã‚Šã¾ã›ã‚“ã€‚`^`ã‹ã‚‰å§‹ã¾ã‚‹ä¸€é€£ã®ãƒ¡ã‚¿æƒ…å ±ã®å‡¦ç†ã¯å…¨ã¦é™çš„ã«è§£æ±ºã•ã‚Œã¦ãŠã‚Šã€ã“ã‚ŒãŒå€¤ãƒ™ãƒ¼ã‚¹ã®é™çš„ãƒªãƒ•ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã§ã™ã€‚

ã“ã®ææ¡ˆã‚‚å«ã‚ã¦å€¤ãƒ™ãƒ¼ã‚¹ãƒªãƒ•ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã¯ã¾ã SG7ã§ã®è­°è«–ä¸­ã§ã‚ã‚‹ã®ã§ã€C++23ã«å…¥ã‚‹ã“ã¨ã¯ãªã„ã§ã—ã‚‡ã†ã€‚ç¾åœ¨ã®Reflection TSã‚‚ã€å€¤ãƒ™ãƒ¼ã‚¹ãƒªãƒ•ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã«ã‚ˆã£ã¦æ›¸ãæ›ãˆã‚‰ã‚Œã‚‹ã¯ãšãªã®ã§ã€ãã‚Œã‚‚C++23ã«å°å…¥ã•ã‚Œã‚‹ã“ã¨ã¯ãªã•ãã†ã§ã™ã€‚é™çš„ãƒªãƒ•ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ãŒC++ã«å°å…¥ã•ã‚Œã‚‹ã®ã¯æ—©ãã¦ã‚‚C++26ã€TSã¨ã—ã¦ã®çµŒé¨“ã‚’é‡è¦–ã™ã‚‹å ´åˆã¯ã‚‚ã£ã¨å¾Œã«ãªã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

- [N4766 Working Draft, C++ Extensions for Reflection](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2018/n4766.pdf)
- [P0425R0 Metaprogramming by design, not by accident](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2017/p0425r0.pdf)
- [P0993R0 Value-based Reflection](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2018/p0993r0.pdf)
- [P1240 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/545)

### [P1664R6 `reconstructible_range` - a concept for putting ranges back together](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p1664r6.html)

`view`ã«ã‚ˆã£ã¦åˆ¥ã®`range`ã«å¤‰æ›ã•ã‚Œã¦ã—ã¾ã£ãŸç¯„å›²ã‚’ã€å…ƒã®`range`ï¼ˆã¨åŒã˜å‹ï¼‰ã«æˆ»ã™æ“ä½œã€`std::ranges::reconstruct`ã¨é–¢é€£ã™ã‚‹ã‚³ãƒ³ã‚»ãƒ—ãƒˆã®ææ¡ˆã€‚

ä»¥å‰ã®è¨˜äº‹ã‚’å‚ç…§

- [P1664R3 reconstructible_range - a concept for putting ranges back together - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´04æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/05/14/214016#P1664R3-reconstructible_range---a-concept-for-putting-ranges-back-together)
- [P1664R4 reconstructible_range - a concept for putting ranges back together - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´06æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/07/12/182757#P1664R4-reconstructible_range---a-concept-for-putting-ranges-back-together)
- [P1664R5 reconstructible_range - a concept for putting ranges back together - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´08æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/09/03/230045#P1664R5-reconstructible_range---a-concept-for-putting-ranges-back-together)

ã“ã®ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã§ã®å¤‰æ›´ã¯ã€ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®æ”¹å–„ã€ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ãƒã‚¤ãƒ³ãƒˆã®èª¿æ•´ã€`ranges::reconstruct`ã«4ã¤ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ­ãƒ¼ãƒ‰ãŒã‚ã‚‹ã“ã¨ã®èª¬æ˜ã®è¿½è¨˜ã€ææ¡ˆã™ã‚‹æ–‡è¨€ã®æ”¹å–„ã€SG9ã‹ã‚‰ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã®åæ˜ ã€ãªã©ã§ã™ã€‚

- [P1664 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/578)

### [P1841R2 Wording for Individually Specializable Numeric Traits](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p1841r2.pdf)

`std::numeric_limits`ã«ä»£ã‚ã‚‹æ–°ãŸãªæ•°å€¤ç‰¹æ€§ï¼ˆ*numeric traits*ï¼‰å–å¾—æ–¹æ³•ã‚’å°å…¥ã™ã‚‹ææ¡ˆã€‚

ä»¥å‰ã®è¨˜äº‹ã‚’å‚ç…§

- [P1841R1 : Wording for Individually Specializable Numeric Traits - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2020å¹´05æœˆï¼‰](https://onihusube.hatenablog.com/entry/2020/06/01/001003#P1841R1--Wording-for-Individually-Specializable-Numeric-Traits)

ã“ã®ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã§ã®å¤‰æ›´ã¯ã€ææ¡ˆã™ã‚‹æ–‡è¨€ã®æ”¹å–„ã¨[P2485R0](https://wg21.link/p2485r0)ã®å†…å®¹ã‚’åæ˜ ã—ãŸã“ã¨ã§ã™ã€‚

ã“ã®ææ¡ˆã¯C++23ã«å°å…¥ã™ã¹ãã€ç¾åœ¨LWGã«ãŠã„ã¦æœ€çµ‚ãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒè¡Œã‚ã‚Œã¦ã„ã¾ã™ã€‚

- [P1841 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/594)

### [P1854R3 Conversion to literal encoding should not lead to loss of meaning](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p1854r3.pdf)

æ–‡å­—åˆ—ãƒªãƒ†ãƒ©ãƒ«ã®ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚’å®Ÿè¡Œæ™‚ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã«å¤‰æ›ã™ã‚‹éš›ã€æ–‡å­—è¡¨ç¾ãŒå¤±ã‚ã‚Œã‚‹å ´åˆã‚’ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã¨ã™ã‚‹ææ¡ˆã€‚

ä»¥å‰ã®è¨˜äº‹ã‚’å‚ç…§

- [P1854R1 Conversion to literal encoding should not lead to loss of meaning - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´10æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/11/13/193322#P1854R1-Conversion-to-literal-encoding-should-not-lead-to-loss-of-meaning)
- [P1854R2 Conversion to literal encoding should not lead to loss of meaning - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´11æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/12/11/220126#P1854R2-Conversion-to-literal-encoding-should-not-lead-to-loss-of-meaning)

ã“ã®ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã§ã®å¤‰æ›´ã¯ã€typoä¿®æ­£ã¨ã€ææ¡ˆã™ã‚‹æ–‡è¨€ã«ã¤ã„ã¦[P2362R3](https://wg21.link/P2362R3)ã«ã‚ˆã‚‹ã‚‚ã®ã¨ã®é•ã„ã‚’æ˜ç¢ºåŒ–ã—ãŸã“ã¨ã§ã™ã€‚

- [P1854 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/608)

### [P1885R9 Naming Text Encodings to Demystify Them](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p1885r9.pdf)

ã‚·ã‚¹ãƒ†ãƒ ã®æ–‡å­—ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚’å–å¾—ã—ã€è­˜åˆ¥ã‚„å‡ºåŠ›ãŒå¯èƒ½ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’è¿½åŠ ã™ã‚‹ææ¡ˆã€‚

ä»¥å‰ã®è¨˜äº‹ã‚’å‚ç…§

- [P1885R3 Naming Text Encodings to Demystify Them - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2020å¹´9æœˆï¼‰](https://onihusube.hatenablog.com/entry/2020/10/09/221025#P1885R3--Naming-Text-Encodings-to-Demystify-Them)
- [P1885R4 Naming Text Encodings to Demystify Them - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2020å¹´11æœˆï¼‰](https://onihusube.hatenablog.com/entry/2020/12/06/015108#P1885R4-Naming-Text-Encodings-to-Demystify-Them)
- [P1885R5 Naming Text Encodings to Demystify Them - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´02æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/03/12/225547#P1885R5-Naming-Text-Encodings-to-Demystify-Them)
- [P1885R6 Naming Text Encodings to Demystify Them - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´08æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/09/03/230045#P1885R6-Naming-Text-Encodings-to-Demystify-Them)
- [P1885R7 Naming Text Encodings to Demystify Them - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´08æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/10/03/193523#P1885R7-Naming-Text-Encodings-to-Demystify-Them)
- [P1885R7 Naming Text Encodings to Demystify Them - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´10æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/11/13/193322#P1885R8-Naming-Text-Encodings-to-Demystify-Them)

ã“ã®ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã§ã®å¤‰æ›´ã¯

- ææ¡ˆã™ã‚‹æ–‡è¨€ã®ä¿®æ­£
- ã»ã¨ã‚“ã©ã®é–¢æ•°ãŒ`CHAR_BIT == 8`ã‚’é©æ ¼è¦ä»¶ï¼ˆç ´ã‚‰ã‚Œã‚Œã°ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ï¼‰ã¨ã—ãŸ
- ãƒ¯ã‚¤ãƒ‰æ–‡å­—åˆ—ç‰ˆã®ã‚ªãƒ¼ãƒãƒ¼ãƒ­ãƒ¼ãƒ‰ã‚’å‰Šé™¤ï¼ˆ[P2419R0](https://wg21.link/P2491r0)ã¸ã®å¯¾å¿œï¼‰
- [P2498R0](https://wg21.link/P2498R0)ã¸ã®å¯¾å¿œï¼ˆææ¡ˆã•ã‚Œã¦ã„ã‚‹è§£æ±ºç­–ã‚’æ¡ç”¨ã—ãªã„ï¼‰

ãªã©ã§ã™ã€‚

- [P1885 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/634)


### [P1899R2 `stride_view`](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p1899r2.html)

ç¯„å›²ã‚’ç­‰é–“éš”ã®è¦ç´ ã‹ã‚‰ãªã‚‹ç¯„å›²ã«å¤‰æ›ã™ã‚‹Rangeã‚¢ãƒ€ãƒ—ã‚¿`stride_view`ã®ææ¡ˆã€‚

ä»¥å‰ã®è¨˜äº‹ã‚’å‚ç…§

- [P1899R1 `stride_view` - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2020å¹´11æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/12/11/220126#P1899R1-stride_view)

ã“ã®ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã§ã®å¤‰æ›´ã¯ã€[P2442R1](https://wg21.link/P2442R1)ã®å†…å®¹ã‚’åæ˜ ã™ã‚‹ã‚ˆã†ã«ææ¡ˆã™ã‚‹æ–‡è¨€ã‚’ä¿®æ­£ã—ãŸäº‹ã§ã™ã€‚

- [P1899 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/647)

### [P2000R3 Direction for ISO C++](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2000r3.pdf)

C++ã®æ¨™æº–åŒ–ã®æ–¹å‘æ€§ã‚’è¨˜ã—ãŸæ–‡æ›¸ã€‚

C++23ã®è¨­è¨ˆçµ‚äº†ã‚’å—ã‘ã¦ã€C++26ã«å‘ã‘ã¦å†…å®¹ã‚’æ›´æ–°ã—ãŸã‚‚ã®ã§ã™ã€‚

### [P2079R2 System execution context](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2079r2.html)

ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã®æä¾›ã™ã‚‹ã‚³ã‚¢æ•°ï¼ˆã‚¹ãƒ¬ãƒƒãƒ‰æ•°ï¼‰ã«åˆã‚ã›ãŸå›ºå®šã‚µã‚¤ã‚ºã®ã‚¹ãƒ¬ãƒƒãƒ‰ãƒ—ãƒ¼ãƒ«ã‚’æä¾›ã™ã‚‹*Scheduler*ã®ææ¡ˆã€‚

ã“ã®ææ¡ˆã¯R1ã§ã¯P0443ã®`executor`ã¨ã—ã¦è¨­è¨ˆã•ã‚Œã¦ã„ã¾ã—ãŸãŒã€ã“ã®ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã§ã¯P2300ã®`scheduler`ã¨ã—ã¦å†è¨­è¨ˆã•ã‚Œã¦ã„ã¾ã™ã€‚

- [P2079R1 : Parallel Executor - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2020å¹´8æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/12/11/220126#P1899R1-stride_view)

ææ¡ˆã•ã‚Œã¦ã„ã‚‹ã®ã¯ã€å®Ÿè¡Œã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã®*view*ã¨ãªã‚‹`system_context`ã¨ãã‚Œã‚’ç”¨ã„ãŸ`scheduler`ã§ã‚ã‚‹`system_scheduler`ãŠã‚ˆã³ã€`system_context`ã§å®Ÿè¡Œã•ã‚Œã‚‹å‡¦ç†ã‚’è¡¨ç¾ã™ã‚‹`sender`ã§ã‚ã‚‹`system_sender`ï¼ˆåå‰ã¯å®Ÿè£…å®šç¾©ï¼‰ã®3ã¤ã§ã™ã€‚

```cpp
class system_context {
public:
  system_context();
   ~system_context();

  system_context(const system_context&) = delete;
  system_context(system_context&&) = delete;
  system_context& operator=(const system_context&) = delete;
  system_context& operator=(system_context&&) = delete;

  system_scheduler get_scheduler();

  implementation-defined_delegation_sender execute_chunk() noexcept;
  implementation-defined_delegation_sender execute_all() noexcept;
  
  size_t max_concurrency() noexcept;
};
```

`system_context`ã¯ä»»æ„ã®å®Ÿè¡Œã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã®ä¸Šã«ã‹ã¶ã›ã¦ä½¿ç”¨ã—ã€`system_context`ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯ãã“ã‹ã‚‰å–å¾—ã—ãŸ`scheduler`ãŠã‚ˆã³ãã®ä¸Šã§èµ·å‹•ã•ã‚ŒãŸã™ã¹ã¦ã®ä½œæ¥­ã‚ˆã‚Šã‚‚é•·ç”Ÿãã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã¾ãŸã€`system_context`ã®å…¨ã¦ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯åŒã˜å®Ÿè¡Œã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’å‚ç…§ã—ã¦ãŠã‚Šã€ã“ã¨ãªã‚‹`system_context`ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰æŠ•å…¥ã•ã‚ŒãŸå‡¦ç†ã¯åŒã˜å®Ÿè¡Œã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã§å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚

`execute_chunk()`ã¯å®Ÿè£…å®šç¾©ã®æ•°ï¼ˆãƒãƒ£ãƒ³ã‚¯ï¼‰ã®ä½œæ¥­ã ã‘ã‚’é–‹å§‹ã™ã‚‹ãŸã‚ã®`sender`ã‚’è¿”ã™é–¢æ•°ã§ã€`execute_all()`ã¯ç¾åœ¨`system_context`ã«ã‚­ãƒ¥ãƒ¼ã‚¤ãƒ³ã‚°ã•ã‚Œã¦ã„ã‚‹ã™ã¹ã¦ã®ä½œæ¥­ã®å®Ÿè¡Œã‚’é–‹å§‹ã™ã‚‹`sender`ã‚’è¿”ã™ã‚‚ã®ã§ã™ã€‚ã“ã‚Œã‚‰ã®`sender`ã¯å‡¦ç†ã®å®Œäº†ã¾ã§ã‚’è¡¨ç¾ã™ã‚‹ã‚‚ã®ã§ã¯ãªãã€å‡¦ç†ã®æŠ•å…¥ã ã‘ã‚’æ‹…ã†ã‚‚ã®ã§ã€å®Ÿè¡Œã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã¸å‡¦ç†ã‚’æŠ•å…¥ã—çµ‚ãˆãŸæ®µéšã§å®Œäº†ã—ã€çµæœï¼ˆ`set_value()`ãƒãƒ£ãƒãƒ«ï¼‰ã¨ã—ã¦æŠ•å…¥ï¼ˆé–‹å§‹ï¼‰ã™ã‚‹ã“ã¨ã«æˆåŠŸã—ãŸä½œæ¥­ã®æ•°ã‚’è¿”ã—ã¾ã™ã€‚

`max_concurrency()`ã¯`system_context`ã®æœ€å¤§ã‚¹ãƒ¬ãƒƒãƒ‰æ•°ã‚’è¿”ã™é–¢æ•°ã§ã™ãŒã€0ã‚’è¿”ã™ã“ã¨ãŒã§ãã€ãã®å ´åˆã¯ãƒ¡ã‚¤ãƒ³ã‚¹ãƒ¬ãƒƒãƒ‰ã‚’åˆ©ç”¨ã—ã¾ã™ã€‚

`system_context`ã¯ã‚¹ãƒ¬ãƒƒãƒ‰ãƒ—ãƒ¼ãƒ«ã‚’æ„è­˜ã—ã¦ã¯ã„ã‚‹ã‚‚ã®ã®ã€ãã®å®Ÿè¡Œã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã®è©³ç´°ã«ã¤ã„ã¦ã¯ã»ã¼ä½•ã‚‚æŒ‡å®šã—ã¦ã„ã¾ã›ã‚“ã€‚ãã®ãŸã‚ã€ææ¡ˆã§ã¯ãƒªãƒªãƒ¼ã‚¹ãƒ“ãƒ«ãƒ‰ã¨ãƒ‡ãƒãƒƒã‚°ãƒ“ãƒ«ãƒ‰ã§å®Ÿè¡Œã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’å¤‰æ›´å¯èƒ½ã¨ã™ã‚‹ã“ã¨ã‚’ææ¡ˆã—ã¦ã„ã¾ã™ã€‚

```cpp
class system_scheduler {
public:
  system_scheduler() = delete;
  ~system_scheduler();

  system_scheduler(const system_scheduler&);
  system_scheduler(system_scheduler&&);
  system_scheduler& operator=(const system_scheduler&);
  system_scheduler& operator=(system_scheduler&&);

  bool operator==(const system_scheduler&) const noexcept;

  friend implementation-defined-system_sender tag_invoke(
    std::execution::schedule_t, const system_scheduler&) noexcept;

  friend std::execution::forward_progress_guarantee tag_invoke(
    std::execution::get_forward_progress_guarantee_t,
    const system_scheduler&) noexcept;

  friend implementation-defined-bulk-sender tag_invoke(
    std::execution::bulk_t,
    const system_scheduler&,
    Sh&& sh,
    F&& f) noexcept;
};
```

`system_scheduler`ã¯`system_context::get_scheduler()`ã‹ã‚‰å–å¾—ã§ãã‚‹`scheduler`ã§ã€`system_context`ã¸ã®å‚ç…§ã‚’ä¿æŒã—ã¦ã„ã¾ã™ã€‚2ã¤ã®`system_scheduler`ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯ã€åŒã˜`system_context`ã‚’å…±æœ‰ã—ã¦ã„ã‚‹å ´åˆã«åŒå€¤ï¼ˆ`==`ã§`true`ï¼‰ã¨ãªã‚Šã¾ã™ã€‚`system_scheduler`ãŒ`system_context`ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ç ´æ£„å¾Œã«ç”Ÿå­˜ã—ã¦ã„ã‚‹å ´åˆã€ãƒ‡ã‚¹ãƒˆãƒ©ã‚¯ã‚¿å‘¼ã³å‡ºã—ä»¥å¤–ã®ã™ã¹ã¦ã®æ“ä½œãŒæœªå®šç¾©å‹•ä½œã¨ãªã‚Šã¾ã™ã€‚

ææ¡ˆæ–‡æ›¸ã‚ˆã‚Šã€ä½¿ç”¨ä¾‹ã€‚

```cpp
using namespace std::execution;

// system_contextã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆ
system_context ctx;
// system_schedulerã®å–å¾—
scheduler auto sch = ctx.get_scheduler();

// å‡¦ç†ã®ãƒã‚§ãƒ¼ãƒ³
sender auto begin = schedule(sch);
sender auto hi = then(begin, []{
    std::cout << "Hello world! Have an int.";
    return 13;
});
sender auto add_42 = then(hi, [](int arg) { return arg + 42; });

auto [i] = this_thread::sync_wait(add_42).value();


// execution::onã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€ã‚ˆã‚Šã‚ˆã„structured concurrencyãªè¡¨ç¾ãŒå¾—ã‚‰ã‚Œã‚‹

sender auto hi = then(just(), []{
    std::cout << "Hello world! Have an int.";
    return 13;
});
sender auto add_42 = then(hi, [](int arg) { return arg + 42; });

auto [i] = this_thread::sync_wait(on(sch, add_42)).value();
```

ãƒãƒ«ã‚¯å®Ÿè¡Œã®ã‚µãƒ³ãƒ—ãƒ«

```cpp
auto bar() {
  return
    ex::let_value(
      ex::get_scheduler(),          // æ¥ç¶šã•ã‚ŒãŸreceiverã‹ã‚‰schedulerã‚’å–å¾—ã™ã‚‹
      [](auto current_sched) {
        return bulk(
          current_sched.schedule(),
          16,                       // ä¾‹ãˆã°16ä¸¦åˆ—
          [](auto idx){
            // idxã«ã¯Shapeï¼ˆã“ã“ã§ã¯16ï¼‰ã«å¿œã˜ãŸä½œæ¥­ã‚«ã‚¦ãƒ³ãƒˆãŒæ¸¡ã•ã‚Œã‚‹
            std::osyncstream{std::cout} << "Index: " << idx << "\n";
          })
      });
}

void foo() {
  using namespace std::execution;

  system_context ctx;

  auto [i] = this_thread::sync_wait(
    on(
      ctx.scheduler(),  // bar()ã‚’system_schedulerã§é–‹å§‹ã™ã‚‹
      bar()))           // onã«ã‚ˆã£ã¦ç”¨æ„ã•ã‚ŒãŸreceiverã‚’é€šã—ã¦system_schedulerã‚’ä¼æ’­ã™ã‚‹
    .value();
}
```

ã“ã‚Œã¯æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®æä¾›ã™ã‚‹åŸºæœ¬çš„ã§åŸºç¤çš„ãª`scheduler`ã¨ãªã‚Šã€ã‚‚ã£ã¨ã‚‚ã‚ˆãä½¿ç”¨ã•ã‚Œã‚‹ã‚‚ã®ã¨ãªã‚‹ã¯ãšã§ã™ã€‚ãŸã ã—ã€ã“ã‚Œã¯ã¾ã ææ¡ˆã¨ã—ã¦ã¯åˆæœŸæ®µéšã§ã€C++23ã«ã¯é–“ã«åˆã„ã¾ã›ã‚“ã€‚

- [P2079 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/806)

### [P2093R12 Formatted output](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2093r12.html)


`std::format`ã«ã‚ˆã‚‹ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’ä½¿ç”¨ã—ãªãŒã‚‰å‡ºåŠ›ã§ãã‚‹æ–°I/Oãƒ©ã‚¤ãƒ–ãƒ©ãƒª`std::print`ã®ææ¡ˆã€‚

ä»¥å‰ã®è¨˜äº‹ã‚’å‚ç…§

- [P2093R0 Formatted output - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2020å¹´6æœˆï¼‰](https://onihusube.hatenablog.com/entry/2020/07/05/003248#P2093R0--Formatted-output)
- [P2093R1 Formatted output - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2020å¹´7æœˆï¼‰](https://onihusube.hatenablog.com/entry/2020/08/12/014639#P2093R1--Formatted-output)
- [P2093R2 Formatted output - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2020å¹´10æœˆï¼‰](https://onihusube.hatenablog.com/entry/2020/11/02/221657#P2093R2-Formatted-output)
- [P2093R3 Formatted output - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´1æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/02/11/153333#P2093R3-Formatted-output)
- [P2093R4 Formatted output - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´2æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/03/12/225547#P2093R4-Formatted-output)
- [P2093R5 Formatted output - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´3æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/04/10/222356#P2093R5-Formatted-output)
- [P2093R6 Formatted output - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´4æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/06/13/165215#P2093R6-Formatted-output)
- [P2093R7 Formatted output - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´7æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/09/03/230045#P2093R8-Formatted-output)
- [P2093R8 Formatted output - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´8æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/09/03/230045#P2093R8-Formatted-output)
- [P2093R9 Formatted output - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´9æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/10/03/193523#P2093R9-Formatted-output)
- [P2093R10 Formatted output - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´11æœˆï¼‰](https://onihusube.hatenablog.com/entry/2022/01/10/235544#P2093R11-Formatted-output)

ã“ã®ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã§ã®å¤‰æ›´ã¯ã€ææ¡ˆã™ã‚‹æ–‡è¨€ã®ä¿®æ­£ã®ã¿ã§ã™ã€‚

- [P2093 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/884)

### [P2165R3 Compatibility between tuple, pair and tuple-like objects](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2165r3.pdf)

`std::pair`ã¨2è¦ç´ `std::tuple`åŠã³`tuple-like`ãªå‹ã®é–“ã®éäº’æ›ã‚’æ¸›ã‚‰ã—æ¯”è¼ƒã‚„ä»£å…¥ã‚’ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ææ¡ˆã€‚

å‰å›ã®è¨˜äº‹ã‚’å‚ç…§

- [P2165R0 Compatibility between tuple and tuple-like objects - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2020å¹´05æœˆï¼‰](https://onihusube.hatenablog.com/entry/2020/06/01/001003#P2165R0--Comparing-pair-and-tuples)
- [P2165R1 Compatibility between tuple and tuple-like objects - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2020å¹´07æœˆï¼‰](https://onihusube.hatenablog.com/entry/2020/08/12/014639#P2165R1--Compatibility-between-tuple-and-tuple-like-objects)
- [P2165R2 Compatibility between tuple and tuple-like objects - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´06æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/07/12/182757#P2165R2-Compatibility-between-tuple-pair-and-tuple-like-objects)

ã“ã®ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã§ã®å¤‰æ›´ã¯

- å¯¾è±¡ã¨ã™ã‚‹`tuple-like`ãªå‹ã‚’`std`åå‰ç©ºé–“ã«ã‚ã‚‹ã‚‚ã®ã«çµã£ãŸ
- `views::zip`é–¢é€£ã®å¤‰æ›´ã®è¿½åŠ 
- é€£æƒ³ã‚³ãƒ³ãƒ†ãƒŠã«å¯¾ã™ã‚‹å¤‰æ›´ã‚’å‰Šé™¤ï¼ˆåˆ¥ã®ææ¡ˆã¨ã™ã‚‹ï¼‰
- `pair/tuple`ã®æ—¢å­˜ã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿/ä»£å…¥æ¼”ç®—å­/æ¯”è¼ƒæ¼”ç®—å­ã‚’å¤‰æ›´ã—ãªã„ã‚ˆã†ã«ã—ãŸ
- `uses_allocator_construction_args`ã‚’å–ã‚‹ã‚ªãƒ¼ãƒãƒ¼ãƒ­ãƒ¼ãƒ‰ã®è¿½åŠ 
- æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆãƒã‚¯ãƒ­ã®è¿½åŠ 
- `tuple-like`ã‚³ãƒ³ã‚»ãƒ—ãƒˆã‚’å‚ç…§å‹ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ã‚ˆã†ã«ä¿®æ­£

ãªã©ã§ã™ã€‚

ã“ã®ææ¡ˆã¯C++23ã‚’ç›®æŒ‡ã—ã¦ã€LEWGé€šéã®ãŸã‚ã®æŠ•ç¥¨å¾…ã¡ã‚’ã—ã¦ã„ã¾ã™ã€‚

- [P2165 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/876)

### [P2248R4 Enabling list-initialization for algorithms](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2248r4.html)

å€¤ã‚’æŒ‡å®šã™ã‚‹ã‚¿ã‚¤ãƒ—ã®æ¨™æº–ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã«ãŠã„ã¦ã€ãã®éš›ã®å‹æŒ‡å®šã‚’çœç•¥ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ææ¡ˆã€‚

ä»¥å‰ã®è¨˜äº‹ã‚’å‚ç…§

- [P2248R0 Enabling list-initialization for algorithms - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2020å¹´11æœˆï¼‰](https://onihusube.hatenablog.com/entry/2020/12/06/015108#P2248R0-Enabling-list-initialization-for-algorithms)
- [P2248R1 Enabling list-initialization for algorithms - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2020å¹´12æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/01/17/005823#P2248R1-Enabling-list-initialization-for-algorithms)
- [P2248R2 Enabling list-initialization for algorithms - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´10æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/11/13/193322#P2248R2-Enabling-list-initialization-for-algorithms)
- [P2248R3 Enabling list-initialization for algorithms - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´12æœˆï¼‰](https://onihusube.hatenablog.com/entry/2022/01/10/235544#P2248R3-Enabling-list-initialization-for-algorithms)

ã“ã®ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã§ã®å¤‰æ›´ã¯`std::replace_copy`ï¼ˆ`std::ranges`ã®ã‚‚ã®ã§ã¯ãªã„ï¼‰ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆæŒ‡å®šã‚’ãƒ‰ãƒ­ãƒƒãƒ—ã—ãŸäº‹ã€ææ¡ˆã™ã‚‹æ–‡è¨€ã®ä¿®æ­£ã¨æ˜ç¢ºåŒ–ãªã©ã§ã™ã€‚

ã“ã®ææ¡ˆã¯C++23ã‚’ç›®æŒ‡ã—ã¦ã€LEWGé€šéã®ãŸã‚ã®æŠ•ç¥¨å¾…ã¡ã‚’ã—ã¦ã„ã¾ã™ã€‚

- [P2248 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/944)

### [P2249R4 Mixed comparisons for smart pointers](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2249r4.html)

ã‚¹ãƒãƒ¼ãƒˆãƒã‚¤ãƒ³ã‚¿ãƒ¼ã®æ¯”è¼ƒæ¼”ç®—å­ã«ç”Ÿãƒã‚¤ãƒ³ã‚¿ã¨ã®ç›´æ¥æ¯”è¼ƒã‚’è¿½åŠ ã™ã‚‹ææ¡ˆã€‚

ä»¥å‰ã®è¨˜äº‹ã‚’å‚ç…§

- [P2249R0 Mixed comparisons for smart pointers - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´02æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/03/12/225547#P2249R0-Mixed-comparisons-for-smart-pointers)
- [P2249R1 Mixed comparisons for smart pointers - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´07æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/08/14/213339#P2249R1-Mixed-comparisons-for-smart-pointers)
- [P2249R2 Mixed comparisons for smart pointers - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´08æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/11/13/193322#P2249R2-Mixed-comparisons-for-smart-pointers)
- [P2249R3 Mixed comparisons for smart pointers - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´11æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/12/11/220126#P2249R3-Mixed-comparisons-for-smart-pointers)

ã“ã®ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã§ã®å¤‰æ›´ã¯ã€P2405ã¸ã®ãƒªãƒ³ã‚¯ã‚’ä¿®æ­£ã—ãŸäº‹ã®ã¿ã§ã™ã€‚

- [P2249 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/981)

### [P2286R5 Formatting Ranges](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2286r5.html)

â†“

### [P2286R6 Formatting Ranges](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2286r6.html)

ä»»æ„ã®ç¯„å›²ã‚’æ‰‹è»½ã«å‡ºåŠ›ã§ãã‚‹æ©Ÿèƒ½ã‚’è¿½åŠ ã™ã‚‹ææ¡ˆã€‚

ä»¥å‰ã®è¨˜äº‹ã‚’å‚ç…§

- [P2286R0 Formatting Ranges - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´1æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/02/11/153333#P2286R0-Formatting-Ranges)
- [P2286R1 Formatting Ranges - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´2æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/03/12/225547#P2286R1-Formatting-Ranges)
- [P2286R2 Formatting Ranges - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´8æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/09/03/230045#P2286R2-Formatting-Ranges)
- [P2286R3 Formatting Ranges - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´11æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/12/11/220126#P2286R3-Formatting-Ranges)
- [P2286R4 Formatting Ranges - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´11æœˆï¼‰](https://onihusube.hatenablog.com/entry/2022/01/10/235544#P2286R4-Formatting-Ranges)

R5ã§ã®å¤‰æ›´ã¯

- ãƒ‡ãƒªãƒŸã‚¿ã®å¤‰æ›´ã‚’ãƒ‰ãƒ­ãƒƒãƒ—ã—ãŸ
- `retargeted_format_context, end_sentry`ã‚’å‰Šé™¤
- `range_formatter`ãŒå¿…è¦ã¨ãªã‚‹ç†ç”±ã«ã¤ã„ã¦è¿½è¨˜
- æ–‡å­—ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã®æŒ¯ã‚‹èˆã„ã«ã¤ã„ã¦ã€Python/Rustã‚’ä¾‹ã«ã—ã¦è¿½è¨˜
- ã‚³ãƒ³ãƒ†ãƒŠã‚¢ãƒ€ãƒ—ã‚¿ã«é–¢ã™ã‚‹èª¬æ˜ã‚’è¿½åŠ 
- ææ¡ˆã™ã‚‹æ–‡è¨€ã‚’è¿½åŠ 

R6ã§ã®å¤‰æ›´ã¯

- æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆãƒã‚¯ãƒ­ã®è¿½åŠ 
- ææ¡ˆã™ã‚‹æ–‡è¨€ã®æ”¹å–„
    - `range`å‹`R`ã«ã¤ã„ã¦ã®`formatter<R, charT>`ãŒ`range_formatter<range_reference_t<R>>`ã‚’ç¶™æ‰¿ã™ã‚‹ã‚ˆã†ã«å¤‰æ›´
    - `formattable`ã‚³ãƒ³ã‚»ãƒ—ãƒˆã®å‡ºåŠ›ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã«ã¤ã„ã¦ã®æŒ‡å®šã‚’å®Ÿè£…å®šç¾©ã‹ã‚‰æœªè¦å®šã¸å¤‰æ›´
  
ãªã©ã§ã™ã€‚

ã“ã®ææ¡ˆã¯C++23ã¸å‘ã‘ã¦ã€LEWGã§ã®æœ€çµ‚æŠ•ç¥¨å¾…ã¡ã‚’ã—ã¦ã„ã¾ã™ã€‚

- [P2285 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/977)

### [P2300R4 `std::execution`](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2300r4.html)

[P0443R14](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2020/p0443r14.html)ã®Executorææ¡ˆã‚’ç½®ãæ›ãˆã‚‹ã€ä»»æ„ã®å®Ÿè¡Œã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã§ä»»æ„ã®éåŒæœŸå‡¦ç†ã‚’æ§‹æˆãƒ»å®Ÿè¡Œã™ã‚‹ãŸã‚ã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãŠã‚ˆã³éåŒæœŸå‡¦ç†ãƒ¢ãƒ‡ãƒ«ã®ææ¡ˆã€‚

ä»¥å‰ã®è¨˜äº‹ã‚’å‚ç…§

- [P2300R0 `std::execution` - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´06æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/07/12/182757#P2300R0-stdexecution)
- [P2300R1 `std::execution` - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´07æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/08/14/213339#P2300R1-stdexecution)
- [P2300R2 `std::execution` - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´11æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/11/13/193322#P2300R2-stdexecution)
- [P2300R3 `std::execution` - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´12æœˆï¼‰](https://onihusube.hatenablog.com/entry/2022/01/10/235544#P2300R3-stdexecution)

ã“ã®ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã§ã®å¤‰æ›´ã¯

- ã„ãã¤ã‹ã®ãƒã‚°ä¿®æ­£
- *Dependently-typed* `sender`ã®ã‚µãƒãƒ¼ãƒˆ
- `receiver`ã«å¯¾ã—ã¦`query`ã‚’ç™ºè¡Œã—ãã®çµæœã‚’`set_value()`ãƒãƒ£ãƒãƒ«ã§è¿”ã™`sender`ãƒ•ã‚¡ã‚¯ãƒˆãƒªã€`read(query)`ã®è¿½åŠ 
- typed `sender`ã®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’å®£è¨€çš„ã«å®šç¾©ã™ã‚‹ãŸã‚ã®`completion_signatures`ã®è¿½åŠ 
- åˆ¥ã®`sender`ã®*completion signature*ã‹ã‚‰ã‚¢ãƒ€ãƒ—ãƒˆã—ã¦`sender`ã®*completion signature*ã‚’æŒ‡å®šã™ã‚‹ãŸã‚ã®`make_completion_signatures`ã®è¿½åŠ 
- `sender`ã®å®šç¾©ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚’typed `sender`ã«å¤‰æ›´ã—ã€ãã®ãƒãƒ£ãƒãƒ«å‹æŒ‡å®šã®ãªã„`sender`ã‚µãƒãƒ¼ãƒˆã‚’ãªãã—ãŸ
    - typed `sender`ã¨ã¯ã€ãã®`set_value(), set_error()`ãƒãƒ£ãƒãƒ«ã‚’ä»‹ã—ã¦é€ä¿¡ã™ã‚‹å€¤ã®å‹ã‚’`S::value_types, S::error_types`ã¨ã—ã¦å…¬é–‹ã™ã‚‹`sender`
- `set_done()`ãƒãƒ£ãƒãƒ«ï¼ˆ`receiver`ã®å®Œäº†ï¼ˆnot æˆåŠŸï¼‰ãƒãƒ£ãƒãƒ«ï¼‰ã®åå‰ã‚’`set_stopped()`ã«å¤‰æ›´
- `sender`ã‚¢ãƒ€ãƒ—ã‚¿ã®ãƒ¬ã‚¤ãƒ¤ã‚’ä»‹ã—ã¦`scheduler, sender, receiver`ãŠã‚ˆã³ç’°å¢ƒã‚¯ã‚¨ãƒªã®ä¼é€ã‚’åˆ¶å¾¡ã™ã‚‹ãŸã‚ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºãƒã‚¤ãƒ³ãƒˆã®è¿½åŠ 
- *delegatee scheduler*ã‚’å–å¾—ã™ã‚‹ãŸã‚ã®`get_delegatee_scheduler()`ã‚’è¿½åŠ 
    - *delegatee scheduler*ã¨ã¯ã€ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚‚ã—ãã¯`scheduler`ãŒä½œæ¥­ã‚’å§”ä»»ã—ã¦å®Ÿè¡Œã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã™ã‚‹`scheduler`ã®ã“ã¨
- `schedule_result_t`ï¼ˆ`scheduler`ã‹ã‚‰ãã®`sender`å‹ã‚’å–å¾—ã™ã‚‹ï¼‰ã®è¿½åŠ 
- `stopped_as_error`ï¼ˆ`sender`ã®ã‚¨ãƒ©ãƒ¼ãƒãƒ£ãƒãƒ«ãŒæŒ‡å®šã—ãŸã‚¨ãƒ©ãƒ¼ã‚’è¿”ã™ã‚ˆã†ã«å¤‰æ›ã™ã‚‹`sender`ã‚¢ãƒ€ãƒ—ã‚¿ï¼‰ã‚’CPOã¨ã—ã¦å†æŒ‡å®š
- `tag_invoke`ã®è¨ºæ–­ã‚’æ”¹å–„
    - `tag_invoke`ã®å‘¼ã³å‡ºã—å¤±æ•—ãŒSFINAEå¯èƒ½ã§ã‚ã‚‹ã“ã¨ã‚’è¦å®šï¼ˆã“ã‚Œã¯é€šå¸¸ã®CPOã¨åŒæ§˜ï¼‰

ãªã©ã§ã™ã€‚

ã“ã®ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã§ã®å¤§ããªå¤‰æ›´ã¯ã€*Dependently-typed* `sender`ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ã‚ˆã†ã«ã—ãŸã“ã¨ã§ã™ã€‚

`stop_token`ã€ã‚¢ãƒ­ã‚±ãƒ¼ã‚¿ã€`scheduler`ãªã©ã®ç¾åœ¨ã®å®Ÿè¡Œç’°å¢ƒã«é–¢ã™ã‚‹æƒ…å ±ã‚’ã‚³ãƒ³ã‚·ãƒ¥ãƒ¼ãƒã‹ã‚‰ãƒ—ãƒ­ãƒ‡ãƒ¥ãƒ¼ã‚µãƒ¼ã¸è‡ªç„¶ã«ä¼é”ã•ã‚Œã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã‚³ãƒ«ãƒ¼ãƒãƒ³ã§ã¯ãã‚Œã¯`promise`å‹ã‚’é€šã—ã¦ã€å‘¼ã³å‡ºã—ãŸã‚³ãƒ«ãƒ¼ãƒãƒ³ã‹ã‚‰å‘¼ã³å‡ºã—å´ã¸ä¼æ’­ã—ã¾ã™ã€‚`sender/receiver`ãƒ¢ãƒ‡ãƒ«ã§ã‚‚ãã®ä¼é”ã¯ã•ã‚Œã¦ã„ã¾ã™ãŒã€å¤šãã®æƒ…å ±ã¯`receiver`ã«é–¢é€£ã¥ã‘ã‚‰ã‚Œã¦ãŠã‚Šã€`sender`ã¨`receiver`ãŒ`connect`ã•ã‚ŒãŸå¾Œã§ã€`sender`ã‚„`operation_state`ã«ã‚ˆã£ã¦ç…§ä¼šã•ã‚Œã¾ã™ã€‚ã“ã‚Œã¯ã™ãªã‚ã¡ã€æœ€çµ‚çš„ã«èµ·å‹•ã•ã‚Œã‚‹éåŒæœŸå‡¦ç†ã«é–¢ã™ã‚‹æƒ…å ±ã¯`sender`ã¨`receiver`ã§åˆ†å‰²ã—ã¦ä¿æŒã•ã‚Œã¦ãŠã‚Šã€æƒ…å ±ã®ä¸€éƒ¨ã¯`receiver`ã‚’é€šã—ã¦é…ã‚Œã¦æä¾›ã•ã‚Œã‚‹ã¨ã„ã†ã“ã¨ã§ã™ã€‚

`sender`ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¯ãã‚Œã‚‰ã®æƒ…å ±ã‚’`sender_traits`æ©Ÿæ§‹ï¼ˆ`completion_signatures_of_t<Sender>`ï¼‰ã«ã‚ˆã£ã¦å–å¾—ã—ã¾ã™ã€‚ã—ã‹ã—ã€R3ã¾ã§ã®`sender_traits`æ©Ÿæ§‹ã¯`sender`å‹ã—ã‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«å–ã‚‰ãšã€`receiver`ã«ã‚ˆã£ã¦æ±ºå®šã•ã‚Œã‚‹æƒ…å ±ã®ä¸€éƒ¨ã‚’é™çš„ã«å¼•ãå‡ºã™ã“ã¨ãŒã§ãã¾ã›ã‚“ã§ã—ãŸã€‚ã“ã®ãŸã‚ã€`sender`ã«ã‚ˆã£ã¦ã¯ãã®æƒ…å ±ã‚’ç¢ºå®šã§ããšï¼ˆtyped `sender`ã¨ãªã‚Œãšï¼‰ã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã‚’èµ·ã“ã™ã“ã¨ãŒã‚ã‚Šã¾ã—ãŸã€‚

```cpp
namespace ex = std::execution;

// ã“ã®æ®µéšã§ã¯receiverãŒä¸å®š
ex::sender auto task =
  ex::let_value(
    ex::get_scheduler(), // receiverã‹ã‚‰schedulerã‚’å–å¾—ã™ã‚‹
    [](auto current_sched) {
      // ãã®schedulerã§ãƒã‚¹ãƒˆã—ãŸä½œæ¥­ã‚’é–‹å§‹ã™ã‚‹
      return ex::on(current_sched, nested work...);
    });

// sync_waitã®ç”¨æ„ã™ã‚‹receiverã¨connectã—ã¦å‡¦ç†ã‚’é–‹å§‹ã€å®Œäº†ã‚’å¾…æ©Ÿ
std::this_thread::sync_wait(std::move(task));   // ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼
```

`get_scheduler()`ã¯æ¥ç¶šã•ã‚Œã¦ã„ã‚‹`receiver`ã‹ã‚‰`scheduler`ã‚’å–å¾—ã™ã‚‹ã‚‚ã®ã§ã€å¼•æ•°ãªã—ã§ã®å‘¼ã³å‡ºã—ã¯ãã®å€¤ãƒãƒ£ãƒãƒ«ï¼ˆ`set_value`ï¼‰ã§`scheduler`ã‚’è¿”ã™`sender`ã‚’è¿”ã—ã¾ã™ã€‚ãã®`sender`ã®`value_type`ã¯`receiver`ã«æ¥ç¶šã•ã‚ŒãŸ`scheduler`ã®å‹ã§ã™ã€‚ã“ã®æ™‚ã€`sender_traits<get_scheduler_sender>::value_types`ã‚‚åŒã˜å‹ã«ãªã£ã¦æ¬²ã—ã„ã§ã™ãŒã€`receiver`ãŒãªã„ãŸã‚ãã®å‹ã¯ä¸å®šã¨ãªã‚Šã¾ã™ã€‚

`sync_wait()`ã¯`run_loop`å®Ÿè¡Œã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆï¼ˆç¾åœ¨ã®ã‚¹ãƒ¬ãƒƒãƒ‰ã§å‡¦ç†ã‚’é–‹å§‹ã™ã‚‹ã‚·ãƒ³ã‚°ãƒ«ã‚¹ãƒ¬ãƒƒãƒ‰å®Ÿè¡Œã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆï¼‰ã§å‡¦ç†ã‚’é–‹å§‹ã™ã‚‹ã‚‚ã®ã§ã€ãã®æˆ»ã‚Šå€¤å‹ã®ç¢ºå®šã®ãŸã‚ã«å…¥åŠ›ã®`sender`ã¯typed `sender`ã§ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚ã—ã‹ã—ã€`let_value(sender, work)`ã¯å…¥åŠ›ã®`sender`ãŒtypedã§ã¯ãªã„å ´åˆå¾—ã‚‰ã‚Œã‚‹`sender`ã‚‚typedã§ã¯ãªãã€ãã‚Œã‚’`sync_wait()`ã«å…¥åŠ›ã—ã‚ˆã†ã¨ã™ã‚‹ã¨ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã¨ãªã‚Šã¾ã™ã€‚`get_scheduler()`ã®è¿”ã™`sender`ã¯typedã§ã¯ãªã„ï¼ˆ`sender_traits<get_scheduler_sender>::value_types`ãŒæ±ºå®šã§ããªã„ï¼‰ãŸã‚ã€ä¸Šè¨˜ä¾‹ã§ã¯ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã‚’èµ·ã“ã—ã¦ã„ã¾ã™ã€‚

ã“ã®è§£æ±ºã®ãŸã‚ã®å¤‰æ›´ãŒ*Dependently-typed* `sender`ã§ã‚ã‚Šã€ãã®å†…å®¹ã¯å˜ç´”ã«`sender_traits`æ©Ÿæ§‹ãŒ`receiver`ã®å‹ã‚‚è¿½åŠ ã§å—ã‘å–ã‚Œã‚‹ã‚ˆã†ã«ãªã£ãŸã ã‘ã§ã™ã€‚ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¯``sender_traits<Sender, Receiver>`ã‚’ä»‹ã—ã¦ã€éåŒæœŸå‡¦ç†ã«é–¢ã™ã‚‹æƒ…å ±ã®å…¨ã¦ã‚’å–å¾—ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ãŸã ã—ã€ã“ã®ã‚ˆã†ãª`receiver`å‹ã®ä½¿ç”¨ã¯ã€å‹ã®ã‚µã‚¤ã‚¯ãƒ«ã‚’å¼•ãèµ·ã“ã—ã‚„ã™ãã€è¬ã®ã‚¨ãƒ©ãƒ¼ãŒå¤šç™ºã™ã‚‹ã‚ˆã†ã§ã€`sender_traits`æ©Ÿæ§‹ã¯å®Ÿéš›ã«ã¯`receiver`å‹ã§ã¯ãªãç’°å¢ƒã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼ˆ*environment object*ã€key/valueãƒšã‚¢ã®è¢‹ï¼‰ã‚’å—ã‘å–ã‚Šã¾ã™ã€‚ã“ã‚Œã¯ã€ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆæƒ…å ±ã¯`receiver`ã‹ã‚‰ç’°å¢ƒã¸ç§»å‹•ã•ã›ã‚‹ãŸã‚ã®è¨­è¨ˆã§ã€`sender_traits`ã‚„`typed_sender`ï¼ˆã“ã®ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã§ã¯`sender`ï¼‰ã¯`receiver`å‹ã®ä»£ã‚ã‚Šã«ã“ã®ç’°å¢ƒã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å—ã‘å–ã‚Šã¾ã™ã€‚ãŸã ã—ã€`receiver`ã¨ç’°å¢ƒã®åˆ†é›¢ã¯å®Œå…¨ã§ã¯ãªã„ã‚ˆã†ã§ã€ã•ã‚‰ãªã‚‹åˆ†é›¢ãŒå¯èƒ½ãªã‚ˆã†ã§ã™ãŒã€ã“ã®ææ¡ˆã§ã¯ãã“ã«è¸ã¿è¾¼ã‚“ã§ã¯ã„ã¾ã›ã‚“ã€‚

ç’°å¢ƒã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨å‘¼ã°ã‚Œã¦ã„ã‚‹å€¤ï¼ˆå®Ÿéš›ã«ã¯å‹ã£ã½ã„ã§ã™ãŒï¼‰ã«`sender`ï¼ˆã«ã¾ã¤ã‚ã‚‹ç’°å¢ƒæƒ…å ±ï¼‰å‹ãŒä¾å­˜ã™ã‚‹ã®ã§ã€*Dependently-typed*ï¼ˆä¾å­˜å‹ï¼‰`sender`ã¨ã„ã†å‘¼ã³åã®ã‚ˆã†ã§ã™ã€‚

- [Executorã¨Networking TSã§èµ·ãã¦ã„ãŸã“ã¨ - åœ°é¢ã‚’è¦‹ä¸‹ã‚ã™å°‘å¹´ã®è¶³è¹´ã«ã•ã‚Œã‚‹ç§](https://onihusube.hatenablog.com/entry/2021/12/23/190053)
- [P2300 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/1054)

### [P2302R3 `std::ranges::contains`](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2302r3.html)

æ–°ã—ã„ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¨ã—ã¦`std::ranges::contains`ã‚’è¿½åŠ ã™ã‚‹ææ¡ˆã€‚

- [P2302R0 Prefer std::ranges::contains over std::basic_string_view::contains - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´2æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/03/12/225547#P2302R0-Prefer-stdrangescontains-over-stdbasic_string_viewcontains)
- [P2302R1 std::ranges::contains - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´11æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/12/11/220126#P2302R1-stdrangescontains)
- [P2302R2 std::ranges::contains - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´12æœˆï¼‰](https://onihusube.hatenablog.com/entry/2022/01/10/235544#P2302R2-stdrangescontains)

ã“ã®ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã§ã®å¤‰æ›´ã¯ã‚ˆãã‚ã‹ã‚Šã¾ã›ã‚“ã€‚

ã“ã®ææ¡ˆã¯C++23ã¸å‘ã‘ã¦ã€LEWGã§ã®æœ€çµ‚æŠ•ç¥¨å¾…ã¡ã‚’ã—ã¦ã„ã¾ã™ã€‚

- [P2295 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/988)

### [P2324R2 Labels at the end of compound statements (C compatibility)](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2324r2.pdf)

è¤‡åˆã‚¹ãƒ†ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆï¼ˆ*compound statement*ï¼‰ã®æœ«å°¾ã«ãƒ©ãƒ™ãƒ«ã‚’ç½®ã‘ã‚‹ã‚ˆã†ã«ã™ã‚‹ææ¡ˆã€‚

- [P2324R0 Labels at the end of compound statements (C compatibility) - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´02æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/03/12/225547#P2324R0-Labels-at-the-end-of-compound-statements-C-compatibility)
- [P2324R1 Labels at the end of compound statements (C compatibility) - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´11æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/11/13/193322#P2324R1-Labels-at-the-end-of-compound-statements-C-compatibility)

ã“ã®ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã§ã®å¤‰æ›´ã¯ã€ææ¡ˆã™ã‚‹æ–‡è¨€ã®ä¿®æ­£ã®ã¿ã§ã™ã€‚

ã“ã®ææ¡ˆã¯C++23ã«å‘ã‘ã¦EWGã§ã®æœ€çµ‚æŠ•ç¥¨å¾…ã¡ã‚’ã—ã¦ã„ã¾ã™ãŒã€ã™ã§ã«CWGã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¨æ‰¿èªã‚’çµ‚ãˆã¦ãŠã‚Šã€EWGã‚’é€šéã™ã‚Œã°æ¬¡ã®å…¨ä½“ä¼šè­°ã§æŠ•ç¥¨ã«ã‹ã‘ã‚‰ã‚Œã¾ã™ã€‚

- [P2321 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/1006)

### [P2363R3 Extending associative containers with the remaining heterogeneous overloads](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2363r3.html)

é€£æƒ³ã‚³ãƒ³ãƒ†ãƒŠã®é€éçš„æ“ä½œã‚’ã€ã•ã‚‰ã«åºƒã’ã‚‹ææ¡ˆã€‚

ä»¥å‰ã®è¨˜äº‹ã‚’å‚ç…§

- [P2363R0 Extending associative containers with the remaining heterogeneous overloads - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´04æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/05/14/214016#P2363R0-Extending-associative-containers-with-the-remaining-heterogeneous-overloads)
- [P2363R1 Extending associative containers with the remaining heterogeneous overloads - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´09æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/10/03/193523#P2363R1-Extending-associative-containers-with-the-remaining-heterogeneous-overloads)
- [P2363R2 Extending associative containers with the remaining heterogeneous overloads - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´12æœˆï¼‰](https://onihusube.hatenablog.com/entry/2022/01/10/235544#P2363R2-Extending-associative-containers-with-the-remaining-heterogeneous-overloads)

ã“ã®ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã§ã®å¤‰æ›´ã¯ã€`at()`ã«äº‹å‰æ¡ä»¶ã‚’è¿½åŠ ã—ãŸã“ã¨ã¨ãã®èª¬æ˜ã‚’è¿½è¨˜ã—ãŸã“ã¨ã§ã™ã€‚

ã“ã®ææ¡ˆã¯C++23ã¸å‘ã‘ã¦ã€LEWGã§ã®æœ€çµ‚æŠ•ç¥¨å¾…ã¡ã‚’ã—ã¦ã„ã¾ã™ã€‚

- [P2363 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/1037)

### [P2370R2 Stacktrace from exception](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2370r2.html)

ç¾åœ¨æŠ•ã’ã‚‰ã‚Œã¦ã„ã‚‹ä¾‹å¤–ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«åŸºã¥ãã‚¹ã‚¿ãƒƒã‚¯ãƒˆãƒ¬ãƒ¼ã‚¹ã‚’å–å¾—ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ææ¡ˆã€‚

ä»¥å‰ã®è¨˜äº‹ã‚’å‚ç…§

- [P2370R0 Stacktrace from exception - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´06æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/07/12/182757#P2370R0-Stacktrace-from-exception)
- [P2370R1 Stacktrace from exception - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´08æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/09/03/230045#P2370R1-Stacktrace-from-exception)

ã“ã®ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã§ã®å¤‰æ›´ã¯ã€[P2490](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2021/p2490r0.html)ã®å†…å®¹ã«ã¤ã„ã¦ã®è­°è«–ã‚’è¿½è¨˜ã—ã€P2490ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’å®Ÿè£…å¯èƒ½ã¨ã™ã‚‹ã‚ˆã†ã«æ–‡è¨€ã‚’ä¿®æ­£ã—ãŸã“ã¨ã§ã™ã€‚

ã“ã®ææ¡ˆã®ç¾åœ¨ã®è¨­è¨ˆã¯ã‚¹ãƒ¬ãƒƒãƒ‰ãƒ­ãƒ¼ã‚«ãƒ«ãªãƒ•ãƒ©ã‚°ã‚’ç”¨ã„ã¦ä¾‹å¤–ã‚­ãƒ£ãƒƒãƒæ™‚ã®ã‚¹ã‚¿ãƒƒã‚¯ãƒˆãƒ¬ãƒ¼ã‚¹å–å¾—ã‚’åˆ¶å¾¡ã—ã¦ã„ã¾ã™ãŒã€ãã‚Œã¯TLSã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã¨ã„ã†ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰ã‚’ä¼´ã„ã¾ã™ã€‚å¯¾ã—ã¦P2490ã§ã¯ã€`catch`ã«å¿œã˜ã¦ãã‚Œã‚’ã™ã‚‹ã‹ã—ãªã„ã‹ã‚’é™çš„ã«åˆ¤å®šã™ã‚‹ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’ææ¡ˆã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã‚’å—ã‘ã¦ã“ã®ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã§ã¯ã€P2490ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã«ã¯æ¬¡ã®ã‚ˆã†ãªçŸ­æ‰€ãŒã‚ã‚‹ã¨ä¸»å¼µã—ã¦ã„ã¾ã™

1. å®Ÿè¡Œæ™‚ã«ã‚¹ã‚¿ãƒƒã‚¯ãƒˆãƒ¬ãƒ¼ã‚¹ã‚­ãƒ£ãƒ—ãƒãƒ£ã‚’ç„¡åŠ¹åŒ–ã™ã‚‹æ–¹æ³•ãŒæä¾›ã•ã‚Œã¦ã„ãªã„
2. å†ã‚¹ãƒ­ãƒ¼ã™ã‚‹ã¨ã‚¹ã‚¿ãƒƒã‚¯ãƒˆãƒ¬ãƒ¼ã‚¹ãŒå¤±ã‚ã‚Œã‚‹
3. ã‚¼ãƒ­ã‚ªãƒ¼ãƒãƒ˜ãƒƒãƒ‰ä¾‹å¤–ï¼ˆ[P0709](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2019/p0709r4.pdf)ï¼‰ã§ã¯æ©Ÿèƒ½ã—ãªã„
    - P0709ã®ä¾‹å¤–æ©Ÿæ§‹ã¯`std::expected`ã‚’è¿”ã™ã®ã«è¿‘ã„ã“ã¨ã‚’ã—ã¦ãŠã‚Šã€ä¾‹å¤–ãŒã‚­ãƒ£ãƒƒãƒãƒ–ãƒ­ãƒƒã‚¯ã«åˆ°é”ã—ãŸæ™‚ã«ã¯ã‚¹ã‚¿ãƒƒã‚¯ãƒˆãƒ¬ãƒ¼ã‚¹ã¯å¤±ã‚ã‚Œã¦ã„ã‚‹
    - ã“ã®ææ¡ˆã§ã¯ã€ä¾‹å¤–ç™ºç”Ÿå…ƒã§ã‚ã‚‰ã‹ã˜ã‚ã‚¹ã‚¿ãƒƒã‚¯ãƒˆãƒ¬ãƒ¼ã‚¹ã‚’ä¿å­˜ã—ã€`std::expected`ï¼ˆçš„ãªã‚‚ã®ï¼‰ã®å†…éƒ¨ã«ä¿å­˜ã—ã¦ãŠã‘ã°å‹•ä½œã™ã‚‹

ãã®ä¸Šã§ã€P2490ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’å—ã‘å…¥ã‚Œå¯èƒ½ãªã‚ˆã†ã«ææ¡ˆã™ã‚‹æ–‡è¨€ã‚’èª¿æ•´ã—ã¦ã„ã¾ã™ã€‚ãã®çµæœã¨ã—ã¦ã€ã‚¹ã‚¿ãƒƒã‚¯ãƒˆãƒ¬ãƒ¼ã‚¹ã‚’ä¿å­˜ã™ã‚‹å ´æ‰€ãŒå®Ÿè£…å®šç¾©ã¨ã•ã‚ŒãŸã‚ˆã†ã§ã™ã€‚

- [P2490R0 Zero-overhead exception stacktraces](https://onihusube.hatenablog.com/entry/2021/12/11/220126#P2490R0-Zero-overhead-exception-stacktraces)
- [P2370 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/1056)

### [P2375R1 Generalisation of nth_element to a range of nths](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2375r1.pdf)
### [P2404R1 Move-only types for equality_comparable_with, totally_ordered_with, and three_way_comparable_with](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2404r1.pdf)
### [P2404R2 Move-only types for equality_comparable_with, totally_ordered_with, and three_way_comparable_with](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2404r2.pdf)
### [P2424R0 Abbreviated Parameters](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2424r0.html)

é–¢æ•°å¼•æ•°ã®ç°¡æ˜“å®£è¨€æ§‹æ–‡ã®ææ¡ˆã€‚

1è¡Œã§æ¸ˆã‚€ã‚ˆã†ãªå˜ç´”ãªé–¢æ•°ã‚’ãƒ©ãƒ ãƒ€å¼ã‚’ç”¨ã„ã¦å®šç¾©ã—ã¦ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒå¤šãã€ãã®ãŸã‚ãƒ©ãƒ ãƒ€å¼ã‚’å¯èƒ½ãªé™ã‚Šç°¡æ½”ã«æ›¸ãã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ã—ãŸã„ã¨ã„ã†è¦æœ›ãŒå¼·ãã‚ã‚Šã¾ã™ã€‚ãã‚Œã‚’å—ã‘ã¦ã€çŸ­ç¸®ãƒ©ãƒ ãƒ€ææ¡ˆï¼ˆ[P0573R2](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2017/p0573r2.html)ï¼‰ãªã©ã„ãã¤ã‹ã®ææ¡ˆãŒã•ã‚Œã¾ã—ãŸãŒã€ä»¥ä¸‹ã®ã‚ˆã†ãªç†ç”±ã«ã‚ˆã£ã¦ãƒªã‚¸ã‚§ã‚¯ãƒˆã•ã‚Œã¦ã„ã¾ã™ã€‚

1. é€šå¸¸ã®ãƒ©ãƒ ãƒ€å¼ã¨æ„å‘³è«–ãŒç•°ãªã‚‹ã€‚é–¢æ•°æœ¬ä½“ãŒåŒã˜ã§ã‚‚ã€çŸ­ç¸®å½¢ã‹å¦ã‹ã«ã‚ˆã£ã¦æˆ»ã‚Šå€¤å‹ãŒç•°ãªã‚‹ã€‚
2. ä»»æ„ã®å…ˆèª­ã¿ãƒ‘ãƒ¼ã‚¹ãŒå¿…è¦ã¨ãªã‚‹ã€‚ãƒ‘ãƒ¼ã‚µãƒ¼ã¯ãƒ©ãƒ ãƒ€å¼ãŒçŸ­ç¸®å½¢ã‹ã©ã†ã‹ã‚’åˆ¤å®šã™ã‚‹ãŸã‚ã«ãƒ©ãƒ ãƒ€å¼æœ¬ä½“ã‚’å…ˆèª­ã¿ã—ãªã‘ã‚Œã°ãªã‚‰ãªã„ã€‚
3. å¾Œç½®æˆ»ã‚Šå€¤å‹ã¨ã®ä¸ä¸€è‡´ã€‚ãƒ©ãƒ ãƒ€æœ¬ä½“ã¨å¾Œç½®æˆ»ã‚Šå€¤å‹ã¨ã§ã¯è§£æãŒç•°ãªã‚‹ãŸã‚ã€çŸ­ç¸®ãƒ©ãƒ ãƒ€ã¯æ„å›³é€šã‚Šã«å‹•ä½œã—ãªã„å¯èƒ½æ€§ãŒã‚ã‚‹
      - ã“ã®å•é¡Œã¯[P2036R2](https://wg21.link/p2036r2)ã§è§£æ±ºã•ã‚Œã‚‹ï¼ˆäºˆå®šï¼‰

ã“ã®å•é¡Œã®ã†ã¡ã€1ã¨3ã¯ãƒ©ãƒ ãƒ€æœ¬ä½“ã®æ„å‘³è«–ã«é–¢ã™ã‚‹ã“ã¨ã§ã€2ã¯ãƒ©ãƒ ãƒ€ã®å¼•æ•°å®£è¨€ã«é–¢ã™ã‚‹äº‹ã§ã™ã€‚ãã—ã¦ã€å¤šãã®å ´åˆãƒ©ãƒ ãƒ€å¼ã®å†—é•·æ€§ã‚’æœ€ã‚‚é«˜ã‚ã¦ã„ã‚‹ã®ã¯å¼•æ•°å®£è¨€å‘¨è¾ºã®æ§‹æ–‡ã§ã™ã€‚

```cpp
[](const auto& a, const auto& b) { return a < b; }
```

`auto&&`ã‚’ç”¨ã„ã‚‹ã¨ã‚‚ã†å°‘ã—çŸ­ç¸®ã§ãã‚‹ã¨ã„ã†ä¸»å¼µã‚‚ã‚ã‚Šã¾ã™ãŒã€`auto&&`ãŒ`const`ã¨ãªã‚‹ã®ã¯å®Ÿå¼•æ•°ãŒã™ã§ã«`const`ã§ã‚ã‚‹å ´åˆã®ã¿ã§ã™ã€‚ãƒ©ãƒ ãƒ€å¼ã§ã¯é`const`ãªã‚‚ã®ã‚’æ¸¡ã—ã¦å†…éƒ¨ã§ã¯`const`ã¨ã—ã¦æ‰±ã„ãŸã„å ´åˆãŒå¤šãã€`auto&&`ã¯æ„å‘³ãŒç•°ãªã£ã¦ã—ã¾ã„ã¾ã™ã€‚

ã“ã“ã§ã€ã“ã®å¼•æ•°å®£è¨€ã‹ã‚‰ã“ã‚Œã‚‰ã®å‹ã®æŒ‡å®šã‚’å–ã‚Šé™¤ãã“ã¨ãŒã§ãã‚Œã°ã€å¤§ããå†—é•·æ€§ã‚’ä½ä¸‹ã•ã›ã‚‹ã“ã¨ãŒã§ãã‚‹ã“ã¨ãŒè¦‹ãˆã¾ã™ã€‚ãã“ã§ã€ã“ã®ææ¡ˆã§ã¯ä¸Šè¨˜ã«åˆ—æŒ™ã—ãŸ2ã¤ç›®ã®å•é¡Œï¼ˆå¼•æ•°å®£è¨€å‘¨ã‚Šã®å•é¡Œï¼‰ã«çš„ã‚’çµã‚Šã€çœç•¥ã•ã‚ŒãŸä»®å¼•æ•°å®£è¨€ï¼ˆ*Abbreviated Parameters*ï¼‰ã¨ã„ã†æ§‹æ–‡ã®å°å…¥ã«ã‚ˆã‚Šã“ã®è§£æ±ºã‚’å›³ã‚Šã¾ã™ã€‚

```cpp
// ãƒ©ãƒ ãƒ€å¼
[]((a, b)) { return a < b; }
// é–¢æ•°
auto less_then((a, b)) { return a < b; }
```

äºŒé‡ã‹ã£ã“`(())`ã§å›²ã¾ã‚Œã¦ã„ã‚‹ã‚‚ã®ãŒçœç•¥ã•ã‚ŒãŸä»®å¼•æ•°ãƒªã‚¹ãƒˆã§ã™ã€‚ã“ã®å†…éƒ¨ã®è­˜åˆ¥å­ã¯å‹åã§ã¯ãªãå¤‰æ•°åï¼ˆå¼•æ•°åï¼‰ã¨ã—ã¦æ‰±ã‚ã‚Œã¾ã™

```cpp
// stringå‹ã€vectorå‹ã®ä»®å¼•æ•°å®£è¨€ã€å¼•æ•°åãªã—
auto something(string, vector);

// stringã€vectorã¨ã„ã†åå‰ã®ä»®å¼•æ•°å®£è¨€ã€å‹æŒ‡å®šãªã—ï¼ˆã“ã®ææ¡ˆï¼‰
auto something((string, vector));
```

ã“ã®æ™‚ã€ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šãƒªã‚¹ãƒˆã®å„è¦ç´ ã«2ã¤ä»¥ä¸Šã®è­˜åˆ¥å­ãŒæŒ‡å®šã•ã‚ŒãŸå ´åˆã€ãã‚Œã¯é€šå¸¸ã®ä»®å¼•æ•°å®£è¨€ã¨åŒã˜ã‚‚ã®ã¨ã—ã¦æ‰±ã‚ã‚Œã¾ã™ã€‚

```cpp
// ã“ã®2ã¤ã¯åŒã˜å®£è¨€ã¨ãªã‚‹
auto something(vector v);
auto something((vector v));

// ã“ã®2ã¤ã‚‚åŒã˜å®£è¨€ã¨ãªã‚‹
auto something(const vector& v);
auto something((const vector& v));
```

è¨€ã„æ›ãˆã‚‹ã¨ã€çœç•¥ã•ã‚ŒãŸä»®å¼•æ•°å®£è¨€ã«ãŠã„ã¦å‹åã®çœç•¥ã¯ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã™ã€‚ã“ã‚Œã¯å½“ç„¶æ··åœ¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```cpp
auto something((string, const vector& v));  // ok
```

çœç•¥ã•ã‚ŒãŸä»®å¼•æ•°å®£è¨€ï¼ˆã®ã†ã¡å‹åæŒ‡å®šãŒãªã„ã‚‚ã®ï¼‰ã¯ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ä¼´ã†å¼•æ•°å®£è¨€ã¨ã¿ãªã•ã‚Œã€é€šå¸¸ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå®Ÿå¼•æ•°æ¨è«–ã«å¾“ã£ã¦å‹ãŒæ¨è«–ã•ã‚Œã¾ã™ã€‚ã¤ã¾ã‚Šã¯ã€ãƒ©ãƒ ãƒ€å¼ã®å¼•æ•°å®£è¨€ã‹ã‚‰ã•ã‚‰ã«`auto`ã‚’çœç•¥ã—ã¦ã„ã‚‹ã‚ˆã†ãªæ„Ÿã˜ã§ã™ã€‚

```cpp
// ã“ã‚Œã‚‰ã¯ï¼ˆã»ã¼ï¼‰åŒã˜å®£è¨€ã¨ãªã‚‹
template<typename T>
auto something(T v);

auto something(auto v);

auto something((v));
```

ãŸã ã—ã€ä¿®é£¾ï¼ˆ`&&`ã¨ã‹`const`ãªã©ï¼‰ã¯ç•°ãªã‚Šã€ã“ã®ææ¡ˆã§ã¯`const auto&`ã¨åŒã˜æ¨è«–ã‚’è¡Œã†ã“ã¨ã‚’ææ¡ˆã—ã¦ã„ã¾ã™ã€‚

```cpp
// ã“ã‚Œã‚‰ã¯åŒã˜å®£è¨€ã¨ãªã‚‹
template<typename T>
auto something(const T& v);

auto something(const auto& v);

auto something((v));
```

`auto&&`ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãŒå¯å¤‰å‚ç…§ã§ã‚ã‚Šãã‚ŒãŒè¦‹ãˆãªããªã‚‹ã“ã¨ã§å±é™ºæ€§ãŒå¢—ã™ã¨ã¨ã‚‚ã«æ³¨æ„ã™ã¹ãã“ã¨ã‚„å‰æçŸ¥è­˜ãŒå¢—ãˆã‚‹ãŸã‚ã€ã“ã®ææ¡ˆã§ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆimmutableãŒæœ€é©ã ã¨ã—ã¦ã„ã¾ã™ã€‚ã¾ãŸã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãŒå‚ç…§ã¨ãªã‚‹ãŸã‚å‹ã«ã‚ˆã£ã¦ã¯éåŠ¹ç‡ã¨ãªã‚Šå¾—ã¾ã™ãŒã€ãã®ã‚ˆã†ãªå‹ã«å¯¾ã—ã¦ã‚ªãƒ—ãƒ†ã‚£ãƒã‚¤ã‚¶ãŒã“ã‚Œã‚’ã‚³ãƒ”ãƒ¼ã«ç½®ãæ›ãˆã‚‹ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã“ã¨ã‚‚ææ¡ˆã•ã‚Œã¦ã„ã¾ã™ã€‚

```cpp
std::string s;
std::vector<std::string> v;

std::for_each(s.begin(), s.end(), []((c)){ ... }); // decltype(c) is `const char`
std::for_each(v.begin(), v.end(), []((s)){ ... }); // decltype(s) is `const std::sting&`
```

ã“ã®ã‚ˆã†ãªæŒ¯ã‚‹èˆã„ã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå¼•æ•°ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å–å¾—ã™ã‚‹å ´åˆã«å•é¡Œã¨ãªã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ãŒã€å¼•æ•°ã‚’ãƒã‚¤ãƒ³ã‚¿å‹ã§å®£è¨€ã—ãªã„ã®ã«å®Ÿå¼•æ•°ã®å‚ç…§å…ƒã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å–å¾—ã™ã‚‹ã‚ˆã†ãªã‚±ãƒ¼ã‚¹ã¯è€ƒãˆã¥ã‚‰ã„ãŸã‚ã€ã“ã®ææ¡ˆã§ã¯è€ƒæ…®ã—ãªã„ã“ã¨ã«ã—ã¦ã„ã¾ã™ã€‚

```cpp
// å•é¡Œã¨ãªã‚Šã†ã‚‹ã‚±ãƒ¼ã‚¹ã ãŒ
void func((arg)) { persistAddrOf(&arg); ... }

// æ™®é€šã¯ã“ã†æ›¸ã‹ã‚Œã‚‹ã¯ãšï¼Ÿ
void func(const auto* arg)) { persistAddrOf(arg); ... }
```

- [P2424 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/1166)

### [P2437R1 Support for #warning](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2437r1.pdf)
### [P2447R2 std::span and the missing constructor](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2447r2.html)
### [P2448R1 Relaxing some constexpr restrictions](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2448r1.html)
### [P2457R0 2021 December Library Evolution Poll Outcomes](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2457r0.html)

2021å¹´12æœˆã«è¡Œã‚ã‚ŒãŸLEWGã«ãŠã‘ã‚‹å…¨ä½“æŠ•ç¥¨ã®çµæœã€‚

æ¬¡ã®12ã®ææ¡ˆãŒæŠ•ç¥¨ã«ã‹ã‘ã‚‰ã‚Œã€å¦æ±ºã•ã‚ŒãŸã‚‚ã®ã¯ã‚ã‚Šã¾ã›ã‚“ï¼ˆå…¨ã¦LWGã¸è»¢é€ã•ã‚Œã¦ã„ã¾ã™ï¼‰ã€‚ã¾ãŸã€æŠ•ç¥¨ã«å½“ãŸã£ã¦å¯„ã›ã‚‰ã‚ŒãŸè³›å¦ã®ã‚³ãƒ¡ãƒ³ãƒˆãŒè¨˜è¼‰ã•ã‚Œã¦ã„ã¾ã™ã€‚

- [P0009R14 mdspan](https://wg21.link/P0009R14)
- [P2093R11 Formatted Output](https://wg21.link/P2093R11)
- [P1467R7 Extended Floating-Point Types](https://wg21.link/P1467R7)
- [P2278R2 cbegin Should Always Return A Constant Iterator](https://wg21.link/P2278R2)
- [P2408R4 Ranges Iterators As Inputs To Non-Ranges Algorithms](https://wg21.link/P2408R4)
- [P2374R3 views::cartesian_product](https://wg21.link/P2374R3)
- [P2441R1 views::join_with](https://wg21.link/P2441R1)
- [P2446R1 views::all_move](https://wg21.link/P2446R1)
- [P2467R0 Support Exclusive Mode For fstreams](https://wg21.link/P2467R0)
- [P2438R1 string::substr() &&](https://wg21.link/P2438R1)
- [P2396R0 Concurrency TS v2 Fixes](https://wg21.link/P2396R0)
- [P2198R3 Freestanding Feature-Test Macros And Implementation-Defined Extensions C++23](https://wg21.link/P2198R3)



### [P2458R0 2022 January Library Evolution Polls](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2458r0.html)
### [P2468R2 The Equality Operator You Are Looking For](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2468r2.html)
### [P2474R1 views::repeat](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2474r1.html)
### [P2494R1 Relaxing range adaptors to allow for move only types](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2494r1.html)
### [P2498R1 Forward compatibility of text_encoding with additional encoding registries](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2498r1.pdf)
### [P2507R1 Limit [[assume]] to conditional-expressions](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2507r1.pdf)
### [P2508R1 Exposing std::basic-format-string](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2508r1.html)
### [P2511R0 Beyond `operator()`: NTTP callables in type-erased call wrappers](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2511r0.html)

`std::move_only_fuction`ã‚’ã€å‘¼ã³å‡ºã—å¯èƒ½ãªNTTPå€¤ã‚’å‹æ¶ˆå»ã™ã‚‹Callable Wrapperã¸æ‹¡å¼µã™ã‚‹ææ¡ˆã€‚

`move_only_fuction`ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼å®šç¾©ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ¸¡ã™ã«ã¯ã€ãã‚ŒãŒé–¢æ•°å‘¼ã³å‡ºã—æ¼”ç®—å­ã«ã‚ˆã£ã¦æ¬¡ã®ã‚ˆã†ã«å‘¼ã³å‡ºã—å¯èƒ½ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

```cpp
obj(some, args);
```

ã—ã‹ã—ã€`operator()`ã¯å…¨ã¦ã®ã‚¯ãƒ©ã‚¹å‹ã§å®Ÿè£…ã•ã‚Œã‚‹ã‚ã‘ã§ã¯ãªãã€ãƒ¦ãƒ¼ã‚¶ãƒ¼å®šç¾©ã®ã‚¯ãƒ©ã‚¹å‹ã§ã¯ä¾‹ãˆã°æ¬¡ã®ã‚ˆã†ã«ãƒ¡ãƒ³ãƒé–¢æ•°ã«ã‚ˆã£ã¦å‘¼ã³å‡ºã™ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚

```cpp
obj.send(some, args);
```

ã“ã®ææ¡ˆã¯ã€ã“ã®ã‚ˆã†ã«ãƒ¡ãƒ³ãƒé–¢æ•°ã«ã‚ˆã£ã¦å‘¼ã³å‡ºã—ã‚’è¡Œã†ã‚‚ã®ã‚’`move_only_fuction`ã§æ‰±ãˆã‚‹ã‚ˆã†ã«ã—ã‚ˆã†ã¨ã™ã‚‹ææ¡ˆã§ã™ã€‚ã¤ã¾ã‚Šã¯ã€ã“ã®ã‚ˆã†ãªãƒ¡ãƒ³ãƒé–¢æ•°ã«ã‚ˆã‚‹å‘¼ã³å‡ºã—ã‚’`operator()`ã«ã‚ˆã£ã¦ãƒ©ãƒƒãƒ—ã™ã‚‹æ©Ÿèƒ½ã‚’`move_only_fuction`ã«å…¥ã‚Œè¾¼ã‚‚ã†ã¨ã—ã¦ã„ã¾ã™ã€‚

ã“ã®ã‚ˆã†ãªãƒ©ãƒƒãƒ”ãƒ³ã‚°ã¯ç¾åœ¨ã€ãƒ©ãƒ ãƒ€å¼ã‚’ç”¨ã„ã¦è¡Œã‚ã‚Œã¾ã™ã€‚

```cpp
auto wrap = [obj = std::move(obj)]<typename... Args>(Args&&... args) mutable {
  return obj.send(obj, std::forward<Args>(args)...);
};
```

ã—ã‹ã—è¦‹ã¦åˆ†ã‹ã‚‹é€šã‚Šè¨˜è¿°ãŒå†—é•·ã§ãƒœã‚¤ãƒ©ãƒ¼ãƒ—ãƒ¬ãƒ¼ãƒˆãŒå¤šã™ãã¾ã™ã€‚ã¾ãŸã€å®Œå…¨è»¢é€ã‚„`this`(`obj`)ã®å€¤ã‚«ãƒ†ã‚´ãƒªãªã©ã€æ°—ã«ã™ã¹ãäº‹é …ã‚‚å¤šã„ã§ã™ã€‚ãƒ©ãƒ ãƒ€å¼ã¯ã“ã®ç”¨é€”ã«ã¯ã‚ã¾ã‚Šé©ã—ã¦ã„ã¾ã›ã‚“ã€‚

ã»ã‹ã«ã¯ã€[`std::bind_front`](https://cpprefjp.github.io/reference/functional/bind_front.html)ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

```cpp
auto wrap = std::bind_front(&Obj::send, std::move(obj));
```

ã‹ãªã‚Šã‚·ãƒ³ãƒ—ãƒ«ã«æ›¸ãã“ã¨ãŒã§ãã¾ã™ãŒã€ã“ã®å ´åˆã¯è¿½åŠ ã®ã‚³ã‚¹ãƒˆï¼ˆç‰¹ã«ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®å®Ÿä½“åŒ–ã‚³ã‚¹ãƒˆï¼‰ãŒã‹ã‹ã‚Šã¾ã™ã€‚

ã“ã“ã§å½“åˆã®ç›®çš„ã‚’æ€ã„å‡ºã™ã¨ã€ã“ã®ã‚ˆã†ãªãƒ©ãƒƒãƒ‘ãƒ¼ã¯æœ€çµ‚çš„ã«`movo_only_function`ã¸å…¥ã‚Œè¾¼ã¿ãŸã„ã®ã§ã—ãŸã€‚ãã—ã¦ã€ã“ã®ã‚ˆã†ãªãƒ©ãƒƒãƒ‘ãƒ¼ã®å¯¾è±¡ã¨ãªã£ã¦ã„ã‚‹å‘¼ã³å‡ºã—å¯èƒ½ãªã‚‚ã®ã¨ã¯ãƒ¡ãƒ³ãƒé–¢æ•°ãƒã‚¤ãƒ³ã‚¿ï¼ˆã‚ã‚‹ã„ã¯é–¢æ•°ãƒã‚¤ãƒ³ã‚¿ï¼‰ã§ã‚ã‚Šã€ãã‚Œã¯ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ã«å€¤ãŒå®šã¾ã‚‹ã‚‚ã®ã§ã™ï¼ˆã“ã“ã§ã¯ã“ã‚Œã‚’NTTPå€¤ã¨å‘¼ã¶ã“ã¨ã«ã—ã¾ã™ï¼‰ã€‚

NTTPå€¤ã®ä¿å­˜ã«å½“ãŸã£ã¦ã¯è¿½åŠ ã®ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸é ˜åŸŸã‚’å¿…è¦ã¨ã—ãªã„ï¼ˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ã—ã¦ä¿æŒã™ã‚‹ã“ã¨ãŒã§ãã€å®Ÿä½“çš„ã«ã¯ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã®å‹åã«åŸ‹ã‚è¾¼ã¾ã‚Œã‚‹ï¼‰ãŸã‚ã€æœ¬æ¥Callableã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä¿æŒã™ã‚‹é ˜åŸŸã‚’åˆ¥ã®äº‹ã«ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã™ãªã‚ã¡ã€ãã®é ˜åŸŸã«æŸç¸›å¯¾è±¡ã®`*this`ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä¿å­˜ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚å¾“ã£ã¦ã€`movo_only_function`ã«ãã‚Œã‚’å—ã‘å–ã‚Œã‚‹ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’è¿½åŠ ã™ã‚‹ã ã‘ã§ä¸Šè¨˜ã®ã‚ˆã†ãªãƒ©ãƒƒãƒ”ãƒ³ã‚°ãŒã§ããã†ã§ã™ã€‚

ã“ã®ææ¡ˆã§ã¯ã€`std::nontype_t<V>`ã‚’æ¨™æº–ã¸å°å…¥ã—ã€ãã‚Œã‚’ç”¨ã„ã¦`std::move_only_fuction`ã‚’æ§‹ç¯‰ã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚

```cpp
std::move_only_function<void(Some, Args)> wrap{std::nontype<&Obj::send>, std::move(obj)});
```

ã¾ãŸã€`std::nontype_<V>`ã ã‘ã‹ã‚‰å¤‰æ›ã™ã‚‹ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‚‚ç”¨æ„ã•ã‚Œã¾ã™ã€‚

```cpp
move_only_function<int(const char*, const char*)> fn = strcmp;
fn = nontype<strcasecmp>;
```

ã“ã‚Œã‚‰ã®äº‹ã¯åŒæ™‚ã«`std::fuction_ref`ã«ã¤ã„ã¦ã‚‚ææ¡ˆã•ã‚Œã¦ã„ã¾ã™ãŒã€ãã¡ã‚‰ã¯ã¾ã æ¨™æº–ã¸ã®æ–‡è¨€ãŒå›ºã¾ã£ã¦ã„ãªã„ãŸã‚ã€ã“ã“ã§ã‚‚æ–‡è¨€ã¯ä¿ç•™ä¸­ã§ã™ã€‚ä¸€æ–¹ã§ã€ã“ã‚Œã‚‰ã®äº‹ã¯æ—¢å­˜ã®ã‚‚ã®ï¼ˆ`std::function, std::pckaged_task`ï¼‰ã«ã¯ææ¡ˆã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚

ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰

```cpp
// DB::connect()ãŒã“ã®ã‚ˆã†ãªã‚·ã‚°ãƒãƒãƒ£ã ã¨ã—ã¦
std::vector<std::move_only_function<bool(std::string, double, double)>> q{};

// C++11ï¼ˆstd::bindã«ã‚ˆã‚‹thisã®æŸç¸›ï¼‰
q.push(std::bind(&DB::connect, std::move(db), _1, _2, _3));

// C++14ï¼ˆã‚¸ã‚§ãƒãƒªãƒƒã‚¯ãƒ©ãƒ ãƒ€ã«ã‚ˆã‚‹thisã®æŸç¸›ï¼‰
q.push([db{std::move(db)}] (auto &&... args) mutable
       {
           return db.connect(std::forward<decltype(args)>(args)...);
       });

// C++20ï¼ˆstd::bind_frontã«ã‚ˆã‚‹thisã®æŸç¸›ï¼‰
q.push(std::bind_front(&DB::connect, std::move(db)));
// ã‚ã‚‹ã„ã¯ï¼ˆã‚¸ã‚§ãƒãƒªãƒƒã‚¯ãƒ©ãƒ ãƒ€+ãƒ©ãƒ ãƒ€ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æŒ‡å®šï¼‰
q.push([db{std::move(db)}] <class ...T>(T &&... args) mutable
       {
           return db.connect(std::forward<T>(args)...);
       });

// ã“ã®ææ¡ˆ
q.emplace(nontype<&DB::connect>, std::move(db));
```

ã“ã®`std::nontype_t<V>`ã«ã‚ˆã£ã¦ã€`std::move_only_function`ã‚’ã¯ã˜ã‚ã¨ã™ã‚‹å‹æ¶ˆå»ãƒ©ãƒƒãƒ‘ãƒ¼ã¯ã€é–¢æ•°ãƒã‚¤ãƒ³ã‚¿ãªã©ã®NTTPå€¤ã‚’å‹æ¶ˆå»ã™ã‚‹ã‚ˆã†ã«ãªã£ãŸã¨è¦‹ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚å‹æ¶ˆå»ï¼ˆ*Type erasure*ï¼‰ã¯ç•°ãªã‚‹å‹ã«ä¾å­˜ã—ã¦ã„ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’ãã‚Œã‚‰ã®å‹ã«ä¾å­˜ã—ãªã„ã‚ˆã†ã«ã™ã‚‹ã“ã¨ã§ã€ã“ã®å ´åˆã¯ãã®ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ãŒå‹ã§ã¯ãªãã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ã®å€¤ï¼ˆé–¢æ•°ãƒã‚¤ãƒ³ã‚¿ï¼‰ã«ä¾å­˜ã—ã¦ã„ãŸã‚ã‘ã§ã™ã€‚

- [P2511 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/1169)

### [P2512R0 SG16: Unicode meeting summaries 2021-06-09 through 2021-12-15](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2512r0.html)

2021å¹´6æœˆã‹ã‚‰12æœˆã®åŠå¹´é–“ã®SG16ï¼ˆUnicode Study Groupï¼‰ã®ãƒŸãƒ¼ãƒ†ã‚£ãƒ³ã‚°è­°äº‹éŒ²ã€‚

ä¾‹ãˆã°P2093R6: Formatted outputç­‰ã®ææ¡ˆã«é–¢ã™ã‚‹è­°è«–ã¨æŠ•ç¥¨ã®æ§˜å­ãŒè©³ã—ãè¨˜ã•ã‚Œã¦ã„ã¾ã™ã€‚

### [P2513R0 `char8_t` Compatibility and Portability Fixes](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2513r0.html)

`char8_t`ã®éäº’æ›æ€§ã‚’ç·©å’Œã™ã‚‹ææ¡ˆã€‚

C++20ã§å°å…¥ã•ã‚ŒãŸ`char8_t`ã¯UTF-8æ–‡å­—ã‚’è¡¨ã™å°‚ç”¨ã®å‹ã§ã‚ã‚Šã€ãã®ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã¯å¸¸ã«UTF-8ã§ã‚ã‚‹ã“ã¨ãŒä¿è¨¼ã•ã‚Œã¾ã™ï¼ˆå¤‰ãªã“ã¨ã—ãªã‘ã‚Œã°ï¼‰ã€‚ãŸã ã—ã€`u8`æ–‡å­—/æ–‡å­—åˆ—ãƒªãƒ†ãƒ©ãƒ«ã®å‹ã‚’å¤‰æ›´ã—ã¦ãŠã‚Šã€C++17ä»¥å‰ã«å¯¾ã™ã‚‹å£Šçš„å¤‰æ›´ã‚’ä¼´ã£ã¦ã„ã¾ã™ã€‚

```cpp
const char* a = u8"a";            // C++17ã¾ã§ã¯okã€C++20ã‹ã‚‰ã¯ng
const char b[] = u8"b";           // C++17ã¾ã§ã¯okã€C++20ã‹ã‚‰ã¯ng
const unsigned char c[] = u8"c";  // C++17ã¾ã§ã¯okã€C++20ã‹ã‚‰ã¯ng
```

`char8_t`ã«ã‚ˆã‚‹æ–‡å­—/æ–‡å­—åˆ—ã¯`char, const char*, const char[]`ãªã©ã«æš—é»™å¤‰æ›ã™ã‚‹ã“ã¨ãŒã§ãã¾ã›ã‚“ã€‚ã“ã‚Œã¯UTF-8ã®æ–‡å­—ã‚’è¡¨ã™ãŸã‚ã«`char8_t`ã‚’å°å…¥ã™ã‚‹ã¨ã„ã†è¦³ç‚¹ã‹ã‚‰ã¯å½“ç„¶ã®å¤‰æ›´ã§ã¯ã‚ã‚Šã¾ã™ãŒã€æ—¢å­˜ã®ã‚³ãƒ¼ãƒ‰ã¸ã®å½±éŸ¿ãŒå°ã•ã‹ã£ãŸã‚ã‘ã§ã‚‚ã‚ã‚Šã¾ã›ã‚“ã€‚ã“ã®ã‚ˆã†ãªå½±éŸ¿ã‚’ç·©å’Œã™ã‚‹ãŸã‚ã«`-fno-char8_t`(GCC)ã¨ã‹`/Zc:char8_t`(MSVC)ç­‰ã®ã€C++20ãƒ¢ãƒ¼ãƒ‰ã§`char8_t`ã‚’ç„¡åŠ¹åŒ–ã™ã‚‹ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒæä¾›ã•ã‚Œã¦ã„ã¾ã™ã€‚

ã•ã‚‰ã«ã€ã“ã®éäº’æ›æ€§ã¯C++17ä»¥å‰ã ã‘ã«ã¨ã©ã¾ã‚‰ãšã€Cã¨ã®äº’æ›æ€§ã‚‚å£Šã—ã¦ã„ã¾ã™ã€‚Cã«ã¯`char8_t`ã¯ã‚ã‚Šã¾ã›ã‚“ãŒ`u8`ãƒªãƒ†ãƒ©ãƒ«ã¯ä½¿ç”¨å¯èƒ½ã§ã€ãã®å‹ã¯`char[N]`ã§ã™ã€‚ã™ãªã‚ã¡åŒã˜å•é¡ŒãŒCã¨C++20ã®é–“ã§èµ·ã“ã‚Šã¾ã™ã€‚ã•ã‚‰ã«ã€C23ä»¥é™ã«Cã«ã‚‚`char8_t`ãŒå°å…¥ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šï¼ˆ[N2653](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n2653.htm)ï¼‰ã€ãã“ã§ã¯`char16_t/char32_t`ã¨åŒã˜ã`char8_t`ã¯`unsigned char`ã®`typedef`ã¨ã—ã¦ææ¡ˆã•ã‚Œã¦ãŠã‚Šã€`u8""`ãƒªãƒ†ãƒ©ãƒ«ã®æˆ»ã‚Šå€¤ã¯`char`ã¨`char8_t`ã®é…åˆ—ã©ã¡ã‚‰ã«ã‚‚å¤‰æ›ã§ãã‚‹ã‚ˆã†ã«è¦å®šã•ã‚Œã¾ã™ã€‚ã™ãªã‚ã¡ã€Cã¯C++ã®æ§˜ãªéäº’æ›ã‚’å°å…¥ã—ã¦ãŠã‚‰ãšã€çµå±€ã“ã®äº’æ›æ€§å•é¡Œã¯æ®‹ã‚Šç¶šã‘ã¾ã™ã€‚

```cpp
extern const unsigned char d[] = u8"d"; // N2653å¾Œã®Cã§ã‚‚okã€C++20ã¯ng
```

ã“ã®ã‚ˆã†ãªéäº’æ›æ€§ã‚’ç·©å’Œã™ã‚‹ãŸã‚ã«ã€ã“ã®ææ¡ˆã§ã¯`u8""`æ–‡å­—åˆ—ãƒªãƒ†ãƒ©ãƒ«ã‹ã‚‰`unsgined char`ã®é…åˆ—ãŒåˆæœŸåŒ–ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã“ã¨ã‚’ææ¡ˆã—ã¦ã„ã¾ã™ã€‚

```cpp
extern const unsigned char d[] = u8"d"; // ã“ã®ææ¡ˆã®å¾Œã€C++ã§ã‚‚ok
```

ã“ã‚Œã¯å¤‰æ›ã§ã¯ãªãé…åˆ—ã®åˆæœŸåŒ–æ™‚ã«ç‰¹åˆ¥æ‰±ã„ã™ã‚‹ã‚‚ã®ã§ã™ï¼ˆCã®N2653ã®`u8""`æ–‡å­—åˆ—ãƒªãƒ†ãƒ©ãƒ«ã‚‚ã»ã¼åŒæ§˜ã§ã™ï¼‰ã€‚å¾“ã£ã¦`char8_t`ã®å‹ä»˜ã‘ãŒå¼±ããªã‚‹ã“ã¨ã¯ãªãã€ã“ã‚Œä»¥å¤–ã®ç‰¹åˆ¥æ‰±ã„ã‚„å¤‰æ›ã¯ææ¡ˆã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚

```cpp
// ã“ã®ææ¡ˆã®å¾Œ
const char* a = u8"a";            // ng
const char b[] = u8"b";           // ok
const unsigned char c[] = u8"c";  // ok
```

ã“ã®ææ¡ˆã«ã‚ˆã£ã¦ã€ç›´æ¥çš„ã«`u8""`ãƒªãƒ†ãƒ©ãƒ«ã®éäº’æ›æ€§ãŒè§£æ¶ˆã•ã‚Œã‚‹ã‚ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ãŒï¼ˆå¤šãã®å ´åˆã€`char`ã®æ–‡å­—åˆ—ã¯`const char*`ã§æ‰±ã‚ã‚Œã‚‹ãŸã‚ï¼‰ã€`char8_t`æ–‡å­—åˆ—ã‚’`const char*`ã«æ¸¡ã™ã¨ãã«ã€å¤‰ãªã“ã¨ã‚’ã™ã‚‹å¿…è¦ã®ãªã„çµŒè·¯ã‚’ä½œã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```cpp
// UTF-8æ–‡å­—åˆ—ã‚’å—ã‘å–ã‚‹é–¢æ•°
void input_u8str(const char* str);

int main() {
  // C++17ã¾ã§ã¯okã€ã“ã®ææ¡ˆã®å¾Œã§ã‚‚C++20ä»¥é™ã¯ng
  input_u8str(u8"UTF-8 string.");

  // C++20ã®å›é¿ç­–
  const char8_t* u8str = u8"UTF-8 string.";
  input_u8str(reinterpret_cast<const char*>(u8str));

  // ã“ã®ææ¡ˆã®å›é¿çµŒè·¯
  const char tmp_str[] = u8"UTF-8 string.";
  input_u8str(tmp_str);
}
```

ç‰¹ã«ã€`reinterpret_cast`ã‚’ä½¿ç”¨ã—ãªãã¦ã‚‚ã‚ˆããªã‚‹ã®ã§ã“ã®ã‚ˆã†ãªå›é¿ç­–ã¯å®šæ•°å¼ã§ã‚‚ä½¿ç”¨å¯èƒ½ã«ãªã‚Šã¾ã™ã€‚ã¾ãŸã€ä¸–ã®ä¸­ã§ã¯`char`ã®æ–‡å­—åˆ—ã¨UTF-8æ–‡å­—åˆ—ã‚’æ„å‘³çš„ã«åŒºåˆ¥ã™ã‚‹ãŸã‚ã«`typedef std::basic_string<unsigned char, my_u8_traits> u8string;`ã®ã‚ˆã†ãªã‚‚ã®ã‚’å®šç¾©ã™ã‚‹ã®ãŒä¸€èˆ¬çš„ãªãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã¨ãªã£ã¦ã„ã‚‹ã‚‰ã—ãã€ã“ã®ææ¡ˆã¯ã“ã®ã‚ˆã†ãªãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ãŒC++20ã«ç§»è¡Œã™ã‚‹ãŸã‚ã®ä¸€åŠ©ã«ã‚‚ãªã‚Šã¾ã™ã€‚

ã“ã®ã‚ˆã†ã«ã€ã“ã®ææ¡ˆã§ã¯å˜ç´”ã§å°ã•ãªå¤‰æ›´ã«ã‚ˆã£ã¦ã€C++20ä»¥å‰ã®ã‚³ãƒ¼ãƒ‰ã‚’C++20ã«å¯¾å¿œã™ã‚‹ãŸã‚ã®çµŒè·¯ã‚’æä¾›ã—ã€Cã‚³ãƒ¼ãƒ‰ã¨ã®äº’æ›æ€§ã‚’ç¢ºä¿ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ãã—ã¦ã€ã“ã®ææ¡ˆã¯C++20ã¸ã®æ¬ é™¥å ±å‘Šã¨ã™ã¹ãä½œæ¥­ã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚

- [C++20 UTF-8ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã•ã‚ŒãŸæ–‡å­—ã®å‹ã¨ã—ã¦char8_tã‚’è¿½åŠ  - cpprefjp](https://cpprefjp.github.io/lang/cpp20/char8_t.html)
- [P2513 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/1171)

### [P2514R0 `std::breakpoint`](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2514r0.html)

C++ã‚³ãƒ¼ãƒ‰ä¸Šã‹ã‚‰ãƒ–ãƒ¬ãƒ¼ã‚¯ãƒã‚¤ãƒ³ãƒˆã‚’è¨­å®šã™ã‚‹ãŸã‚ã®`std::breakpoint()`ã®ææ¡ˆã€‚

ã‚³ãƒ¼ãƒ‰ã®ãƒ‡ãƒãƒƒã‚°æ™‚ã«ãƒ–ãƒ¬ãƒ¼ã‚¯ãƒã‚¤ãƒ³ãƒˆã¯é‡å®ã—ã¾ã™ãŒã€ãƒ–ãƒ¬ãƒ¼ã‚¯ãƒã‚¤ãƒ³ãƒˆãã®ã‚‚ã®ã¯C++ã‚³ãƒ¼ãƒ‰ã®å¤–ã®æ¦‚å¿µã§ã™ã€‚æ…£ã‚Œã‚Œã°å¤§ã—ãŸã“ã¨ãªã„ä½œæ¥­ã§ã¯ã‚ã‚Šã¾ã™ãŒã€åˆå­¦è€…ã«ã¨ã£ã¦ã¯æ··ä¹±ã®å…ƒã§ã€C++ã®å¤–ã®IDEã‚„ãƒ‡ãƒãƒƒã‚¬ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚„æ§‹æ–‡ã‚’å­¦ç¿’ã—ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚

`std::breakpoint()`ãŒã‚ã‚‹ã“ã¨ã«ã‚ˆã£ã¦ãƒ–ãƒ¬ãƒ¼ã‚¯ãƒã‚¤ãƒ³ãƒˆã®é…ç½®ã‚’ã‚³ãƒ¼ãƒ‰ã§è¡¨ç¾ã§ãã€ç‰¹ã«å®Ÿè¡Œæ™‚ã®æ¡ä»¶ã«ã‚ˆã‚‹ãƒ–ãƒ¬ãƒ¼ã‚¯ãƒã‚¤ãƒ³ãƒˆã®åˆ¶å¾¡ãŒã‚ˆã‚Šç°¡å˜ã«è¡Œãˆã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

```cpp
#include <debugging>

// ãªã‚“ã‹ã®å‡¦ç†
auto f() -> double;

int main() {
  double d = f();

  if (std::isnan(d)) {
    std::breakpoint();  // dãŒNaNã®æ™‚ã«ãƒ–ãƒ¬ãƒ¼ã‚¯ã™ã‚‹
  }

  ...

}
```

`std::breakpoint()`ã¯ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®å®Ÿè¡Œä¸­ã«ãƒ‡ãƒãƒƒã‚¬ãŒã‚¢ã‚¿ãƒƒãƒã•ã‚Œã¦ã„ã‚‹æ™‚ã ã‘å‹•ä½œã—ã€ãã‚ŒãŒå‘¼ã³å‡ºã•ã‚Œã‚‹ã¨é€šå¸¸ã®ãƒ–ãƒ¬ãƒ¼ã‚¯ãƒã‚¤ãƒ³ãƒˆãŒã‚ã‚‹ã‹ã®ã‚ˆã†ã«ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®å®Ÿè¡Œã‚’ä¸€æ™‚åœæ­¢ã—ã¾ã™ã€‚ã“ã®æŒ¯ã‚‹èˆã„ã¯ç¾åœ¨ã§ã‚‚ã»ã¼å…¨ã¦ã®ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã¨ãƒ‡ãƒãƒƒã‚¬ã§ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚

- MSVC : `__debugbreak`
- GCC : `__builtin_trap`
- Clang : `__builtin_debugtrap`
- Keil armcc : `__breakpoint`
- Unreal Engine 4 : ãƒã‚¯ãƒ­ã«ã‚ˆã‚‹åŒæ§˜ã®å®Ÿè£…

`std::breakpoint()`ã¯ã“ã‚Œã‚‰ã®å®Ÿè£…å®šç¾©ã®ã‚‚ã®ã‚’æ¨™æº–åŒ–ã™ã‚‹ã‚‚ã®ã§ã‚‚ã‚ã‚Šã¾ã™ã€‚

- [P1279 `std::breakpoint`, Isabella Muerte 2018-10-05](https://wg21.link/P1279)
- [P2514 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/1172)

### [P2515R0 `std::is_debugger_present`](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2515r0.html)

ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãŒãƒ‡ãƒãƒƒã‚°ä¸­ã§ã‚ã‚‹ã‹ã‚’çŸ¥ã‚‹ãŸã‚ã®é–¢æ•°`std::is_debugger_present()`ã®ææ¡ˆã€‚

ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãŒãƒ‡ãƒãƒƒã‚¬ã«ã‚¢ã‚¿ãƒƒãƒã•ã‚Œã¦å®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹æ™‚ã ã‘ç‰¹åˆ¥ãªã“ã¨ï¼ˆè¿½åŠ ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å‡ºåŠ›ã€è¿½åŠ ã®ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã®å®Ÿè¡Œã€ãƒ‡ãƒãƒƒã‚°ã«æœ‰ç”¨ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®è¡¨ç¤ºãªã©ï¼‰ã‚’ã—ãŸã„å ´åˆã€ãã‚Œã¯ç°¡å˜ã§ã¯ãªãå®Ÿè¡Œç’°å¢ƒã«é–¢ã™ã‚‹æ·±ã„çŸ¥è­˜ãŒæ±‚ã‚ã‚‰ã‚Œã¾ã™ã€‚ã“ã®ææ¡ˆã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãã®ã‚ˆã†ãªè² æ‹…ã‚’è² ã†ã“ã¨ãªãã€ãƒ‡ãƒãƒƒã‚°ä¸­ã§ã‚ã‚‹ã“ã¨ã‚’åˆ¤å®šã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã‚‚ã®ã§ã™ã€‚

è¿½åŠ ã™ã‚‹ã®ã¯`std::is_debugger_present()`ã¨è¨€ã†é–¢æ•°ã§ã€ã“ã‚Œã¯ãƒ‡ãƒãƒƒã‚¬ãŒã‚¢ã‚¿ãƒƒãƒã•ã‚Œã¦ã„ã‚‹å ´åˆã«`true`ã‚’è¿”ã™å¼•æ•°ãªã—ã®é–¢æ•°ã§ã™ã€‚

```cpp
namespace std {
	bool is_debugger_present() noexcept;
}
```

ä¸€éƒ¨ã®ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§ã¯`IsDebuggerPresent()`ã‚„`IsDebuggerActive()`ã¨ã—ã¦ã“ã‚Œã‚‰ã®æ©Ÿèƒ½ã‚’æä¾›ã—ã¦ãŠã‚Šã€ã“ã‚Œã¯ãã‚Œã‚’æ¨™æº–åŒ–ã™ã‚‹ã‚‚ã®ã§ã‚‚ã‚ã‚Šã¾ã™ã€‚

- [P2515 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/1173)

### [P2516R0 `string_view` is implicitly convertible from what?](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2516r0.html)

`std::basic_string_view`ã‹ã‚‰Rangeã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‚’å‰Šé™¤ã™ã‚‹ææ¡ˆã€‚

`std::basic_string_view`ã«å¯¾ã™ã‚‹Rangeã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ï¼ˆåŒã˜æ–‡å­—å‹ã«ã‚ˆã‚‹ä»»æ„ã®`contiguous_range`ã‹ã‚‰æ§‹ç¯‰ã™ã‚‹ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã¯ï¼‰C++23ã«å¯¾ã—ã¦[P1391](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2019/p1391r4.pdf)ã§å°å…¥ã•ã‚Œã¾ã—ãŸã€‚ä¸€è¦‹ã™ã‚‹ã¨ã“ã‚Œã¯ä¾¿åˆ©ã§ã‚ã‚Šã„ã„ã‚¢ã‚¤ãƒ‡ã‚¢ã«æ€ãˆã¾ã™ãŒã€å®Ÿéš›ã«ä½¿ç”¨ã—ã¦ã¿ã‚‹ã¨ã„ãã¤ã‹ã®ç½ ãŒæ½œã‚“ã§ã„ã¾ã™ã€‚

```cpp
template <typename Container>
auto print(const Container& c)
    -> std::enable_if_t<!std::is_convertible_v<Container, std::string_view>> {
  std::cout << '[';
  const char* sep = "";
  for (const auto& item: c) {
    std::cout << sep << item;
    sep = ", ";
  }
  std::cout << ']';
}

void print(std::string_view s) {
  std::cout << '"' << s << '"';
}
```

ã“ã®é–¢æ•°ã¯ã‚³ãƒ³ãƒ†ãƒŠã«å¯¾ã—ã¦ã¯`[a, b, ...]`ã®å½¢å¼ã§å‡ºåŠ›ã—ã€æ–‡å­—åˆ—likeãªå‹ï¼ˆ`std::string_view`ã«å¤‰æ›å¯èƒ½ãªå‹ï¼‰ã«å¯¾ã—ã¦ã¯æ–‡å­—åˆ—ã¨ã—ã¦`"ab..."`ã®ã‚ˆã†ã«å‡ºåŠ›ã™ã‚‹é–¢æ•°ã§ã™ã€‚ã“ã‚Œã‚’`print(std::vector{'a', 'b'})`ã®ã‚ˆã†ã«ä½¿ç”¨ã—ãŸæ™‚ã€C++20ã¾ã§ã¯`[a, b]`ã¨å‡ºåŠ›ã•ã‚Œã¾ã™ãŒã€C++23ã‹ã‚‰ã¯`"ab"`ã¨å‡ºåŠ›ã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ã“ã‚Œã¯C++23ã§å°å…¥ã•ã‚ŒãŸRangeã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‚’é€šã—ã¦æš—é»™å¤‰æ›ãŒè¡Œã‚ã‚Œã¦ã„ã‚‹ãŸã‚ã«èµ·ãã¦ã„ã‚‹ã“ã¨ã§ã™ã€‚

`std::string_view`ã¯æ–‡å­—åˆ—ã®å‚ç…§ã¨ãªã‚‹ã‚‚ã®ã§ã€ãã®åå‰ã‚„ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã«ã‚‚ãã‚ŒãŒç¾ã‚Œã¦ã„ã¾ã™ã€‚Rangeã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã«ã‚ˆã‚‹æš—é»™å¤‰æ›ã¯ãã®ä»®å®šã‚’ç ´å£Šã—ã€`std::string_view`ã‚’æ–‡å­—åˆ—ã¸ã®å‚ç…§ã§ã¯ãªãä»»æ„ã®`contiguous_range`ã®å‚ç…§ã¸ã¨æ„å‘³ã‚’å¤‰æ›´ã—ã¦ã—ã¾ã£ã¦ã„ã¾ã™ã€‚ã“ã®å¤‰æ›ã®å•é¡Œç‚¹ã¯æ–‡å­—åˆ—ã§ã‚ã‚‹ãŸã‚ã®ãƒ—ãƒ­ã‚¯ã‚·ã«é€£ç¶šæ€§ã‚’ä½¿ç”¨ã—ã¦ã€æ–‡å­—åˆ—ã®å®Ÿè¡¨ç¾ã¨æ„å‘³è«–ã‚’æ··åŒã—ã¦ã—ã¾ã£ã¦ã„ã‚‹ã“ã¨ã«ã‚ã‚Šã¾ã™ã€‚

||C++17|C++20|C++23|
|---|---|---|---|
|`print(std::list{'a', 'b'});`|`[a, b]`|`[a, b]`|`[a, b]`|
|`print(std::deque{'a', 'b'});`|`[a, b]`|`[a, b]`|`[a, b]`|
|`print(std::vector{'a', 'b'});`|`[a, b]`|`[a, b]`|`"ab"`|

ã“ã®ã‚ˆã†ã«æ¯”è¼ƒã—ãŸæ™‚ã€`std::vector`ãŒä»–ã®ã‚³ãƒ³ãƒ†ãƒŠã¨ç•°ãªã‚‹ã¨ã“ã‚ã¯ã©ã“ãªã®ã§ã—ã‚‡ã†ã‹ï¼Ÿãã—ã¦ã“ã‚Œã¯æœ¬å½“ã«æ–‡å­—åˆ—likeãªã‚‚ã®ãªã®ã§ã—ã‚‡ã†ã‹ï¼Ÿ`contiguous_range`ã‚’å‚ç…§ã™ã‚‹å‹ãŒæ¬²ã—ã„å ´åˆã€ã™ã§ã«`std::span<const T>`ãŒã‚ã‚Šã¾ã™ã€‚

ã“ã®ã“ã¨ã¯`{fmt}`ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§å ±å‘Šã•ã‚ŒãŸã“ã¨ã§ç™ºè¦‹ã•ã‚Œã€å•é¡Œã‚’å›é¿ã™ã‚‹ãŸã‚ã«`print`ã®ã‚ˆã†ãªé–¢æ•°ã®å®šç¾©ã‚’å¤‰æ›´ã™ã‚‹ã®ã¯æ ¹æœ¬çš„ãªè§£æ±ºã«ã¯ãªã‚Šã¾ã›ã‚“ã€‚æ–‡å­—åˆ—ã¨ã‚³ãƒ³ãƒ†ãƒŠã‚’åŒºåˆ¥ã™ã‚‹å¿…è¦ã®ã‚ã‚‹ä»–ã®ãƒ†ã‚­ã‚¹ãƒˆå‡¦ç†ã‚„ã‚·ãƒªã‚¢ãƒ«åŒ–å‡¦ç†ã§ã‚‚å•é¡Œã¨ãªã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ã¾ãŸã€`char`ã«ã¯2ã¤ã®æ„å‘³ï¼ˆæ–‡å­—ã¨ãƒã‚¤ãƒˆã®å˜ä½ï¼‰ãŒã‚ã‚Šã€ãƒã‚¤ãƒˆåˆ—ã¨ã—ã¦ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹`std::vector<char>`ã‚„`std::span<char>`ãŒ`std::string_view`ã¨ã—ã¦æš—é»™å¤‰æ›å¯èƒ½ã«ãªã£ã¦ã—ã¾ã†ã¨å‹å®‰å…¨æ€§ã‚’ç ´å£Šã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

ã“ã‚Œã‚‰ã®ç†ç”±ã‹ã‚‰ã€`std::basic_string_view`ã®Rangeã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã¯ãƒ¡ãƒªãƒƒãƒˆï¼ˆä¸»ã«åˆ©ä¾¿æ€§ã®å‘ä¸Šï¼‰ã‚ˆã‚Šã‚‚ãƒ‡ãƒ¡ãƒªãƒƒãƒˆã®æ–¹ãŒå¤§ãã„ãŸã‚ã€P1391R4ã®å†…å®¹ã‚’å…¨ã¦å‰Šé™¤ã—ã‚ˆã†ã¨ã™ã‚‹ææ¡ˆã§ã™ã€‚

- [P1391R4 Range constructor for `std::string_view`](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2019/p1391r4.pdf)
- [P2516 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/1174)

### [P2517R0 Add a conditional noexcept specification to std::apply](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2517r0.html)

`std::apply`ã«`noexcept`æŒ‡å®šã‚’è¡Œã†ææ¡ˆã€‚

C++23ã«å°å…¥ã•ã‚Œã‚‹äºˆå®šã®`views::zip`ã¨ãã®ä»²é–“ã¯è¤‡æ•°ã®ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ã‚’çºã‚ã¦ä¸€ã¤ã®ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ã¨ã™ã‚‹`view`ã§ã€ãã®`operator*`ã®çµæœã¯å…ƒã®ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ã®å„è¦ç´ ã‚’çºã‚ãŸ`std::tuple`ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§è¿”ã•ã‚Œã¾ã™ã€‚`zip_transform_view`ãªã©ã€ãã®è¦ç´ ã«ä½•ã‹é–¢æ•°é©ç”¨ã™ã‚‹ã‚¿ã‚¤ãƒ—ã®`view`ã§ã¯ã€ãã®åŠ¹æœã‚’æŒ‡å®šã™ã‚‹ãŸã‚ã«`std::apply`ãŒä½¿ç”¨ã•ã‚Œã¾ã™ã€‚

```cpp
// zip_transform_view::iterator::operator*()ã®åŠ¹æœã®æŒ‡å®š
return apply([&](const auto&... iters) -> decltype(auto) {
  return invoke(*parent_->fun_, *iters...);
}, inner_.current_);
```

ã—ã‹ã—ã€ã“ã®`operator*`ã®`noexcept`æŒ‡å®šã¯æ¬¡ã®ã‚ˆã†ã«æŒ‡å®šã•ã‚Œã¦ã„ã¾ã™

```cpp
// Isã¯zipã—ã¦ã„ã‚‹å…¥åŠ›ç¯„å›²ã®æ•°ã‚’æŒ‡ã™std::index_sequence<Is>
noexcept(invoke(*parent_->fun_, *std::get<Is>(inner_.current_)...))
```

ã“ã“ã§`std::apply`ãŒä½¿ç”¨ã•ã‚Œã¦ã„ãªã„ã®ã¯ã€`std::apply`ã«`noexcept`ã®æŒ‡å®šãŒç„¡ã„ãŸã‚ã§ã™ã€‚

`std::apply`ã®åŠ¹æœã¯æ¬¡ã®ã‚ˆã†ãª`apply-impl`ã‚’ç”¨ã„ã¦æŒ‡å®šã•ã‚Œã¦ã„ã¾ã™ã€‚

```cpp
template<class F, class Tuple, size_t... I>
constexpr decltype(auto) apply-impl(F&& f, Tuple&& t, index_sequence<I...>) {
  return INVOKE(std::forward<F>(f), get<I>(std::forward<Tuple>(t))...)
}
```

`std::get`ã¯`ranges::subrange`ã®ã‚‚ã®ã‚’é™¤ã„ã¦ä¾‹å¤–ã‚’æŠ•ã’ã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ï¼ˆ`tuple`ç­‰ã®è¦ç´ ã®å‚ç…§ã‚’å–ã‚Šå‡ºã™ã ã‘ã®ãŸã‚ï¼‰ã€‚å¾“ã£ã¦ã€ä¾‹å¤–ã‚’æŠ•ã’ã‚‹ã¨ã™ã‚Œã°`f`ã‚’å‘¼ã³å‡ºã—ãŸã¨ãã ã‘ã ã¨ã¿ãªã™ã“ã¨ãŒã§ãã¾ã™ã€‚`std::invoke`ã¯æ—¢ã«æ¡ä»¶ä»˜ã`noexcept`ã§ã‚ã‚‹ãŸã‚ã€`std::apply`ã‚’åŒæ§˜ã«ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã¯ãšã§ã€ã“ã®ææ¡ˆã¯ãã‚Œã‚’ææ¡ˆã™ã‚‹ã‚‚ã®ã§ã™ã€‚

ã“ã®ææ¡ˆã®å†…å®¹ã¯ã™ã§ã«libstdc++ã¨libc++ã§ã¯å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚

- [P2517 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/1175)

### [P2520R0 `move_iterator<T*>` should be a random access iterator](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2520r0.html)

`std::move_iterator<T*>`ã‚’`random_access_iterator`ã¨ãªã‚‹ã‚ˆã†ã«ã™ã‚‹ææ¡ˆã€‚

`std::move_iterator<T*>`ã¯C++17ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã¨ã—ã¦ã¯ãƒ©ãƒ³ãƒ€ãƒ ã‚¢ã‚¯ã‚»ã‚¹ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã«ãªã‚Šã¾ã™ãŒã€C++20ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã¨ã—ã¦ã¯`input_iterator`ã«ã—ã‹ãªã‚Šã¾ã›ã‚“ã€‚

C++17ä»¥å‰ã«ã“ã‚Œã«ã¤ã„ã¦è­°è«–ã•ã‚ŒãŸéš›ã«ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ä¸Šã®ç†ç”±ã«ã‚ˆã‚Š`move_iterator<I>`ã¯`I`ã®æ€§è³ªã‚’ç¶™æ‰¿ã™ã‚‹ã“ã¨ã«ãªã‚Šã¾ã—ãŸã€‚ã—ã‹ã—C++20ã«ã¦`<ranges>`è¿½åŠ ã¨å…±ã«ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒæ”¹ä¿®ã•ã‚ŒãŸéš›ã€`move_iterator<I>::iterator_concept`ã¯å¸¸ã«`input_iterator`ã§ã‚ã‚‹ã‚ˆã†ã«ã•ã‚Œã¾ã—ãŸã€‚ã“ã‚Œã«ã‚ˆã£ã¦ã€C++20`move_iterator`ã¯å¸¸ã«`input_iterator`ã¨ãªã‚Šã¾ã™ã€‚

```cpp
vector<A> v;
vector<A> temp = ...;

using MI = move_iterator<vector<A>::iterator>;

// MIãŒãƒ©ãƒ³ãƒ€ãƒ ã‚¢ã‚¯ã‚»ã‚¹ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã§ã‚ã‚‹ã“ã¨ã§ã€ã“ã“ã§ã®ã‚¢ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä¸€å›ã§æ¸ˆã¾ã›ã‚‰ã‚Œã‚‹
v.insert(v.begin() + N, MI(temp.begin()), MI(temp.end()));
```

`vector::insert`ã§ã¯ã€æŒ¿å…¥ã•ã‚Œã‚‹è¦ç´ æ•°ãŒäºˆã‚ã‚ã‹ã£ã¦ã„ã‚Œã°`vector`ã®é ˜åŸŸã‚’ã‚ã‚‰ã‹ã˜ã‚æ‹¡å¼µã—ã¦ãŠãã“ã¨ã§ã‚¢ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å›æ•°ã‚’æœ€å°ã«ã§ãã¾ã™ã€‚ãã‚ŒãŒã§ããªã„å ´åˆã€æŒ¿å…¥è¦ç´ æ•°åˆ†`push_back()`ã™ã‚‹ã®ã¨åŒã˜ã“ã¨ã«ãªã‚Šã¾ã™ã€‚

C++20ã§ã¯ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿é–“è·é›¢ã‚’æ±‚ã‚ã‚‰ã‚Œã‚‹ã‹ã©ã†ã‹ã¯ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã‚«ãƒ†ã‚´ãƒªã‹ã‚‰åˆ†é›¢ã•ã‚Œã€`sized_sentinel_for`ï¼ˆã‚ã‚‹ã„ã¯`sized_range`ï¼‰ã‚³ãƒ³ã‚»ãƒ—ãƒˆã«ã‚ˆã£ã¦åˆ¥ã«æŒ‡å®šã•ã‚Œã¾ã™ã€‚`move_iterator<I>`ã¯è‡ªèº«ã®ã‚«ãƒ†ã‚´ãƒªã¨ã¯é–¢ä¿‚ãªãã€`I`ãŒ`sized_sentinel_for<I, I>`ã§ã‚ã‚Œã°`-`ã«ã‚ˆã£ã¦è·é›¢ã‚’å®šæ•°æ™‚é–“ã§æ±‚ã‚ã‚‹ã“ã¨ãŒã§ãã‚‹ãŸã‚ã€`move_iterator`ãŒ`random_access_iterator`ã§ã‚ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

ä¸€æ–¹ã€ã“ã®ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ã¯C++23ã§ã¯æ¬¡ã®ã‚ˆã†ã«æ›¸ãã“ã¨ã‚‚ã§ãã€ã“ã“ã§ã¯`move_iterator`ã®ã‚«ãƒ†ã‚´ãƒªãŒå•é¡Œã¨ãªã£ã¦ãã¾ã™ã€‚

```cpp
// ã‚¢ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯ä¸€å›
some_sized_range | views::move | ranges::to<vector>();

// ã‚¢ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯è¦ç´ æ•°ã«ã‚ˆã‚‹
some_unsized_forward_range | views::move | ranges::to<vector>();
```

`views::move`ã¯å…¥åŠ›ã®`range`ã®å„è¦ç´ ã‚’ãƒ ãƒ¼ãƒ–ã™ã‚‹`view`ã§ã€`ranges::to`ã¯ãã‚Œã‚’ã‚³ãƒ³ãƒ†ãƒŠã«å¤‰æ›ã™ã‚‹ã‚‚ã®ã§ã™ã€‚`views::move`ã‚’é€šã™ã“ã¨ã§ã€å…¥åŠ›è¦ç´ ã‚’ãƒ ãƒ¼ãƒ–ã—ã¦`vector`ã‚’æ§‹ç¯‰ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ã“ã“ã§ã€`views::move`ã¯`move_iterator`ã‚’å†…éƒ¨ã§ç”¨ã„ã¦ã„ã‚‹ãŸã‚ã€`move_view`ã®ã‚«ãƒ†ã‚´ãƒªã¯å¸¸ã«`input_iterator`ã¨ãªã£ã¦ã—ã¾ã„ã¾ã™ã€‚ãã‚Œã§ã‚‚å…¥åŠ›`range`ãŒ`sized_range`ã§ã‚ã‚Œã°ç¯„å›²ã¨ã—ã¦ã®é•·ã•ã‚’æ±‚ã‚ã‚‹ã“ã¨ãŒã§ãã‚‹ãŸã‚ã€ä¸Šè¨˜ï¼‘ã¤ç›®ã®ã‚³ãƒ¼ãƒ‰ã¯`ranges::to`ã«ã‚ˆã‚‹`vector`æ§‹ç¯‰æ™‚ã«ã‚‚è¦ç´ æ•°ã‚’ã‚ã‚‰ã‹ã˜ã‚æ±‚ã‚ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã—ã‹ã—ã€å…¥åŠ›ãŒ`range`ãŒ`sized_range`ã§ãªã„å ´åˆã¯ãã®ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ãŒä½•ã§ã‚ã‚Œ`move_view`ã¯`sized_range`ã§ã¯ãªã„`input_range`ã§ã—ã‹ãªãã€ä¸Šè¨˜ã®2ã¤ç›®ã®ã‚³ãƒ¼ãƒ‰ã§ã¯`ranges::to`ã«ã‚ˆã‚‹`vector`æ§‹ç¯‰æ™‚ã«ãã®è¦ç´ æ•°ã‚’ã‚ã‚‰ã‹ã˜ã‚åˆ©ç”¨ã§ãã¾ã›ã‚“ã€‚

ã“ã‚Œã¯ä¾‹ãˆã°ã€`move_view`ãŒãã†ã„ã†æ€§è³ªã®ã‚‚ã®ã§ã‚ã‚‹ã¨äº†è§£ã—ãŸã†ãˆã§ã€ãã“ã‹ã‚‰å…ƒã®`range`ã‚’`.base()`ã«ã‚ˆã£ã¦å–ã‚Šå‡ºã—ã¦æ¬¡ã«æ¸¡ã™ã¿ãŸã„ãªã“ã¨ã‚’ã™ã‚Œã°å›é¿ã§ãã¾ã™ãŒã€ãã‚Œã¯æ˜ã‚‰ã‹ã«é–“é•ã£ã¦ã„ã¾ã™ã€‚ã“ã®ææ¡ˆã¯ã€ã“ã®å•é¡Œã‚’å›é¿ã™ã‚‹ãŸã‚ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãã®ã‚ˆã†ãªã“ã¨ã‚’ã—ãªãã¦ã‚‚ã„ã„ã‚ˆã†ã«ã€`move_iterator<I>`ãŒ`I`ã®æ€§è³ªã‚’ç¶™æ‰¿ã™ã‚‹ã‚ˆã†ã«å¤‰æ›´ã™ã‚‹ã‚‚ã®ã§ã™ã€‚

`move_view`ãŒ`input_range`ã§ã¯ãªããªã‚‹ã“ã¨ã§ã€`input_range`ã§ã¯åˆ©ç”¨ã§ããªã„ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã§åˆ©ç”¨ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚`move_view`ã®æ€§è³ªä¸Šã€`ranges::min`ãªã©ã€ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®ä¸­ã«ã¯æ„å›³é€šã‚Šã«å‹•ä½œã—ãªã„ã‚‚ã®ãŒã‚ã‚Šã¾ã™ã€‚

```cpp
void f(vector<string> words) {
  // ã“ã®ææ¡ˆä»¥å‰ã¯input_range
  auto r1 = words | views::move;

  // ä»–ã®å…¨ã¦ã®è¦ç´ ã‚‚ãƒ ãƒ¼ãƒ–ã•ã‚Œã¦ã„ã‚‹
  auto min_str = std::ranges::min(r1);
}
```

ã¨ã¯ã„ãˆã“ã®ã“ã¨ã¯ã€`move_view`ã®å•é¡Œã‚’å›é¿ã™ã‚‹ãŸã‚ã«`views::transform`ã‚’ä½¿ç”¨ã—ãŸã¨ãã«ã‚‚èµ·ã“ã‚Šã¾ã™ã€‚

```cpp
void f(vector<string> words) {
  // ç¾åœ¨ã§ã‚‚random_access_range
  auto r2 = words | views::transform([](string& s) -> string&& { return std::move(s); });
  
  // ä»–ã®å…¨ã¦ã®è¦ç´ ã‚‚ãƒ ãƒ¼ãƒ–ã•ã‚Œã¦ã„ã‚‹
  auto min_str = std::ranges::min(r2);
}
```

ã¤ã¾ã‚Šã¯ã€`move_view`ã®ã‚«ãƒ†ã‚´ãƒªã‚’å¤‰æ›´ã—ãŸã“ã¨ã«ã‚ˆã£ã¦ç”Ÿã˜ã‚‹å•é¡Œã¯ã€`move_view`ã®ã‚«ãƒ†ã‚´ãƒªãŒ`input_range`ã§ã‚ã‚‹ã“ã¨ã‹ã‚‰ç”Ÿã˜ã‚‹å•é¡Œã‚’å›é¿ã™ã‚‹å ´åˆã«ã‚‚ç”Ÿã˜ã¾ã™ï¼ˆã“ã‚Œã¯ç¾åœ¨ã§ã‚‚èµ·ã“ã‚Šå¾—ã¾ã™ï¼‰ã€‚ã“ã“ã§ã®ä¸€ç•ªã®å•é¡Œã¯ã€ã“ã®ã‚ˆã†ãªå›é¿ç­–ã‚’é©ç”¨ã—ãŸæ–¹ãŒä¸€éƒ¨ã®å ´åˆã§ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒè‰¯ã„ãŸã‚ã€ã“ã®ã‚ˆã†ãªæ§‹æ–‡ãŒæ¨å¥¨ã•ã‚Œã¦ã—ã¾ã†äº‹ã§ã™ã€‚ã“ã®å•é¡Œã¯æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§è§£æ±ºã•ã‚Œã‚‹ã¹ãã§ã™ã€‚

- [LWG Issue 1211. Move iterators should be restricted as input iterators](https://cplusplus.github.io/LWG/issue1211)
- [P2520 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/1176)

### [P2521R0 Contract support -- Working Paper](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2521r0.html)

C++ã«æœ€å°ã®å¥‘ç´„ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã‚µãƒãƒ¼ãƒˆã‚’è¿½åŠ ã™ã‚‹ææ¡ˆã€‚

ã“ã®ææ¡ˆã¯ã€ç¾åœ¨ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªå¥‘ç´„é–¢é€£ã®ææ¡ˆã§ã‚ã‚‹P2388R4ã¨P2461R1ã‚’ãƒ™ãƒ¼ã‚¹ã¨ã—ã¦ã€SG21ã§ã‚³ãƒ³ã‚»ãƒ³ã‚µã‚¹ãŒå¾—ã‚‰ã‚Œã¦ã„ã‚‹ã‚‚ã®ã¨ãã†ã§ãªã„ã‚‚ã®ã¨ã‚’æ˜ç¢ºã«ã™ã‚‹ãŸã‚ã®ã‚‚ã®ã§ã™ã€‚

å¾“ã£ã¦ã€P2388R4ã¨P2461R1ã§è­°è«–ã•ã‚Œã¦ã„ãªã„äº‹ã¯å«ã¾ã‚Œã¦ãŠã‚‰ãšã€å¤šãã®éƒ¨åˆ†ãŒP2388R4ã®å†…å®¹ã«åŸºã¥ã„ã¦ã„ã¾ã™ã€‚ãã®ä¸Šã§æ¬¡ã®éƒ¨åˆ†ã‚’æœªè§£æ±ºã®å•é¡Œã¨ã—ã¦ã„ã¾ã™

1. æ§‹æ–‡ã®é¸æŠ
2. å¥‘ç´„è¡“å¾Œã®å‰¯ä½œç”¨é™¤å»ã¨é‡è¤‡
3. äº‹å¾Œæ¡ä»¶ã§å‚ç…§ã•ã‚Œã‚‹éå‚ç…§å¼•æ•°ã®æ‰±ã„

ã“ã‚Œã‚‰ã®ã“ã¨ã‚’ã‚·ãƒ³ãƒ—ãƒ«ã«æ›¸ãä¸‹ã—ã¦ã„ãäº‹ã§ã€SG21ã«ãŠã‘ã‚‹ã‚³ãƒ³ã‚»ãƒ³ã‚µã‚¹ã‚’æ–‡æ›¸åŒ–ã—ã¦ã„ã¾ã™ã€‚

- [P2388R4 Minimum Contract Support: either No_eval or Eval_and_abort](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2021/p2388r4.html)
- [P2461R1 Closure-Based Syntax for Contracts](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2021/p2461r1.pdf)
- [P2521 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/1177)

### [P2523R0 Request for re-inclusion of `std::hive` proposal in C++23](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2523r0.html)

`std::hive`ã‚’C++23ã«å«ã‚ã‚‹ã‚ˆã†æ±‚ã‚ã‚‹ææ¡ˆã€‚

`std::hive`ï¼ˆP0447ï¼‰ã¯C++26ã¸ã®å°å…¥ã‚’ç›®æŒ‡ã—ã¦ä½œæ¥­ã•ã‚Œã‚‹ã“ã¨ã«ãªã£ã¦ãŠã‚Šã€C++23ã«å°å…¥ã•ã‚Œãªã„ã“ã¨ãŒæ±ºå®šã•ã‚Œã¦ã„ã¾ã™ã€‚ã“ã®ææ¡ˆã¯ã“ã‚Œã‚’è¦†ãã†ã¨ã™ã‚‹ã‚‚ã®ã§ã™ã€‚

ã—ã‹ã—ã€C++23ã®*design freeze*ãŒã™ããã“ï¼ˆå¤ªå¹³æ´‹æ™‚é–“ã®2022/2/7ï¼‰ã«è¿«ã£ã¦ãŠã‚Šã€P0447ãŒå¤§ãã„ã“ã¨ã‚‚ã‚ã£ã¦ã“ã‚Œã¯ã™ã§ã«å¦æ±ºï¼ˆLEWGè­°é•·ã®è£é‡ã«ã‚ˆã‚‹ï¼Ÿï¼‰ã•ã‚Œã¦ã„ã¾ã™ã€‚

- [P2523 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/1178)

### [P2524R0 SG14: Low Latency/Games/Embedded/Finance/Simulation 2020/12/09-2022/01/12](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2524r0.pdf)

SG14ï¼ˆLow Latency/Games Dev/Embedded/Financial/Trading/Banking/Simulationç­‰ã«é–¢ã™ã‚‹Study Groupï¼‰ã®2020å¹´12æœˆã‹ã‚‰2022å¹´1æœˆã¾ã§ã®é–“ã®9å›ã®ãƒŸãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã®è­°äº‹éŒ²ã€‚

### [P2525R0 SG19: Machine Learning Meeting Minutes 2020/12/10-2022/01/13](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2525r0.pdf)

SG19ï¼ˆæ©Ÿæ¢°å­¦ç¿’ã«é–¢ã™ã‚‹Study Groupï¼‰ã®2020å¹´12æœˆã‹ã‚‰2022å¹´1æœˆã¾ã§ã®é–“ã®10å›ã®ãƒŸãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã®è­°äº‹éŒ²ã€‚

### [P2527R0 `std::variant_alternative_index` and `std::variant_alternative_index_v`](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2527r0.html)

`std::variant`ã«å¯¾ã—ã¦ã€å‹ã‹ã‚‰ãã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’å–å¾—ã™ã‚‹ãŸã‚ã®æ–¹æ³•ã‚’è¿½åŠ ã™ã‚‹ææ¡ˆã€‚

`std::variant`ã«å¯¾ã™ã‚‹`std::get()/std::get_if()`ã¯ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚‚ã—ãã¯å‹ã‚’æŒ‡å®šã—ã¦å€¤ã‚’å–ã‚Šå‡ºã™ã“ã¨ãŒã§ãã€`std::variant_alternative`ã«ã‚ˆã£ã¦ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã«å¯¾å¿œã™ã‚‹å‹ã‚’å–å¾—ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã—ã‹ã—ã€å‹ã«å¯¾å¿œã™ã‚‹ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’å–å¾—ã™ã‚‹æ–¹æ³•ã¯ç”¨æ„ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚

ã“ã®ææ¡ˆã¯ã€`std::variant_alternative_index`ã¨ã—ã¦ãã‚Œã‚’è¿½åŠ ã—ã‚ˆã†ã¨ã™ã‚‹ã‚‚ã®ã§ã™ã€‚

ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æŒ‡å®šã«å¾“ã†ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚º/ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã‚’è¡Œã†ã‚µãƒ³ãƒ—ãƒ«ã€‚

```cpp
struct Reset { };
struct Close { };
struct RunCommand { std::string command; };

using Action = std::variant<Reset, Close, RunCommand>;

void serializeAction(const Action& action, std::vector<uint8_t>& buffer) {
  // ç¾åœ¨ã®variantã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’å…ˆé ­ã«ä¿å­˜
  buffer.push_back(action.index());

  if (auto* runCommand = std::get_if<RunCommand>(&action); runCommand != nullptr) {
    serializeString(runCommand->command, buffer);
  }
}

std::optional<Action> deserializeAction(std::span<const uint8_t> source) {
  if (source.size() == 0) {
    return std::nullopt;
  }

  // å…ˆé ­ã«ã‚ã‚‹ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã«ã‚ˆã‚‹switchåˆ†å²
  switch (source[0]) {
  case std::variant_alternative_index_v<Reset, Action>:
    return Reset { };
  case std::variant_alternative_index_v<Close, Action>:
    return Close { };
  case std::variant_alternative_index_v<RunCommand, Action>:
    return RunCommand { deserializeString(source.subspan(1)) };
  }

  return std::nullopt;
}
```

ã“ã®ã‚µãƒ³ãƒ—ãƒ«ã¯ã€Webkitã«ãŠã„ã¦`std::variant_alternative_index`ç›¸å½“ã®ã‚‚ã®ã‚’å®Ÿè£…ã™ã‚‹ãã£ã‹ã‘ã¨ãªã£ãŸã‚‚ã®ã®ã‚ˆã†ã§ã™ã€‚

- [P2527 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/1181)
