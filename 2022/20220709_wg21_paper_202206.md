# ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2022å¹´05æœˆï¼‰

æ–‡æ›¸ã®ä¸€è¦§

- [JTC1/SC22/WG21 - Papers 2022 mailing2022-06](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/#mailing2022-06)

å…¨éƒ¨ã§46æœ¬ã‚ã‚Šã¾ã™ã€‚

[:contents]


### [P0009R17 MDSPAN](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p0009r17.html)
### [P0429R9 A Standard flat_map](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p0429r9.pdf)
### [P0447R20 Introduction of std::hive to the standard library](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p0447r20.html)
### [P0792R10 function_ref: a non-owning reference to a Callable](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p0792r10.html)
### [P0957R8 Proxy: A Polymorphic Programming Library](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p0957r8.pdf)
### [P1018R16 C++ Language Evolution status - pandemic edition â€“ 2022/02-2022/06](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p1018r16.html)
### [P1144R6 Object relocation in terms of move plus destroy](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p1144r6.html)
### [P1222R4 A Standard flat_set](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p1222r4.pdf)
### [P1223R5 find_last](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p1223r5.pdf)
### [P1642R10 Freestanding Library: Easy [utilities], [ranges], and [iterators]](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p1642r10.html)
### [P1673R9 A free function linear algebra interface based on the BLAS](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p1673r9.html)
### [P1689R5 Format for describing dependencies of source files](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p1689r5.html)
### [P1774R8 Portable assumptions](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p1774r8.pdf)
### [P1839R5 Accessing object representations](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p1839r5.pdf)
### [P1967R7 #embed - a simple, scannable preprocessor-based resource acquisition method](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p1967r7.html)
### [P2167R2 Improved Proposed Wording for LWG 2114 (contextually convertible to bool)](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2167r2.html)
### [P2278R4 cbegin should always return a constant iterator](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2278r4.html)
### [P2490R3 Zero-overhead exception stacktraces](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2490r3.html)
### [P2502R2 std::generator: Synchronous Coroutine Generator for Ranges](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2502r2.pdf)
### [P2505R3 Monadic Functions for std::expected](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2505r3.html)
### [P2505R4 Monadic Functions for std::expected](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2505r4.html)
### [P2513R3 char8_t Compatibility and Portability Fix](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2513r3.html)
### [P2551R2 Clarify intent of P1841 numeric traits](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2551r2.pdf)
### [P2562R1 constexpr Stable Sorting](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2562r1.pdf)
### [P2570R0 On side effects in contract annotations](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2570r0.html)

ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆæ³¨é‡ˆã«æŒ‡å®šã•ã‚ŒãŸæ¡ä»¶å¼ãŒå‰¯ä½œç”¨ã‚’æŒã¤å ´åˆã«ã©ã†ã™ã‚‹ã‹ã«ã¤ã„ã¦ã€è­°è«–ã‚’ã¾ã¨ã‚ãŸæ–‡æ›¸ã€‚

ã“ã®æ–‡æ›¸ã¯[P2182](https://wg21.link/p2182)ã§å®šç¾©ã•ã‚Œã¦ã„ã‚‹MVPã¨å‘¼ã°ã‚Œã‚‹ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã®æœ€å°ã‚»ãƒƒãƒˆã‚’ãƒ™ãƒ¼ã‚¹ã¨ã—ã¦ã€ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆæ³¨é‡ˆã«æŒ‡å®šã•ã‚Œã¦ã„ã‚‹æ¡ä»¶å¼ãŒå‰¯ä½œç”¨ã‚’æŒã¤å ´åˆã«æ¨™æº–ã¨ã—ã¦ã©ã†è¦å®šã™ã‚‹ã‹ã®ç¾åœ¨ã®è­°è«–ã‚„æ–¹å‘æ€§ã«ã¤ã„ã¦ã¾ã¨ã‚ãŸã‚‚ã®ã§ã™ã€‚

ã“ã®æ–‡æ›¸ã§æç¤ºã•ã‚Œã¦ã„ã‚‹å‰¯ä½œç”¨ã«å¯¾ã™ã‚‹é¸æŠè‚¢ã¯ä»¥ä¸‹ã®3ã¤ã§ã™

- æ¡ä»¶å¼ãŒå‰¯ä½œç”¨ã‚’æŒãŸãªã„ã“ã¨ã‚’è¨¼æ˜ã§ããªã„å ´åˆã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã¨ã™ã‚‹
- Cã®`assert`ãƒã‚¯ãƒ­ã®ãƒ¢ãƒ‡ãƒ«ã‚’ä½¿ç”¨ã™ã‚‹
    - ä¸€æ–¹ã®ãƒ¢ãƒ¼ãƒ‰ï¼ˆ*Eval and abort*ï¼‰ã§ã¯å‰¯ä½œç”¨ã‚’è©•ä¾¡ã—ã€ä¸€æ–¹ã®ãƒ¢ãƒ¼ãƒ‰ï¼ˆ*No eval*ï¼‰ã§ã¯è©•ä¾¡ã—ãªã„
- *Eval and abort*ãƒ¢ãƒ¼ãƒ‰ã§ã¯ã€æ¡ä»¶å¼ã‚’è¤‡æ•°å›è©•ä¾¡ã™ã‚‹ã“ã¨ã‚’è¨±å¯ã™ã‚‹
    - å‰¯ä½œç”¨ã®ä¿¡é ¼æ€§ã‚’ä½ä¸‹ã•ã›ã‚‹

*Eval and abort*ãƒ¢ãƒ¼ãƒ‰ã¯ã€å¥‘ç´„æ¡ä»¶ã‚’è©•ä¾¡ã—ç ´ã‚‰ã‚ŒãŸï¼ˆ`false`ã¨ãªã£ãŸï¼‰å ´åˆã«ã¯ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’çµ‚äº†ã•ã›ã‚‹å®Ÿè¡Œãƒ¢ãƒ¼ãƒ‰ã§ã€*No eval*ãƒ¢ãƒ¼ãƒ‰ã¯å…¨ã¦ã®å¥‘ç´„æ¡ä»¶ã‚’ç„¡è¦–ã™ã‚‹å®Ÿè¡Œãƒ¢ãƒ¼ãƒ‰ã§ã™ã€‚å¥‘ç´„é•åãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚„å¥‘ç´„é•åå¾Œã®ç¶šè¡Œãƒ¢ãƒ¼ãƒ‰ã¯ã€C++20ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã®éš›ã«ç‚ä¸Šã—ãŸéƒ¨åˆ†ã§ã‚ã‚‹ã®ã§ã€MVPã«ã¯å«ã¾ã‚Œã¦ã„ã¾ã›ã‚“ã€‚

ç¾åœ¨ã®SG21ã®æ–¹å‘æ€§ã¨ã—ã¦ã¯ã€MVPã‚’ã¾ãšæ¨™æº–ã«å°å…¥ã—ã¦ã‹ã‚‰ãã“ã«æ©Ÿèƒ½ã‚’è¿½åŠ ã—ã¦ã„ãã“ã¨ã‚’ç›®æŒ‡ã—ã¦ã„ã‚‹ãŸã‚ã€MVPã®éƒ¨åˆ†ï¼ˆã“ã®æ–‡æ›¸ã®ç¯„å›²ã‚‚å«ã‚ã¦ï¼‰ã¯å°†æ¥ã®æ‹¡å¼µã«ã¤ã„ã¦é–‹ã„ã¦ã„ã‚‹ã‚ˆã†ã«ã—ã‚ˆã†ã¨ã—ã¦ã„ã¾ã™ã€‚ãã®ãŸã‚ã€æ¬¡ã®ã‚ˆã†ãªæŒ‡é‡ãŒã‚ã‚Šã¾ã™

- ç‰©è­°ã‚’ã‹ã‚‚ã—ã¦ã„ã‚‹éƒ¨åˆ†ï¼ˆæ©Ÿèƒ½ï¼‰ã«ã¤ã„ã¦ä½•ã‚‰ã‹ã®ã‚»ãƒãƒ³ãƒ†ã‚£ã‚¯ã‚¹ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã¯é¿ã‘ã‚ˆã†ã¨ã—ã¦ã„ã‚‹
    - 2ã¤ã®å¯èƒ½ãªå°†æ¥ã®æ–¹å‘æ€§ãŒã‚ã‚‹å ´åˆã€ã©ã¡ã‚‰ã«å¯¾ã—ã¦ã‚‚ã‚ªãƒ¼ãƒ—ãƒ³ã§ã‚ã‚‹äº‹ã‚’ç›®æŒ‡ã™
- å®šç¾©ã—ãŸããªã„éƒ¨åˆ†ã«ã¤ã„ã¦ã¯ã€UB/IF-NDRã‚ˆã‚Šã‚‚ill-formedã«ã™ã‚‹
    - ãƒ—ãƒ­ã‚°ãƒ©ãƒã«å®Ÿè¡Œæ™‚ã®é©šãã‚’ä¸ãˆã‚‹ã“ã¨ã‚’å›é¿ã—ã€æ§‹æ–‡ã‚¹ãƒšãƒ¼ã‚¹ã‚’ç¯€ç´„ã™ã‚‹
- æœªè¦å®šã‚„å®Ÿè£…å®šç¾©ã¨ã—ã¦æŒ‡å®šã™ã‚‹ã‚ˆã‚Šã‚‚ã€UBã¨ã—ã¦å®šç¾©ã™ã‚‹
    - å°†æ¥çš„ã«ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ é–“ã§çµ±ä¸€ã•ã‚ŒãŸã‚»ãƒãƒ³ãƒ†ã‚£ã‚¯ã‚¹ã‚’æä¾›ã—ã€ãã®éƒ¨åˆ†ã‚’ill-formedã«ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ã—ã¦ãŠã

ãã—ã¦SG21ã¯ã€ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã¯å®‰å…¨æ€§ã‚’å‘ä¸Šã•ã›ã‚‹ãŸã‚ã®æ©Ÿèƒ½ã§ã‚ã‚‹ã¨ã—ã¦æ©Ÿèƒ½ãã®ã‚‚ã®ã‚‚ã‚ˆã‚Šå®‰å…¨ãªã‚‚ã®ã«ã—ã‚ˆã†ã¨ã—ã¦ã„ã¾ã™ã€‚ã¨ã¯ã„ãˆã€ã“ã®æ–‡æ›¸ã§æ‰±ã‚ã‚Œã¦ã„ã‚‹å‰¯ä½œç”¨ã‚’ã¯ã˜ã‚ã¨ã—ã¦C++ã®å±é™ºãªå´é¢ã‚’å¤šãå«ã‚“ã§ã„ã‚‹ãŸã‚ã€ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã«ã¤ã„ã¦ã¯ä»–ã®C++ã®éƒ¨åˆ†ã¨ã¯ç•°ãªã‚‹åŠ¹ç‡æ€§ã¨å®‰å…¨æ€§ã®ãƒˆãƒ¬ãƒ¼ãƒ‰ã‚ªãƒ•ã‚’å–ã‚‰ã–ã‚‹ã‚’å¾—ãªã„éƒ¨åˆ†ãŒã‚ã‚Šã¾ã™ã€‚ãã®å ´åˆã§ã‚‚ã€å¥‘ç´„æ¡ä»¶ã«ã¤ã„ã¦C++ã®ä»–ã®ã¨ã“ã‚ã¨åŒæ§˜ã«æ‰±ã†ã€ãªã©ã®çµ±ä¸€æ€§ã®è¦æ±‚ã‚’é‡è¦–ã—ãªã„æ–¹é‡ã§ã™ã€‚

- [P2182R0 : Contract Support: Defining the Minimum Viable Feature Set - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2020å¹´6æœˆï¼‰](https://onihusube.hatenablog.com/entry/2020/07/05/003248#P2182R0--Contract-Support-Defining-the-Minimum-Viable-Feature-Set)

### [P2572R0 `std::format()` fill character allowances](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2572r0.html)

`std::format`ã«ãŠã„ã¦ã€æ–‡å­—åˆ—ã®ã‚¢ãƒ©ã‚¤ãƒ¡ãƒ³ãƒˆï¼ˆå·¦å¯„ã›ã€ä¸­å¤®å¯„ã›ã€å³å¯„ã›ï¼‰ã®éš›ã«ç©ºç™½ã‚’åŸ‹ã‚ã‚‹æ–‡å­—ã¨ã—ã¦ä½¿ç”¨å¯èƒ½ãªæ–‡å­—ã‚’åˆ¶é™ã™ã‚‹ææ¡ˆã€‚

`std::format`ã§ã¯ã€`> < ^`ã¨ãã®å¾Œã«æŒ‡å®šã™ã‚‹æ•´æ•°å€¤ã§ã¯æ–‡å­—åˆ—ã®å¹…ã¨é…ç½®ã‚’èª¿æ•´ã§ãã¾ã™ã€‚

```cpp
#include <format>
#include <iostream>

int main() {
  std::cout << std::format("|{:>6}|\n", 23);  // å³å¯„ã›
  std::cout << std::format("|{:<6}|\n", 23);  // å·¦å¯„ã›
  std::cout << std::format("|{:^6}|\n", 23);  // ä¸­å¤®å¯„ã›
}
```
å‡ºåŠ›ä¾‹
```
|    23|
|23    |
|  23  |
```

ãã®éš›ã€ç©ºç™½ï¼ˆå³å¯„ã›ã®æ™‚ã®å·¦å´ãªã©ï¼‰ã‚’åŸ‹ã‚ã‚‹æ–‡å­—ã¨ã—ã¦ã¯ãƒ›ãƒ¯ã‚¤ãƒˆã‚¹ãƒšãƒ¼ã‚¹ãŒä½¿ç”¨ã•ã‚Œã¾ã™ãŒã€ãã®æ–‡å­—ï¼ˆä»¥é™ã€ã“ã‚Œã‚’ç©´åŸ‹ã‚æ–‡å­—ã¨å‘¼ã³ã¾ã™ï¼‰ã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚å¤‰æ›´ã™ã‚‹ã«ã¯ã€å¯„ã›ã®æŒ‡å®šã®å‰ã«ä½¿ç”¨ã—ãŸã„æ–‡å­—ã‚’æŒ‡å®šã—ã¾ã™ã€‚

```cpp
#include <format>
#include <iostream>

int main() {
  // ç©´åŸ‹ã‚ã¯*ã§è¡Œã†
  std::cout << std::format("|{:*>6}|\n", 23);  // å³å¯„ã›
  std::cout << std::format("|{:*<6}|\n", 23);  // å·¦å¯„ã›
  std::cout << std::format("|{:*^6}|\n", 23);  // ä¸­å¤®å¯„ã›
}
```
```
|****23|
|23****|
|**23**|
```

ã“ã®ç©´åŸ‹ã‚ã«ä½¿ç”¨å¯èƒ½ãªæ–‡å­—ã¨ã—ã¦ã¯`{`ã¨`}`ä»¥å¤–ã®ä»»æ„ã®æ–‡å­—ãŒæŒ‡å®šå¯èƒ½ã¨ã•ã‚Œã¦ã„ã¾ã™ã€‚

```cpp
#include <format>
#include <iostream>

int main() {
  // ä¾‹ãˆã°çµµæ–‡å­—
  std::cout << std::format("|{:ğŸ¤”>6}|\n", 23);  // å³å¯„ã›
  std::cout << std::format("|{:ğŸ¤”<6}|\n", 23);  // å·¦å¯„ã›
  std::cout << std::format("|{:ğŸ¤”^6}|\n", 23);  // ä¸­å¤®å¯„ã›
}
```
```
|ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”23|
|23ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”|
|ğŸ¤”ğŸ¤”23ğŸ¤”ğŸ¤”|
```

ç¾åœ¨ã®`std::format`ã¯ã€ç‰¹å®šã®ã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ³ãƒˆç¯„å›²ã®æ–‡å­—ã‚’å¹…2ã€ãã‚Œä»¥å¤–ã®æ–‡å­—ã‚’å¹…1ã¨ã—ã¦æ–‡å­—å¹…ã‚’æ¨å®šã—ã¦ã“ã®ã‚ˆã†ãªæ–‡å­—ã®é…ç½®ã‚’è¡Œã£ã¦ã„ã¾ã™ã€‚ç©´åŸ‹ã‚æ–‡å­—ã«ä¾‹ãˆã°ã‚¼ãƒ­å¹…æ–‡å­—ã‚„è² ã®å¹…ã‚’æŒã¤æ–‡å­—ã€3ä»¥ä¸Šã®å¹…ã‚’æŒã¤æ–‡å­—ï¼ˆã‚¢ãƒ©ãƒ“ã‚¢æ–‡å­—ãªã©ï¼‰ãªã©ã‚’æŒ‡å®šã™ã‚‹ã¨æ­£ã—ãé…ç½®ã§ããªããªã‚Šã¾ã™ã€‚ã¾ãŸã€æ–‡å­—ã®å¹…ã¯æ–‡å­—ç¨®ã ã‘ã§ãªããƒ•ã‚©ãƒ³ãƒˆã«ã‚ˆã£ã¦ã‚‚å¤‰åŒ–ã™ã‚‹ãŸã‚ã€ã“ã‚Œã‚’å³å¯†ã«æ¨å®šã™ã‚‹ã“ã¨ã¯ãŠãã‚‰ãä¸å¯èƒ½ã§ã™ã€‚

ãƒãƒ¼ã‚¿ãƒ–ãƒ«ãªå®Ÿè£…ã®ãŸã‚ã«ã¯ã€`std::format`ã¯ç©´åŸ‹ã‚ã«ä½¿ç”¨å¯èƒ½ãªæ–‡å­—ã‚’åˆ¶é™ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã€ã“ã®æ–‡æ›¸ãã‚Œã‚’ææ¡ˆã™ã‚‹ã‚‚ã®ã§ã™ã€‚

åˆ¶é™ã«å½“ãŸã£ã¦ã¯ã¾ãšã€ã©ã®ã‚ˆã†ãªæ–‡å­—ã‚’ä½¿ç”¨å¯èƒ½ã¨ã™ã‚‹ã‹ã‚’æ±ºå®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã“ã®ææ¡ˆã§ã¯æ¬¡ã®4ã¤ã‚’ä¸Šã’ã¦ã„ã¾ã™

1. ãƒ¦ãƒ‹ã‚³ãƒ¼ãƒ‰æ‹¡å¼µæ›¸è¨˜ç´ ã‚¯ãƒ©ã‚¹ã‚¿ï¼ˆextended grapheme cluster : EGCï¼‰ã®ä»»æ„ã®æ–‡å­—
2. [UAX15ã§å®šç¾©](https://unicode.org/reports/tr15/#Stream_Safe_Text_Format)ã•ã‚Œã¦ã„ã‚‹ã€ã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚»ãƒ¼ãƒ•ãªãƒ¦ãƒ‹ã‚³ãƒ¼ãƒ‰æ‹¡å¼µæ›¸è¨˜ç´ ã‚¯ãƒ©ã‚¹ã‚¿ã®ä»»æ„ã®æ–‡å­—
3. ä»»æ„ã®å˜ä¸€ã®UCSã‚¹ã‚«ãƒ©ãƒ¼å€¤
4. å˜ä¸€ã®ã‚³ãƒ¼ãƒ‰ãƒ¦ãƒ‹ãƒƒãƒˆã‚’ä½¿ç”¨ã—ã¦ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã•ã‚ŒãŸã€å˜ä¸€ã®UCSã‚¹ã‚«ãƒ©ãƒ¼å€¤

1ã¤ç›®ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã¯ã€ä»»æ„é•·ã®ã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‹ã‚‰æ§‹æˆã•ã‚Œã‚‹æ–‡å­—ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ãŸã‚ã®å®Ÿè£…ãŒå¿…è¦ã¨ãªã‚Šã€ã“ã‚Œã¯å‹•çš„ãƒ¡ãƒ¢ãƒªç¢ºä¿ï¼ˆç©´åŸ‹ã‚æ–‡å­—ã®ä¿å­˜ã®ãŸã‚ï¼‰ã¨EGCå¢ƒç•Œæ¤œå‡ºã®å®Ÿè£…ãŒå¿…è¦ã¨ãªã‚Šã¾ã™ã€‚

2ã¤ç›®ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã¯ã€1æ–‡å­—ã®ã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ³ãƒˆé•·ãŒæœ€å¤§32ã«åˆ¶é™ã•ã‚Œã‚‹ãŸã‚ã€å‹•çš„ãƒ¡ãƒ¢ãƒªç¢ºä¿ã‚’å›é¿ã§ãã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ãã‚Œä»¥å¤–ã¯1ã¤ã‚ã¨åŒã˜ã§ã™ã€‚

3ã¤ç›®ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã¯ã€1ã¤ç›®ã¨2ã¤ç›®ã®ãƒ‡ãƒ¡ãƒªãƒƒãƒˆã‚’ã™ã¹ã¦å›é¿ã—ã€ç©´åŸ‹ã‚æ–‡å­—ã‚’å˜ä¸€ã®`char32_t`ã®å€¤ã«æ ¼ç´ã§ãã¾ã™ã€‚ã¤ã¾ã‚Šã“ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã¯ã€1æ–‡å­—ï¼ˆEGCã®ä»»æ„ã®1æ–‡å­—ï¼‰ãŒè¤‡æ•°ã®æ–‡å­—ï¼ˆã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ³ãƒˆï¼‰ã‹ã‚‰æ§‹æˆã•ã‚Œã‚‹ã‚ˆã†ãªæ–‡å­—ã¯ä½¿ç”¨ã§ãã¾ã›ã‚“ã€‚

4ã¤ç›®ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã¯ã€ç©´åŸ‹ã‚æ–‡å­—ã®ä¿å­˜è¦ä»¶ã‚’å˜ä¸€ã®ã‚³ãƒ¼ãƒ‰ãƒ¦ãƒ‹ãƒƒãƒˆï¼ˆ`cahr` or `wchar_t`ï¼‰ã«ã¾ã§æ¸›ã‚‰ã™ã“ã¨ãŒã§ãã€ãã‚Œä»¥å¤–ã¯3ã¨åŒæ§˜ã«ãªã‚Šã¾ã™ã€‚ã—ã‹ã—ã€å‰¯ä½œç”¨ã¨ã—ã¦è¨±å®¹ã•ã‚Œã‚‹ç©´åŸ‹ã‚æ–‡å­—ãŒã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã«ã‚ˆã£ã¦å¤‰åŒ–ã—ã¾ã™ï¼ˆä¾‹ãˆã°ã‚µãƒ­ã‚²ãƒ¼ãƒˆãºã‚¢ï¼‰ã€‚

æ¬¡ã«ã€ç©´åŸ‹ã‚æ–‡å­—ã«åˆ¶é™ç¯„å›²å¤–ã®æ–‡å­—ãŒä¸ãˆã‚‰ã‚ŒãŸå ´åˆã®æŒ¯ã‚‹èˆã„ã‚’æ±ºå®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã“ã®ææ¡ˆã§ã¯

1. ç©´åŸ‹ã‚æ–‡å­—ã®å¹…ã‚’1ã¨ã—ã¦æ‰±ã£ã¦ç©´åŸ‹ã‚ã™ã‚‹
2. æŒ‡å®šã•ã‚ŒãŸå¹…ã‚’æº€ãŸã™ã‹ã¨è¶…ãˆã‚‹ã¾ã§ã€ç©´åŸ‹ã‚ã™ã‚‹ï¼ˆã‚ªãƒ¼ãƒãƒ¼ãƒ•ã‚£ãƒ«ï¼‰
3. æŒ‡å®šã•ã‚ŒãŸå¹…ã‚’è¶…ãˆãªã„ã‚ˆã†ã«ã€ç©´åŸ‹ã‚ã™ã‚‹ï¼ˆã‚¢ãƒ³ãƒ€ãƒ¼ãƒ•ã‚£ãƒ«ï¼‰
4. åˆ¥ã®ç©´åŸ‹ã‚æ–‡å­—ã«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã™ã‚‹
     - æŒ‡å®šã•ã‚ŒãŸç©´åŸ‹ã‚æ–‡å­—ã‚’ä½¿ç”¨ã™ã‚‹ã¨æŒ‡å®šã•ã‚ŒãŸå¹…ã‚’è¶…ãˆã‚‹ã“ã¨ãŒåˆ†ã‹ã‚‹å ´åˆã«ã€åˆ¥ã®ç©´åŸ‹ã‚æ–‡å­—ã‚’ä½¿ç”¨ã™ã‚‹
5. æœªå®šç¾©ã€æœªè¦å®šã€å®Ÿè£…å®šç¾©
6. ã‚¨ãƒ©ãƒ¼
         - `format_error`ä¾‹å¤–ã‚’æŠ•ã’ã‚‹
7. æŒ‡å®šã•ã‚ŒãŸå¹…ã§é…ç½®ã§ããªã„å ´åˆã«ã®ã¿ã€ã‚¨ãƒ©ãƒ¼
         - `format_error`ä¾‹å¤–ã‚’æŠ•ã’ã‚‹

æ¬¡ã®è¡¨ã¯ã€ã“ã‚Œã‚‰ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«ã‚ˆã£ã¦ã€`std::format(">{:ğŸ¤¡^4}<\n", 'X')`ãŒã©ã†ãªã‚‹ã‹ã‚’ç¤ºã—ãŸã‚‚ã®ã§ã™

|ã‚ªãƒ—ã‚·ãƒ§ãƒ³|çµæœ|
|---|---|
|å‚ç…§é…ç½®ï¼ˆ`-`ã‚’ä½¿ç”¨ï¼‰|`>-X--<`|
|æ–‡å­—å¹…1ã¨ã™ã‚‹|`>ğŸ¤¡XğŸ¤¡ğŸ¤¡<`|
|ã‚ªãƒ¼ãƒãƒ¼ãƒ•ã‚£ãƒ«|`>ğŸ¤¡XğŸ¤¡<`|
|ã‚¢ãƒ³ãƒ€ãƒ¼ãƒ•ã‚£ãƒ«|`>XğŸ¤¡<`|
|ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼ˆãƒ›ãƒ¯ã‚¤ãƒˆã‚¹ãƒšãƒ¼ã‚¹ï¼‰|`> XğŸ¤¡<`|
|æœªå®šç¾©|???|
|ã‚¨ãƒ©ãƒ¼|N/A|

ã“ã‚Œã‚‰ã®ã“ã¨ã¨ã€æ—¢å­˜å®Ÿè£…ï¼ˆclang/gcc+{fmt}/MSVCï¼‰ã®æŒ¯ã‚‹èˆã„ã‚’å‚ç…§ã—ãŸã†ãˆã§ã€ã“ã®ææ¡ˆã§ã¯ã“ã®å•é¡Œã‚’æ¬¡ã®ã‚ˆã†ã«ä¿®æ­£ã™ã‚‹ã“ã¨ã‚’ææ¡ˆã—ã¦ã„ã¾ã™

1. ç©´åŸ‹ã‚æ–‡å­—ã¯ã€å˜ä¸€ã®UCSã‚¹ã‚«ãƒ©ãƒ¼å€¤ã«åˆ¶é™ã™ã‚‹ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³3ï¼‰
      - åˆ¶é™ç¯„å›²å¤–ã®å€¤ãŒæŒ‡å®šã•ã‚ŒãŸå ´åˆã¯ã‚¨ãƒ©ãƒ¼ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³6ï¼‰
      - ä»»æ„ã®EGCæ–‡å­—ã‚’ã‚µãƒãƒ¼ãƒˆã—ãŸããªã£ãŸå ´åˆã€ABIç ´å£ŠãŒç”Ÿã˜ã‚‹
2. ç©´åŸ‹ã‚æ–‡å­—ã®æ¨å®šå¹…ã¯ã€å¸¸ã«1ã¨ã™ã‚‹
      - æ—¢å­˜å®Ÿè£…ãŒå…¨ã¦ãã†ãªã£ã¦ã„ãŸãŸã‚
3. ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆå¼•æ•°ï¼ˆnotç©´åŸ‹ã‚æ–‡å­—ï¼‰ã®å¹…ãŒãã‚‚ãã‚‚æŒ‡å®šå¹…ã‚’è¶…ãˆã‚‹å ´åˆã€ã‚¢ãƒ©ã‚¤ãƒ¡ãƒ³ãƒˆã®æŒ‡å®šã¯ç„¡è¦–ã•ã‚Œã‚‹ã“ã¨ã‚’æ˜ç¢ºåŒ–
4. æŒ‡å®šã•ã‚ŒãŸã‚¢ãƒ©ã‚¤ãƒ¡ãƒ³ãƒˆã‚’é”æˆã™ã‚‹ãŸã‚ã«ã€ç©´åŸ‹ã‚æ–‡å­—ãŒã©ã®ã‚ˆã†ã«æŒ¿å…¥ã•ã‚Œã‚‹ã‹ã‚’æ˜ç¢ºåŒ–

ã“ã‚Œã¯ã€{fmt}ãŠã‚ˆã³MSVCã®å®Ÿè£…ã‚’æ¨™æº–åŒ–ã™ã‚‹ã‚‚ã®ã§ã™ã€‚ã¾ãŸã€ã“ã®ã‚¨ãƒ©ãƒ¼ã¯`std::format`ã®å ´åˆã¯ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã¨ãªã‚Šã¾ã™ã€‚

- [LWG Issue 3576. Clarifying fill character in `std::format`](https://cplusplus.github.io/LWG/issue3576)
- [LWG Issue 3639. Handling of fill character width is underspecified in `std::format`](https://cplusplus.github.io/LWG/issue3639)
- [ Unicodeã®grapheme cluster (æ›¸è¨˜ç´ ã‚¯ãƒ©ã‚¹ã‚¿) - hydroculã®ãƒ¡ãƒ¢](https://hydrocul.github.io/wiki/blog/2015/1025-unicode-grapheme-clusters.html)
- [UAX #15 : UNICODE NORMALIZATION FORMS](https://unicode.org/reports/tr15)
    - [Stream-Safe Text Format](https://unicode.org/reports/tr15/#Stream_Safe_Text_Format)
- [P2572 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/1260)

### [P2575R0 2022-05 Library Evolution Poll Outcomes](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2575r0.html)

2022å¹´ã®5æœˆã«è¡Œã‚ã‚ŒãŸã€LEWGã§ã®å…¨ä½“æŠ•ç¥¨ã®çµæœã€‚

æŠ•ç¥¨ã®å¯¾è±¡ã¨ãªã£ãŸææ¡ˆã¯ä»¥ä¸‹ã®ã‚‚ã®ã§ã€æŠ•ç¥¨ã«å½“ãŸã£ã¦å¯„ã›ã‚‰ã‚ŒãŸè³›å¦ã®ã‚³ãƒ¡ãƒ³ãƒˆãŒè¨˜è¼‰ã•ã‚Œã¦ã„ã¾ã™ã€‚

- [P1885R10 Naming Text Encodings to Demystify Them](https://wg21.link/P1885R10)
- [P0792R8 function_ref](https://wg21.link/P0792R8)
- [P1223R3 find_last](https://wg21.link/P1223R3)
- [P1169R3 Static operator()](https://wg21.link/P1169R3)
- [P2553R1 Make mdspan size_type Controllable](https://wg21.link/P2553R1)
- [P2554R0 C-Array Interoperability Of mdspan](https://wg21.link/P2554R0)
- [P2540R0 Empty Product For Certain Views](https://wg21.link/P2540R0)
- [P2538R0 ADL-Proof projected](https://wg21.link/P2538R0)
- [P2520R0 move_iterator Should Be A Random Access Iterator](https://wg21.link/P2520R0)
- [P2499R0 string_view Range Constructor Should Be Explicit](https://wg21.link/P2499R0)
- [P2549R0 unexpected Should Have error As Member Accessor](https://wg21.link/P2549R0)
- [P2517R0 Add A Conditional noexcept Specification To apply](https://wg21.link/P2517R0)
- [P2300R5 std::execution](https://wg21.link/P2300R5)
    - C++26å‘ã‘
- [P1083R5 resource_adaptor](https://wg21.link/P1083R5)
    - C++26å‘ã‘
- [P1202R4 Asymmetric Fences](https://wg21.link/P1202R4)
    - Concurency TS v2å‘ã‘

çµæœçš„ã«ã€P1083R5ä»¥å¤–ã¯LWGã«è»¢é€ã•ã‚ŒãŸã‚ˆã†ã§ã™ã€‚

### [P2582R1 Wording for class template argument deduction from inherited constructors](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2582r1.pdf)
### [P2590R1 Explicit lifetime management](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2590r1.pdf)
### [P2591R1 Concatenation of strings and string views](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2591r1.html)
### [P2594R0 Slides: Allow programmer to control and detect coroutine elision (P2477R2 Presentation))](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2594r0.pdf)

P2477ã®è§£èª¬ã‚¹ãƒ©ã‚¤ãƒ‰

P2477ã«é–¢ã—ã¦ã¯ä»¥å‰ã®è¨˜äº‹ã‚’å‚ç…§ã€‚

- [P2477R0 Allow programmer to control and detect coroutine elision by static constexpr bool should_elide() and - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´10æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/11/13/193322#P2477R0-Allow-programmer-to-control-and-detect-coroutine-elision-by-static-constexpr-bool-should_elide-and)
- [P2477R2 Allow programmer to control and detect coroutine elision - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´11æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/12/11/220126#P2477R2-Allow-programmer-to-control-and-detect-coroutine-elision)


ã“ã®ã‚¹ãƒ©ã‚¤ãƒ‰ã¯ã€P2477ã®å†…å®¹ã‚’LEWGã®ãƒ¡ãƒ³ãƒã«ãƒ—ãƒ¬ã‚¼ãƒ³ã™ã‚‹ãŸã‚ã®ã‚‚ã®ã§ã€P2477ã®å‹•æ©Ÿã‚„ç›®çš„ã€ç¾çŠ¶åˆ†ã‹ã£ã¦ã„ã‚‹æ‡¸å¿µäº‹é …ãªã©ãŒã¾ã¨ã‚ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚

### [P2596R0 Improve std::hive::reshape](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2596r0.html)
### [P2598R0 â€œChanging scope for lambda trailing-return-typeâ€ (P2036) should not be a DR](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2598r0.html)
### [P2599R0 mdspan::size_type should be index_type](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2599r0.pdf)
### [P2599R1 mdspan::size_type should be index_type](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2599r1.pdf)
### [P2599R2 index _type & size_type in mdspan](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2599r2.pdf)
### [P2600R0 A minimal ADL restriction to avoid ill-formed template instantiation](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2600r0.pdf)
### [P2601R0 To make redundant empty angle brackets optional for class template argument lists](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2601r0.html)
### [P2602R0 Poison Pills are Too Toxic](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2602r0.html)
### [P2603R0 member function pointer to function pointer](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2603r0.html)
### [P2604R0 MDSPAN: rename pointer and contiguous](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2604r0.html)
### [P2605R0 SG16: Unicode meeting summaries 2022-01-12 through 2022-06-08](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2605r0.html)
### [P2607R0 Let alignas specify minimum alignment](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2607r0.html)
### [P2608R0 Allow multiple init-statements](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2608r0.html)
### [P2609R0 Relaxing Ranges Just A Smidge](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2609r0.html)
### [P2613R0 Add the missing `empty` to `mdspan`](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2022/p2613r0.html)