# ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´08æœˆï¼‰

æ–‡æ›¸ã®ä¸€è¦§

- [JTC1/SC22/WG21 - Papers 2021 mailing2021-08](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2021/#mailing2021-08)

å…¨éƒ¨ã§29æœ¬ã‚ã‚Šã¾ã™ã€‚

[:contents]

### [N4895 Working Draft, Extensions to C++ for Concurrency Version 2](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2021/n4895.pdf)

Concurrency TS v2ã®ãƒ¯ãƒ¼ã‚­ãƒ³ã‚°ãƒ‰ãƒ©ãƒ•ãƒˆç¬¬ä¸€å¼¾ã€‚

å…ˆé ƒã‚¢ã‚¯ã‚»ãƒ—ãƒˆã•ã‚ŒãŸã€[ãƒã‚¶ãƒ¼ãƒ‰ãƒã‚¤ãƒ³ã‚¿](https://wg21.link/p1121r3)ã¨[RCU](https://wg21.link/p1122r4)ã‚’åæ˜ ã—ãŸã‚‚ã®ã§ã€ä»Šã®ã¨ã“ã‚ä»–ã®ã‚‚ã®ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

ã“ã‚Œã‚’ãƒ™ãƒ¼ã‚¹ã¨ã—ã¦å®Ÿè£…çµŒé¨“ã‚’ç©ã‚“ã§ã‹ã‚‰ã€æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«å°å…¥ã•ã‚Œã‚‹äº‹ã«ãªã‚Šã¾ã™ã€‚

### [P1018R12 C++ Language Evolution status ğŸ¦  pandemic edition ğŸ¦  2021/06â€“2021/08](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2021/p1018r12.html)

EWGï¼ˆã‚³ã‚¢è¨€èªã¸ã®æ–°æ©Ÿèƒ½è¿½åŠ ã«ã¤ã„ã¦ã®ä½œæ¥­éƒ¨ä¼šï¼‰ãŒ2021/01â€“2021/03ã®é–“ã«è­°è«–ã—ãŸææ¡ˆã‚„Issueã®ãƒªã‚¹ãƒˆã‚„å°†æ¥ã®è¨ˆç”»ã€ãƒ†ãƒ¬ã‚«ãƒ³ãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã®çŠ¶æ³ãªã©ã‚’ã¾ã¨ã‚ãŸæ–‡æ›¸ã€‚

8æœˆã¯ä»¥ä¸‹ã®ææ¡ˆãŒEWGã§ã®æŠ•ç¥¨ã«ã‹ã‘ã‚‰ã‚Œã‚‹äºˆå®šã§ã™ã€‚

- [P2138R4 Rules of Design <=> Wording engagement](https://wg21.link/p2138r4)
- [P2266R1 Simpler implicit move](https://wg21.link/p2266r1)
- [P2128R5 Multidimensional subscript operator](https://wg21.link/p2128r5)
- [P2036R2 Changing scope for lambda trailing-return-type](https://wg21.link/p2036r2)
- [P2334R1 Add support for preprocessing directives elifdef and elifndef](https://wg21.link/p2334r1)
- [P2066R7 Suggested draft TS for C++ Extensions for Transaction Memory Light](https://wg21.link/p2066r7)
- [P2360R0 Extend init-statement to allow alias-declaration](https://wg21.link/p2360r0)
- [P2246R1 Character encoding of diagnostic text](https://wg21.link/p2246r1)
- [P2314R2 Character sets and encodings](https://wg21.link/p2314r2)
- [P2316R1 Consistent character literal encoding](https://wg21.link/p2316r1)

ã“ã‚Œã‚‰ã®ææ¡ˆã¯ã»ã¨ã‚“ã©ã€C++23å…¥ã‚Šã‚’ç›®æŒ‡ã—ã¦ææ¡ˆã‚’CWGã«è»¢é€ã—ã‚ˆã†ã¨ã™ã‚‹ã‚‚ã®ã§ã™ã€‚

### [P1072R9 `basic_string::resize_and_overwrite`](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2021/p1072r9.html)

`std:string`ã«é ˜åŸŸï¼ˆæ–‡å­—é•·ï¼‰ã‚’æ‹¡å¼µã—ã¤ã¤ãã®éƒ¨åˆ†ã‚’åˆ©ç”¨å¯èƒ½ã«ã™ã‚‹ç‚ºã®ãƒ¡ãƒ³ãƒé–¢æ•°`resize_and_overwrite()`ã‚’è¿½åŠ ã™ã‚‹ææ¡ˆã€‚

ä»¥å‰ã®è¨˜äº‹ã‚’å‚ç…§

- [P1072R6 `basic_string::resize_and_overwrite` - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2020å¹´12æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/01/17/005823#P1072R6-basic_stringresize_and_overwrite)
- [P1072R7 `basic_string::resize_and_overwrite` - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´02æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/03/12/225547#P1072R7-basic_stringresize_and_overwrite)
- [P1072R8 `basic_string::resize_and_overwrite` - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´06æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/07/12/182757#P1072R8-basic_stringresize_and_overwrite)

ã“ã®ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã§ã®å¤‰æ›´ã¯ã€`std::string`ãŒ`std::allocator_tratis`ã®`construct/destroy`ãƒ¡ãƒ³ãƒé–¢æ•°ã‚’ä½¿ç”¨ã—ãªã„äº‹ã‚’æ˜è¨˜ã—ãŸã“ã¨ãªã©ã®ã€ææ¡ˆã™ã‚‹æ–‡è¨€ã®èª¿æ•´ã§ã™ã€‚

ã“ã®ææ¡ˆã¯LWGã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’çµ‚ãˆã€æ¬¡ã®å…¨ä½“ä¼šè­°ã§æŠ•ç¥¨ã«ã‹ã‘ã‚‰ã‚Œã¾ã™ã€‚

- [P1072 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/31)

### [P1169R2 static operator()](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2021/p1169r2.html)

é–¢æ•°å‘¼ã³å‡ºã—æ¼”ç®—å­ï¼ˆ`operator()`ï¼‰ã‚’ã€é™çš„ãƒ¡ãƒ³ãƒé–¢æ•°ã¨ã—ã¦å®šç¾©ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ææ¡ˆã€‚

ä»¥å‰ã®è¨˜äº‹ã‚’å‚ç…§

- [P1169R1 `static operator()` - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´04æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/05/14/214016#P1169R1-static-operator)

ã“ã®ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã§ã®å¤‰æ›´ã¯ã€EWGã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ã§æèµ·ã•ã‚ŒãŸãƒ©ãƒ ãƒ€å¼ã«é–¢ã™ã‚‹2ã¤ã®å•é¡Œã«ã¤ã„ã¦è¿½è¨˜ã—ãŸã“ã¨ã§ã™ã€‚

1ã¤ç›®ã¯ã€`static`ãªãƒ©ãƒ ãƒ€å¼ã«ã‚­ãƒ£ãƒ—ãƒãƒ£ã‚’è¨±å¯ã™ã‚‹ã¹ãã‹ï¼Ÿã¨ã„ã†å•é¡Œã§ã™ã€‚ãƒ©ãƒ ãƒ€å¼æœ¬ä½“ã§ã‚­ãƒ£ãƒ—ãƒãƒ£ã‚’å‚ç…§ã¯ã—ãªã„ãŒåˆæœŸåŒ–ã‚­ãƒ£ãƒ—ãƒãƒ£ã‚’åˆ©ç”¨ã—ãŸã„ã€ç”¨é€”ãŒã‚ã‚‹ã‚ˆã†ã§ã™ã€‚ä¾‹ãˆã°æ¬¡ã®ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ã§ã™

```cpp
auto under_lock = [lock=std::unique_lock(mtx)]() static { /* do something */; };
```

ç¾åœ¨ï¼ˆãŠã‚ˆã³R1ï¼‰ã®ææ¡ˆã¯`static`ãƒ©ãƒ ãƒ€ã¯ã‚­ãƒ£ãƒ—ãƒãƒ£ã‚’è¨±å¯ã—ãªã„ã“ã¨ã«ãªã£ã¦ã„ã¾ã™ã€‚ãã‚Œã‚’ç·©å’Œã—ã¦ã“ã®ã‚ˆã†ãªä¾‹ã‚’å‹•ä½œã•ã›ã‚‹ã“ã¨ã¯ã§ãã¾ã™ãŒã€ãã‚Œã«ã‚ˆã£ã¦`static`ãƒ©ãƒ ãƒ€ã¯ã‚¹ãƒ†ãƒ¼ãƒˆãƒ¬ã‚¹ãƒ©ãƒ ãƒ€ã‚’`static`ã«ã™ã‚‹ã ã‘ã€ã¨ã„ã†ã“ã®ææ¡ˆã®ç°¡æ˜“ã•ï¼ˆæ•™ãˆã‚„ã™ã•ï¼‰ãŒå¤±ã‚ã‚Œã¾ã™ã€‚

ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®ãƒŸãƒ¼ãƒ†ã‚£ãƒ³ã‚°ä¸­ã«æŠ•ç¥¨ãŒè¡Œã‚ã‚Œã¾ã—ãŸãŒã€ãã“ã§ã¯ã“ã‚Œã‚’è¨±å¯ã™ã‚‹ã‚³ãƒ³ã‚»ãƒ³ã‚µã‚¹ã¯å¾—ã‚‰ã‚Œã¾ã›ã‚“ã§ã—ãŸã€‚ãã®ãŸã‚ã€ã“ã®ææ¡ˆã§ã¯ã“ã®ç‚¹ã«ã¤ã„ã¦å¤‰æ›´ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

2ã¤ç›®ã®å•é¡Œã¯ã€ã‚­ãƒ£ãƒ—ãƒãƒ£ãƒ¬ã‚¹ï¼ˆã‚¹ãƒ†ãƒ¼ãƒˆãƒ¬ã‚¹ï¼‰ãƒ©ãƒ ãƒ€å¼ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§`static`ãƒ©ãƒ ãƒ€ã§ã‚ã‚‹ã€ã¨å®Ÿè£…å®šç¾©ã«ã™ã‚‹ã“ã¨ã¯å¯èƒ½ã‹ï¼ˆã‚ã‚‹ã„ã¯æœ›ã¾ã—ã„ã‹ï¼‰ï¼Ÿã¨ã„ã†ç‚¹ã§ã™ã€‚

ã“ã®ææ¡ˆã«ã‚ˆã‚‹å¤‰æ›´ã¯å¾Œæ–¹äº’æ›æ€§ãŒãªãABIã‚’ç ´å£Šã™ã‚‹ãŸã‚ã€ç¾åœ¨ï¼ˆãŠã‚ˆã³R1ï¼‰ã®ææ¡ˆã¯`static`ã¯ã‚ãã¾ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæŒ‡å®šã™ã‚‹ã‚‚ã®ã§ã™ã€‚å®Ÿè£…å®šç¾©ã®ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«ã‚ˆã£ã¦ã“ã®æŒ¯ã‚‹èˆã„ãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«ãªã‚Œã°ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ‰‹é–“ã‚’ã‹ã‘ãšã¨ã‚‚ã“ã®ææ¡ˆã«ã‚ˆã‚‹æ©æµã‚’å—ã‘ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ã‚‚ã—C++11æ™‚ç‚¹ã§ã“ã®ææ¡ˆã®å†…å®¹ãŒè€ƒæ…®ã•ã‚Œæ¡ç”¨ã•ã‚Œã¦ã„ã‚Œã°ã€ã‚¹ãƒ†ãƒ¼ãƒˆãƒ¬ã‚¹ãƒ©ãƒ ãƒ€å¼ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§`static`æ‹…ã£ã¦ã„ãŸã¯ãšã§ã™ã€‚

ä¸€æ–¹ã€å®Ÿè£…å®šç¾©ã§ãƒ•ã‚©ãƒ«ãƒˆã®æŒ¯ã‚‹èˆã„ã‚’å¤‰æ›´ã™ã‚‹ã¨ã€ãƒ©ãƒ ãƒ€å¼ã®ç§»æ¤æ€§ã‚’æã­ã¾ã™ã€‚ç¾åœ¨ã®ä»•æ§˜ã§ã¯ã€`operator()`ã®æ€§è³ªã‚’ã¯ã˜ã‚ã¨ã™ã‚‹è¦³å¯Ÿå¯èƒ½ãªãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¯ç§»æ¤å¯èƒ½ã§ã‚ã‚‹ã‚ˆã†ã«è¦å®šã•ã‚Œã¦ãŠã‚Šã€ã“ã®ææ¡ˆã«ã‚ˆã‚‹`static`æ€§ã‚‚åŒæ§˜ã§ã‚ã‚‹ãŸã‚ã€ã“ã®æ€§è³ªãŒãƒãƒ¼ã‚¿ãƒ–ãƒ«ã§ã¯ãªã„ã¨ã„ã†ã®ã¯å¥‡å¦™ã§ã‚ã‚Šãƒ©ãƒ ãƒ€ã®è¨­è¨ˆã«åã—ã¦ã„ã‚‹ã€ã¨ç­†è€…ã®æ–¹ã¯ä¸»å¼µã—ã¦ã„ã¾ã™ã€‚

ä»Šã®ã¨ã“ã‚ã€2ã¤ç›®ã®å•é¡Œã«ã¤ã„ã¦ã®æŠ•ç¥¨ã¯è¡Œã‚ã‚Œã¦ãŠã‚‰ãšã€ææ¡ˆã‚‚ãã‚Œã‚’å¯èƒ½ãªã‚ˆã†ã«ã—ã¦ã¯ã„ã¾ã›ã‚“ã€‚

- [P1169 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/1022)

### [P1206R5 Conversions from ranges to containers](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2021/p1206r5.pdf)

â†“

### [P1206R6 Conversions from ranges to containers](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2021/p1206r6.pdf)

ä»»æ„ã®*range*ã‚’ã‚³ãƒ³ãƒ†ãƒŠã¸å¤‰æ›/å®Ÿä½“åŒ–ã•ã›ã‚‹ãŸã‚ã®`std::ranges::to`ã®ææ¡ˆã€‚

- [P1206R2 ranges::to: A function to convert any range to a container - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2020å¹´10æœˆï¼‰](https://onihusube.hatenablog.com/entry/2020/11/02/221657#P1206R2-rangesto-A-function-to-convert-any-range-to-a-container)
- [P1206R3 ranges::to: A function to convert any range to a container - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2020å¹´11æœˆï¼‰](https://onihusube.hatenablog.com/entry/2020/12/06/015108#P1206R3-rangesto-A-function-to-convert-any-range-to-a-container)
- [P1206R4 Conversions from ranges to containers - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´07æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/08/14/213339#P1206R4-Conversions-from-ranges-to-containers)

R5ã§ã®å¤‰æ›´ã¯

- `push_back_range/push_front_range`é–¢æ•°ã®è¿½åŠ 
- æ–‡è¨€ã®å¾®ä¿®æ­£
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚„ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã«ã¤ã„ã¦ã®ãƒãƒ¼ãƒˆã®è¿½è¨˜

ã“ã®ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã§ã®å¤‰æ›´ã¯ã€

- `push_back_range/push_front_range`é–¢æ•°ã‚’`prepend_range/append_range`ã«ãƒªãƒãƒ¼ãƒ ã—ãŸ

ã“ã¨ãªã©ã§ã™ã€‚

`prepend_range/append_range`ã¯ä»»æ„ã®`range`ã‚’`push_front/push_back`ã™ã‚‹é–¢æ•°ã§ã€ä¸€éƒ¨ã®æ—¢å­˜ã‚³ãƒ³ãƒ†ãƒŠã«ãƒ¡ãƒ³ãƒé–¢æ•°ã¨ã—ã¦è¿½åŠ ã•ã‚Œã¾ã™ã€‚

- [P1206 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/145)


### [P1664R5 `reconstructible_range` - a concept for putting ranges back together](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2021/p1664r5.html)
### [P1673R4 A free function linear algebra interface based on the BLAS](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2021/p1673r4.html)
### [P1885R6 Naming Text Encodings to Demystify Them](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2021/p1885r6.pdf)
### [P2047R2 An allocator-aware optional type](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2021/p2047r2.html)
### [P2093R8 Formatted output](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2021/p2093r8.html)
### [P2280R3 Using unknown references in constant expressions](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2021/p2280r3.html)
### [P2286R2 Formatting Ranges](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2021/p2286r2.html)
### [P2291R2 Add Constexpr Modifiers to Functions `to_chars` and `from_chars` for Integral Types in Header](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2021/p2291r2.pdf)
### [P2361R2 Unevaluated strings](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2021/p2361r2.pdf)
### [P2362R2 Remove non-encodable wide character literals and multicharacter wide character literals](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2021/p2362r2.pdf)
### [P2370R1 Stacktrace from exception](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2021/p2370r1.html)
### [P2372R2 Fixing locale handling in chrono formatters](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2021/p2372r2.html)
### [P2387R1 Pipe support for user-defined range adaptors](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2021/p2387r1.html)
### [P2388R1 Minimum Contract Support: either Ignore or Check_and_abort](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2021/p2388r1.html)
### [P2393R1 Cleaning up integer-class types](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2021/p2393r1.html)
### [P2414R1 Pointer lifetime-end zap proposed solutions](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2021/p2414r1.pdf)
### [P2415R1 What is a view?](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2021/p2415r1.html)
### [P2418R0 Add support for std::generator-like types to std::format](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2021/p2418r0.html)

[`std::generator`](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2021/p2168r3.pdf)-likeãªå‹ã«å¯¾ã™ã‚‹`<format>`ã®ã‚µãƒãƒ¼ãƒˆã‚’è¿½åŠ ã™ã‚‹ææ¡ˆã€‚

`<format>`ã«`range`ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚µãƒãƒ¼ãƒˆã‚’è¿½åŠ ã™ã‚‹[P2286](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2021/p2286r2.html)ã®ä½œæ¥­ä¸­ã«ã€æ¬¡ã®ã‚ˆã†ãªå•é¡ŒãŒç™ºè¦‹ã•ã‚Œã¾ã—ãŸã€‚

```cpp
auto ints_coro(int n) -> std::generator<int> {
  for (int i = 0; i < n; ++i) {
    co_yield i;
  }
}

std::format("{}", ints_coro(10)); // error
```

[`std::format`](https://cpprefjp.github.io/reference/format/format.html)ã¯å‡ºåŠ›ã™ã‚‹å€¤ã‚’`const T&`ã§å—ã‘å–ã‚Šã¾ã™ãŒã€`std::generator`ã¯const-iterableã§ã‚‚copyableã§ã‚‚ãªã„ãŸã‚ãã“ã‹ã‚‰å€¤ã‚’å–ã‚Šå‡ºã™äº‹ãŒã§ããšã€ã‚¨ãƒ©ãƒ¼ã¨ãªã‚Šã¾ã™ã€‚

åŒæ§˜ã®å•é¡ŒãŒèµ·ã“ã‚Šã†ã‚‹`<ranges>`ã®å„ç¨®`view`ã§ã¯ã€const-iterableã§ã¯ãªã„`view`ã¯copyableã§ã‚ã‚‹ãŸã‚C++20ã§ã¯å•é¡Œã«ãªã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚

ã—ã‹ã—ã€`std::generator`ã‚‚å«ã‚ã¦ä»–ã®ã‚³ãƒ«ãƒ¼ãƒãƒ³å‹ã§ã¯åŒæ§˜ã®å•é¡ŒãŒç™ºç”Ÿã—ã€ã¾ãŸ`view`ã®ä¸­ã«ã‚‚const-iterableã§ã‚‚copyableã§ã‚‚ãªã„ã‚‚ã®ãŒã‚ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

ã“ã®ææ¡ˆã§ã¯ã€`std::format`ã‚’ã¯ã˜ã‚ã¨ã™ã‚‹é–¢æ•°ã®å‡ºåŠ›å¯¾è±¡å¼•æ•°åˆ—ã®å‹ã‚’`const Args&&...`ã‹ã‚‰`Args&&...`ã«å¤‰æ›´ã™ã‚‹äº‹ã§å•é¡Œã®è§£æ±ºã‚’å›³ã‚Šã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã£ã¦æ¬¡ã®ã‚ˆã†ãªãƒ¡ãƒªãƒƒãƒˆãŒå¾—ã‚‰ã‚Œã¾ã™

1. const-iterableã§ã¯ãªã„`view`ã¯ã‚³ãƒ”ãƒ¼ã‚’å›é¿ã§ãã‚‹
2. ä¸€èˆ¬çš„ãªlifetimeã‚¨ãƒ©ãƒ¼ã‚’æ¤œå‡ºã§ãã‚‹ã‚ˆã†ã«ãªã‚‹

2ç•ªç›®ã®ãƒ¡ãƒªãƒƒãƒˆã¯æ¬¡ã®ã‚ˆã†ãªäº‹ãŒå¯èƒ½ã«ãªã‚‹äº‹ã§ã™

```cpp
// format_joinã¯ã€ç¬¬ä¸€å¼•æ•°ã®rangeã®å„è¦ç´ ã‚’ç¬¬äºŒå¼•æ•°ã®ãƒ‡ãƒªãƒŸã‚¿ã§åŒºåˆ‡ã£ã¦å‡ºåŠ›ã™ã‚‹é–¢æ•°ï¼ˆæœªå°å…¥ï¼‰
auto joined = std::format_join(std::vector{10, 20, 30, 40, 50, 60}, ":");
std::format("{:02x}", joined); // ç¾åœ¨ã¯UBã€ã“ã®ææ¡ˆã®å¾Œã§ã¯ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼
```

ãã‚‚ãã‚‚`<format>`ãŒå‡ºåŠ›å¯¾è±¡å¼•æ•°ã‚’`const`å‚ç…§ã§å—ã‘å–ã£ã¦ã„ãŸã®ã¯ã€ãƒ“ãƒƒãƒˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ãŸã‚ã§ã—ãŸ

```cpp
struct S {
  int bit: 1;
};

auto s = S();
std::format("{}", s.bit);   // ç¾åœ¨ã¯æœ‰åŠ¹ã€ã“ã®ææ¡ˆã®å¾Œã§ã¯ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼
std::format("{}", +s.bit);  // intã¸å¤‰æ›ã™ã‚‹ã€ã“ã®ææ¡ˆã®å¾Œã§ã‚‚OK
```

ãƒ“ãƒƒãƒˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¯`const`å‚ç…§ã§ã—ã‹å‚ç…§ã™ã‚‹äº‹ãŒã§ããªã„ãŸã‚ã€ã“ã®ææ¡ˆã«ã‚ˆã£ã¦ã“ã®ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ã¯ã‚¨ãƒ©ãƒ¼ã¨ãªã‚Šã¾ã™ã€‚ã—ã‹ã—ãã®å ´åˆã§ã‚‚ã€ãƒ“ãƒƒãƒˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®é ­ã«`+`ã‚’ã¤ã‘ã¦æ•´æ•°å‹ã«ã‚­ãƒ£ã‚¹ãƒˆã™ã‚‹äº‹ã§ç°¡å˜ã«å•é¡Œã‚’å›é¿ã§ãã€å•é¡Œãªã„ã¨ã®èªè­˜ã®ã‚ˆã†ã§ã™ã€‚

- [P2418 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/1092)

### [P2419R0 Clarify handling of encodings in localized formatting of chrono types](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2021/p2419r0.html)

`<chrono>`ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã«ãŠã„ã¦ã€å®Ÿè¡Œæ™‚ãƒ­ã‚±ãƒ¼ãƒ«ãŒæŒ‡å®šã™ã‚‹ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã¨ãƒªãƒ†ãƒ©ãƒ«ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãŒç•°ãªã‚‹å ´åˆã®æŒ¯ã‚‹èˆã„ã‚’è¦å®šã™ã‚‹ææ¡ˆã€‚

```cpp
std::locale::global(std::locale("Russian.1251"));
auto s = std::format("Ğ”ĞµĞ½ÑŒ Ğ½ĞµĞ´ĞµĞ»Ğ¸: {}", std::chrono::Monday);
auto s = std::format("Ğ”ĞµĞ½ÑŒ Ğ½ĞµĞ´ĞµĞ»Ğ¸: {:L}", std::chrono::Monday); // P2372ä»¥é™

// å‡ºåŠ›ä¾‹ï¼ˆãƒªãƒ†ãƒ©ãƒ«ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãŒUTF-8ã®å ´åˆï¼‰
// "Ğ”ĞµĞ½ÑŒ Ğ½ĞµĞ´ĞµĞ»Ğ¸: \xcf\xed"
```

ã“ã®ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ã«ãŠã„ã¦ã€ãƒªãƒ†ãƒ©ãƒ«ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ï¼ˆæ–‡å­—åˆ—ãƒªãƒ†ãƒ©ãƒ«ã®ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ï¼‰ãŒUTF-8ã®å ´åˆã€ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ­ã‚±ãƒ¼ãƒ«ã«æŒ‡å®šã•ã‚Œã¦ã„ã‚‹`Russian.1251`ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã¨ã®é–“ã«ä¸ä¸€è‡´ãŒã‚ã‚Šã¾ã™ã€‚ã—ã‹ã—ã€ã“ã®å ´åˆã®æŒ¯ã‚‹èˆã„ã‚’æ¨™æº–ã¯æŒ‡å®šã—ã¦ã„ã¾ã›ã‚“ã€‚

ã“ã®ææ¡ˆã¯ã€ã“ã®å ´åˆã«çµæœãŒä¸€è²«ã—ãŸã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã®ä¸‹ã§æ­£ã—ãå‡ºåŠ›ã•ã‚Œã‚‹ã‚ˆã†ã«ã€å®Ÿè£…ã«ãƒˆãƒ©ãƒ³ã‚¹ã‚³ãƒ¼ãƒ‰ã‚£ãƒ³ã‚°ã‚’è¨±å¯ã™ã‚‹ã‹ã€ãƒ­ã‚±ãƒ¼ãƒ«ã‚’ç½®æ›ã™ã‚‹äº‹ã§æ–‡å­—åŒ–ã‘ã‚’é˜²ãã‚ˆã†ã«ä»•æ§˜ã‚’æ˜ç¢ºåŒ–ã™ã‚‹ã‚‚ã®ã§ã™ã€‚

ã“ã®ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã§ã¯ã€æ–‡å­—åˆ—ãƒªãƒ†ãƒ©ãƒ«ã®ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãŒãƒ¦ãƒ‹ã‚³ãƒ¼ãƒ‰ã§ã‚ã‚Šãƒ­ã‚±ãƒ¼ãƒ«ã®æŒ‡å®šã™ã‚‹ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã¨ç•°ãªã‚‹å ´åˆã€ãƒ­ã‚±ãƒ¼ãƒ«ã«ã‚ˆã‚‹æ–‡å­—åˆ—ç½®æ›çµæœã¯ã€æ–‡å­—åˆ—ãƒªãƒ†ãƒ©ãƒ«ã®ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã«å¤‰æ›ã•ã‚Œã¦å‡ºåŠ›ã•ã‚Œã‚‹ã€ã‚ˆã†ã«ã™ã‚‹äº‹ã‚’ææ¡ˆã—ã¦ã„ã¾ã™ã€‚

```cpp
std::locale::global(std::locale("Russian.1251"));
auto s = std::format("Ğ”ĞµĞ½ÑŒ Ğ½ĞµĞ´ĞµĞ»Ğ¸: {}", std::chrono::Monday);
auto s = std::format("Ğ”ĞµĞ½ÑŒ Ğ½ĞµĞ´ĞµĞ»Ğ¸: {:L}", std::chrono::Monday); // P2372ä»¥é™

// å‡ºåŠ›ï¼ˆãƒªãƒ†ãƒ©ãƒ«ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãŒãƒ¦ãƒ‹ã‚³ãƒ¼ãƒ‰ã®å ´åˆï¼‰
// "Ğ”ĞµĞ½ÑŒ Ğ½ĞµĞ´ĞµĞ»Ğ¸: ĞŸĞ½"
```

- [P2419 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/1093)

### [P2420R0 2021 Summer Library Evolution Polls](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2021/p2420r0.html)

2021å¹´ã®å¤ï¼ˆ7æœˆã‹ã‚‰9æœˆã«ã‹ã‘ã¦ï¼‰ã«äºˆå®šã•ã‚Œã¦ã„ã‚‹ã€LEWGã§ã®å…¨ä½“æŠ•ç¥¨ã®äºˆå®šè¡¨ã€‚

ä»¥ä¸‹ã®9ã¤ã®ææ¡ˆãŒæŠ•ç¥¨ã«ã‹ã‘ã‚‰ã‚Œã‚‹äºˆå®šã§ã™ã€‚

- [P2138R4 Rules of Design <=> Wording Engagement](https://wg21.link/p2138r4)
    - æ©Ÿèƒ½ã®ææ¡ˆã§ã¯ãªã„
- [P2372R1 Fixing Locale Handling In Chrono Formatters](https://wg21.link/p2372r1)
    - C++20ã¸ã®é€†é©ç”¨ã‚’æ¨å¥¨
- [P1206R6 `ranges::to`](https://wg21.link/p1206r6)
- [P0533R8 constexpr For `<cmath>` And `<cstdlib>`](https://wg21.link/p0533r8)
- [P2273R2 Making `unique_ptr` constexpr](https://wg21.link/p2273r2)

åŸºæœ¬çš„ã«ã¯LEWGã§ã®ä½œæ¥­ã‚’å®Œäº†ã—ã¦LWGï¼ˆCWGï¼‰ã¸è»¢é€ã™ã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹ãŸã‚ã®æŠ•ç¥¨ã§ã™ã€‚

### [P2423R0 C Floating Point Study Group Liaison Report](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2021/p2423r0.pdf)

C23ã«é©ç”¨ã•ã‚Œã‚‹äºˆå®šã®ã€æµ®å‹•å°æ•°ç‚¹æ•°é–¢é€£ã®å¤‰æ›´ã«ã¤ã„ã¦ã®è¦ç´„æ–‡æ›¸ã€‚

1. 2é€²æµ®å‹•å°æ•°ç‚¹æ•°
   - å¹…ã‚’ç¤ºã™æ•´æ•°å€¤ã‚’è¿”ã™ãƒã‚¯ãƒ­ã®è¿½åŠ 
   - æµ®å‹•å°æ•°ç‚¹ç’°å¢ƒã‚¢ã‚¯ã‚»ã‚¹ã®ãŸã‚ã®ãƒã‚¯ãƒ­ã¨é–¢æ•°ã®è¿½åŠ 
   - ãã®ä»–ãƒã‚¯ãƒ­ã¨é–¢æ•°ã®è¿½åŠ 
       - ` fromfpx, roundeven, fmaxmag, llogb, nextup, fadd,  ffma, totalorder, canonicalize, setpayload, strfromd`ãªã©
   - Constant rounding modeã®è¿½åŠ 
       - `#pragma STDC FENV_ROUND`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ã«ã‚ˆã£ã¦è¨­å®šã—ã€ã„ãã¤ã‹ã®æ¨™æº–é–¢æ•°ãŒå½±éŸ¿ã‚’å—ã‘ã‚‹
   - signaling NaNã®ãŸã‚ã®ãƒã‚¯ãƒ­è¿½åŠ 
   - æµ®å‹•å°æ•°ç‚¹æ•°å€¤åˆ†é¡ã®ãŸã‚ã®ãƒã‚¯ãƒ­ã®è¿½åŠ 
       - `iscanonical, issignaling, iszero`ãªã©
2. 10é€²æµ®å‹•å°æ•°ç‚¹æ•°ï¼ˆæ¡ä»¶ä»˜ãã‚µãƒãƒ¼ãƒˆï¼‰
   - `floatã€doubleã€long double`ã«å¯¾å¿œã™ã‚‹10é€²æµ®å‹•å°æ•°ç‚¹æ•°å‹
       - `_Decimal{32,64,128}`
   - ãƒªãƒ†ãƒ©ãƒ«ã‚µãƒ•ã‚£ãƒƒã‚¯ã‚¹
       - `df/DF, dd/DD, dl/DL`
   - 10é€²æµ®å‹•å°æ•°ç‚¹æ•°å€¤ã«é–¢ã™ã‚‹ãƒã‚¯ãƒ­
       - æœ€å¤§ãƒ»æœ€å°å€¤ã®å•ã„åˆã‚ã›ã‚„`DEC_EVAL_METHOD`ãªã©
   - 10é€²æµ®å‹•å°æ•°ç‚¹æ•°å€¤ã¨2é€²æµ®å‹•å°æ•°ç‚¹æ•°ã«å¯¾å¿œã™ã‚‹æµ®å‹•å°æ•°ç‚¹ç’°å¢ƒãƒ¢ãƒ¼ãƒ‰ã«é–¢ã™ã‚‹ãƒã‚¯ãƒ­ã¨é–¢æ•°
   - 10é€²æµ®å‹•å°æ•°ç‚¹æ•°å‹ã«é–¢ã™ã‚‹æƒ…å ±ã‚’å–å¾—ã™ã‚‹é–¢æ•°
       - `samequantumd32, llquantexpd64`ãªã©
   - 10é€²æµ®å‹•å°æ•°ç‚¹æ•°å‹é–“ã®å¤‰æ›ã‚’è¡Œã†é–¢æ•°
       - `encodedecd128, decodebind64`
   - `printf/scanf`ãƒ•ã‚¡ãƒŸãƒªã®10é€²æµ®å‹•å°æ•°ç‚¹æ•°å‹ã‚µãƒãƒ¼ãƒˆ
3. äº¤æ›ãƒ»æ‹¡å¼µæµ®å‹•å°æ•°ç‚¹æ•°å‹ï¼ˆ*interchange and extended floating-point types*ï¼‰
   - 2é€²ã¨10é€²æµ®å‹•å°æ•°ç‚¹æ•°å‹ã®äº¤æ›ã¨æ‹¡å¼µã®ãŸã‚ã®å€‹åˆ¥ã®å‹
       - `_Float32, _DecimalN, _FloatNx`
   - ãƒªãƒ†ãƒ©ãƒ«ã‚µãƒ•ã‚£ãƒƒã‚¯ã‚¹
       - `fN/FN, fNx/FNx, dN/DN, dNx/DNx`
   - äº¤æ›ãƒ»æ‹¡å¼µå‹ã«ä¸€èˆ¬åŒ–ã•ã‚ŒãŸ2é€²ã€10é€²æµ®å‹•å°æ•°ç‚¹æ•°å‹æƒ…å ±å–å¾—ãƒã‚¯ãƒ­
       - `FLTN_MAX, DECNX_TRUE_MIN`
   - äº¤æ›ãƒ»æ‹¡å¼µå‹ã«ä¸€èˆ¬åŒ–ã•ã‚ŒãŸ2é€²ã€10é€²æµ®å‹•å°æ•°ç‚¹æ•°å‹ã®é–¢æ•°ã‚„ã‚¿ã‚¤ãƒ—ã‚¸ã‚§ãƒãƒªãƒƒã‚¯ãƒã‚¯ãƒ­ã‚„ãã®ä»–ã®ãƒã‚¯ãƒ­
       - `coshfN, ceilfNx, sinhdNx, dMadddNx, strtofN, FP_FAST_FMADDFN, FLTN_SNAN`
   - äº¤æ›ãƒ»æ‹¡å¼µå‹ã«ä¸€èˆ¬åŒ–ã•ã‚ŒãŸ10é€²æµ®å‹•å°æ•°ç‚¹æ•°å‹ç”¨ã®é–¢æ•°
       - `encodedecdN, quantizedNx`
   - äº¤æ›ãƒ»æ‹¡å¼µå‹ã«ä¸€èˆ¬åŒ–ã•ã‚ŒãŸ2é€²è¤‡ç´ æ•°å‹åŠã³è™šæ•°å‹
       - `_FloatN _Imaginary, _FloatNx _Complex`
   - äº¤æ›ãƒ»æ‹¡å¼µå‹ã«ä¸€èˆ¬åŒ–ã•ã‚ŒãŸ2é€²è¤‡ç´ æ•°å‹ç”¨ã®é–¢æ•°
       - `cexpfN, crealfNx`
   - è©•ä¾¡ãƒ¡ã‚½ãƒƒãƒˆãƒã‚¯ãƒ­ã®å€¤ã‚’äº¤æ›ãƒ»æ‹¡å¼µå‹ã‚’å«ã‚ã‚‹ã‚ˆã†ã«æ›´æ–°
       - `_DecimalN`ã«å¯¾ã—ã¦`DEC_EVAL_METHOD N`
       - `_FloatNx`ã«å¯¾ã—ã¦`FLT_EVAL_METHOD N+1`
   - ç®—è¡“æ¼”ç®—ãŒå®šç¾©ã•ã‚Œãªã„äº¤æ›å‹ã®é–“ã®å¤‰æ›ã®ãŸã‚ã®ãƒ‡ã‚³ãƒ¼ãƒ‰/ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰é–¢æ•°
       - `decodefN, dMecndecdN`
4. è¿½åŠ ã®æ•°å­¦é–¢æ•°
   - `pown, acospifN, exp2m1ldN, compoundndNx`ãªã©
   - æ¨™æº–ã®æµ®å‹•å°æ•°ç‚¹æ•°å‹åŠã³äº¤æ›ãƒ»æ‹¡å¼µæµ®å‹•å°æ•°ç‚¹æ•°å‹ï¼ˆæ¡ä»¶ä»˜ï¼‰ç”¨ã«è¿½åŠ 

ã ã„ãŸã„æ¡ä»¶ä»˜ãã‚µãƒãƒ¼ãƒˆï¼ˆå¿…é ˆã§ãªã„ï¼‰ã ã£ãŸã‚Šã—ã¾ã™ãŒã€C23ã«å‘ã‘ã¦ã“ã‚Œã‚‰ã®æµ®å‹•å°æ•°ç‚¹æ•°é–¢é€£ã®æ‹¡å¼µãŒäºˆå®šã•ã‚Œã¦ã„ã¾ã™ã€‚ãŠãã‚‰ãC++ã«ã‚‚å½±éŸ¿ã—ã¦ãã‚‹ã§ã—ã‚‡ã†ã€‚

### [P2425R0 Expression Function Body](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2021/p2425r0.html)

ç°¡æ˜“ãªé–¢æ•°å®šç¾©ã‚’å¼ã§ç›´æ¥æ›¸ã‘ã‚‹ã‚ˆã†ã«ã™ã‚‹ææ¡ˆã€‚

ãƒ©ãƒ ãƒ€å¼ã‚’å«ã‚€é–¢æ•°å®šç¾©ã§ã¯ã€1è¡Œã§æ¸ˆã‚€ã‚ˆã†ãªå˜ç´”ãªé–¢æ•°ã‚’å®šç¾©ã™ã‚‹ã‚·ãƒ¼ãƒ³ãŒã‚ˆãã‚ã‚Šã¾ã™ã€‚

```cpp
// 1. Calling a member
std::all_of(vs.begin(), vs.end(), [](const auto& val) { return val.check(); });

// 2. Binding an object
std::all_of(vs.begin(), vs.end(), [id](const auto& val) { return val.id == id; });

// 3. Passing a lazy argument
auto get_brush_or(painter, []{ return Brush(Color::red); });

// ãã®ä»–å¤šæ•°ã®ä¾‹ãŒææ¡ˆã«ã‚ã‚Šã¾ã™ã€çœç•¥
```

ã“ã®ä¾‹ã¯ã»ã‚“ã®ä¸€ä¾‹ã§ã—ã‹ãªãã€`noexcept`ã‚„ã‚³ãƒ³ã‚»ãƒ—ãƒˆãƒã‚§ãƒƒã‚¯ã‚’æ¬ ã„ã¦ã„ã‚‹ãªã©æ­£ç¢ºãªã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ã“ã®ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ã‚’æ­£ã—ãæ›¸ãã“ã¨ã¯ã€è¨˜è¿°é‡ãŒå¢—åŠ ã™ã‚‹ã¨ã¨ã‚‚ã«è€ƒæ…®ã™ã¹ãäº‹ã‚‚å¤šãã€ç°¡å˜ãªä½œæ¥­ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

ã“ã®ææ¡ˆã®ç›®çš„ã¯ã€ã“ã®ã‚ˆã†ãªç°¡æ˜“ãªé–¢æ•°å®šç¾©ã«ã¤ã„ã¦è¨˜è¿°é‡ã‚’å‰Šæ¸›ã™ã‚‹ã¨ã¨ã‚‚ã«ç°¡æ˜“ãªè¨˜è¿°ã§æ­£ã—ãæ›¸ãäº‹ãŒã§ãã‚‹æ§‹æ–‡ã‚’æä¾›ã™ã‚‹äº‹ã§ã™ã€‚

ã‚³ãƒ³ã‚»ãƒ—ãƒˆã®å°å…¥ã«ã‚ˆã£ã¦SFINAEã¨ã„ã†é«˜åº¦ãªãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ãŒéå¸¸ã«ç°¡æ˜“ãªå½¢ã§èª°ã§ã‚‚åˆ©ç”¨ã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸäº‹ã§ã€ã“ã‚Œã‚‰ã®å•é¡Œã®å½±éŸ¿ã¯æ™‚é–“çµŒéã¨ã¨ã‚‚ã«å¢—å¤§ã™ã‚‹äº‹ãŒæƒ³åƒã•ã‚Œã¾ã™ã€‚

```cpp
void something(std::invocable<int> auto f);
void something(std::invocable<std::string> auto f);

// something()ã®å‘¼ã³å‡ºã—ã¯æ›–æ˜§ã§ã‚ã‚‹ãŸã‚ã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼
something([](auto arg){ return arg/2; });
```

ã“ã®ã‚ˆã†ã«ã€ã‚³ãƒ³ã‚»ãƒ—ãƒˆã®ãƒã‚§ãƒƒã‚¯ã‚’å¿…è¦ã¨ã™ã‚‹ã‚³ãƒ¼ãƒ‰ã¯ä»Šå¾Œå¢—åŠ ã—ã¦ã„ãäº‹ã§ã—ã‚‡ã†ã€‚ã“ã‚Œã¯ã‚‚ã¯ã‚„TMPçš„ãªã‚³ãƒ¼ãƒ‰ã§ã¯ãªãã‚ã‚‰ã‚†ã‚‹å ´æ‰€ã§è¡Œã‚ã‚Œã‚‹ã‚ˆã†ã«ãªã‚‹ãŸã‚ã€ä½•ã‚‚è€ƒãˆãšã«æ›¸ã„ã¦ã‚‚æ­£ã—ãå‹•ãã“ã¨ã®é‡è¦æ€§ã¯ã‚ˆã‚Šé«˜ã¾ã‚Šã¾ã™ã€‚

ã•ã‚‰ã«ã€é™çš„ä¾‹å¤–ï¼ˆ[P0709R0](http://open-std.org/JTC1/SC22/WG21/docs/papers/2018/p0709r0.pdf)ï¼‰ã®å°å…¥ã¯ä¾‹å¤–æŒ‡å®šã®å•é¡Œã‚’ã•ã‚‰ã«æ‚ªåŒ–ã•ã›ã¾ã™ã€‚

```cpp
auto func(const std::string&) throws; // é™çš„ä¾‹å¤–ã®æŒ‡å®š
auto func(int);
...
std::transform(vs.begin(), vs.end(), vs.begin(), 
    [](const auto& val) { return func(val); }); // ã“ã®ãƒ©ãƒ ãƒ€å¼ã®ä¾‹å¤–æŒ‡å®šã¯ï¼Ÿ
```

ç¾åœ¨ã®ææ¡ˆã®ä»•æ§˜ã§ã¯ã€é™çš„ä¾‹å¤–æŒ‡å®šã•ã‚ŒãŸé–¢æ•°ã‚’ãƒ©ãƒ ãƒ€å¼ã§åŒ…ã‚“ã§ç‰¹ã«ä¾‹å¤–æŒ‡å®šã‚’è¡Œã‚ãªã„å ´åˆã€å‹•çš„ä¾‹å¤–ã«å¤‰æ›ã•ã‚Œã¾ã™ã€‚ã“ã‚Œã¯æ˜ã‚‰ã‹ã«æœ›ã¾ã—ã„æŒ¯ã‚‹èˆã„ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

ã“ã‚Œã‚‰ã®å•é¡Œã¯ã€çŸ­ç¸®ãƒ©ãƒ ãƒ€ææ¡ˆï¼ˆ[P0573R2](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2017/p0573r2.html)ï¼‰ã®è§£æ±ºã—ã‚ˆã†ã¨ã—ãŸå•é¡Œã§ã‚‚ã‚ã‚Šã¾ã—ãŸãŒã€ãã‚Œã¯æ¬¡ã®ã‚ˆã†ãªç†ç”±ã«ã‚ˆã‚Šãƒªã‚¸ã‚§ã‚¯ãƒˆã•ã‚Œã¾ã—ãŸã€‚

1. é€šå¸¸ã®ãƒ©ãƒ ãƒ€å¼ã¨æ„å‘³è«–ãŒç•°ãªã‚‹ã€‚é–¢æ•°æœ¬ä½“ãŒåŒã˜ã§ã‚‚ã€çŸ­ç¸®å½¢ã‹å¦ã‹ã«ã‚ˆã£ã¦æˆ»ã‚Šå€¤å‹ãŒç•°ãªã‚‹ã€‚
2. ä»»æ„ã®å…ˆèª­ã¿ãƒ‘ãƒ¼ã‚¹ãŒå¿…è¦ã¨ãªã‚‹ã€‚ãƒ‘ãƒ¼ã‚µãƒ¼ã¯ãƒ©ãƒ ãƒ€å¼ãŒçŸ­ç¸®å½¢ã‹ã©ã†ã‹ã‚’åˆ¤å®šã™ã‚‹ãŸã‚ã«ãƒ©ãƒ ãƒ€å¼æœ¬ä½“ã‚’å…ˆèª­ã¿ã—ãªã‘ã‚Œã°ãªã‚‰ãªã„ã€‚
3. å¾Œç½®æˆ»ã‚Šå€¤å‹ã¨ã®ä¸ä¸€è‡´ã€‚ãƒ©ãƒ ãƒ€æœ¬ä½“ã¨å¾Œç½®æˆ»ã‚Šå€¤å‹ã¨ã§ã¯è§£æãŒç•°ãªã‚‹ãŸã‚ã€çŸ­ç¸®ãƒ©ãƒ ãƒ€ã¯æ„å›³é€šã‚Šã«å‹•ä½œã—ãªã„å¯èƒ½æ€§ãŒã‚ã‚‹
      - ã“ã®å•é¡Œã¯[P2036R2](https://wg21.link/p2036r2)ã§è§£æ±ºã•ã‚Œã‚‹ï¼ˆäºˆå®šï¼‰

ã“ã®ææ¡ˆã¯ã€ã“ã®1ã¤ç›®ã®å•é¡Œã‚’è§£æ±ºã—ã‚ˆã†ã¨ã™ã‚‹ã‚‚ã®ã§ã‚‚ã‚ã‚Šã¾ã™ã€‚

çŸ­ç¸®ãƒ©ãƒ ãƒ€ææ¡ˆã§ã¯æ¬¡ã®äºŒã¤ã®å½¢å¼ãŒåŒã˜æ„å‘³ã¨ãªã‚‹ã‚ˆã†ã«å®šç¾©ã•ã‚Œã¾ã—ãŸã€‚

```cpp
[]() noexcept(noexcept(expression)) -> decltype((expression)){ return expression; }
[]() => expression;
```

å•é¡Œã¨ãªã£ãŸã®ã¯æˆ»ã‚Šå€¤å‹ã®`decltype((expression))`ã§ã™ã€‚ã“ã‚Œã«ã‚ˆã‚‹æ¨è«–ã¯å‚ç…§ã®ã‚»ãƒãƒ³ãƒ†ã‚£ã‚¯ã‚¹ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¨ã—ã€å·¦è¾ºå€¤ã®`return`ã«å¯¾ã—ã¦å·¦è¾ºå€¤å‚ç…§å‹ã‚’æ¨è«–ã—ã¾ã™ã€‚ä¸€æ–¹ã€é€šå¸¸ã®ãƒ©ãƒ ãƒ€å¼ã§æˆ»ã‚Šå€¤å‹æŒ‡å®šã‚’çœç•¥ã—ãŸå ´åˆã¯å€¤ã®ã‚»ãƒãƒ³ãƒ†ã‚£ã‚¯ã‚¹ãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã‚ã‚Šã€`decltype((expression))`ã®çµæœå‹ã‚’`decay`ã—ãŸå‹ãŒæ¨è«–ã•ã‚Œã¾ã™ã€‚

```cpp
int i;

auto l = [](int* p) noexcept(noexcept(*p)) -> decltype((*p)) { return *p; };
// decltype(l(&i))ã¯int&

auto l2 = [](int* p) { return *p; }
auto func(int*) { return *p; }
// decltype(l2(&i))ã¨decltype(func(&i))ã¯å…±ã«int

auto l3 = [](int* p) => *p;
// decltype(l3(&i))ã¯int&
```

ã¾ãŸã€`[](auto val) => val;`ã®ã‚ˆã†ã«æ›¸ãã¨ãƒ­ãƒ¼ã‚«ãƒ«å¤‰æ•°ã¸ã®å‚ç…§ã‚’è¿”ã—ã¾ã™ã€‚ã“ã‚Œã¯ãƒã‚°ã§ã‚ã‚Šæœ›ã¾ã—ã„æŒ¯ã‚‹èˆã„ã§ã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€å…ˆã»ã©ã®ãƒã‚¤ãƒ³ã‚¿ã®ä¾‹ã®ã‚ˆã†ã«å¤šãã®å ´åˆã¯å‚ç…§ã‚’è¿”ã—ãŸæ–¹ãŒä¾¿åˆ©ã ã¨æ€ã‚ã‚Œã¾ã™ã€‚

ã“ã®ã‚ˆã†ã«ã€çŸ­ç¸®ãƒ©ãƒ ãƒ€ã¯é€šå¸¸ã®ãƒ©ãƒ ãƒ€ã¨åŒã˜ã‚ˆã†ã«ã¯ãªã‚‰ãšã€ã“ã‚ŒãŒæ•¬é ã•ã‚ŒãŸç†ç”±ã®ä¸€ã¤ã¨ãªã‚Šã¾ã—ãŸã€‚

ã“ã®å•é¡Œã¸ã®å¯¾å‡¦ã®ãŸã‚ã«ã“ã®ææ¡ˆã§ã¯2ã¤ã®æ–¹æ³•ã‚’ææ¡ˆã—ã¦ã„ã¾ã™ã€‚

1. æœ€å°å¼ã¯å‚ç…§ã‚»ãƒãƒ³ãƒ†ã‚£ã‚¯ã‚¹æŒã¡ã€éæœ€å°å¼ã¯å€¤ã®ã‚»ãƒãƒ³ãƒ†ã‚£ã‚¯ã‚¹ã‚’æŒã¤
2. æœ€å°å¼ã‚‚å€¤ã®ã‚»ãƒãƒ³ãƒ†ã‚£ã‚¯ã‚¹ã‚’æŒã¡ã€ã‚ªãƒ—ãƒˆã‚¤ãƒ³ã§å‚ç…§ã‚»ãƒãƒ³ãƒ†ã‚£ã‚¯ã‚¹ã‚’ä¸ãˆã‚‹

ã“ã®ææ¡ˆã§ã¯1ã¤ç›®ã®æ–¹ã‚’ä¸»ã¨ã—ã¦æ¨ã—ã¦ã„ã¾ã™ã€‚

#### ææ¡ˆ1ï¼ˆãƒ¡ã‚¤ãƒ³ï¼‰

ã“ã®ææ¡ˆã«ã‚ˆã‚‹è¨˜æ³•ã®1ã¤ï¼ˆéæœ€å°å¼ï¼‰ã¯ã€å˜ä¸€ã®å¼ã®ã¿ã‹ã‚‰æ§‹æˆã•ã‚ŒãŸé–¢æ•°ã®`{}`ã‚’å–ã‚Šæ‰•ã†ã“ã¨ã§å°å…¥ã•ã‚Œã¾ã™ã€‚

```cpp
// ã©ã“ã‹ã§å®šç¾©ã•ã‚Œã¦ã„ã‚‹ã¨ã—ã¦
const pixel& pixel_ref_at(const image& image, point p) noexcept;

// From
auto pixel_at(image& image, int x, int y) {
  return pixel_at(image, point{x, y});
}

// To (ã“ã®ææ¡ˆ)
auto pixel_at(image& image, int x, int y)
  return pixel_at(image, point{x, y});
```

1ã¤ç›®ã®æ–¹æ³•ã§ã¯ã“ã‚Œã¯æ¬¡ã®ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ã¨ç­‰ä¾¡ã¨ãªã‚Šã¾ã™ã€‚

```cpp
auto pixel_at(image& image, int x, int y) 
  noexcept(noexcept(std::decay_t<decltype(pixel_at(image, point{x, y}))>(pixel_at(image, point{x, y}))))
  -> decltype((std::decay_t<decltype(pixel_at(image, point{x, y}))>(pixel_at(image, point{x, y})))) 
    { return pixel_at(image, point{x, y}); }
```

æˆ»ã‚Šå€¤å‹ã®æ‰±ã„ã¯åŒã˜ï¼ˆå€¤ã®ã‚»ãƒãƒ³ãƒ†ã‚£ã‚¯ã‚¹ï¼‰ã§ã™ãŒã€ä¾‹å¤–æŒ‡å®šã®æ­£ç¢ºã•ã¨ã‚³ãƒ³ã‚»ãƒ—ãƒˆ/SFINAEã¨ã®é«˜ã„è¦ªå’Œæ€§ãŒè¿½åŠ ã•ã‚Œã¦ã„ã¾ã™ã€‚

å¾“ã£ã¦ã“ã®ä¾‹ã§ã¯ã€ææ¡ˆå‰å¾Œã§ã‚‚æˆ»ã‚Šå€¤å‹ã¯å¤‰åŒ–ã—ã¾ã›ã‚“ãŒã€æ­£ã—ã„`noexcept`ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãŒè¿½åŠ ã•ã‚Œã¾ã™ã€‚

`return`ãŒå¿…è¦ã§ã‚ã‚‹ã“ã¨ã¯ã€å‘¼ã³å‡ºã•ã‚Œã¦å€¤ã‚’è¿”ã™ã¨ã„ã†é€šå¸¸ã®é–¢æ•°ã®ã‚»ãƒãƒ³ãƒ†ã‚£ã‚¯ã‚¹ã‚’æŒã¤ã“ã¨ã®æŒ‡æ¨™ã¨ãªã£ã¦ã„ã¾ã™ã€‚

```cpp
int i;
auto l = [](auto* p) return *p; 
// decltype(l(&i))ã¯int
```

è¨˜æ³•ã®2ã¤ç›®ï¼ˆæœ€å°å¼ï¼‰ã¯é–¢æ•°ã¨ã„ã†ã‚ˆã‚Šã¯å¼ã§ã‚ã‚‹äº‹ã‚’æ˜ç¤ºã™ã‚‹ã‚‚ã®ã§ã€å…ˆã»ã©ã®è¨˜æ³•ã‹ã‚‰`return`ã‚’å–ã‚Šé™¤ã„ãŸã‚‚ã®ã§ã™ã€‚

```cpp
auto l = [](auto* p) *p; 

// ã“ã®ã‚³ãƒ¼ãƒ‰ã¨ç­‰ä¾¡
auto l = [](auto* p) noexcept(noexcept(*p)) -> decltype((*p)) { return *p; };
```

ã“ã®è¨˜æ³•ã§ã¯æˆ»ã‚Šå€¤å‹ã¯å‚ç…§ã®ã‚»ãƒãƒ³ãƒ†ã‚£ã‚¯ã‚¹ã‚’æŒã¡ã€é–¢æ•°ã‚ˆã‚Šã‚‚ã‚ˆã‚Šå¼ãã®ã‚‚ã®ã«è¿‘ã„æŒ¯ã‚‹èˆã„ã‚’ã—ã¾ã™ã€‚ãã—ã¦ã“ã‚Œã¯[P0573R2](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2017/p0573r2.html))ã®çŸ­ç¸®ãƒ©ãƒ ãƒ€ã®ã‚»ãƒãƒ³ãƒ†ã‚£ã‚¯ã‚¹ãã®ã‚‚ã®ã§ã™ã€‚

ã“ã®ææ¡ˆã«ã‚ˆã‚‹éæœ€å°å¼ã¯ã€å®Œå…¨ãªé–¢æ•°ã¨ã“ã®æœ€å°å¼ã®ä¸­é–“ã«ä½ç½®ã™ã‚‹è¨˜æ³•ã¨ã—ã¦æŒ¯ã‚‹èˆã„ã€ã“ã®2ã¤ã®è¨˜æ³•ãŒãƒ©ãƒ ãƒ€å¼ä»¥å¤–ã®éƒ¨åˆ†ã«åºƒãå°å…¥ã•ã‚Œã‚‹ã“ã¨ã«ã‚ˆã£ã¦ã€æœ€å°å¼ã«ã‚ˆã‚‹çŸ­ç¸®ãƒ©ãƒ ãƒ€ã¨é€šå¸¸ã®ãƒ©ãƒ ãƒ€ã®é–“ã®æ›–æ˜§ã•ã‚’å–ã‚Šé™¤ã“ã†ã¨ã™ã‚‹ã‚‚ã®ã§ã™ã€‚

```cpp
// ã“ã®ã‚ˆã†ãªéšå±¤çš„ãªè¨˜æ³•ã‚’æä¾›ã—ã€é–¢æ•°è¨˜æ³•ã¨æœ€å°å¼è¨˜æ³•ã®é–“ã«ã‚®ãƒ£ãƒƒãƒ—ã‚’æŒ¿å…¥ã™ã‚‹
[](auto* p) { return *p; }  // å€¤ã‚»ãƒãƒ³ãƒ†ã‚£ã‚¯ã‚¹
[](auto* p)   return *p;    // å€¤ã‚»ãƒãƒ³ãƒ†ã‚£ã‚¯ã‚¹
[](auto* p)          *p;    // å‚ç…§ã‚»ãƒãƒ³ãƒ†ã‚£ã‚¯ã‚¹
```

ãã—ã¦ã€æœ€å°å¼ã®è¨˜æ³•ã«ã‚ˆã£ã¦ã‚ˆã‚Šå®Ÿéš›ã®å¼ã®è¡¨è¨˜ã«è¿‘ã¥ã‘ã‚‹ã“ã¨ã§ã€æœ¬ä½“ãŒå€¤ã‚’è¿”ã™ã¨ã„ã†é–¢æ•°ã®ãƒ¡ã‚¿ãƒ•ã‚¡ãƒ¼ã‹ã‚‰é€ƒã‚Œã‚‹äº‹ã‚’ç›®æŒ‡ã—ã¾ã™ã€‚ã“ã‚Œã¯`=>`ã‚’ä½¿ç”¨ã—ãªã„ç†ç”±ã§ã‚‚ã‚ã‚Šã¾ã™ã€‚`=>`ã¯çµå±€`return`ã®ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã§ã‚ã‚Šã€`->`ã®é€²åŒ–å½¢ã§ã—ã‹ã‚ã‚Šã¾ã›ã‚“ã€‚`->`ãŒå‹ã‚’è¿”ã™äº‹ã‚’ç¤ºã™ã®ã«å¯¾ã—ã¦`=>`ã¯å¼ã‚’è¿”ã™äº‹ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚ä½•ã‹ã‚’è¿”ã™ã¨ã„ã†é–¢æ•°çš„ãªæ¦‚å¿µã‚’ã“ã“ã§ã¯é¿ã‘ã‚ˆã†ã¨ã—ã¦ãŠã‚Šã€ã‚ˆã‚Šç´”ç²‹ãªå¼ã¨ã—ã¦æŒ¯èˆã†äº‹ã‚’æ˜ç¤ºçš„ã«ã—ã‚ˆã†ã¨ã—ã¦ã„ã¾ã™ã€‚

ãªãŠã€ã“ã®è¨˜æ³•ã‚’å°å…¥ã™ã‚‹ã¨é–¢æ•°ã®ä¿®é£¾ã¨ã®åŒºåˆ¥ãŒæ›–æ˜§ã«ãªã‚‹ãŸã‚ã€ãã‚ŒãŒã‚ã‚‹å ´åˆã¯ä¿®é£¾ã¨å¼ã‚’`:`ã§åŒºåˆ‡ã‚‹äº‹ã‚’ææ¡ˆã—ã¦ã„ã¾ã™ã€‚

```cpp
auto Class::member() const: async;
[](int a) mutable: coro;
```

ææ¡ˆ1ã«ã‚ˆã‚‹ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰

<table>
<tr>
<th>ç¾åœ¨</th>
<th>ã“ã®ææ¡ˆ</th>
</tr>
<tr>
<td valign="top">

```cpp
class QPointF {
  // ...
  real& rx() { return xp; }
  real& ry() { return yp; }
  real x() const { return xp; }
  real y() const { return yp; }
   
  friend auto operator+(const QPointF &p1, const QPointF &p2) {
    return QPointF(p1.xp+p2.xp, p1.yp+p2.yp);
  }

private:
  real xp;
  real yp;
};
```

</td>
<td valign="top">

```cpp
class QPointF {
  // ...
  auto rx() xp; 
  auto ry() yp;
  auto x() const return xp;
  auto y() const return yp;

  friend auto operator+(const QPointF &p1, const QPointF &p2)
    QPointF(p1.xp+p2.xp, p1.yp+p2.yp);

private:
  real xp;
  real yp;
};
```

</pre>
</td>
</tr>
</table>

<table>
<tr>
<th>ç¾åœ¨</th>
<th>ã“ã®ææ¡ˆ</th>
</tr>
<tr>
<td valign="top">

```cpp
template< class C >
constexpr 
auto cbegin( const C& c ) noexcept(noexcept(std::begin(c)))
    -> decltype(std::begin(c)) { return std::begin(c); } 
```

</td>
<td valign="top">

```cpp
template< class C >
constexpr 
auto cbegin( const C& c ) std::begin(c); 
```

</pre>
</td>
</tr>
</table>

#### ææ¡ˆ2 ï¼ˆã‚µãƒ–ï¼‰

ã“ã¡ã‚‰ã§ã¯ã€ææ¡ˆ1ã«ã‚ˆã‚‹æœ€å°å¼ã®æˆ»ã‚Šå€¤å‹ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§å€¤ã®ã‚»ãƒãƒ³ãƒ†ã‚£ã‚¯ã‚¹ã¨ã—ã¦ã€å‚ç…§ã‚»ãƒãƒ³ãƒ†ã‚£ã‚¯ã‚¹ã¨ã™ã‚‹ã«ã¯è¿½åŠ ã®è¨˜æ³•ã‚’ç”¨ã„ã‚‹ã‚‚ã®ã§ã™ã€‚

```cpp
int i;
auto l = [](int* p) *p; 
// decltype(l(&i))ã¯int

// ã“ã®ã‚³ãƒ¼ãƒ‰ã¨ç­‰ä¾¡
auto l = [](auto* p) noexcept(noexcept(std::decay_t<decltype(*p)>(*p))) 
  -> decltype(std::decay_t<decltype(*p)>(*p)) { return *p; }; 
```

å…ˆã»ã©ã®ã‚ˆã†ãªé€šå¸¸ã®é–¢æ•°å®šç¾©ã‹ã‚‰`{}`ã¨`return`ã‚’çœã„ãŸæ§‹æ–‡ã‚’å°å…¥ã™ã‚‹äº‹ã¯åŒã˜ã§ã™ãŒã€ã“ã“ã§ã¯ã“ã‚Œã¯ã¾ã å€¤ã®ã‚»ãƒãƒ³ãƒ†ã‚£ã‚¯ã‚¹ã‚’æŒã¡ã¾ã™ã€‚ã“ã‚Œã‚’å‚ç…§ã®ã‚»ãƒãƒ³ãƒ†ã‚£ã‚¯ã‚¹ã¨ã™ã‚‹ã«ã¯å¼ã‚’`()`ã§å›²ã¿ã¾ã™ã€‚

```cpp
int i;
auto l = [](int* p) (*p); 
// decltype(l(&i))ã¯int&

// ã“ã®ã‚³ãƒ¼ãƒ‰ã¨ç­‰ä¾¡
auto l = [](auto* p) noexcept(noexcept(*p)) -> decltype((*p)) { return *p; }; 
```

å¤‰æ•°ã‚’`()`ã§å›²ã‚“ã§å‚ç…§ã‚’å–å¾—ã™ã‚‹ã“ã¨ã¯ã€`decltype`ã‚„`return`ã§ã™ã§ã«ç¢ºç«‹ã•ã‚Œã¦ã„ã¾ã™ã€‚

```cpp
auto l = [](int i) -> decltype(auto) { return (i); };  // æˆ»ã‚Šå€¤å‹ã¯int&

struct Point { int x; int y; };
auto l2 = [](const Point& p) -> decltype(auto) { return (p.x); };  // æˆ»ã‚Šå€¤å‹ã¯int&

int i;
decltype((i)) p = i; // pã®å‹ã¯ã¯int&
```

ã“ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®å‰¯æ¬¡çš„ãªåŠ¹æœã¨ã—ã¦ã€å…ˆã»ã©`:`ãŒå¿…è¦ã ã£ãŸã¨ã“ã‚ã§ä¸è¦ã¨ãªã‚Šã¾ã™ã€‚

```cpp
[object]mutable: object.func();  // å€¤ã‚’è¿”ã™æœ€å°å¼è¨˜æ³•ã€åŒºåˆ‡ã‚ŠãŒå¿…è¦
[object]mutable (object.func()); // å‚ç…§ã‚’è¿”ã™æœ€å°å¼è¨˜æ³•ã€åŒºåˆ‡ã‚Šã¯ä¸è¦
```

ææ¡ˆ2ã«ã‚ˆã‚‹ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰

<table>
<tr>
<th>ç¾åœ¨</th>
<th>ã“ã®ææ¡ˆ</th>
</tr>
<tr>
<td valign="top">

```cpp
class QPointF {
  // ...
  real& rx() { return xp; }
  real& ry() { return yp; }
  real x() const { return xp; }
  real y() const { return yp; }
   
  friend auto operator+(const QPointF &p1, const QPointF &p2) {
    return QPointF(p1.xp+p2.xp, p1.yp+p2.yp);
  }

private:
  real xp;
  real yp;
};
```

</td>
<td valign="top">

```cpp
class QPointF {
  // ...
  auto rx() (xp); 
  auto ry() (yp);
  auto x() const: xp;
  auto y() const: yp;

  friend auto operator+(const QPointF &p1, const QPointF &p2)
    QPointF(p1.xp+p2.xp, p1.yp+p2.yp);

private:
  real xp;
  real yp;
};
```

</pre>
</td>
</tr>
</table>

- [P0573R2 Abbreviated Lambdas for Fun and Profit](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2017/p0573r2.html)
- [P2425 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/1096)

### [P2428R0 Slides: BSI issues with P2300](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2021/p2428r0.pdf)

[P2300](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2021/p2300r0.html)ã®å•é¡Œç‚¹ã‚„ç–‘å•ç‚¹ã«ã¤ã„ã¦ã®å ±å‘Šã‚¹ãƒ©ã‚¤ãƒ‰ã€‚

æ¬ ã„ã¦ã„ã‚‹ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚„ã€ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚„ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã«ã¤ã„ã¦ãªã©ã€ã„ãã¤ã‹ã®è¨­è¨ˆä¸Šã¨å®Ÿè£…ä¸Šã®å•é¡Œã‚„ç–‘å•ç‚¹ã«ã¤ã„ã¦ã¾ã¨ã‚ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚