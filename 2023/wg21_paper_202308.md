# ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2023å¹´08æœˆï¼‰

æ–‡æ›¸ã®ä¸€è¦§

- [JTC1/SC22/WG21 - Papers 2022 mailing2023-08](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2023/#mailing2023-08)

å…¨éƒ¨ã§44æœ¬ã‚ã‚Šã¾ã™ã€‚

ã‚‚ãã˜

[:contents]

### [N4956 Concurrency TS2 PDTS](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2023/n4956.pdf)

Concurrency TS v2ã®æœ€æ–°ã®ãƒ¯ãƒ¼ã‚­ãƒ³ã‚°ãƒ‰ãƒ©ãƒ•ãƒˆ

### [N4958 Working Draft, Programming Languages -- C++](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2023/n4958.pdf)

C++26ã®ãƒ¯ãƒ¼ã‚­ãƒ³ã‚°ãƒ‰ãƒ©ãƒ•ãƒˆç¬¬1å¼¾

### [N4959 Editors' Report, Programming Languages -- C++](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2023/n4959.html)

â†‘ã®å¤‰æ›´ç‚¹ã‚’ã¾ã¨ã‚ãŸæ–‡æ›¸ã€‚

### [N4960 Business Plan and Convener's Report: ISO/IEC JTC1/SC22/WG21 (C++)](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2023/n4960.pdf)

ãƒ“ã‚¸ãƒã‚¹ãƒ¦ãƒ¼ã‚¶å‘ã‘ã®C++ãŠã‚ˆã³WG21ã®ç¾çŠ¶å ±å‘Šæ›¸ã€‚

### [P0124R7 Linux-Kernel Memory Model](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2023/p0124r7.html)

â†“

### [P0124R8 Linux-Kernel Memory Model](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2023/p0124r8.html)

Linuxã‚«ãƒ¼ãƒãƒ«ã«ãŠã‘ã‚‹ãƒ¡ãƒ¢ãƒªãƒ¢ãƒ‡ãƒ«ã«ã¤ã„ã¦èª¬æ˜ã™ã‚‹æ–‡æ›¸ã€‚

ã“ã®æ–‡æ›¸ã¯ã€C/C++æ¨™æº–åŒ–å§”å“¡ä¼šãŒãƒ¡ãƒ¢ãƒªãƒ¢ãƒ‡ãƒ«ã«é–¢ã™ã‚‹æ—¢å­˜ã®æ…£è¡Œãƒ»å®Ÿè£…ã¨ã—ã¦Linuxã‚«ãƒ¼ãƒãƒ«ã«ãŠã‘ã‚‹ã‚‚ã®ã‚’å‚ç…§ã™ã‚‹éš›ã«å½¹ç«‹ã¦ã‚‹ã“ã¨ã‚’æ„å›³ã—ãŸã‚‚ã®ã§ã™ã€‚

### [P0963R1 Structured binding declaration as a condition](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2023/p0963r1.html)

æ§‹é€ åŒ–æŸç¸›å®£è¨€ã‚’æ¡ä»¶å¼ã‚’æ›¸ãã¨ã“ã‚ã§æ›¸ã‘ã‚‹ã‚ˆã†ã«ã™ã‚‹ææ¡ˆã€‚

æ§‹é€ åŒ–æŸç¸›å®£è¨€ã¯å¤‰æ•°å®£è¨€ã®å¤‰ç¨®ã§ã‚ã‚Šã€ã»ã¼å¤‰æ•°å®£è¨€ã‚’ã‹ã‘ã‚‹ã¨ã“ã‚ãªã‚‰åŒæ§˜ã«æ›¸ãã“ã¨ãŒã§ãã¾ã™ã€‚ã—ã‹ã—ã€`if`æ–‡ç­‰ã®æ¡ä»¶å¼ã¯ãã®ä¾‹å¤–ã§ã‚ã‚Šã€æ¡ä»¶å¼ã«ç›´æ¥æ§‹é€ åŒ–æŸç¸›å®£è¨€ã‚’æ›¸ãã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚

ä¾‹ãˆã°æ¬¡ã®ã‚ˆã†ãªä½•ã‹ãƒ‘ãƒ¼ã‚¹ã‚’è¡Œã†é–¢æ•°ãŒã‚ã£ãŸã¨ã

```cpp
struct parse_window {
  char const *first;
  char const *last;
};

auto parse(std::contiguous_iterator auto begin, std::contiguous_iterator auto end) -> parse_window;
```

ã“ã®é–¢æ•°ã®å®Ÿè¡Œçµæœã‚’å–å¾—ã—ã€ãƒ‘ãƒ¼ã‚¹ã®æˆå¦ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ç¶™ç¶šã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¨˜è¿°ã™ã‚‹ã«ã¯ã€ä¾‹ãˆã°æ¬¡ã®ã‚ˆã†ã«æ›¸ãã“ã¨ãŒã§ãã¾ã™

```cpp
if (auto [first, last] = parse(begin(), end()); first != last) {
  // interpret [first, last) into a value
}
```

ã“ã®æ™‚ã€æ§‹é€ åŒ–æŸç¸›å®£è¨€ã‚’æ¡ä»¶å¼ã¨ã—ã¦ä½¿ç”¨ã§ãã‚‹ã¨ã‚ˆã‚Šè¨˜è¿°ãŒå˜ç´”åŒ–ã•ã‚Œã¾ã™ã€‚

```cpp
// ç¾åœ¨ã§ããªã„
if (auto [first, last] = parse(begin(), end())) {
  // interpret [first, last) into a value
}
```

ã“ã®ææ¡ˆã¯ã€ã“ã‚Œã‚’ã§ãã‚‹ã‚ˆã†ã«ã—ã‚ˆã†ã¨ã™ã‚‹ã‚‚ã®ã§ã™ã€‚

ã“ã®ææ¡ˆã«ã‚ˆã‚‹æ¡ä»¶å¼ã«ãŠã‘ã‚‹æ§‹é€ åŒ–æŸç¸›ã¯ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®åˆ†è§£ã®ã¿ã‚’æ‹…ã£ã¦ãŠã‚Šã€æ¡ä»¶åˆ¤å®šã«ä½¿ç”¨ã•ã‚Œã‚‹ã®ã¯æ§‹æ–‡ä¸Šã‹ã‚‰ã¯éš è”½ã•ã‚Œã¦ã„ã‚‹å³è¾ºã®çµæœã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãã®ã‚‚ã®ã§ã™ã€‚å¾“ã£ã¦ã€å…ˆã»ã©ã®ä¾‹ã§ã¯ãƒ‘ãƒ¼ã‚¹çµæœã‚’è¡¨ã™`parse_window`å‹ãŒãƒ‘ãƒ¼ã‚¹æˆå¦ã‚’è¡¨ç¾ã§ãã‚‹ã‚ˆã†ã«ã—ã¦ãŠãå¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

```cpp
struct parse_window {
  char const *first;
  char const *last;

  // ãƒ‘ãƒ¼ã‚¹æˆå¦ãƒ†ã‚¹ãƒˆã‚’è¿½åŠ 
  explicit operator bool() const noexcept { return first != last; }
};
```

```cpp
// ã“ã®ææ¡ˆã®å¾Œã€æ¬¡ã®2ã¤ã®ifæ–‡ã¯åŒã˜æ„å‘³ã«ãªã‚‹

if (auto [first, last] = parse(begin(), end()); first != last) {
  // interpret [first, last) into a value
}

if (auto [first, last] = parse(begin(), end())) {
  // interpret [first, last) into a value
}
```

ææ¡ˆã‚ˆã‚Šã€ãã®ä»–ã®ä¾‹ã€‚

C++26ã®`std::to_chars`ã®ä¾‹

```cpp
// ã“ã®ææ¡ˆãŒãªã„å ´åˆã®æ›¸ãæ–¹
if (auto result = std::to_chars(p, last, 42)) {
  auto [to, _] = result;
  auto s = std::string(p, to);  // å¤‰æ›ã—ãŸæ•°å­—æ–‡å­—åˆ—
  ...
} else {
  auto [_, ec] = result;
  std::cout << ec << '\n';
}
```

```cpp
// ã“ã®ææ¡ˆã®å ´åˆã®æ›¸ãæ–¹
if (auto [to, ec] = std::to_chars(p, last, 42)) {
  auto s = std::string(p, to);  // å¤‰æ›ã—ãŸæ•°å­—æ–‡å­—åˆ—
  ...
} else {
  std::cout << ec << '\n';
}
```

C++26ã§ã¯ã€`to_chars_result`ã«`bool`å¤‰æ›æ¼”ç®—å­ãŒè¿½åŠ ã•ã‚Œã‚‹ã“ã¨ã«ã‚ˆã‚Šã€å…ˆã»ã©ã®ä¾‹ã¨åŒæ§˜ã«ã“ã®ææ¡ˆã®æ©æµã‚’å—ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã“ã‚Œã¯`std::from_chars`ã‚‚åŒæ§˜ã§ã™ã€‚

```cpp
if (int v; auto [ptr, ec] = std::from_chars(p, last, v)) {
  auto s = std::string(ptr, last);  // å¤‰æ›ã«ä½¿ç”¨ã•ã‚Œãªã‹ã£ãŸæ®‹ã‚Šã®éƒ¨åˆ†ã®æ–‡å­—åˆ—
  ...
} else {
  std::cout << ec << '\n';
}
```

ä½•ã‹æ•°å­¦çš„ãªåå¾©ã‚½ãƒ«ãƒã®ä¾‹ã€‚

åå¾©ã‚½ãƒ«ãƒã¯ä¸»è¦ãªå‡¦ç†ã‚¹ãƒ†ãƒƒãƒ—ã‚’ãƒ«ãƒ¼ãƒ—ã‚’å›ã—ã¦å®Ÿè¡Œã—ã€ç‰¹å®šã®æ¡ä»¶ãŒæº€ãŸã•ã‚Œã‚‹ã¾ã§ã“ã®ãƒ«ãƒ¼ãƒ—ã‚’ç¶™ç¶šã™ã‚‹ã“ã¨ã§å•é¡Œã‚’è§£ã“ã†ã¨ã—ã¾ã™ã€‚

```cpp
while (true) {
  auto [Ap, bp, x, y] = solve(...);

  // æœ€é©è§£ãŒå¾—ã‚‰ã‚Œã¦ã„ãŸã‚‰ãƒ«ãƒ¼ãƒ—ã‚’æŠœã‘ã‚‹
  if (is_optimal(x))  // scan the x vector
  {
    break;
  }

  ...
}
```

ã“ã®æ™‚ã€`is_optimal(x)`ã¯ç·šå½¢ã‹ãã‚Œã‚ˆã‚Šæ‚ªã„ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ãŒä½¿ç”¨ã•ã‚Œã‚‹ï¼ˆã‚ã‚‹ã„ã¯ä½¿ç”¨ã›ã–ã‚‹ã‚’å¾—ãªã„ï¼‰å ´åˆãŒã‚ã‚Šã¾ã™ã€‚ä¸€æ–¹ã§ã€ã‚½ãƒ«ãƒã‚¹ãƒ†ãƒƒãƒ—ï¼ˆ`solve()`ï¼‰ã«ãŠã„ã¦ã¯ç­”ãˆãŒæœ€é©åŒ–ã©ã†ã‹ã‚’èªè­˜ã—ãã®æƒ…å ±ã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã™ã‚‹ã“ã¨ãŒã§ãã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚ãã®å ´åˆã«æˆ»ã‚Šå€¤ã‹ã‚‰ãã‚Œã‚’ç›´æ¥å–å¾—ã§ãã‚Œã°ã‚³ãƒ¼ãƒ‰ãŒç°¡æ½”ã‹ã¤åŠ¹ç‡çš„ã«ãªã‚Šã¾ã™ã€‚

```cpp
while (true) {
  // æœ€é©è§£ãŒå¾—ã‚‰ã‚Œã¦ã„ãŸã‚‰ãƒ«ãƒ¼ãƒ—ã‚’æŠœã‘ã‚‹
  if (auto [Ap, bp, x, y] = solve(...))
  {
    break;
  }

  ...
}
```

ã“ã‚Œã‚‰ã®ä¾‹ã«å…±é€šã—ã¦ã„ã‚‹ã®ã¯ã€ã‚ã‚‹å‡¦ç†ã®æˆå¦ã‚’ä¿æŒã—ã¦ã„ã‚‹ã®ã¯ãã®æˆ»ã‚Šå€¤ã®ä¸€éƒ¨ã¾ãŸã¯å…¨éƒ¨ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã‚ã‚Šã€ãã®ãƒã‚§ãƒƒã‚¯ã®æ–¹æ³•ã¯å‹ã«ã‚ˆã£ã¦æ§˜ã€…ã‹ã¤è‡ªæ˜ã§ã¯ãªã„ã¨ã„ã†ã“ã¨ã§ã™ã€‚ã“ã®å ´åˆã«ã€å‡¦ç†ã®æˆå¦ã‚’ãã®å‡¦ç†ã®çµæœå‹ãã®ã‚‚ã®ã«ç„¼ãä»˜ã‘ã‚‹ã“ã¨ã§ãã®ã‚ˆã†ãªç…©é›‘ãªãƒã‚§ãƒƒã‚¯ã‚³ãƒ¼ãƒ‰ã‚’å‰Šæ¸›ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã—ã‹ã—ã€å‡¦ç†ã®çµæœã¨ã—ã¦å¿…è¦ãªã®ãŒçµæœã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ã‚µãƒ–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã‚ã‚‹å ´åˆã€ãã‚Œã‚’è¡ŒãŠã†ã¨ã™ã‚‹ã¨ä»Šåº¦ã¯ä½™åˆ†ãªä¸­é–“ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å°å…¥ã—ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ï¼ˆä¸Šè¨˜`to_chars()`ã®ä¾‹ã®ã‚ˆã†ã«ï¼‰ã€‚

ç¾çŠ¶ã®æ§‹æ–‡ã§ã¯çµæœã®åˆ†è§£ã¨çµæœã®æˆå¦ãƒã‚§ãƒƒã‚¯ã‚’åŒæ™‚ã«å®Ÿè¡Œã™ã‚‹ã“ã¨ãŒã§ãã¾ã›ã‚“ãŒã€ã“ã®ææ¡ˆã«ã‚ˆã‚‹æ¡ä»¶å¼ã«ãŠã‘ã‚‹æ§‹é€ åŒ–æŸç¸›å®£è¨€ã‚’ç”¨ã„ã‚‹ã¨ãã‚Œã‚’åŒæ™‚ã«è¨˜è¿°ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ã¾ãŸã“ã‚Œã«ã‚ˆã£ã¦ã€ä½•ã‹å‡¦ç†çµæœã‚’è¡¨ã™å‹ã‚’æ›¸ãéš›ã«ã€ãã®å‡¦ç†ã®æˆå¦ã®ãƒ†ã‚¹ãƒˆæ–¹æ³•ã‚’å‹ã«åŸ‹ã‚è¾¼ã¿ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ãã®æ–¹æ³•ã«ã¤ã„ã¦ç„¡çŸ¥ãªã¾ã¾ã§çµæœã‚’ç°¡æ˜“ã«åˆ©ç”¨ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ï¼ˆä¸Šè¨˜ä¾‹ã®ã‚ˆã†ãªï¼‰ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¹ã‚¿ã‚¤ãƒ«ã‚’ä¿ƒé€²ã—ã¾ã™ã€‚

- [P2497R0 Testing for success or failure of charconv functions - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2023å¹´02æœˆï¼‰](https://onihusube.hatenablog.com/entry/2023/03/19/184146#P2497R0-Testing-for-success-or-failure-of-charconv-functions)
- [P0963 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/1617)

### [P1068R8 Vector API for random number generation](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2023/p1068r8.pdf)
### [P1967R11 #embed - a simple, scannable preprocessor-based resource acquisition method](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2023/p1967r11.html)
### [P2407R5 Freestanding Library: Partial Classes](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2023/p2407r5.html)
### [P2521R5 Contract support -- Record of SG21 consensus](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2023/p2521r5.html)
### [P2728R6 Unicode in the Library, Part 1: UTF Transcoding](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2023/p2728r6.html)
### [P2746R3 Deprecate and Replace Fenv Rounding Modes](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2023/p2746r3.pdf)
### [P2795R3 Erroneous behaviour for uninitialized reads](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2023/p2795r3.html)
### [P2821R4 span.at()](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2023/p2821r4.html)
### [P2833R1 Freestanding Library: inout expected span](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2023/p2833r1.html)
### [P2845R2 Formatting of std::filesystem::path](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2023/p2845r2.html)
### [P2863R1 Review Annex D for C++26](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2023/p2863r1.html)
### [P2864R1 Remove Deprecated Arithmetic Conversion on Enumerations From C++26](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2023/p2864r1.pdf)
### [P2865R2 Remove Deprecated Array Comparisons from C++26](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2023/p2865r2.pdf)
### [P2868R1 Remove Deprecated `std::allocator` Typedef From C++26](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2023/p2868r1.pdf)
### [P2869R1 Remove Deprecated `shared_ptr` Atomic Access APIs From C++26](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2023/p2869r1.pdf)
### [P2870R1 Remove `basic_string::reserve()` From C++26](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2023/p2870r1.pdf)
### [P2871R1 Remove Deprecated Unicode Conversion Facets From C++26](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2023/p2871r1.pdf)
### [P2875R1 Undeprecate `polymorphic_allocator::destroy` For C++26](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2023/p2875r1.html)
### [P2878R5 Reference checking](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2023/p2878r5.html)
### [P2885R1 Requirements for a Contracts syntax](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2023/p2885r1.pdf)
### [P2890R0 Contracts on lambdas](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2023/p2890r0.pdf)

ãƒ©ãƒ ãƒ€å¼ã«å¯¾ã™ã‚‹å¥‘ç´„æ¡ä»¶æŒ‡å®šãŒã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ææ¡ˆã€‚

ç¾åœ¨é€²è¡Œä¸­ã®å¥‘ç´„ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã«é–¢ã™ã‚‹è­°è«–ã«ãŠã„ã¦ã¯ã€é€šå¸¸ã®é–¢æ•°ã«å¯¾ã—ã¦å¥‘ç´„ã‚’è¡Œã†ã“ã¨ã‚’ä¸»çœ¼ã«è­°è«–ã•ã‚Œã¦ã„ã¾ã™ã€‚åŒæ§˜ã«ãƒ©ãƒ ãƒ€å¼ã«å¯¾ã—ã¦ã‚‚è¡Œãˆã‚‹ã“ã¨ãŒæœŸå¾…ã•ã‚Œã¾ã™ãŒã€ç¾åœ¨ã®ã¨ã“ã‚ãƒ©ãƒ ãƒ€ã§ã«å¯¾ã—ã¦ã©ã®ã‚ˆã†ã«å‹•ä½œã™ã‚‹ã®ã‹ã¯ã‚ã¾ã‚Šè€ƒæ…®ã•ã‚Œã¦ã„ãªã„ã‚ˆã†ã§ã™ã€‚

ã“ã®ææ¡ˆã¯ã€å¥‘ç´„æ¡ä»¶æŒ‡å®šãŒãƒ©ãƒ ãƒ€å¼ã«ãŠã„ã¦ã‚‚é€šå¸¸ã®é–¢æ•°ã¨åŒã˜ã‚ˆã†ã«å‹•ä½œã—ã€ãªãŠã‹ã¤ã‚­ãƒ£ãƒ—ãƒãƒ£ã‚’ã©ã®ã‚ˆã†ã«å‡¦ç†ã™ã‚‹ã‹ã‚’ææ¡ˆã™ã‚‹ã‚‚ã®ã§ã™ã€‚

ç¾åœ¨ã®Contracts MVPä»•æ§˜ï¼ˆP2388R4ï¼‰ã«ãŠã„ã¦ã¯ãƒ©ãƒ ãƒ€å¼ã«ãŠã‘ã‚‹å¥‘ç´„æ¡ä»¶æŒ‡å®šã¯ãã®åå‰è§£æ±ºã®å•é¡Œã‹ã‚‰æœªè§£æ±ºã®å•é¡Œã¨ã•ã‚Œã€P2036ã«ãã®è§£æ±ºã‚’å§”ã­MVPã¨ã—ã¦ã¯ãã‚Œã‚’å¾…ã£ã¦ã¯ã„ã¾ã›ã‚“ã€‚ã—ã‹ã—ã€P2036ã¯R3ãŒæ—¢ã«C++23ã«æ¡æŠã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€ãã®å•é¡Œã¯è§£æ±ºæ¸ˆã¿ã§ã—ãŸã€‚

ã“ã®ææ¡ˆã§ã¯ã€ãƒ©ãƒ ãƒ€å¼ã«ãŠã‘ã‚‹å¥‘ç´„æ¡ä»¶å¼å†…ã®åå‰æ¢ç´¢ã¯P2036ã§ææ¡ˆã•ã‚Œã¦ã„ã‚‹å¾Œç½®æˆ»ã‚Šå€¤å‹ã«ãŠã‘ã‚‹ãã‚Œã¨åŒæ§˜ã«ã™ã‚‹ã“ã¨ã‚’ææ¡ˆã—ã¦ã„ã¾ã™ã€‚ã™ãªã‚ã¡ã€ãã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã§è¡¨ã‚Œã¦ã„ã‚‹åå‰ã¯ã¾ãšã‚­ãƒ£ãƒ—ãƒãƒ£åãŒè€ƒæ…®ã•ã‚Œã¾ã™ã€‚

```cpp
int i = 0;
double j = 42.0;

...

auto counter = [j=i]() mutable [[pre: j >= 0]] {
//                                    ^
  return j++;
};
```

ã“ã®ä¾‹ã«ãŠã‘ã‚‹äº‹å‰æ¡ä»¶å¼å†…ã®`j`ã¯å¤–å´ã§å®£è¨€ã•ã‚Œã¦ã„ã‚‹`double`å‹ã®å¤‰æ•°`j`ã§ã¯ãªãã€ãã®ãƒ©ãƒ ãƒ€ã«ãŠã„ã¦ã‚­ãƒ£ãƒ—ãƒãƒ£ã•ã‚Œã¦ã„ã‚‹å¤‰æ•°`j`ï¼ˆ`int`å‹ï¼‰ã¨ã—ã¦æ‰±ã‚ã‚Œã¾ã™ã€‚

ã“ã®åå‰è§£æ±ºä»¥å¤–ã®ã¨ã“ã‚ã§ã¯é€šå¸¸é–¢æ•°ã«å¯¾ã™ã‚‹å¥‘ç´„æ¡ä»¶æŒ‡å®šã¨åŒã˜æŒ¯ã‚‹èˆã„ã¨ãªã‚Šã¾ã™ã€‚ç‰¹ã«ã€ç¾ã‚Œã‚‹åå‰ãŒå¸¸ã«ODR-usedã¨ãªã‚‹ã¨ã„ã†ç‚¹ã‚‚ç¾åœ¨ã®å¥‘ç´„ä»•æ§˜åŠã³è¨€èªã®ä»–ã®éƒ¨åˆ†ï¼ˆ`[[assume]]`ãªã©ï¼‰ã¨åŒæ§˜ã¨ã™ã‚‹ã“ã¨ã‚’ææ¡ˆã—ã¦ã„ã¾ã™ã€‚

- [P2036R1 Changing scope for lambda trailing-return-type - ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2021å¹´01æœˆï¼‰](https://onihusube.hatenablog.com/entry/2021/02/11/153333#P2036R1-Changing-scope-for-lambda-trailing-return-type)
- [P2890 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/1618)

### [P2894R0 Constant evaluation of Contracts](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2023/p2894r0.pdf)
### [P2896R0 Outstanding design questions for the Contracts MVP](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2023/p2896r0.pdf)
### [P2905R2 Runtime format strings](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2023/p2905r2.html)
### [P2909R0 Dude, where's my char?](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2023/p2909r0.html)

`std::format()`ã®`char`ã‚’æ•´æ•°å€¤ã¨ã—ã¦ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã™ã‚‹éš›ã®æŒ™å‹•ã‚’æ”¹å–„ã™ã‚‹ææ¡ˆã€‚

`std::format()`ã§ã¯`char`ã®å€¤ã‚’`d`ã‚„`x`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«ã‚ˆã£ã¦æ•´æ•°å€¤ã¨ã—ã¦å‡ºåŠ›ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ãŸã ã€ã“ã®å‡ºåŠ›ã¯`int`ã«æš—é»™å¤‰æ›ã—ã¦å‡ºåŠ›ã™ã‚‹å½¢ã«ãªã£ã¦ãŠã‚Šã€`char`ã®ç¬¦å·ãŒå®Ÿè£…å®šç¾©ã§ã‚ã‚‹ã“ã¨ã‚’è€ƒæ…®ã—ã¦ã„ã¾ã›ã‚“ã§ã—ãŸã€‚

```cpp
import std;

int main() {
  for (char c : std::string("ğŸ¤·")) {
    std::print("\\x{:02x}", c);
  }
}
```

ãƒªãƒ†ãƒ©ãƒ«ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãŒUTF-8ã ã¨ã™ã‚‹ã¨ã€ã“ã®å‡ºåŠ›ã¯`char`ãŒç¬¦å·ä»˜ãã‹å¦ã‹ã«ã‚ˆã£ã¦æ¬¡ã®ã©ã¡ã‚‰ã‹ã«ãªã‚Šã¾ã™

```
\xf0\x9f\xa4\xb7
\x-10\x-61\x-5c\x-49
```

ä¾‹ãˆã°ã€ARMç’°å¢ƒã¯å¤šãã®å ´åˆ`char`ãŒç¬¦å·ä»˜ãã¨ãªã‚Šã¾ã™ã€‚

`std::format()`ã®æš—é»™çš„ãªè¨­è¨ˆæ„å›³ã¨ã—ã¦ã€åŒã˜æ•´æ•°å‹ã¨åŒã˜IEEE754æµ®å‹•å°æ•°ç‚¹æ•°å‹ã«ã¤ã„ã¦ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ é–“ã§ä¸€è²«ã—ãŸå‡ºåŠ›ã‚’ã™ã‚‹ã€ã¨ã„ã†ã‚‚ã®ãŒã‚ã‚Šã¾ã™ã€‚ã—ã‹ã—ã€ç¾åœ¨ã®ä»•æ§˜ã ã¨`char`ãŒãã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ç ´ã£ã¦ã„ã¾ã™ã€‚

ã¾ãŸã€`char`ã‚’`std::format()`ã§å‡ºåŠ›ã™ã‚‹ã¨ãã¯ã€å…ƒã®ãƒ†ã‚­ã‚¹ãƒˆã®éƒ¨åˆ†ãƒ†ã‚­ã‚¹ãƒˆã¨ã—ã¦å‡ºåŠ›ã™ã‚‹ã‹ã€ãã®ãƒ“ãƒƒãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å‡ºåŠ›ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚å¾Œè€…ã®å ´åˆã€ãã‚Œã¯ç¬¦å·ãªã—æ•´æ•°ã‚’é€šå¸¸æ„å›³ã—ã¦ã„ã‚‹ã¯ãšã§ã€ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã«ã‚ˆã£ã¦ã¯ç¬¦å·ä»˜ãæ•´æ•°å€¤ã¨ã—ã¦å‡ºåŠ›ã•ã‚Œã‚‹ã“ã¨ã¯æ„å›³ã—ãªã„ã¯ãšã§ã‚ã‚Šã€10é€²ä»¥å¤–ã§å‡ºåŠ›ã—ã¦ã„ã‚‹å ´åˆã¯ç‰¹ã«ãã†ã§ã—ã‚‡ã†ã€‚

ã“ã®å•é¡Œã¯{fmt}ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ãŠã„ã¦å ±å‘Šã•ã‚Œã€æ—¢ã«ä¿®æ­£æ¸ˆã¿ã§ã™ã€‚ã“ã®ææ¡ˆã¯ã€ã“ã®ä¿®æ­£ã‚’`std::format()`ã«ã‚‚é©ç”¨ã—ã‚ˆã†ã¨ã™ã‚‹ã‚‚ã®ã§ã™ã€‚

ææ¡ˆã§ã¯ã€`char`ã®å€¤ã‚’`b, B, d, o, x, X`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«ã‚ˆã£ã¦å‡ºåŠ›ã™ã‚‹éš›ã¯å¯¾å¿œã™ã‚‹ç¬¦å·ãªã—æ•´æ•°å‹ï¼ˆã¤ã¾ã‚Šã€`unsigned char`ï¼‰ã«ã‚­ãƒ£ã‚¹ãƒˆã—ã¦ã‹ã‚‰ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã™ã‚‹ã€ã®ã‚ˆã†ã«æŒ‡å®šã™ã‚‹ã“ã¨ã§ã“ã®å•é¡Œã®è§£æ±ºã‚’å›³ã£ã¦ã„ã¾ã™ã€‚

ã“ã®ä¿®æ­£ã¯å®Ÿè¡Œæ™‚ã®æŒ¯ã‚‹èˆã„ã‚’é™ã‹ã«å¤‰åŒ–ã•ã›ã‚‹ç ´å£Šçš„å¤‰æ›´ã¨ãªã‚Šã¾ã™ãŒã€å˜ä¸€ã®`char`å€¤ã‚’`b, B, d, o, x, X`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«ã‚ˆã£ã¦å‡ºåŠ›ã™ã‚‹å ´åˆã€ã‹ã¤`char`ãŒç¬¦å·ä»˜ãæ•´æ•°å‹ã§ã‚ã‚‹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã«ãŠã„ã¦ã®ã¿å½±éŸ¿ãŒã‚ã‚Šã¾ã™ã€‚å¤‰æ›´ãŒ{fmt}ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«é©ç”¨ã•ã‚Œå‡ºè·ã•ã‚Œã¦ä»¥é™ã“ã®ä¿®æ­£ãŒå•é¡Œã¨ãªã£ãŸå ±å‘Šã¯ãªãã€`std::format()`ã®åˆ©ç”¨ç‡ã¯ãã‚Œã‚ˆã‚Šã•ã‚‰ã«ä½ã„ãŸã‚ç ´å£Šçš„å¤‰æ›´ã®å½±éŸ¿ã¯ã‹ãªã‚Šå°ã•ã„ã¨è€ƒãˆã‚‰ã‚Œã¾ã™ã€‚

LEWGã«ãŠã‘ã‚‹æŠ•ç¥¨ã§ã¯ã€ã“ã®ä¿®æ­£ã‚’C++23ã«å¯¾ã™ã‚‹DRã¨ã™ã‚‹ã“ã¨ã«åˆæ„ãŒã¨ã‚Œã¦ã„ã¾ã™ã€‚

- [P2909 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/1621)

### [P2933R0 std::simd overloads for <bit> header](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2023/p2933r0.html)
### [P2935R0 An Attribute-Like Syntax for Contracts](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2023/p2935r0.pdf)
### [P2944R1 Comparisons for reference_wrapper](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2023/p2944r1.html)
### [P2951R2 Shadowing is good for safety](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2023/p2951r2.html)
### [P2952R0 auto& operator=(X&&) = default](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2023/p2952r0.html)
### [P2953R0 Forbid defaulting operator=(X&&) &&](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2023/p2953r0.html)
### [P2954R0 Contracts and virtual functions for the Contracts MVP](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2023/p2954r0.html)
### [P2955R0 Safer Range Access](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2023/p2955r0.html)
### [P2956R0 Add saturating library support to std::simd](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2023/p2956r0.html)
### [P2957R0 Contracts and coroutines](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2023/p2957r0.html)
### [P2958R0 typeof and typeof_unqual](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2023/p2958r0.html)
### [P2960R0 Concurrency TS Editor's report for N4956](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2023/p2960r0.pdf)
