# ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2025å¹´09æœˆï¼‰

æ–‡æ›¸ã®ä¸€è¦§

- [JTC1/SC22/WG21 - Papers mailing2025-09](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/#mailing2025-09)

å…¨éƒ¨ã§37æœ¬ã‚ã‚Šã¾ã™ã€‚

ã‚‚ãã˜

[:contents]

### [N5020 2026-11 BÃºzios Meeting Information](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/n5020.html)

2025å¹´11æœˆã«ãƒ–ãƒ©ã‚¸ãƒ«ã®ãƒ–ã‚¸ã‚ªã‚¹ã§è¡Œã‚ã‚Œã‚‹å…¨ä½“ä¼šè­°ã®ã‚¤ãƒ³ãƒ•ã‚©ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã€‚

äºˆå®šï¼ˆ2025å¹´11æœˆ16æ—¥ï½21æ—¥ï¼‰ã¨å ´æ‰€ã€ãƒ›ãƒ†ãƒ«ã®æ¡ˆå†…ãªã©ãŒè¨˜è¼‰ã•ã‚Œã¦ã„ã¾ã™ã€‚

### [P2953R2 Forbid defaulting `operator=(X&&) &&`](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p2953r2.html)

å³è¾ºå€¤ä¿®é£¾ã•ã‚ŒãŸ`default`ä»£å…¥æ¼”ç®—å­ã‚’ç¦æ­¢ã™ã‚‹ææ¡ˆã€‚

ä»¥å‰ã®è¨˜äº‹ã‚’å‚ç…§

- [P2953R0 Forbid defaulting `operator=(X&&) &&` - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2023å¹´12æœˆï¼‰](https://onihusube.hatenablog.com/entry/2023/10/14/223052#P2953R0-Forbid-defaulting-operatorX-)
- [P2953R1 Forbid defaulting `operator=(X&&) &&` - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2025å¹´01æœˆï¼‰](https://onihusube.hatenablog.com/entry/2025/08/30/234243#P2953R1-Forbid-defaulting-operatorX-)

ã“ã®ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã§ã®å¤‰æ›´ã¯

- EWGã®æŠ•ç¥¨çµæœã‚’è¿½åŠ 
- ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©æ¯ã®`default`ä»£å…¥æ¼”ç®—å­ã«å¯¾ã™ã‚‹æŒ™å‹•ã®é•ã„ã®è¡¨ã‚’æ›´æ–°
- ãã®ä»–ææ¡ˆã¨æ–‡è¨€ã®ä¿®æ­£

ãªã©ã§ã™ã€‚

- [P2953 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/1625)

### [P3347R5 Invalid/Prospective Pointer Operations](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3347r5.pdf)

ç„¡åŠ¹åŒ–ã•ã‚ŒãŸãƒã‚¤ãƒ³ã‚¿ã«å¯¾ã™ã‚‹ä¸€éƒ¨ã®æ¼”ç®—ã‚’æ˜ç¤ºçš„ã«è¨±å¯ã™ã‚‹ææ¡ˆã€‚

ä»¥å‰ã®è¨˜äº‹ã‚’å‚ç…§

- [P3347R0 Invalid/Prospective Pointer Operations - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2024å¹´08æœˆï¼‰](https://onihusube.hatenablog.com/entry/2025/01/26/185126#P3347R0-InvalidProspective-Pointer-Operations)
- [P3347R1 Invalid/Prospective Pointer Operations - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2025å¹´01æœˆï¼‰](https://onihusube.hatenablog.com/entry/2025/08/30/234243#P3347R1-InvalidProspective-Pointer-Operations)
- [P3347R2 Invalid/Prospective Pointer Operations - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2025å¹´05æœˆï¼‰](https://onihusube.hatenablog.com/entry/2025/12/16/230316#P3347R2-InvalidProspective-Pointer-Operations)
- [P3347R3 Invalid/Prospective Pointer Operations - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2025å¹´07æœˆï¼‰](https://onihusube.hatenablog.com/entry/2026/01/16/235211#P3347R3-InvalidProspective-Pointer-Operations)
- [P3347R4 Invalid/Prospective Pointer Operations - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2025å¹´08æœˆï¼‰](https://onihusube.hatenablog.com/entry/2026/01/18/210314#P3347R4-InvalidProspective-Pointer-Operations)

ã“ã®ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã§ã®å¤‰æ›´ã¯

- R4ã®æ”¹è¨‚å±¥æ­´ã‚’è¿½åŠ 
- è‘—è€…ã®ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹é›†æˆ

ãªã©ã§ã™ã€‚

- [P3347 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/2019)

### [P3567R1 `flat_meow` Fixes](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3567r1.html)

`flat_xxx`ãªé€£æƒ³ã‚³ãƒ³ãƒ†ãƒŠã«å¯¾ã™ã‚‹ãƒã‚°ãƒ•ã‚£ãƒƒã‚¯ã‚¹ææ¡ˆã€‚

ä»¥å‰ã®è¨˜äº‹ã‚’å‚ç…§

- [P3567R0 `flat_meow` Fixes - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2025å¹´01æœˆï¼‰](https://onihusube.hatenablog.com/entry/2025/08/30/234243#P3567R0-flat_meow-Fixes)

ã“ã®ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã§ã®å¤‰æ›´ã¯

- æ–‡è¨€ã®ä¿®æ­£

ãªã©ã§ã™ã€‚

- [P3567 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/2211)

### [P3579R2 Fix matching of constant template parameters when matching template template parameters](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3579r2.html)

ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ç‰¹æ®ŠåŒ–ã®ãƒãƒƒãƒãƒ³ã‚°æ™‚ã«ã€NTTPã®ç¸®å°å¤‰æ›ã‚’è¨±å¯ã—ãªã„ã‚ˆã†ã«ã™ã‚‹ææ¡ˆã€‚

ä»¥å‰ã®è¨˜äº‹ã‚’å‚ç…§

- [P3579R0 Fix matching of non-type template parameters when matching template template parameters - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2025å¹´01æœˆï¼‰](https://onihusube.hatenablog.com/entry/2025/08/30/234243#P3579R0-Fix-matching-of-non-type-template-parameters-when-matching-template-template-parameters)
- [P3579R1 Fix matching of non-type template parameters when matching template template parameters - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2025å¹´03æœˆï¼‰](https://onihusube.hatenablog.com/entry/2025/09/30/224815#P3579R1-Fix-matching-of-non-type-template-parameters-when-matching-template-template-parameters)

ã“ã®ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã§ã®å¤‰æ›´ã¯

- æ–‡è¨€ã®æ”¹å–„
- æœ€æ–°ã®WDã«ãƒªãƒ™ãƒ¼ã‚¹

ãªã©ã§ã™ã€‚

- [P3579 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/2221)

### [P3612R0 Harmonize proxy-reference operations (LWG 3638 and 4187)](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3612r0.html)

`vector<bool>::reference`ã¨`bitset<N>::reference`ã®é–“ã§ä¸€è²«ã—ãŸIssueè§£æ±ºã‚’è¡Œã†ææ¡ˆã€‚

ã“ã®ææ¡ˆã¯`vector<bool>::reference`ã¨`bitset<N>::reference`ã«é–¢ã™ã‚‹æ¬¡ã®2ã¤ã®ã‚¤ã‚·ãƒ¥ãƒ¼è§£æ±ºã®éš›ã«ã€è¿½åŠ ã™ã‚‹`swap()/operator=`ã®ã‚·ã‚°ãƒãƒãƒ£ã‚’å…±é€šåŒ–ã—ã‚ˆã†ã¨ã™ã‚‹ã‚‚ã®ã§ã™ã€‚

- [LWG Issue 3638 `vector<bool>::swap(reference, reference)` is useless](https://cplusplus.github.io/LWG/issue3638)
- [LWG Issue 4187 `bitset::reference` should be const-assignable](https://cplusplus.github.io/LWG/issue4187)

P2321ï¼ˆ`views::zip`ã®ææ¡ˆï¼‰ã§ã¯`views::zip`ã®å‹•ä½œã®ãŸã‚ã«`vector<bool>::reference`ã«ä»£å…¥æ¼”ç®—å­ãŒè¿½åŠ ã•ã‚Œã¦ãŠã‚Šã€ã“ã‚Œã¯

```cpp
namespace std {
  template<class Allocator>
  class vector<bool, Allocator> {
    public:  
    ...
     
    class reference {
      friend class vector;
      constexpr reference() noexcept;
    public:
      constexpr reference(const reference&) = default;
      constexpr ~reference();

      // boolå‹ã¸ã®æš—é»™å¤‰æ›
      constexpr operator bool() const noexcept;

      // æ—¢å­˜ã®ä»£å…¥æ¼”ç®—å­
      constexpr reference& operator=(const bool x) noexcept;
      constexpr reference& operator=(const reference& x) noexcept;
      
      // P2321ã§è¿½åŠ ã•ã‚ŒãŸä»£å…¥æ¼”ç®—å­
      constexpr const reference& operator=(bool x) const noexcept;

      ...
    };
   };
}
```

ãƒ—ãƒ­ã‚¯ã‚·å‚ç…§å‹ã¯`const`ã§ã‚‚ä»£å…¥å¯èƒ½ã§ã‚ã‚‹å¿…è¦ãŒã‚ã£ãŸã‚‚ã®ã®`vector<bool>::reference`ã¯`const`ä¿®é£¾ã•ã‚ŒãŸä»£å…¥æ¼”ç®—å­ã‚’æŒã£ã¦ã„ãªã‹ã£ãŸãŸã‚ã€å¾Œæ–¹äº’æ›æ€§ã‚’ç¶­æŒã—ã¤ã¤ãã‚Œã‚’å¯èƒ½ã«ã™ã‚‹ãŸã‚ã«`const`ä¿®é£¾ã•ã‚ŒãŸä»£å…¥æ¼”ç®—å­ãŒè¿½åŠ ã•ã‚Œã¾ã—ãŸã€‚ã“ã®æ™‚ã€ãã®æˆ»ã‚Šå€¤å‹ã¯`reference`ã®prvalueã§ã¯ãªãã€`const` lvalueã¨ã•ã‚Œã¾ã—ãŸï¼ˆãªãœã‹ã¯ã‚ˆãã‚ã‹ã‚Šã¾ã›ã‚“ï¼‰ã€‚

ã“ã®`vector<bool>::reference`ã¯`std::swap`ãŒæ„å›³é€šã‚Šã«å‹•ä½œã—ãªã„ãŸã‚`swap()`ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºãŒå¿…è¦ã§ã™ã€‚ä¾‹ãˆã°ã€`vector<bool> v`ã«å¯¾ã—ã¦`std::swap(v[1], v[2])`ãŒæ©Ÿèƒ½ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã‚‚ã®ã®ã€`std::swap`ã¯é`const`å‚ç…§ã—ã‹å–ã‚‰ãªã„ãŸã‚å‘¼ã³å‡ºã›ã¾ã›ã‚“ã€‚ã¾ãŸã€å‘¼ã³å‡ºã›ãŸã¨ã—ã¦ã‚‚ã€`std::swap`ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå®Ÿè£…ã§ã‚ã‚‹`Reference t = r1; r1 = r2; r2 = t;`ã®æ§˜ãªäº¤æ›æ“ä½œã¯`vector<bool>::reference`ã®ã‚³ãƒ”ãƒ¼ã¯å‚ç…§ã®ã‚³ãƒ”ãƒ¼ã«ãªã‚‹ãŸã‚ã€å‚ç…§å…ˆã®`bool`å€¤ã‚’äº¤æ›ã—ã¾ã›ã‚“ã€‚

LWG Issue 3638ã¯ã“ã‚Œã«ã¤ã„ã¦ã®ã‚¤ã‚·ãƒ¥ãƒ¼å ±å‘Šã§ã™ã€‚

ä¸€æ–¹ã€`vector<bool>::reference`ã¨ã»ã¼åŒã˜å‹•ä½œã‚’ã™ã‚‹ã‚‚ã®ã«ã€`bitset<N>::reference`ãŒã‚ã‚Šã¾ã™ã€‚

```cpp
namespace std {
  template<size_t N>
  class bitset {
  public:
    ...

    class reference {
    public:
      constexpr reference(const reference&) = default;
      constexpr ~reference();
      
      // boolå‹ã¸ã®æš—é»™å¤‰æ›
      constexpr operator bool() const noexcept;                  // for x = b[i];
      
      // ä»£å…¥æ¼”ç®—å­
      constexpr reference& operator=(bool x) noexcept;           // for b[i] = x;
      constexpr reference& operator=(const reference&) noexcept; // for b[i] = b[j];

      ...
    };
  };
}
```

ã“ã¡ã‚‰ã¯P2321ã§å¤‰æ›´ã•ã‚Œãªã‹ã£ãŸï¼ˆ`bitset`ãŒ`range`ã§ã¯ãªã„ãŸã‚ã¨æ€ã‚ã‚Œã‚‹ï¼‰ãŸã‚ã€`const`ä¿®é£¾ã•ã‚ŒãŸä»£å…¥æ¼”ç®—å­ã‚’æŒãŸãšã€`swap`ã«ã¤ã„ã¦åŒæ§˜ã®å•é¡ŒãŒã‚ã‚Šã¾ã™ã€‚LWG Issue 4187ã¯å‰è€…ï¼ˆ`const`ä»£å…¥æ¼”ç®—å­ï¼‰ã«ã¤ã„ã¦ã®ã‚¤ã‚·ãƒ¥ãƒ¼å ±å‘Šã§ã™ã€‚

ã“ã‚Œã‚‰2ã¤ã®å‹ã«ã¯å…±é€šç‚¹ãŒå¤šãã‚ã‚‹ã‚‚ã®ã®ã€ä¸¡æ–¹ã®ã‚¤ã‚·ãƒ¥ãƒ¼ã®è§£æ±ºå¾Œã‚‚å‹ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã¯ä¸€è²«ã—ã¦ã„ã¾ã›ã‚“ã€‚ã“ã®ææ¡ˆã¯ã€ã“ã®ä¸¡æ–¹ã®ã‚¤ã‚·ãƒ¥ãƒ¼ã‚’åˆã‚ã›ãŸå½¢ã®ä¸€è²«ã—ãŸè§£æ±ºã‚’ä¸¡æ–¹ã®å‹ã«é©ç”¨ã—ã‚ˆã†ã¨ã™ã‚‹ã‚‚ã®ã§ã™ã€‚

ã™ãªã‚ã¡æ¬¡ã®å¤‰æ›´ã‚’é©ç”¨ã—ã¾ã™

- `vector<bool>::reference`
    - ADL `swap()`ã‚’è¿½åŠ 
- `bitset<N>::reference`
    - `const`ä¿®é£¾ã•ã‚ŒãŸä»£å…¥æ¼”ç®—å­ã‚’è¿½åŠ 
    - ADL `swap()`ã‚’è¿½åŠ 

ææ¡ˆå¾Œã®ä¸¡ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹

```cpp
namespace std {
  template<class Allocator>
  class vector<bool, Allocator> {
    public:  
    ...
     
    class reference {
      friend class vector;
      constexpr reference() noexcept;
    public:
      constexpr reference(const reference&) noexcept; // ğŸ‘ˆ
      constexpr ~reference();

      // boolå‹ã¸ã®æš—é»™å¤‰æ›
      constexpr operator bool() const noexcept;

      // æ—¢å­˜ã®ä»£å…¥æ¼”ç®—å­
      constexpr reference& operator=(const bool x) noexcept;
      constexpr reference& operator=(const reference& x) noexcept;
      
      // P2321ã§è¿½åŠ ã•ã‚ŒãŸä»£å…¥æ¼”ç®—å­
      constexpr const reference& operator=(bool x) const noexcept;
      
      // ã“ã®ææ¡ˆã«ã‚ˆã‚‹ADL swap()
      friend constexpr void swap(reference x, reference y) noexcept;  // ğŸ‘ˆ
      friend constexpr void swap(reference x, bool& y) noexcept;      // ğŸ‘ˆ
      friend constexpr void swap(bool& x, reference y) noexcept;      // ğŸ‘ˆ

      ...
    };
  };
}
```

```cpp
namespace std {
  template<size_t N>
  class bitset {
  public:
    ...

    class reference {
    public:
      constexpr reference(const reference&) noexcept; // ğŸ‘ˆ
      constexpr ~reference();
      
      // boolå‹ã¸ã®æš—é»™å¤‰æ›
      constexpr operator bool() const noexcept;                  // for x = b[i];
      
      // ä»£å…¥æ¼”ç®—å­
      constexpr reference& operator=(bool x) noexcept;           // for b[i] = x;
      constexpr reference& operator=(const reference&) noexcept; // for b[i] = b[j];
      
      // ã“ã®ææ¡ˆã«ã‚ˆã‚‹const ä»£å…¥æ¼”ç®—å­
      constexpr const reference& operator=(bool x) const noexcept;  // ğŸ‘ˆ
      
      // ã“ã®ææ¡ˆã«ã‚ˆã‚‹ADL swap()
      friend constexpr void swap(reference x, reference y) noexcept;  // ğŸ‘ˆ
      friend constexpr void swap(reference x, bool& y) noexcept;      // ğŸ‘ˆ
      friend constexpr void swap(bool& x, reference y) noexcept;      // ğŸ‘ˆ

      ...
    };
  };
}
```

`bool&`ã‚’å–ã‚‹2ã¤ã®`swap()`ã‚ªãƒ¼ãƒãƒ¼ãƒ­ãƒ¼ãƒ‰ã¯ã€`bool`å‹ã®å·¦è¾ºå€¤`b`ã¨`reference`ã®å·¦è¾ºå€¤`r`ã«å¯¾ã—ã¦`swap(r, b)`ã¨`swap(b, r)`ã‚’æ©Ÿèƒ½ã•ã›ã‚‹ãŸã‚ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ­ãƒ¼ãƒ‰ã§ã™ã€‚ã©ã¡ã‚‰ã®`reference`ã‚‚`bool&`ã‹ã‚‰æš—é»™å¤‰æ›å¯èƒ½ã§ã¯ãªã„ãŸã‚ã€ã“ã®`swap`ã‚’æ©Ÿèƒ½ã•ã›ã‚‹ãŸã‚ã«ã“ã®2ã¤ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ­ãƒ¼ãƒ‰ãŒå¿…è¦ã«ãªã‚Šã¾ã™ã€‚

ã‚³ãƒ”ãƒ¼ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã®`default`ãŒå‰Šé™¤ã•ã‚Œã¦ã„ã‚‹ã®ã¯ã€å®Ÿè£…ã«ã‚ˆã£ã¦ä¸¡ã‚¯ãƒ©ã‚¹ã®ãƒ‡ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã®ãƒˆãƒªãƒ“ã‚¢ãƒ«æ€§ã«å·®ç•°ãŒã‚ã£ãŸã“ã¨ã‹ã‚‰ã€æ¨™æº–ã¨ã—ã¦ãã‚Œã‚’å¼·åˆ¶ã™ã‚‹ã“ã¨ã‚’å›é¿ã™ã‚‹ã“ã¨ã‚’æ„å›³ã—ãŸã‚‚ã®ã§ã™ã€‚ã‚³ãƒ”ãƒ¼ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã¯å®Ÿéš›ã«ã¯ä¸»è¦3å®Ÿè£…å…¨ã¦ã§ãƒˆãƒªãƒ“ã‚¢ãƒ«ã§ã—ãŸãŒã€ã“ã“ã§ã®ãƒˆãƒªãƒ“ã‚¢ãƒ«æ€§ãŒé‡è¦ã§ã¯ãªã„ã“ã¨ã‹ã‚‰ãƒ‡ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã«åˆã‚ã›ãŸã‚ˆã†ã§ã™ã€‚

- [P3612 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/2419)

### [P3666R0 Bit-precise integers](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3666r0.html)

C23ã®`_BitInt`ã‚’C++ã«å°å…¥ã™ã‚‹ææ¡ˆã€‚

å¹…ã®å¤§ããªæ•´æ•°å‹ã®å¿…è¦æ€§ã¯P3140R0ã§ã€`_BitInt`ã®æ€§è³ªã¨åŸºæœ¬å‹ã¨ã—ã¦å®Ÿè£…ã™ã‚‹ãƒ¡ãƒªãƒƒãƒˆã¯P3639R0ã§ã€ãã‚Œãã‚Œèª¬æ˜ã•ã‚Œã¦ã„ã¾ã™ï¼ˆã“ã‚Œã‚‰ã¯åŒã˜è‘—è€…ã®æ–¹ã«ã‚ˆã‚‹ã‚‚ã®ã§ã™ï¼‰ã€‚

- [P3140R0 `std::int_least128_t` - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2024å¹´02æœˆï¼‰](https://onihusube.hatenablog.com/entry/2024/05/18/235613#P3140R0-stdint_least128_t)
- [P3639R0 The `_BitInt` Debate - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2023å¹´12æœˆï¼‰](https://onihusube.hatenablog.com/entry/2025/09/30/224815#P3639R0-The-_BitInt-Debate)

ã“ã‚Œã‚‰ã®çµŒé¨“ã‚’è¸ã¾ãˆã¦ã€C++ã«C23äº’æ›ã®`_BitInt`ã‚’å°å…¥ã—ã‚ˆã†ã¨ã™ã‚‹ææ¡ˆã§ã™ã€‚

ã“ã®ææ¡ˆã®`_BitInt`ã¯ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‹ã¤åŸºæœ¬å‹ã¨ã—ã¦ææ¡ˆã•ã‚Œã¦ãŠã‚Šã€ç‰¹ã«Cã¨ã®äº’æ›æ€§ã‚’é‡è¦–ã—ãŸã‚‚ã®ã«ãªã£ã¦ã„ã¾ã™ã€‚ã¾ãŸã€ã“ã“ã§ã¯`_BitInt`ã®æœ€å°é™ã®ã‚‚ã®ï¼ˆMVP: Minimal Viable Productï¼‰ã‚’ã¾ãšå°å…¥ã™ã‚‹ã“ã¨ã‚’ç›®æŒ‡ã—ã¦ãŠã‚Šã€æœ€åˆã‹ã‚‰å®Œå…¨ãªã‚‚ã®ã‚’å…¥ã‚Œã‚‹ã“ã¨ã‚’ç›®æŒ‡ã—ã¦ã„ã¾ã›ã‚“ã€‚

è¨€èªæ©Ÿèƒ½ã¨ã—ã¦ã¯Cã®`_BitInt`ã‚’ã»ã¼ãã®ã¾ã¾å°å…¥ã—ã¾ã™

- å‹åã¯`_BitInt(N)`ã‚‚ã—ãã¯`unsigned _BitInt(N)`
    - `_BitInt`ã¯ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰
- `N`ã®å€¤ã¯å°‘ãªãã¨ã‚‚64ã¾ã§ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹
    - `BITINT_MAXWIDTH`ã§æœ€å¤§å€¤ã‚’å–å¾—ã§ãã‚‹
- `wb, uwb`ãªã©ã®ãƒªãƒ†ãƒ©ãƒ«ã‚µãƒ•ã‚£ãƒƒã‚¯ã‚¹ã‚’ã‚µãƒãƒ¼ãƒˆ
- æ•´æ•°æ˜‡æ ¼ã®å¯¾è±¡å¤–
- æ¨™æº–æ•´æ•°å‹ã¨åŒã˜å¹…ã§ã‚ã‚Œã°ã€æ¨™æº–æ•´æ•°å‹ã®æ–¹ãŒå¤‰æ›ãƒ©ãƒ³ã‚¯ãŒä½ããªã‚‹
    - `_BitInt(32)`ã¨`int`ï¼ˆ32ãƒ“ãƒƒãƒˆå¹…ã¨ã™ã‚‹ï¼‰ã¯`int`ã®æ–¹ãŒå¤‰æ›ãƒ©ãƒ³ã‚¯ãŒé«˜ã„
    - å¹…ãŒå¤§ãã„å ´åˆã«ã®ã¿å¤‰æ›ãƒ©ãƒ³ã‚¯ãŒé«˜ããªã‚‹
      - `_BitInt(33)`ã¨`int`ï¼ˆ32ãƒ“ãƒƒãƒˆå¹…ã¨ã™ã‚‹ï¼‰ã¯`_BitInt(33)`ã®æ–¹ãŒå¤‰æ›ãƒ©ãƒ³ã‚¯ãŒé«˜ã„
- ç¬¦å·ãŒæ··åœ¨ã—ãŸæ¯”è¼ƒã‚„æš—é»™å¤‰æ›ãªã©ã®å¯›å®¹ã•ãŒã‚ã‚‹
- ç¬¦å·ä»˜`_BitInt`ã‚ªãƒ¼ãƒãƒ¼ãƒ•ãƒ­ãƒ¼ã¯æœªå®šç¾©å‹•ä½œ

ãŸã ã—ä¸€éƒ¨C++å´ã§æ‹¡å¼µã—ã¦ã„ã‚‹éƒ¨åˆ†ãŒã‚ã‚Šã¾ã™

- æµ®å‹•å°æ•°ç‚¹æ•°å‹ã€`bool`å‹ã‚„æ–‡å­—å‹ã¸ã®æš—é»™å¤‰æ›ã‚’ç¦æ­¢
- `_BitInt(N)`ã®`N`ã‚’é–¢æ•°ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«ãŠã‘ã‚‹å¼•æ•°æ¨è«–ã®å¯¾è±¡ã«ã™ã‚‹
    - `template <size_t N> void f(std::bit_int<N> x);`ã®ã‚ˆã†ãªé–¢æ•°ã‚’`f(100wb)`ã®ã‚ˆã†ã«å‘¼ã¶ã¨ã€`N = 8`ãŒæ¨è«–ã•ã‚Œã‚‹
- `_BitInt(1)`ã‚’ã‚µãƒãƒ¼ãƒˆ
    - C23ã§ã¯ç¬¦å·ãªã—`_Bitint(1)`ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ãªã„

æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã‚‚`_BitInt`å¯¾å¿œãŒè¡Œã‚ã‚Œã¾ã™

- `std::bit_int<N>`ã€`std::bit_uint<N>`ã‚¨ã‚¤ãƒªã‚¢ã‚¹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®è¿½åŠ 
- æ–‡å­—åˆ—å¤‰æ›ã‚µãƒãƒ¼ãƒˆ
    - `std::format`
    - `std::to_chars`/`std::from_chars`
    - `std::to_string`/`std::to_wstring`
- `<cmath>`ã®æ•°å­¦é–¢æ•°ã®ã‚µãƒãƒ¼ãƒˆ
- `std::is_integral`/`std::integral`ã®ã‚µãƒãƒ¼ãƒˆ
- `std::atomic`ã®`_BitInt`ç‰¹æ®ŠåŒ–ã‚µãƒãƒ¼ãƒˆ
- `iota_view`ã®å†…éƒ¨æ•´æ•°å‹`IOTA-DIFF-T`ã®å®šç¾©ã‚’èª¿æ•´
    - 128ãƒ“ãƒƒãƒˆã‚’è¶…ãˆã‚‹å¹…ã®æ•´æ•°å‹ãŒä½¿ç”¨ã•ã‚ŒãŸéš›ã«ã‚‚ABIç ´å£ŠãŒèµ·ã“ã‚‰ãªã„ã‚ˆã†ã«è€ƒæ…®ã™ã‚‹
- `<simd>`
    - ã“ã“ã§ã¯ã¾ãšã€æ¨™æº–æ•´æ•°å‹ã¨ä¸€è‡´ã™ã‚‹å¹…ã®`_BitInt`ã«ã¤ã„ã¦ã®ã¿ã‚µãƒãƒ¼ãƒˆã™ã‚‹

ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®è¦å®šã§ã¯å¤šãã®å ´æ‰€ã§æ—¢ã«åŒ…æ‹¬çš„ãªæ•´æ•°å‹ã®æŒ‡å®šã«ã‚ˆã£ã¦æš—é»™çš„ã«ä»»æ„ã®æ•´æ•°å‹ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹ãŸã‚ã€æ–‡è¨€ã®å¤‰æ›´ãŒç„¡ãã¦ã‚‚å¤šãã®å ´æ‰€ã§è‡ªå‹•çš„ã«å¯¾å¿œãŒè¡Œã‚ã‚Œã¾ã™ï¼ˆå®Ÿè£…ãŒä¸è¦ã«ãªã‚‹ã‚ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ãŒï¼‰ã€‚

```cpp
#include <cstdint>

void large_integer_example() {
  // 128ãƒ“ãƒƒãƒˆã®ç¬¦å·ãªã—æ•´æ•°ã‚’å®šç¾©
  std::bit_uint<128> a = 0xFFFF'FFFF'FFFF'FFFF'FFFF'FFFF'FFFF'FFFFuwb;

  std::bit_uint<128> b = 2uwb;
  std::bit_uint<128> result = b - a;
  // ã‚ªãƒ¼ãƒãƒ¼ãƒ•ãƒ­ãƒ¼ã¯UBã«ãªã‚‹ã®ã§ã‚ˆã‚Šåºƒã„å¹…ã§è¡Œã†å¿…è¦ãŒã‚ã‚‹
  std::bit_uint<256> prod = std::bit_uint<256>(a) * std::bit_uint<256>(b);
}
```

ãŸã ã—ã€64ã‚’è¶…ãˆã‚‹`N`ã®ã‚µãƒãƒ¼ãƒˆã¯å®Ÿè£…å®šç¾©ã§ã™ã€‚

- [P3666 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/2420)

### [P3688R3 ASCII character utilities](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3688r3.html)

ASCIIã«é–¢é€£ã™ã‚‹æ–‡å­—ã®åˆ¤å®šãƒ»å‡¦ç†é–¢æ•°ç¾¤ã‚’æä¾›ã™ã‚‹ææ¡ˆã€‚

ä»¥å‰ã®è¨˜äº‹ã‚’å‚ç…§

- [P3688R0 ASCII character utilities - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2025å¹´05æœˆï¼‰](https://onihusube.hatenablog.com/entry/2025/12/16/230316#P3688R0-ASCII-character-utilities)
- [P3688R1 ASCII character utilities - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2025å¹´07æœˆï¼‰](https://onihusube.hatenablog.com/entry/2026/01/16/235211#P3688R1-ASCII-character-utilities)
- [P3688R2 ASCII character utilities - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2025å¹´08æœˆï¼‰](https://onihusube.hatenablog.com/entry/2026/01/18/210314#P3688R2-ASCII-character-utilities)

ã“ã®ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã§ã®å¤‰æ›´ã¯

- Â§3.6. Why no function objects? ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ 
- N5014ã«ãƒªãƒ™ãƒ¼ã‚¹

ãªã©ã§ã™ã€‚

- [P3688 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/2318)

### [P3695R1 Deprecate implicit conversions between Unicode character types](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3695r1.html)

ãƒ¦ãƒ‹ã‚³ãƒ¼ãƒ‰æ–‡å­—å‹ã®é–“ã®æš—é»™å¤‰æ›ã‚’éæ¨å¥¨ã«ã™ã‚‹ææ¡ˆã€‚

ä»¥å‰ã®è¨˜äº‹ã‚’å‚ç…§

- [P3695R0 Deprecate implicit conversions between Unicode character types - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2025å¹´08æœˆï¼‰](https://onihusube.hatenablog.com/entry/2025/12/16/230316#P3695R0-Deprecate-implicit-conversions-between-Unicode-character-types)

ã“ã®ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã§ã®å¤‰æ›´ã¯

- `char8_t`ã‚’å«ã‚€å¤‰æ›ã®ã¿ã‚’éæ¨å¥¨ã¨ã™ã‚‹
    - `char16_t`ã¨`char32_t`ã®é–“ã®å¤‰æ›ã«ã¤ã„ã¦ã¯æ‰‹ã‚’ä»˜ã‘ãªã„
- N5014ã«ãƒªãƒ™ãƒ¼ã‚¹

ãªã©ã§ã™ã€‚

`char16_t`ï¼ˆUTF-16ï¼‰ã¯ã‚µãƒ­ã‚²ãƒ¼ãƒˆãƒšã‚¢ã‚’åˆ©ç”¨ã—ã¦ä¸€éƒ¨ã®ã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®æ–‡å­—ã‚’ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã™ã‚‹ã“ã¨ã«ã‚ˆã‚Šã€`char32_t`ã¨ã®æ¯”è¼ƒã§èª¤æ¤œå‡ºï¼ˆç•°ãªã‚‹ã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®æ–‡å­—ã«å¯¾å¿œã™ã‚‹å€¤ã®æ¯”è¼ƒãŒ`true`ã«ãªã‚‹ï¼‰ãŒç™ºç”Ÿã™ã‚‹ã“ã¨ã¯åŸºæœ¬çš„ã«ç„¡ã„ãŸã‚ã€`char16_t`ã¨`char32_t`ã®é–“ã®æš—é»™å¤‰æ›ã¯ãã®ã¾ã¾ã«ã™ã‚‹ã“ã¨ã«ã—ãŸã‚ˆã†ã§ã™ã€‚

- [P3695 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/2325)

### [P3702R2 Stricter requirements for document submissions (SD-7)](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3702r2.html)

HTMLå½¢å¼ã®ææ¡ˆæ–‡æ›¸ã«ã¤ã„ã¦ä¸€å®šã®ãƒ«ãƒ¼ãƒ«ã‚’è¨­ã‘ã‚‹ææ¡ˆã€‚

ä»¥å‰ã®è¨˜äº‹ã‚’å‚ç…§

- [P3702R0 Stricter requirements for document submissions (SD-7) - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2025å¹´05æœˆï¼‰](https://onihusube.hatenablog.com/entry/2025/12/16/230316#P3702R0-Stricter-requirements-for-document-submissions-SD-7)
- [P3702R1 Stricter requirements for document submissions (SD-7) - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2025å¹´08æœˆï¼‰](https://onihusube.hatenablog.com/entry/2026/01/18/210314#P3702R1-Stricter-requirements-for-document-submissions-SD-7)

ã“ã®ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã§ã®å¤‰æ›´ã¯

- ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ãƒ©ã‚¤ãƒ‰ã«é–¢ã™ã‚‹ä¾‹å¤–ã‚’è¿½åŠ 

ãªã©ã§ã™ã€‚

- [P3702 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/2331)

### [P3754R1 Slides for P3100R2 presentation to EWG](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3754r1.pdf)

P3100R2ã®ç´¹ä»‹ã‚¹ãƒ©ã‚¤ãƒ‰ã€‚

ä»¥å‰ã®è¨˜äº‹ã‚’å‚ç…§

- [P3754R0 Slides for P3100R2 presentation to EWG - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2025å¹´08æœˆï¼‰](https://onihusube.hatenablog.com/entry/2026/01/16/235211#P3754R0-Slides-for-P3100R2-presentation-to-EWG)

ã“ã®ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã§ã®å¤‰æ›´ã¯ã‚ˆãã‚ã‹ã‚Šã¾ã›ã‚“ãŒã€ã“ã‚Œã¯ææ¡ˆã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

### [P3776R0 More trailing commas](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3776r0.html)

â†“

### [P3776R1 More trailing commas](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3776r1.html)

æœ«å°¾ã‚«ãƒ³ãƒã‚’è¨±å¯ã™ã‚‹å ´æ‰€ã‚’åºƒã’ã‚‹ææ¡ˆã€‚

é–¢æ•°ã®å¼•æ•°ãƒªã‚¹ãƒˆã‚„åˆæœŸåŒ–å­ãƒªã‚¹ãƒˆã€åˆ—æŒ™å€¤ã®å®£è¨€ãªã©ã€C++ã‚³ãƒ¼ãƒ‰ã®ä¸­ã§ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šãƒªã‚¹ãƒˆã‚’è¨˜è¿°ã™ã‚‹å¿…è¦ã®ã‚ã‚‹å ´æ‰€ã¯å¤šæ•°ã‚ã‚Šã¾ã™ã€‚ãã®ã‚ˆã†ãªå ´æ‰€ã§ã¯å ´åˆã«ã‚ˆã£ã¦ã¯ãƒªã‚¹ãƒˆæœ«å°¾ã®ã‚«ãƒ³ãƒã‚’ä»˜ã‘ãŸã¾ã¾ã«ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ãŒã€åˆ¥ã®å ´æ‰€ã§ã¯ã§ããªã„å ´åˆã‚‚ã‚ã‚Šã¾ã™ã€‚

ã“ã®ææ¡ˆã¯ã€ãªã‚‹ã¹ãå¤šãã®å ´æ‰€ã§æœ«å°¾ã‚«ãƒ³ãƒã‚’è¨±å®¹ã™ã‚‹ã‚ˆã†ã«ã™ã‚‹ã“ã¨ã‚’ææ¡ˆã—ã¦ã„ã¾ã™ã€‚

åŒæ§˜ã®ææ¡ˆã¯ä»¥å‰ã«ã‚‚P0562R2ã§ææ¡ˆã•ã‚Œã¦ã„ã¾ã—ãŸã€‚P0562R2ã§ã¯åŸºåº•ã‚¯ãƒ©ã‚¹ãƒªã‚¹ãƒˆã¨ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿åˆæœŸåŒ–å­ãƒªã‚¹ãƒˆã§ã®æœ«å°¾ã‚«ãƒ³ãƒã‚’è¨±å®¹ã™ã‚‹ã“ã¨ã‚’ææ¡ˆã—ã¦ã„ã¾ã—ãŸãŒã€ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿åˆæœŸåŒ–å­ãƒªã‚¹ãƒˆã«é–¢ã—ã¦ã¯ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿æœ¬ä½“ã®ãƒ‘ãƒ¼ã‚¹ã«ãŠã‘ã‚‹æ›–æ˜§æ€§ã®å•é¡ŒãŒæŒ‡æ‘˜ã•ã‚Œã¦ãŠã‚Šã€ãã‚Œã‚’å—ã‘ã¦ææ¡ˆã®è¿½åŠã¯æ­¢ã¾ã£ã¦ã—ã¾ã£ã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚

ã“ã®ææ¡ˆã‚‚P0562R2ã¨ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã‚’åŒã˜ãã—ã¦ãŠã‚Šã€æ¬¡ã®äº‹ã‚’ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã—ã¦æŒ™ã’ã¦ã„ã¾ã™

- ã‚¨ãƒ‡ã‚£ã‚¿ã®ãƒ†ã‚­ã‚¹ãƒˆç·¨é›†æ©Ÿèƒ½ã¸ã®å¯¾å¿œ
    - ä¾‹ãˆã°VSCodeã®Alt+â†‘ãªã©ã®ã‚ˆã†ã«ãƒ†ã‚­ã‚¹ãƒˆã®è¡Œã‚’å…¥ã‚Œæ›¿ãˆã‚‹æ©Ÿèƒ½ã«ãŠã„ã¦ã€ã‚«ãƒ³ãƒæœ‰ç„¡ã®ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã‚’èª˜ç™ºã™ã‚‹ã®ã‚’é˜²æ­¢ã§ãã‚‹
- Gitãªã©ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã«ãŠã‘ã‚‹å·®åˆ†ã®æ”¹å–„
    - ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šãƒªã‚¹ãƒˆã«è¦ç´ ã‚’è¿½åŠ ã™ã‚‹å ´åˆã€å…ƒã®ãƒªã‚¹ãƒˆã®æœ€å¾Œã®è¦ç´ ã«ã‚«ãƒ³ãƒã‚’è¿½åŠ ã—ã¦ã‹ã‚‰è¦ç´ ã‚’è¿½åŠ ã™ã‚‹
    - ã“ã®æ™‚ã€1è¡Œ1è¦ç´ ã®ã‚ˆã†ã«ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã•ã‚Œã¦ã„ã‚‹ã¨ã€å·®åˆ†ãŒ2è¡Œã«åŠã¶
    - æœ«å°¾ã‚«ãƒ³ãƒã‚’è¨±å®¹ã™ã‚‹ã¨ã“ã®å ´åˆã‚’1è¡Œã ã‘ï¼ˆè¿½åŠ ã—ãŸåˆ†ã ã‘ï¼‰ã«ã§ãã€ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®å®¹æ˜“åŒ–ãƒ»git blameã‚’æ±šæŸ“ã—ãªã„ãƒ»ã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆç™ºç”Ÿã®æœ€å°åŒ–ã€ãªã©ãŒæœŸå¾…ã§ãã‚‹
- ã‚³ãƒ¼ãƒ‰ç”Ÿæˆæ©Ÿèƒ½ã®ç°¡ç´ åŒ–
    - å¯å¤‰é•·ãƒã‚¯ãƒ­ã«ãŠã‘ã‚‹`__VA_OPT__`ã®ã‚ˆã†ã«ã€æœ«å°¾ã‚«ãƒ³ãƒã‚’è¨±å®¹ã—ãªã„ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã«å¯¾ã™ã‚‹ç‰¹æ®Šå¯¾å¿œãŒå¿…è¦ã«ãªã‚‹ã“ã¨ãŒè‰¯ãã‚ã‚‹
    - C++26ã®ãƒªãƒ•ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’ç”¨ã„ãŸã‚³ãƒ¼ãƒ‰ç”Ÿæˆæ©Ÿèƒ½ï¼ˆP3294R2ï¼‰ã«ãŠã„ã¦ã‚‚æœ«å°¾ã‚«ãƒ³ãƒã«å¯¾ã™ã‚‹ç‰¹æ®Šå¯¾å¿œãŒå¿…è¦ã«ãªã‚‹ã“ã¨ãŒäºˆæƒ³ã•ã‚Œã¦ã„ã‚‹
    - æœ«å°¾ã‚«ãƒ³ãƒã‚’è¨±å®¹ã™ã‚‹ã“ã¨ã§ã€ã“ã‚Œã‚‰ã®å¯¾å¿œã‚„è€ƒæ…®ãŒä¸è¦ã«ãªã‚Šã€ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã™ã‚‹ã‚³ãƒ¼ãƒ‰ãŒç°¡ç´ åŒ–ã•ã‚Œã‚‹
- ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ã®åˆ¶å¾¡
    - clang-formatã«ãŠã„ã¦ã¯æœ«å°¾ã‚«ãƒ³ãƒã‚’åˆ©ç”¨ã—ã¦ãƒªã‚¹ãƒˆã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’åˆ¶å¾¡ã§ãã‚‹æ©Ÿèƒ½ãŒã‚ã‚‹ãŒã€æœ«å°¾ã‚«ãƒ³ãƒã‚’è¨±å®¹ã—ãªã„å ´æ‰€ã§ã¯ã“ã‚Œã‚’ä½¿ãˆãªã„
    - æœ«å°¾ã‚«ãƒ³ãƒã‚’è¨±å®¹ã™ã‚‹ã“ã¨ã§ã“ã‚Œã‚’ä½¿ç”¨ã§ãã‚‹å ´æ‰€ãŒå¢—ãˆã‚‹
- è¨€èªã®ä¸€è²«æ€§ã®å‘ä¸Š
    - æœ«å°¾ã‚«ãƒ³ãƒã‚’è¨±å®¹ã—ã¦ã„ã‚‹å ´æ‰€ã¨ã—ã¦ã„ãªã„å ´æ‰€ãŒæ··åœ¨ã—ã¦ãŠã‚Šã€ã©ã“ã§è¨±å®¹ã•ã‚Œã¦ã©ã“ã§è¨±å®¹ã•ã‚Œãªã„ã‹ã‚ã‹ã‚Šã¥ã‚‰ã„
    - å˜ç´”ãªãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ãªã©ã®éš›ã«å•é¡Œã«ãªã‚‹ã“ã¨ãŒã‚ã‚‹
- æ–‡å­—åˆ—ãƒªãƒ†ãƒ©ãƒ«ã®ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šãƒªã‚¹ãƒˆã«ãŠã‘ã‚‹ãƒã‚°ã®é˜²æ­¢
    - é–¢æ•°å¼•æ•°ã«è¤‡æ•°ã®æ–‡å­—åˆ—ãƒªãƒ†ãƒ©ãƒ«ã‚’æ¸¡ã™ã¨ãã€ã‚«ãƒ³ãƒã‚’å¿˜ã‚Œã¦ã‚‚ï¼ˆé–¢æ•°å´ã®å¼•æ•°ã®æœŸå¾…ã™ã‚‹æ•°ã¨åˆã£ã¦ã„ã‚Œã°ï¼‰ã‚¨ãƒ©ãƒ¼ã«ã¯ãªã‚‰ãªã„ãŒã€æ–‡å­—åˆ—ãƒªãƒ†ãƒ©ãƒ«ã®çµåˆã«ã‚ˆã£ã¦æ„å›³é€šã‚Šã«å‹•ä½œã—ãªããªã‚‹
    - æœ«å°¾ã‚«ãƒ³ãƒã‚’è¨±å®¹ã—ã¦ãŠã‘ã°ã€ã‚ã¨ã‹ã‚‰æœ«å°¾ã«æ–‡å­—åˆ—ãƒªãƒ†ãƒ©ãƒ«ã‚’è¿½åŠ ã™ã‚‹éš›ã«ã‚‚å¿˜ã‚ŒãŒç„¡ããªã‚‹

ã“ã®ææ¡ˆã§ã¯ã‚»ãƒŸã‚³ãƒ­ãƒ³ã§çµ‚äº†ã™ã‚‹ãƒªã‚¹ãƒˆã‚’é™¤ã„ã¦å¯èƒ½ãªé™ã‚Šã®ãƒªã‚¹ãƒˆã«ãŠã„ã¦æœ«å°¾ã‚«ãƒ³ãƒã‚’è¨±å®¹ã™ã‚‹ã‚ˆã†ã«ã™ã‚‹ã“ã¨ã‚’ææ¡ˆã—ã¦ãŠã‚Šã€ãŠãŠã‚€ã­`{}, (), [], <>`ã®ã„ãšã‚Œã‹ã«ã‚ˆã‚‹ã‹ã£ã“ã§å›²ã¾ã‚ŒãŸãƒªã‚¹ãƒˆã«ãŠã„ã¦æœ«å°¾ã‚«ãƒ³ãƒã‚’è¨±å®¹ã™ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚

ææ¡ˆã—ã¦ã„ã‚‹æœ«å°¾ã‚«ãƒ³ãƒã‚’è¨±å®¹ã™ã‚‹ãƒªã‚¹ãƒˆã®ä¾‹

```cpp
[: ... :]<A, B,>                    // template-argument-list in splice-specialization-specifier
[]<A, B,>{}                         // template-parameter-list in lambda-expression
[a, b,]{}                           // capture-list in lambda-introducer
d[a, b,]                            // expression-list in subscript operator
f(a, b,)                            // expression-list in call operator
T(0,)                               // expression-list in function-style cast
typename T(0,)                      // expression-list in function-style cast with typename
new (a, b,) T                       // expression-list in new-placement
new T(a, b,)                        // expression-list in new-initializer
template for (int _ : { a, b, })    // expression-list in expansion-init-list
auto [a, b,]                        // sb-identifier-list in structured-binding-declaration
T f(a, b,)                          // parameter-declaration-list in parameter-declaration-clause
T x(a, b,);                         // expression-list in initializer
[[=a, =b,]]                         // annotation-list in attribute-specifier
S() : m(a, b,)                      // expression-list in mem-initializer
template<a, b,>                     // template-parameter-list in template-head
template<C<a, b,> T>                // template-argument-list in type-constraint
template<template<A, B,> concept>   // template-parameter-list in concept-tt-parameter
T<A, B,>                            // template-argument-list in simple-template-id
operator()<A, B,>                   // template-argument-list in template-id
```

ã¡ãªã¿ã«ã€æ¬¡ã®ãƒªã‚¹ãƒˆã§ã¯æ—¢ã«æœ«å°¾ã‚«ãƒ³ãƒãŒè¨±å®¹ã•ã‚Œã¦ã„ã¾ã™

```cpp
{ a, b, }                 // initializer-list in braced-init-list
{ .a=0, .b=0, }           // designated-initializer-list in braced-init-list
enum { a, b, }            // enumerator-list in enum-specifier
[[a,b,,,,]]               // attribute-list in attribute-specifier
```

ãªãŠã€P0562R2ã§ææ¡ˆã•ã‚Œã¦ã„ãŸæœ«å°¾ã‚«ãƒ³ãƒã®è¨±å®¹ã«ã¤ã„ã¦ã¯ã€æ§‹æ–‡è§£æã‚’æ›–æ˜§ã«ã™ã‚‹å•é¡ŒãŒï¼ˆã©ã¡ã‚‰ã«ã‚‚ï¼‰ã‚ã‚Šãã†ãªãŸã‚ã€ã“ã“ã§ã¯ææ¡ˆã—ã¦ã„ã¾ã›ã‚“ã€‚ã“ã“ã§ææ¡ˆã—ã¦ã„ã‚‹ãƒªã‚¹ãƒˆã¯æœ«å°¾ã‚«ãƒ³ãƒã®å¾Œã«ã¯é–‰ã˜ã‹ã£ã“ã—ã‹æ¥ãªã„ãŸã‚æ§‹æ–‡è§£æã‚’æ›–æ˜§ã«ã¯ã—ãªã„ã¯ãšã§ã™ã€‚

ã“ã®ææ¡ˆã¯EWGã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ã«ãŠã„ã¦C++29ã«å‘ã‘ã¦CWGã«è»¢é€ã™ã‚‹ãŸã‚ã®ã‚³ãƒ³ã‚»ãƒ³ã‚µã‚¹ã‚’é›†ã‚ã‚‹ã“ã¨ãŒã§ããšã«ãƒªã‚¸ã‚§ã‚¯ãƒˆã•ã‚Œã¦ã„ã¾ã™ï¼ˆãã®ç†ç”±ã¯ç‰¹ã«æ›¸ã‹ã‚Œã¦ã„ã¾ã›ã‚“ï¼‰ã€‚

- [P0562R2 Trailing Commas in Base-clauses and Ctor-initializers - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2024å¹´04æœˆï¼‰](https://onihusube.hatenablog.com/entry/2024/08/31/233056#P0562R2-Trailing-Commas-in-Base-clauses-and-Ctor-initializers)
- [P3776 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/2421)

### [P3784R1 range-if](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3784r1.pdf)

ç¯„å›²`if`æ–‡ã®ææ¡ˆã€‚

ä»¥å‰ã®è¨˜äº‹ã‚’å‚ç…§

- [P3784R0 range-if - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2025å¹´07æœˆï¼‰](https://onihusube.hatenablog.com/entry/2026/01/16/235211#P3784R0-range-if)

ã“ã®ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã§ã®å¤‰æ›´ã¯

- ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ™ãƒ¼ã‚¹ã®ä»£æ›¿æ¡ˆã«ã¤ã„ã¦ã®è©³ç´°ãªè­°è«–ã‚’è¿½åŠ 

ãªã©ã§ã™ã€‚

ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ™ãƒ¼ã‚¹ã®è§£æ±ºç­–ã¯æ¬¡ã®2ã¤ãŒæŒ™ã’ã‚‰ã‚Œã¦ã„ã¾ã™

- ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 
    - `break, continue`ãªã©ã®åˆ¶å¾¡æ§‹æ–‡ãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œãªã„
- `ranges::nonempty_subrange`
    - [Reddit](https://www.reddit.com/r/cpp/comments/1m2ryzp/comment/n3sdnqx/)ã§ææ¡ˆã•ã‚ŒãŸã‚‚ã®
    - æ§‹æ–‡ãŒå†—é•·
    - ãƒ€ãƒ³ã‚°ãƒªãƒ³ã‚°ã‚’é˜²æ­¢ã™ã‚‹ãŸã‚ã«ã¯ã€`borrowed_range`ã«åˆ¶é™ã™ã‚‹ã‹`owning_subrange`ï¼ˆP2644/P2718ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰ã‚’ä½¿ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚‹

ã„ãšã‚Œã‚‚è¨€èªæ©Ÿèƒ½ã‚ˆã‚Šã‚‚å„ªã‚Œã¦ã¯ã„ãªã„ã¨ã—ã¦ã„ã¾ã™ã€‚

- [P3784 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/2392)

### [P3786R0 Tuple protocol for fixed-size spans](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3786r0.pdf)

å›ºå®šã‚µã‚¤ã‚º`std::span`ã«ã‚¿ãƒ—ãƒ«ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚µãƒãƒ¼ãƒˆã‚’è¿½åŠ ã™ã‚‹ææ¡ˆã€‚

ã‚¿ãƒ—ãƒ«ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã¯å›ºå®šã‚µã‚¤ã‚ºã®å¤šãã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªå‹ã§ã™ã§ã«ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ãŠã‚Šã€æ§‹é€ åŒ–æŸç¸›ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºãƒã‚¤ãƒ³ãƒˆã¨ãªã‚Šã¾ã™ã€‚`std::span`ã¯ã¾ã ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ãªã„ãŸã‚ã€è¿½åŠ ã—ã‚ˆã†ã¨ã™ã‚‹ææ¡ˆã§ã™ã€‚

```cpp
std::span<int, 3> s{...}; 
auto & [x, y, z] = s; // okã€ã“ã®ææ¡ˆå¾Œ

std::vector<std::span<int, 3>> ss{...}; 
auto firsts{ss | std::views::elements<0> 
               | std::ranges::to<std::vector>()};  // okã€ã“ã®ææ¡ˆå¾Œ
```

å®Ÿã¯ä»¥å‰ã«ã‚‚P1024ã§ã“ã‚Œã¯ææ¡ˆã•ã‚Œã¦ãŠã‚Šã€C++20ã§æ¡æŠã•ã‚Œã¦ã„ãŸã®ã§ã™ãŒã€`std::tuple_element_t<const std::span<T, 3>>`ãŒ`const T`ã«ãªã‚‹ï¼ˆ`T`ã«ãªã£ã¦ã»ã—ã„ï¼‰ã¨ã„ã†å•é¡ŒãŒå ±å‘Šã•ã‚ŒãŸçµæœã€P2116ã§å‰Šé™¤ã•ã‚Œã¦ã„ã¾ã™ã€‚ã“ã“ã§ã®è¨­è¨ˆã¯ã“ã®å•é¡Œã‚’`std::span`ãŒå‚ç…§ã‚»ãƒãƒ³ãƒ†ã‚£ã‚¯ã‚¹ã‚’æŒã¤å‹ã¨ã—ã¦æ‰±ã†ã“ã¨ã§è§£æ±ºã—ã¦ã„ã¾ã™ã€‚

ã™ãªã‚ã¡ã€`std::span`ã«å¯¾ã™ã‚‹ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ã®ä¿®é£¾å­ã¯ã™ã¹ã¦ç„¡è¦–ã•ã‚Œã¾ã™ã€‚

- `tuple_size<cv1 span<cv2 T, N>>::value == N`
- `tuple_element<I, cv1 span<cv2 T, N>>::type == cv2 T`
- `decltype(get(span<cv T, N>)) == cv T`

å½“ç„¶ã§ã™ãŒã€ã‚¿ãƒ—ãƒ«ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚µãƒãƒ¼ãƒˆã¯å›ºå®šã‚µã‚¤ã‚ºï¼ˆ`N != dynamic_extent`ï¼‰ã®å ´åˆã®ã¿ã§ã™ã€‚

- [P3786 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/2422)

### [P3811R0 default comparison memory safety](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3811r0.html)

ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆæ¯”è¼ƒæ¼”ç®—å­ã®å®Ÿè£…ã«å¯¾ã—ã¦ãƒ¡ãƒ¢ãƒªå®‰å…¨ã§ã‚ã‚‹ã“ã¨ã‚’è¦æ±‚ã™ã‚‹ã‚ˆã†ã«ã™ã‚‹ææ¡ˆã€‚

C++20ã§è¿½åŠ ã•ã‚ŒãŸæ¯”è¼ƒæ¼”ç®—å­ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå®Ÿè£…ã«ãŠã„ã¦ç”Ÿæˆã•ã‚Œã‚‹ã‚³ãƒ¼ãƒ‰ã¯ã‹ãªã‚Šå˜ç´”ã‹ã¤ãƒœã‚¤ãƒ©ãƒ¼ãƒ—ãƒ¬ãƒ¼ãƒˆçš„ãªã‚³ãƒ¼ãƒ‰ã§ã‚ã‚Šã€UBãƒ•ãƒªãƒ¼ã§å®Ÿè£…ã§ãã‚‹ã¯ãšã§ã™ã€‚ã“ã®ææ¡ˆã¯ã€æ¨™æº–ã¨ã—ã¦ãã®ã‚ˆã†ãªå®Ÿè£…ã‚’è¡Œã†ã“ã¨ã‚’è¦æ±‚ã™ã‚‹ã‚ˆã†ã«ã™ã‚‹ææ¡ˆã§ã™ã€‚

ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆæ¯”è¼ƒæ¼”ç®—å­ã®å®Ÿè£…ã¯ä¾‹ãˆã°æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™

```cpp
class TotallyOrdered : Base {
    string tax_id;
    string first_name;
    string last_name;
public:
  // auto operator<=>(const TotallyOrdered&) const = default; ã®å®Ÿè£…ã‚¤ãƒ¡ãƒ¼ã‚¸
  std::strong_ordering operator<=>(const TotallyOrdered& that) const {
    if (auto cmp = (Base&)(*this) <=> (Base&)that; cmp != 0) return cmp;
    if (auto cmp = last_name <=> that.last_name; cmp != 0) return cmp;
    if (auto cmp = first_name <=> that.first_name; cmp != 0) return cmp;

    return tax_id <=> that.tax_id;
  }

  // bool operator==(const TotallyOrdered&) const = default; ã®å®Ÿè£…ã‚¤ãƒ¡ãƒ¼ã‚¸
  bool operator==(const TotallyOrdered& that) const {
    if (!((Base&)(*this) == (Base&)that)) return false;
    if (!(last_name == that.last_name)) return false;
    if (!(first_name == that.first_name)) return false;

    return tax_id == that.tax_id;

  }
};
```

å®Ÿéš›ã«ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ãŒã“ã®ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã™ã‚‹ã‚ã‘ã§ã¯ãªã„ã‚‚ã®ã®ã€ã“ã‚Œã¨å¤§ããç•°ãªã‚‹ã‚³ãƒ¼ãƒ‰ãŒç”Ÿæˆã•ã‚Œã‚‹ã“ã¨ã‚‚ãªã„ã¯ãšã§ã™ã€‚ã“ã®ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ã«ãŠã„ã¦ã¯ã€ä½¿ç”¨ã™ã‚‹å„ã‚µãƒ–ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®æ¯”è¼ƒæ¼”ç®—å­ï¼ˆ`== <=>`ï¼‰ã‚’é™¤ã„ã¦æœªå®šç¾©å‹•ä½œã‚’æ··å…¥ã•ã›ã‚‹ã“ã¨ãªãå®Ÿè£…ãŒã§ãã‚‹ã¯ãšã§ã™ã€‚ã¾ãŸã€`<=> ==`ãŒãã®ã‚ˆã†ã«ãªã£ã¦ã„ã‚Œã°ã€ãã“ã‹ã‚‰ç”Ÿæˆã•ã‚Œã‚‹ä»–ã®æ¯”è¼ƒæ¼”ç®—å­ã§ã‚‚åŒæ§˜ã®ä¿è¨¼ã‚’æä¾›ã§ãã¾ã™ã€‚

- [P3811 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/2423)

### [P3812R0 `const` and `&` in default member functions](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3812r0.html)

`const`/å‚ç…§ãƒ¡ãƒ³ãƒã‚’æŒã¤ã‚¯ãƒ©ã‚¹ã®ä»£å…¥æ¼”ç®—å­ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå®Ÿè£…ã‚’å¯èƒ½ã«ã™ã‚‹ææ¡ˆã€‚

ã‚¯ãƒ©ã‚¹ã®éé™çš„ãƒ¡ãƒ³ãƒå¤‰æ•°ã¨ã—ã¦`const`ã‚ã‚‹ã„ã¯å‚ç…§ãƒ¡ãƒ³ãƒã‚’æŒã¤ã¨ã€ãã®ã‚¯ãƒ©ã‚¹ã®ä»£å…¥æ¼”ç®—å­ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå®Ÿè£…ã§ããªããªã‚Šã¾ã™ã€‚

```cpp
// least privilege
class leastp final {
public:
  leastp(std::vector<int>& v, int i)
      : v{v}, i{i} {}

  // ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå®Ÿè£…ã§ãã‚‹
  leastp(const leastp&) = default;
  leastp(leastp&&) = default;

  // ä»£å…¥æ¼”ç®—å­ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå®Ÿè£…ã§ããªã„ï¼ˆdeleteã•ã‚Œã‚‹
  leastp& operator=(const leastp& other) = default;
  leastp& operator=(leastp&& other) = default;

  // least privilege
  constexpr size_t size() const {
      return v.size();
  }

private:
  std::vector<int>& v;
  const int i;
};
```

ã“ã‚Œã¯ä»£å…¥æ¼”ç®—å­ã‚’æ‰‹æ›¸ãã™ã‚‹ã“ã¨ã‚’è€ƒãˆã‚‹ã¨åˆ†ã‹ã‚Šã‚„ã™ã„ã¨æ€ã‚ã‚Œã¾ã™ãŒã€å‚ç…§ã‚„`const`ãƒ¡ãƒ³ãƒã¯åŸºæœ¬çš„ã«ç½®æ›å¯èƒ½ã§ã¯ãªã„ãŸã‚ã§ã™ã€‚

ã“ã‚Œã‚’å®Ÿè£…ã—ã‚ˆã†ã¨ã™ã‚‹ã¨`*this`ã‚’é…ç½®ã—ãªãŠã™å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ä¾‹ãˆã°æ¬¡ã®ã‚ˆã†ãªå®Ÿè£…ã«ãªã‚Šã¾ã™

```cpp
class leastp final {
  ...

  leastp& operator=(const leastp& other) {
    if (this != &other) {
      // *thisã‚’ä¸€æ—¦ç ´æ£„
      this->~leastp();

      // ã‚³ãƒ”ãƒ¼ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‚’ç”¨ã„ã¦thisã®å ´æ‰€ã«æ–°ã—ã„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ§‹ç¯‰
      new (this) leastp(other);
    }

    return *this;
  }

  leastp& operator=(leastp&& other) {
    if (this != &other) {
      // *thisã‚’ä¸€æ—¦ç ´æ£„
      this->~leastp();

      // ãƒ ãƒ¼ãƒ–ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‚’ç”¨ã„ã¦thisã®å ´æ‰€ã«æ–°ã—ã„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ§‹ç¯‰
      new (this) leastp(std::move(other));
    }
    
    return *this;
  }

  ...
};
```

ã“ã®ã‚ˆã†ãªå®Ÿè£…ã¯è¤‡é›‘ã§ã‚ã‚Šã€æ­£ã—ãè¨˜è¿°ã™ã‚‹ã“ã¨ãŒå›°é›£ã§ã™ï¼ˆå°‘ã—é–“é•ãˆã‚‹ã¨UBã«çªå…¥ã™ã‚‹ï¼‰ã€‚C++ã‚³ã‚¢ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã«ãŠã„ã¦ã‚‚ã‚³ãƒ”ãƒ¼/ãƒ ãƒ¼ãƒ–å¯èƒ½ãªã‚¯ãƒ©ã‚¹ã«`const`ãƒ¡ãƒ³ãƒã‚„å‚ç…§ãƒ¡ãƒ³ãƒã‚’å«ã‚ãªã„ã“ã¨ãŒæ¨å¥¨ã•ã‚Œã¦ã„ã¾ã™ã€‚

ã“ã®ææ¡ˆã¯ã€`const`/å‚ç…§ãƒ¡ãƒ³ãƒã‚’éé™çš„ãƒ¡ãƒ³ãƒã«æŒã¤ã‚¯ãƒ©ã‚¹ã«ãŠã„ã¦ã€ã‚³ãƒ”ãƒ¼/ãƒ ãƒ¼ãƒ–ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãŒ`default`æŒ‡å®šã•ã‚Œã¦ã„ã‚‹ãªã‚‰ã°ã€é€éçš„ã«ç½®æ›å¯èƒ½ï¼ˆ*transparently replaceable*ï¼‰ã¨ã—ã¦ã€å¯¾å¿œã™ã‚‹ä»£å…¥æ¼”ç®—å­ã‚‚`default`å®Ÿè£…ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã‚‚ã®ã§ã™ã€‚

ã“ã‚Œã«ã‚ˆã£ã¦ã€`const`/å‚ç…§ãƒ¡ãƒ³ãƒã‚’ä¿æŒã—ãŸã„å ´åˆã«è«¦ã‚ãŸã‚Šä»£ã‚ã‚Šã«ãƒã‚¤ãƒ³ã‚¿ã‚’ä¿æŒã™ã‚‹ãªã©ã®å¿…è¦ãŒãªããªã‚Šã€ä¸Šè¨˜ã®ã‚ˆã†ãªå®Ÿè£…ã‚’å–ã‚‹å ´åˆã®ã‚³ãƒ¼ãƒ‰ã®å¿…è¦æ€§ã‚‚ãªããªã‚Šã€ã‚³ã‚¢ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã‚‚ä¸è¦ã«ãªã‚Šã¾ã™ã€‚

- [P3812 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/2424)

### [P3813R0 `execution::task::valueless()`](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3813r0.pdf)

`execution::task`ã«`valueless()`ãƒ¡ãƒ³ãƒé–¢æ•°ã‚’è¿½åŠ ã™ã‚‹ææ¡ˆã€‚

C++ã®æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®å‹ã«ã¯ç©ºã®çŠ¶æ…‹ã‚’å–ã‚‹ã‚‚ã®ã¯çã—ãã‚ã‚Šã¾ã›ã‚“ã€‚ãã®ä¸­ã«ã¯ç©ºã®çŠ¶æ…‹ãŒå›å¾©ä¸å¯èƒ½ã§ã‚ã‚‹å‹ãŒã‚ã‚Šã¾ã™ã€‚ãã‚Œã¯ã€`indirect, polymorphic, generator, task`ã®4ã¤ã§ã™ã€‚ã“ã‚Œã‚‰ã®å‹ã§ã¯ã»ã‹ã®å…¨ã¦ã®ãƒ¡ãƒ³ãƒé–¢æ•°ãŒäº‹å‰æ¡ä»¶ã¨ã—ã¦ç©ºã§ã¯ãªã„äº‹ã‚’è¦æ±‚ã™ã‚‹ãŸã‚ã€ä»£å…¥ã¨ç ´æ£„ãã‚‰ã„ã—ã‹ã§ãã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã›ã‚“ã€‚

ã“ã‚Œã‚‰ã®å‹ã®ç©ºã®çŠ¶æ…‹ã¯ã€é€šå¸¸ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§ã¯ã»ã¼ç™ºç”Ÿã—ãªã„ã¨æ€ã‚ã‚Œã‚‹ã‚‚ã®ã®å ´åˆã«ã‚ˆã£ã¦ã¯å‡ºä¼šã†ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ãã®ãŸã‚ã«ã€`indirect, polymorphic`ã§ã¯`.valueless_after_move()`ã«ã‚ˆã£ã¦ã“ã®ç©ºã®çŠ¶æ…‹ã‚’ãƒã‚§ãƒƒã‚¯ã§ãã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚ã—ã‹ã—ã€`generator, task`ã«ã¯ãã®ã‚ˆã†ãªé–¢æ•°ãŒã‚ã‚Šã¾ã›ã‚“ã€‚

`generator`ã«ã¤ã„ã¦ã¯æ—¢å­˜ã®å®Ÿè£…ã‚’è€ƒæ…®ã™ã‚‹ã¨è¤‡é›‘ã«ãªã‚‹ãŸã‚åˆ¥ã®ææ¡ˆã§è¡Œã†ã“ã¨ã«ã—ã¦ã€ã“ã“ã§ã¯`task`ã«å¯¾ã—ã¦ç©ºã®çŠ¶æ…‹ãƒã‚§ãƒƒã‚¯é–¢æ•°ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã‚’ææ¡ˆã—ã¦ã„ã¾ã™ã€‚

`task`ãŒå›å¾©ä¸å¯èƒ½ãªç©ºã«ãªã‚‹ã®ã¯ã€ãƒ ãƒ¼ãƒ–ã®å‰å¾Œã¨`connect`å‘¼ã³å‡ºã—å¾Œã§ã™ã€‚ã“ã®2ã¤ã®çŠ¶æ…‹ã¯åŒºåˆ¥ã™ã‚‹å¿…è¦ãŒãªã•ãã†ãªã®ã§ã€ã“ã“ã§ã¯çŠ¶æ…‹ãŒç©ºã‹ã©ã†ã‹ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹é–¢æ•°`.valueless()`ã®ã¿ã‚’è¿½åŠ ã—ã¦ã„ã¾ã™ã€‚

```cpp
namespace std::execution{
  template <class T = void, class Environment = env<>>
  class task {
    ...

    bool valueless() const noexcept;

    ...
  }
}
```

ææ¡ˆæ–‡æ›¸ã‚ˆã‚Šã€ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰

```cpp
task<int> t = ...;

// çŠ¶æ…‹ãƒã‚§ãƒƒã‚¯ã‚’è¡Œãˆã‚‹ã‚ˆã†ã«ãªã‚‹
contract_assert(not t.valueless()); 

auto res = sync_wait(t);
```

- [P3813 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/2425)

### [P3815R0 Add `scope_association` concept to P3149](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3815r0.html)

P3149ã®éåŒæœŸã‚¹ã‚³ãƒ¼ãƒ—æ©Ÿèƒ½ã«ã€`scope_association`ã‚³ãƒ³ã‚»ãƒ—ãƒˆã‚’è¿½åŠ ã™ã‚‹ææ¡ˆã€‚

P3149ã®éåŒæœŸã‚¹ã‚³ãƒ¼ãƒ—æ©Ÿèƒ½ã¯ã€2ã¤ã®ã‚¹ã‚³ãƒ¼ãƒ—å‹ï¼ˆ`simple_counting_scope`ã€`counting_scope`ï¼‰ã¨`associate`ã€`spawn`ã€`spawn_future`ãªã©ã®åŸºç¤çš„ãªæ“ä½œã«ã‚ˆã£ã¦æ§‹æˆã•ã‚Œã¦ãŠã‚Šã€ã“ã‚Œã‚‰ã®ã‚‚ã®ã¯`scope_token`ã¨ã„ã†ã‚³ãƒ³ã‚»ãƒ—ãƒˆã‚’ä¸­å¿ƒã¨ã—ã¦è¨­è¨ˆã•ã‚Œã¦ã„ã¾ã™ã€‚

```cpp
namespace ex = std::execution;

// ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’è¡¨ç¾ã™ã‚‹ç°¡å˜ãªå‹
struct my_window {
  class close_message {};

  ex::sender auto some_work(int message);

  ex::sender auto some_work(close_message message);

  void onMessage(int i) {
    ++count;
    // onã«ã‚ˆã£ã¦schã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã§some_workã‚’å®Ÿè¡Œã—
    // ãã®æ“ä½œã¯scopeã«å¯¾å¿œã™ã‚‹ã‚¹ã‚³ãƒ¼ãƒ—ã«é–¢é€£ä»˜ã‘ã‚‰ã‚Œã‚‹
    ex::spawn(ex::on(sch, some_work(i)), scope);
  }

  void onClickClose() {
    ++count;
    ex::spawn(ex::on(sch, some_work(close_message{})), scope);
  }

  my_window(ex::system_scheduler sch, ex::counting_scope::token scope)
    : sch(sch)
    , scope(scope) {
    // ã“ã®ã‚¯ãƒ©ã‚¹ã‚’ä½•ã‚‰ã‹ã®æ–¹æ³•ã§Windowãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã«ç™»éŒ²ã—
    // `onMessage()`ã¨`onClickClose()`ã®å‘¼ã³å‡ºã—ã‚’å—ã‘ä»˜ã‘ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ã™ã‚‹
  }

  ex::system_scheduler sch;
  ex::counting_scope::token scope;
  int count{0};
};

int main() {
  // keep track of all spawned work
  ex::counting_scope scope;
  ex::system_context ctx;
  
  my_window window{ctx.get_scheduler(), scope.get_token()};

  // scopeã«é–¢é€£ä»˜ã‘ã‚‰ã‚ŒãŸå…¨ã¦ã®æ“ä½œã®å®Œäº†ã‚’å¾…æ©Ÿã™ã‚‹
  std::this_thread::sync_wait(scope.join());
  
  // ã™ã¹ã¦ã®ãƒªã‚½ãƒ¼ã‚¹ã¯å®‰å…¨ã«ç ´æ£„ã§ãã‚‹
  // =ã‚¹ã‚³ãƒ¼ãƒ—ã«é–¢é€£ä»˜ã‘ã‚‰ã‚ŒãŸæ“ä½œã¯ã™ã¹ã¦å®Œäº†ã—ã¦ã„ã‚‹
  return window.count;
}
```

ã‚¹ã‚³ãƒ¼ãƒ—å‹ã¯ã€ãã®ã‚¹ã‚³ãƒ¼ãƒ—ã«é–¢é€£ä»˜ã‘ã‚‰ã‚ŒãŸéåŒæœŸå‡¦ç†ï¼ˆ`sender`ï¼‰ã«ã‚ˆã‚‹å‡¦ç†ãŒå…¨ã¦çµ‚ã‚ã‚‹ã¾ã§ã€ãã“ã§ä½¿ç”¨ã•ã‚Œã†ã‚‹ãƒªã‚½ãƒ¼ã‚¹ã‚’ä¿è­·ã™ã‚‹ãŸã‚ã®ã‚‚ã®ã§ã™ã€‚ã‚¹ã‚³ãƒ¼ãƒ—ã¸ã®éåŒæœŸæ“ä½œã®é–¢é€£ä»˜ã‘ã¯`execution::spawn`ã«ã‚ˆã£ã¦è¡Œã‚ã‚Œã¦ãŠã‚Šã€ã“ã“ã«å‡¦ç†ã‚’è¡¨ã™`sender`ã¨ã‚¹ã‚³ãƒ¼ãƒ—ã‹ã‚‰å–å¾—ã—ãŸãƒˆãƒ¼ã‚¯ãƒ³ï¼ˆä¸Šè¨˜ä¾‹ã ã¨`counting_scope::token`ï¼‰ã‚’æ¸¡ã™ã“ã¨ã§ã‚¹ã‚³ãƒ¼ãƒ—ã¨éåŒæœŸå‡¦ç†ã‚’é–¢é€£ä»˜ã‘ã¦ã„ã¾ã™ã€‚

ã‚¹ã‚³ãƒ¼ãƒ—ã¯`.join()`ã«ã‚ˆã£ã¦ã‚¹ã‚³ãƒ¼ãƒ—è‡ªèº«ã®`sender`ã‚’å–å¾—ã§ãã€ãã®`sender`ã¯é–¢é€£ä»˜ã‘ã‚‰ã‚ŒãŸå‡¦ç†ãŒå…¨ã¦çµ‚ã‚ã‚‹ã¾ã§å®Œäº†ã—ãªã„ã‚‚ã®ã§ã™ã€‚ã‚¹ã‚³ãƒ¼ãƒ—ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’é©åˆ‡ã«ç®¡ç†ã™ã‚‹ã“ã¨ã§ã€ã‚¹ã‚³ãƒ¼ãƒ—å†…ã§å®Ÿè¡Œã•ã‚Œã‚‹éåŒæœŸå‡¦ç†ã§ä½¿ç”¨ã•ã‚Œã‚‹ãƒªã‚½ãƒ¼ã‚¹ï¼ˆä¸Šè¨˜ä¾‹ã ã¨`system_context`ã‚„`window`è‡ªèº«ï¼‰ã‚’ãã®å®Œäº†ã¾ã§é©åˆ‡ã«ä¿è­·ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ã“ã®ææ¡ˆã¯`scope_association`ã¨ã„ã†ã‚³ãƒ³ã‚»ãƒ—ãƒˆã‚’å°å…¥ã—ã€ã“ã‚Œã‚’ç”¨ã„ã¦P3149ã§ææ¡ˆã•ã‚Œã¦ã„ã‚‹ã“ã‚Œã‚‰ã®æ©Ÿèƒ½ã®å†…éƒ¨è¨­è¨ˆã‚’è¡Œã†ã“ã¨ã§ã€ç¾åœ¨ã®å®Ÿè£…ã‚ˆã‚Šè‰¯ã„å®Ÿè£…ã‚’å–ã‚‹ã“ã¨ãŒã§ãã‚‹ã¨ã—ã¦ã€`scope_association`ã‚³ãƒ³ã‚»ãƒ—ãƒˆã¨ãã‚Œã«ã‚ˆã‚‹å†è¨­è¨ˆã‚’ææ¡ˆã™ã‚‹ã‚‚ã®ã§ã™ã€‚

ã¨ã¯ã„ãˆã€ã“ã“ã§ã®å†è¨­è¨ˆã¯å†…éƒ¨ã«é–‰ã˜ãŸã‚‚ã®ã§ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’å¤‰æ›´ã™ã‚‹ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ã“ã‚Œã«ã‚ˆã‚Šæ¬¡ã®åˆ©ç‚¹ãŒå¾—ã‚‰ã‚Œã‚‹ã¨ã—ã¦ã„ã¾ã™

- ã‚¹ã‚³ãƒ¼ãƒ—å‹ã¨åŸºç¤æ“ä½œã®ãƒã‚¤ãƒŠãƒªã‚µã‚¤ã‚ºã®å‰Šæ¸›
- ãƒ ãƒ¼ãƒ–/ã‚³ãƒ”ãƒ¼ã®å›æ•°ã‚’æ¸›ã‚‰ã›ã‚‹
- å®Ÿè£…ãƒ¢ãƒ‡ãƒ«ãŒç°¡ç´ åŒ–ã•ã‚Œã€ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ã‚„ã™ããªã‚‹

ææ¡ˆã•ã‚Œã¦ã„ã‚‹`scope_association`ã‚³ãƒ³ã‚»ãƒ—ãƒˆã¯æ¬¡ã®ã‚ˆã†ãªã‚‚ã®ã§ã™

```cpp
template <class Assoc>
concept scope_association =
  movable<Assoc> &&
  default_initializable<Assoc> &&
  requires(Assoc assoc) {
    { static_cast<bool>(assoc) } noexcept;
    { assoc.try_associate() } -> same_as<Assoc>;
  };
```

`scope_association`ã®ãƒ¢ãƒ‡ãƒ«ã¨ãªã‚‹å‹ã¯ã€`sender`ã¨éåŒæœŸã‚¹ã‚³ãƒ¼ãƒ—é–“ã®é–¢é€£ä»˜ã‘ã‚’è¡¨ã™RAIIãƒãƒ³ãƒ‰ãƒ«å‹ã¨ãªã‚Šã¾ã™ã€‚ã‚³ãƒ³ã‚»ãƒ—ãƒˆã‹ã‚‰èª­ã¿å–ã‚Œã‚‹æ€§è³ªã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™

- ãƒ ãƒ¼ãƒ–å¯èƒ½
    - ã‚³ãƒ”ãƒ¼ä¸å¯èƒ½ã§ã‚ã‚‹ã“ã¨ã‚’æ„å›³
- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆæ§‹ç¯‰å¯èƒ½
- `bool`ã¸ã®å¤‰æ›ãŒå¯èƒ½
    - æ–‡è„ˆçš„`bool`å¤‰æ›å¯èƒ½ã§ã‚ã‚‹ã“ã¨ã‚’æ„å›³
- `.try_associate()`ã‚’æŒã¤

`scope_association`ãªå‹ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ`assoc`ã¯ã€`bool`å¤‰æ›ã•ã‚Œã¦`true`ã‚’è¿”ã—ãŸå ´åˆï¼ˆâ€œengagedâ€ãªçŠ¶æ…‹ï¼‰ã¯ä½•ã‚‰ã‹ã®`sender`ã¨ã‚¹ã‚³ãƒ¼ãƒ—ã®é–“ã§é–¢é€£ä»˜ã‘ãŒæˆç«‹ã—ã¦ã„ã‚‹ã“ã¨ã‚’è¡¨ã—ã€`false`ã‚’è¿”ã—ãŸå ´åˆï¼ˆâ€œdisengagedâ€ãªçŠ¶æ…‹ï¼‰ã¯é–¢é€£ä»˜ã‘ãŒæˆç«‹ã—ã¦ã„ãªã„ã“ã¨ã‚’è¡¨ã—ã¾ã™ã€‚

`.try_associate()`ã«ã¤ã„ã¦ã¯P3149ã®`scope_token`ï¼ˆã®ãƒ¢ãƒ‡ãƒ«ã¨ãªã‚‹ï¼‰å‹ã®ãã‚Œã¨å…¨ãåŒã˜æ„å‘³è«–ã¨ãªã‚Šã¾ã™ã€‚

`scope_association`å‹ã¯RAIIãƒãƒ³ãƒ‰ãƒ«ã§ã‚ã‚Šã€ãã®ãƒ‡ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã§é–¢é€£ä»˜ã‘ã®é–‹æ”¾å‡¦ç†ï¼ˆ`scope_token`ã®`.disassociate()`ç›¸å½“ï¼‰ã‚’è¡Œã†ã“ã¨ã§é–¢é€£ä»˜ã‘è§£é™¤ã¨ãã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—å‡¦ç†ã‚’è‡ªå‹•åŒ–ã—ã¾ã™ã€‚

ã“ã‚Œã‚’ç”¨ã„ã¦ã€P3149ã®`scope_token, associate, spawn, spawn_future, simple_counting_scope, counting_scope`ã‚’å¤‰æ›´ã—ã¾ã™ã€‚

#### `execution::scope_token`

P3149ã®ä¸­å¿ƒæ¦‚å¿µã§ã‚ã‚‹`scope_token`ã¯æ¬¡ã®ã‚ˆã†ã«å®šç¾©ãŒå¤‰ã‚ã‚Šã¾ã™

<table>
<tr>
<th>P3149R11</th>
<th>ã“ã®ææ¡ˆ</th>
</tr>
<tr>
<td valign="top">

```cpp
template <class Token>
concept scope_token =
  copyable<Token> &&
  requires(Token token) {
      { token.try_associate() } -> same_as<bool>;
      { token.disassociate() } noexcept -> same_as<void>;
      { token.wrap(declval<test-sender>()) } -> sender_in<test-env>;
  };
```

</td>
<td valign="top">

```cpp
template <class Token>
concept scope_token =
  copyable<Token> &&
  requires(Token token) {
    { token.try_associate() } -> scope_association;
    { token.wrap(declval<test-sender>()) } -> sender_in<test-env>;
  };
```

</td>
</tr>
</table>

`.try_associate()`ã¯`scope_association`å‹ã‚’è¿”ã™ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ã“ã‚Œã¾ã§ã¯é–¢é€£ä»˜ã‘ã®æˆå¦ã‚’è¡¨ã™`bool`å€¤ã‚’è¿”ã—ã¦ã„ã¾ã—ãŸãŒã€`scope_association`å‹ã‚’è¿”ã™ã“ã¨ã§é–¢é€£ä»˜ã‘ãã®ã‚‚ã®ã‚’è¡¨ç¾ã™ã‚‹ã‚‚ã®ã‚’è¿”ã™ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

`scope_association`å‹ã¯ãƒ‡ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã§é–‹æ”¾å‡¦ç†ã‚’è‡ªå‹•åŒ–ã™ã‚‹ãŸã‚ã€`.disassociate()`ã¯ä¸è¦ã«ãªã‚Šã¾ã™ã€‚

#### `execution::associate`

`associate`ã¯CPOã§ã‚ã‚Šã€`sender auto associate(sender auto&&, scope_token auto) noexcept(...);`ã®æ§˜ãªã‚·ã‚°ãƒãƒãƒ£ã‚’æŒã¤ã‚‚ã®ã§ã™ã€‚ã“ã‚Œã¯ã€`sender`ã¨ã‚¹ã‚³ãƒ¼ãƒ—ã‚’`scope_token`ã‚’ä»‹ã—ã¦é–¢é€£ä»˜ã‘ã‚’è¡ŒãŠã†ã¨ã™ã‚‹ã‚‚ã®ã§ã™ã€‚

ã‚¤ãƒ³ã‚¿ãƒ•ã‚§ãƒ¼ã‚¹ã‚„å½¹å‰²ã¯å¤‰åŒ–ã—ã¾ã›ã‚“ãŒã€è¿”ã•ã‚Œã‚‹`sender`ã®ã‚³ãƒ”ãƒ¼å‹•ä½œãŒå¤‰åŒ–ã—ã¾ã™ã€‚

`associate()`ã«æ¸¡ã•ã‚Œã‚‹`sender`ãŒã‚³ãƒ”ãƒ¼å¯èƒ½ãªå ´åˆã€çµæœã®`associate-sender`ã‚‚ã‚³ãƒ”ãƒ¼å¯èƒ½ã¨ãªã‚Š

- é–¢é€£ä»˜ã‘ã‚‰ã‚Œã¦ã„ãªã„`associate-sender`ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹ã¨ã€å¿…ãšæ–°ã—ã„é–¢é€£ä»˜ã‘ã‚‰ã‚Œã¦ã„ãªã„`associate-sender`ãŒç”Ÿæˆã•ã‚Œã‚‹
- é–¢é€£ä»˜ã‘ã‚‰ã‚Œã¦ã„ã‚‹`associate-sender`ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹ã«ã¯ã€ãã‚Œã«å«ã¾ã‚Œã‚‹`associate-data`ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã€ãã®ã‚³ãƒ”ãƒ¼ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã¯æ¬¡ã®ã‚ˆã†ã«å‹•ä½œã™ã‚‹
    1. ã‚½ãƒ¼ã‚¹ã®`association.try_associate()`ã‚’å‘¼ã³å‡ºã—ãŸçµæœãŒå®›å…ˆã®`associate-data`ã«æ¸¡ã•ã‚Œã‚‹
    2. çµæœã®é–¢é€£ä»˜ã‘ï¼ˆ`scope_association`ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼‰ãŒengagedçŠ¶æ…‹ãªã‚‰ã°ã€ãƒ©ãƒƒãƒ—ã•ã‚ŒãŸ`sender`ã‚’ã‚½ãƒ¼ã‚¹ã‹ã‚‰å®›å…ˆã®`associate-data`ã«ã‚³ãƒ”ãƒ¼ã™ã‚‹
        - å®›å…ˆã®`associate-sender`ã¯é–¢é€£ä»˜ã‘ã‚‰ã‚Œã¦ã„ã‚‹
    3. ãã†ã§ãªã„å ´åˆã€å®›å…ˆã®`associate-sender`ã¯é–¢é€£ä»˜ã‘ã‚‰ã‚Œã¦ã„ãªã„

ã•ã‚‰ã«ã€`operation-state`ã®ãƒ‡ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã¯æ¬¡ã®äº‹ã‚’ä¿è¨¼ã—ã¾ã™

- ç‹¬è‡ªã®é–¢é€£ä»˜ã‘ï¼ˆ`scope_association`ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼‰ã‚’æŒã¤`operation-state`ã¯`operation-state`ã®ãƒ‡ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã®æœ€å¾Œã®ã‚¹ãƒ†ãƒƒãƒ—ã¨ã—ã¦ã€é–¢é€£ä»˜ã‘ã®ãƒ‡ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‚’å‘¼ã³å‡ºã™å¿…è¦ãŒã‚ã‚‹

#### `execution::spawn`/`execution::spawn_future`

å†…éƒ¨çŠ¶æ…‹ã§`scope_token`ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä¿æŒã™ã‚‹ä»£ã‚ã‚Šã«`scope_association`ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä¿æŒã™ã‚‹ã‚ˆã†ã«ãªã‚Šã€é–¢é€£ä»˜ã‘ã®è§£é™¤ãŒãƒ‡ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã«ã‚ˆã£ã¦è¡Œã‚ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

#### `execution::simple_counting_scope`/`execution::counting_scope`

é–¢é€£ä»˜ã‘ã®è§£é™¤ãŒ`token.try_associate()`ã‹ã‚‰è¿”ã•ã‚Œã‚‹`scope_association`ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ‡ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã«ã‚ˆã£ã¦è¡Œã‚ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

ã“ã‚Œã‚‰ã®å¤‰æ›´ã¯å‰è¿°ã®ã‚ˆã†ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼å‘ãã®APIã«ã¯ã»ã¨ã‚“ã©å½±éŸ¿ãŒã‚ã‚Šã¾ã›ã‚“ã€‚ãã®ã†ãˆã§ã€å†…éƒ¨å®Ÿè£…ã‚’æ”¹å–„ã—ã‚ˆã†ã¨ã™ã‚‹ã‚‚ã®ã§ã™ã€‚

- [P3149R11 async_scope -- Creating scopes for non-sequential concurrency - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2025å¹´07æœˆï¼‰](https://onihusube.hatenablog.com/entry/2026/01/16/235211#P3149R11-async_scope----Creating-scopes-for-non-sequential-concurrency)
- [P3815 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/2426)

### [P3816R0 Hashing `meta::info`](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3816r0.html)

`meta::info`ã®ãƒãƒƒã‚·ãƒ¥ã‚µãƒãƒ¼ãƒˆã‚’è¿½åŠ ã™ã‚‹ææ¡ˆã€‚

`meta::info`ã¯ãƒªãƒ•ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³æ©Ÿèƒ½ã«ãŠã„ã¦`^^`ï¼ˆãƒªãƒ•ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³æ“ä½œï¼‰ã®æˆ»ã‚Šå€¤ã¨ãªã‚‹ãƒªãƒ•ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å‹ã§ã‚ã‚Šã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ã«ã®ã¿ä½¿ç”¨å¯èƒ½ãªä¸é€æ˜å‹ã§ã™ã€‚ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ã®ãƒãƒƒã‚·ãƒ¥ã‚µãƒãƒ¼ãƒˆã¯ãƒªãƒ•ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã«ãŠã„ã¦ã‚‚è€ƒæ…®ã•ã‚Œã¦ã„ãªã‹ã£ãŸãŸã‚ã€`meta::info`ã¯ãƒãƒƒã‚·ãƒ¥åŒ–å¯èƒ½ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

ä¸€æ–¹ã€P3372R3ã§ã¯é€£æƒ³ã‚³ãƒ³ãƒ†ãƒŠã‚’å«ã‚€ã»ã¼ã™ã¹ã¦ã®ã‚³ãƒ³ãƒ†ãƒŠãŒ`constexpr`å¯¾å¿œã—ã¦ãŠã‚Šã€ãã®ãŸã‚ã«ãƒãƒƒã‚·ãƒ¥ã‚µãƒãƒ¼ãƒˆãŒé‡è¦ã¨ãªã‚Šã¾ã™ã€‚

ãã®ãŸã‚ã«ã€ã“ã®ææ¡ˆã¯`meta::info`ã®ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ãƒãƒƒã‚·ãƒ¥ã‚µãƒãƒ¼ãƒˆã‚’è¿½åŠ ã—ã‚ˆã†ã¨ã™ã‚‹ã‚‚ã®ã§ã™ã€‚

ã—ã‹ã—`meta::info`ã¯ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ã«ã®ã¿ä½¿ç”¨å¯èƒ½ãªå‹ã§ã‚ã‚Šã€`std::hash`ã®ç‰¹æ®ŠåŒ–ã«ã‚ˆã‚‹å¯¾å¿œã¯å®Ÿè¡Œæ™‚è¦ä»¶ãŒå¤šãèª²ã›ã‚‰ã‚Œã‚‹ãŸã‚é©ã—ã¦ã„ã¾ã›ã‚“ã€‚ãã®ã»ã‹ã®ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ã«ã®ã¿ä½¿ç”¨å¯èƒ½ãªå‹ã®ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ãƒãƒƒã‚·ãƒ¥ã‚µãƒãƒ¼ãƒˆã®ãŸã‚ã«ã€`std::consteval_hash<T>`ã‚’è¿½åŠ ã—ã€ãã®`meta::info`ç‰¹æ®ŠåŒ–ã¨ã—ã¦ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ãƒãƒƒã‚·ãƒ¥ã‚µãƒãƒ¼ãƒˆã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã‚’ææ¡ˆã—ã¦ã„ã¾ã™ã€‚

ãƒªãƒ•ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã«ã‚ˆã‚‹`mp_unique`å®Ÿè£…ã®ã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚`unordered_set`ã‚’ä½¿ç”¨ã™ã‚‹ä¾‹

```cpp
template <typename... Types>
struct type_list {};

template <typename TypeList>
consteval auto mp_unique_reflected() {
  static_assert(std::meta::has_template_arguments(^^TypeList), "mp_unique requires a type_list");
  static_assert(std::meta::template_of(^^TypeList) == ^^type_list, "mp_unique requires a type_list");

  std::unordered_set<std::meta::info, std::consteval_hash<std::meta::info>> seen;
  std::vector<std::meta::info> unique_types;

  for (auto type_info : std::meta::template_arguments_of(^^TypeList)) {
    if (const bool is_unique = seen.insert(type_info).second; is_unique) {
      unique_types.push_back(type_info);
    }
  }

  return std::meta::substitute(^^type_list, unique_types);
}

template <class TypeList>
using mp_unique = [:mp_unique_reflected<TypeList>():];

using input = type_list<int, char, int, string, double, char>;
using filtered = mp_unique<input>;
using expected = type_list<int, char, string, double>;

static_assert(is_same_v<expected, filtered>);
```

`std::hash`ã¯ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ã«åˆ©ç”¨å¯èƒ½ãªã‚ˆã†ã«ãªã£ã¦ãŠã‚‰ãšã€ãã®äºˆå®šã‚‚ãªã„ãŸã‚ã€éé †åºé€£æƒ³ã‚³ãƒ³ãƒ†ãƒŠã‚’ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ã«ä½¿ç”¨ã™ã‚‹ãŸã‚ã«ã¯ãƒãƒƒã‚·ãƒ¥ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºãŒã©ã®ã¿ã¡å¿…è¦ã«ãªã‚Šã¾ã™ã€‚ãã®ãŸã‚æ–°ã—ã„ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚å°‚ç”¨ãƒãƒƒã‚·ãƒ¥å‹ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã¯ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ã®éé †åºé€£æƒ³ã‚³ãƒ³ãƒ†ãƒŠã®ä½¿ç”¨æ„Ÿã‚’ä»Šã‚ˆã‚Šæ‚ªãã™ã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ã“ã®ã“ã¨ã¯å•é¡Œã§ã¯ã‚ã‚‹ã‚‚ã®ã®ã€ã“ã®ææ¡ˆã¯ãã®è§£æ±ºã‚’è¡Œã†ã“ã¨ã‚’æ„å›³ã—ã¦ã„ã¾ã›ã‚“ã€‚

*ConstevalHash*è¦ä»¶ã¯æ¬¡ã®ã‚ˆã†ã«æŒ‡å®šã•ã‚Œã¦ã„ã¾ã™

- é–¢æ•°ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå‹
- ã‚³ãƒ”ãƒ¼æ§‹ç¯‰å¯èƒ½ã‹ã¤ç ´æ£„å¯èƒ½
    - *Cpp17CopyConstructible*ã‹ã¤*Cpp17Destructible*
- `consteval`ã‚ªãƒ³ãƒªãƒ¼å‹
- `H`ã®2ã¤ã®å®Ÿä½“ã¯ã€åŒã˜å¼•æ•°ã«å¯¾ã—ã¦åŒã˜å€¤ã‚’ç”Ÿæˆã™ã‚‹ã“ã¨ã‚’ä¿è¨¼ã—ãªã„
    - `H`ã¯*ConstevalHash*å‹
    - ç‰¹ã«ã€ç¿»è¨³å˜ä½é–“ã§å€¤ãŒç•°ãªã‚‹ã“ã¨ãŒã‚ã‚‹
- `Key`å‹ã‚’`H`ã®é–¢æ•°å‘¼ã³å‡ºã—å¼•æ•°å‹ã€`h`ã‚’`H`ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã€`u`ã‚’`Key`ã®å·¦è¾ºå€¤ã€`k`ã‚’`Key`ã«å¤‰æ›å¯èƒ½ãªå‹ã®å€¤ã¨ã—ã¦ã€æ¬¡ã®æ“ä½œãŒæœ‰åŠ¹ã‹ã¤æŒ‡å®šã•ã‚ŒãŸã‚»ãƒãƒ³ãƒ†ã‚£ã‚¯ã‚¹ã‚’æŒã¤
    - `h(k) -> std::size_t`
        - è¿”ã•ã‚Œã‚‹å€¤ã¯`k`ã®ã¿ã«ä¾å­˜ã™ã‚‹
        - å€¤ã¯ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚’ç¹°ã‚Šè¿”ã—å®Ÿè¡Œã—ã¦ã‚‚å®‰å®šã—ã¦ã„ã‚‹
            - ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’å¤‰æ›´ã™ã‚‹ã¨å€¤ãŒå¤‰ã‚ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹
        - 2ã¤ã®ç•°ãªã‚‹å€¤`t1, t2`ã«ã¤ã„ã¦ã€`h(t1) == h(t2)`ã¨ãªã‚‹ç¢ºç‡ã¯éå¸¸ã«å°ã•ãã€`1.0 / std::numeric_limits<size_t>::max()`ã«è¿‘ããªã‚‹
    - `h(u) -> std::size_t`
        - `u`ã‚’å¤‰æ›´ã—ãªã„

ææ¡ˆæ–‡æ›¸ã‚ˆã‚Šã€å®Ÿè£…ä¾‹

```cpp
template<>
struct consteval_hash<meta::info>
{
  consteval consteval_hash() = default;
  consteval consteval_hash(const consteval_hash<meta::info>&) = default;
  consteval consteval_hash(consteval_hash<meta::info>&&) = default;

  consteval auto operator()(meta::info r) const noexcept -> size_t {
    return __metafunction(meta::detail::__metafn_reflection_hash, r);
  }

private:

  // This unused variable is here to make consteval_hash<> a
  // consteval-only type.
  [[maybe_unused]] const meta::info unused = ^^::;
};
```

- [P3816 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/2427)

### [P3818R0 constexpr exception fix for potentially constant initialization](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3818r0.html)

â†“

### [P3818R1 constexpr exception fix for potentially constant initialization](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3818r1.html)

ç¾åœ¨ã®ä¾‹å¤–ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹é–¢æ•°ã‚’ç‰¹å®šã®å®šæ•°è©•ä¾¡ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã§è©•ä¾¡ã—ãªã„ã‚ˆã†ã«ã™ã‚‹ææ¡ˆã€‚

C++26ã§ã¯å®šæ•°å¼ã§ã®ä¾‹å¤–é€å‡ºãŒå¯èƒ½ã«ãªã£ã¦ãŠã‚Šã€ãã‚Œã«ä¼´ã£ã¦`std::exception`ã¨ãã®æ´¾ç”Ÿã‚¯ãƒ©ã‚¹ãªã©ã®ä¾‹å¤–é–¢é€£ã®ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãŒå®šæ•°å¼ã§å®Ÿè¡Œå¯èƒ½ã«ãªã£ã¦ã„ã¾ã™ã€‚ä¾‹ãˆã°ã€`std::current_exception()`ã«ã‚ˆã£ã¦`std::exception_ptr`ã‚’å®šæ•°å¼ã§å–å¾—ã—ã¦å‡¦ç†ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```cpp
constexpr auto maybe_throw(int n);

consteval void f() {
  try {
    maybe_throw(1);
  } catch (...) {
    auto exptr = std::current_exception();  // ok
  }
}
```

`std::current_exception()`ã¯å®šæ•°å¼ã§å‘¼ã°ã‚Œã‚‹å ´åˆã€ãã®å®šæ•°è©•ä¾¡ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆå†…ã§é€å‡ºã•ã‚Œã¦ã„ã‚‹ä¾‹å¤–ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å–å¾—ã—ã¾ã™ã€‚

ã¨ã“ã‚ã§ã€å®šæ•°è©•ä¾¡ã¯`constexpr`å¤‰æ•°ã®åˆæœŸåŒ–ã‚„`consteval`é–¢æ•°å‘¼ã³å‡ºã—ãªã©ã®æ˜ç¤ºçš„ãªè©•ä¾¡ã®é–‹å§‹ä»¥å¤–ã§ã‚‚è¡Œã‚ã‚Œã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚ãã®ä¸€ã¤ã¯`const`ãªæ•´æ•°å‹ã®å¤‰æ•°ã®åˆæœŸåŒ–å¼ãŒå®šæ•°è©•ä¾¡å¯èƒ½ãªå ´åˆã§ã€ã“ã®ã‚ˆã†ãªå¤‰æ•°ã‚’*potentially constant*ãªå¤‰æ•°ï¼ˆå®šæ•°ã‹ã‚‚ã—ã‚Œãªã„å¤‰æ•°ï¼‰ã¨å‘¼ã³ã¾ã™ã€‚

```cpp
constexpr int f() {
  return 1;
}

int main() {
  const int n = f();  // nã¯potentially constantãªå¤‰æ•°
}
```

å®šæ•°ã‹ã‚‚ã—ã‚Œãªã„å¤‰æ•°ã«ã¯æ­£ç¢ºã«ã¯`constexpr`å¤‰æ•°ã‚‚å«ã¿ã¾ã™ãŒã“ã“ã§ã¯ãã‚Œã¯é™¤å¤–ã™ã‚‹ã¨ã—ã¾ã™ã€‚

ã“ã®å®šæ•°ã‹ã‚‚ã—ã‚Œãªã„å¤‰æ•°ã¯ãã®åˆæœŸåŒ–å­ãŒå®šæ•°è©•ä¾¡å¯èƒ½ã§ã‚ã‚Œã°ã€ãã®çµæœã‚’ç”¨ã„ã¦ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ã«åˆæœŸåŒ–ã•ã‚Œã€å®šæ•°å¼ã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã§ä½¿ç”¨å¯èƒ½ã«ãªã‚Šã¾ã™ã€‚å®šæ•°ã‹ã‚‚ã—ã‚Œãªã„å¤‰æ•°ã§ã‚ã£ã¦ã‚‚åˆæœŸåŒ–å¼ãŒå®šæ•°è©•ä¾¡å¯èƒ½ã§ãªã‘ã‚Œã°ã€ãã®åˆæœŸåŒ–åŠã³åˆæœŸåŒ–å¼ã®è©•ä¾¡ã¯å®Ÿè¡Œæ™‚ã«è¡Œã‚ã‚Œã¾ã™ã€‚

`std::current_exception()`ãªã©ã®å‘¼ã³å‡ºã—ã¯C++26ã‹ã‚‰å®šæ•°è©•ä¾¡å¯èƒ½ãªå¼ã§ã™ã€‚ä»¥å‰ã¯å®šæ•°è©•ä¾¡å¯èƒ½ã§ã¯ãªã‹ã£ãŸãŸã‚ã“ã®å¤‰æ›´ãŒä¸‹ä½äº’æ›æ€§ã‚’æã­ã‚‹ã“ã¨ã¯ç„¡ã„ã¯ãšã§ã—ãŸãŒã€ã“ã‚Œã‚‰ã®å¼ãŒå®šæ•°ã‹ã‚‚ã—ã‚Œãªã„å¤‰æ•°ã®åˆæœŸåŒ–å¼ã«ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹å ´åˆã«å‹•ä½œãŒå¤‰åŒ–ã—ã¾ã™ã€‚

```cpp
try {
  // ä¾‹å¤–ã‚’æŠ•ã’ã†ã‚‹ã‚³ãƒ¼ãƒ‰
	...
} catch (const std::exception & exc) {
  // has_exceptionã¯å®šæ•°ã‹ã‚‚ã—ã‚Œãªã„å¤‰æ•°ã ãŒã€C++23ã¾ã§ã¯ãã®åˆæœŸåŒ–å¼ã¯å®šæ•°è©•ä¾¡å¯èƒ½ã§ã¯ãªã‹ã£ãŸ
	const bool has_exception = (std::current_exception() != nullptr); // å®šæ•°è©•ä¾¡ã•ã‚ŒãŸæ™‚ã«ã¯ãã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã«ç¾åœ¨ã®ä¾‹å¤–ã¯å­˜åœ¨ã—ãªã„
	static_assert(has_exception == false); // âœ…ã€has_exceptionã¯å®šæ•°å¼ã§ä½¿ç”¨å¯èƒ½
}
```

`const`ãªæ•´æ•°å‹ï¼ˆ`bool`ã‚’å«ã‚€ï¼‰ã¯å®šæ•°ã‹ã‚‚ã—ã‚Œãªã„å¤‰æ•°ã§ã™ãŒã€`std::current_exception()`ã®å‘¼ã³å‡ºã—ã¯C++23ã¾ã§ã¯å®šæ•°è©•ä¾¡ä¸å¯èƒ½ã ã£ãŸãŸã‚å®šæ•°è©•ä¾¡ã•ã‚Œã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚ã—ã‹ã—C++26ã§ã¯å®šæ•°è©•ä¾¡å¯èƒ½ã«ãªã‚‹ã“ã¨ã«ã‚ˆã£ã¦ã“ã®`has_exception`ã®åˆæœŸåŒ–å¼ã¯å®šæ•°å¼ã¨ã—ã¦ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ã«å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚ã“ã®å¤‰æ•°ã®åˆæœŸåŒ–ã«ã‚ˆã£ã¦é–‹å§‹ã™ã‚‹å®šæ•°è©•ä¾¡ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã§ã¯ä¾‹å¤–ã¯é€å‡ºã•ã‚Œã¦ã„ãªã„ãŸã‚ã€å®šæ•°å¼ã§ã¯`catch`ã®å†…éƒ¨ã§ã‚ã‚‹ã«ã‚‚ã‹ã‹ã‚ã‚‰ãš`std::current_exception()`ã¯`nullptr`ã‚’è¿”ã—ã¾ã™ã€‚

ã“ã‚Œã«ã‚ˆã£ã¦ã€`has_exception`ã¯å®Ÿè¡Œæ™‚ã®ä¾‹å¤–çŠ¶æ…‹ã¨å…¨ãé–¢ä¿‚ãªãå¸¸ã«`false`ã§åˆæœŸåŒ–ã•ã‚Œã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚

ææ¡ˆæ–‡æ›¸ã‚ˆã‚Šã€ä»–ã®ä¾‹

```cpp
struct transaction {
	// ...
	void cancel() { /* revert changes */ }
	
	~transaction() {
    // unrollingã¯å®šæ•°ã‹ã‚‚ã—ã‚Œãªã„å¤‰æ•°
		const bool unrolling = std::uncaught_exceptions() > 0;  // falseã§ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ã«åˆæœŸåŒ–ã•ã‚Œã‚‹
		
		if (unrolling) { // this will never be evaluated
			log("exception was thrown in a transaction => cancel()");
			cancel();
		}
	}
}
```

å®šæ•°ã‹ã‚‚ã—ã‚Œãªã„å¤‰æ•°`unrolling`ã¯C++26ã‹ã‚‰å®šæ•°å¼ã«ã‚ˆã£ã¦åˆæœŸåŒ–ã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ã—ã‹ã‚‚ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ„å›³ã¨ã¯å…¨ãç•°ãªã‚‹çµæœã«ã‚ˆã£ã¦åˆæœŸåŒ–ã•ã‚Œã¾ã™ï¼ˆå¸¸ã«`false`ï¼‰ã€‚

ã“ã‚Œã‚‰ã®ã‚ˆã†ã«ã€å¤‰æ•°ã®åˆæœŸåŒ–å¼ã‹ã‚‰é–‹å§‹ã•ã‚Œã‚‹å®šæ•°è©•ä¾¡ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã§ã¯ãã®è©•ä¾¡ã®å†…éƒ¨ã§ä¾‹å¤–ãŒé€å‡ºã•ã‚Œãªã„é™ã‚Šç¾åœ¨ã®ä¾‹å¤–ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒå­˜åœ¨ã™ã‚‹çŠ¶æ…‹ã«ãªã‚Šã¾ã›ã‚“ã€‚ãã®ãŸã‚ã€å®šæ•°ã‹ã‚‚ã—ã‚Œãªã„å¤‰æ•°ã®åˆæœŸåŒ–å¼ã§`std::uncaught_exceptions()`ã‚„`std::current_exception()`ãŒä½¿ç”¨ã•ã‚Œã¦ã„ã¦åˆæœŸåŒ–å¼å…¨ä½“ãŒå®šæ•°è©•ä¾¡å¯èƒ½ã ã¨ã€ã“ã‚Œã‚‰ã®é–¢æ•°ã¯å¸¸ã«ç¾åœ¨ã®ä¾‹å¤–ãŒç„¡ã„çŠ¶æ…‹ã§è©•ä¾¡ã•ã‚Œçµæœã‚’å–å¾—ã—ã¾ã™ã€‚

ã“ã®ææ¡ˆã¯ã“ã®å•é¡Œã‚’è§£æ¶ˆã—ã‚ˆã†ã¨ã™ã‚‹ã‚‚ã®ã§ã€`std::uncaught_exceptions()`ã¨`std::current_exception()`ã®`constexpr`ã¯ç¶­æŒã—ãŸã†ãˆã§ã€ã“ã‚Œã‚‰ã®é–¢æ•°ãŒå®šæ•°ã‹ã‚‚ã—ã‚Œãªã„å¤‰æ•°ã®åˆæœŸåŒ–ã®ãŸã‚ã«å®šæ•°è©•ä¾¡ã•ã‚Œã‚‹å ´åˆã«å‘¼ã³å‡ºã—ã‚’å®šæ•°å¼ã§ã¯ãªãã™ã‚‹ã“ã¨ã‚’ææ¡ˆã—ã¦ã„ã¾ã™ã€‚

ã“ã‚Œã«ã‚ˆã‚Šã€ä¸Šè¨˜ã®2ä¾‹ã®ã‚ˆã†ãªã‚±ãƒ¼ã‚¹ã§ã¯`std::uncaught_exceptions()`ã¨`std::current_exception()`ã®å‘¼ã³å‡ºã—ãŒå®šæ•°å¼ã§ã¯ãªããªã‚‹ã“ã¨ã§ã€å®šæ•°ã‹ã‚‚ã—ã‚Œãªã„å¤‰æ•°ã®åˆæœŸåŒ–ã¯C++23ã¾ã§ã¨åŒã˜ãå®Ÿè¡Œæ™‚ã«è¡Œã‚ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

ã“ã®ææ¡ˆã®å†…å®¹ã«å¯¾å¿œã™ã‚‹NBã‚³ãƒ¡ãƒ³ãƒˆãŒ3ä»¶æå‡ºã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ã§ã€ãã‚Œã‚’å—ã‘ã¦LEWGã§ã“ã®ææ¡ˆã¨ã“ã®å•é¡Œã«ã¤ã„ã¦å¯©è­°ã•ã‚ŒãŸçµæœã€ã“ã®ææ¡ˆã®å¤‰æ›´ã¯å¤§ãã™ãã‚‹ã¨ã—ã¦`std::uncaught_exceptions()`ã¨`std::current_exception()`ã‹ã‚‰å˜ã«`constexpr`ã‚’å–ã‚Šé™¤ãã“ã¨ã«è‹¥å¹²ã®åˆæ„ãŒã‚ã£ãŸã‚ˆã†ã§ã™ã€‚ã“ã‚Œã‚’å—ã‘ã¦ã“ã®å•é¡Œã®è§£æ±ºã¯P3842R0ã«å§”ã­ã‚‰ã‚ŒãŸã‚ˆã†ã§ã™ã€‚

- [P3818 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/2428)

### [P3819R0 Remove evaluation_exception() from contract-violation handling for C++26](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3819r0.pdf)

`std::contracts::contract_violation::evaluation_exception()`ã‚’å‰Šé™¤ã™ã‚‹ææ¡ˆã€‚

C++26 Contractsæ©Ÿèƒ½ã«ãŠã‘ã‚‹é•åãƒãƒ³ãƒ‰ãƒ©ã®å¼•æ•°å‹ã§ã‚ã‚‹`std::contracts::contract_violation`å‹ã«ã¯ã€ãã®é•åãƒãƒ³ãƒ‰ãƒ©ãŒå¥‘ç´„è¿°èªã‹ã‚‰ã®ä¾‹å¤–é€å‡ºã«ã‚ˆã£ã¦å‘¼ã³å‡ºã•ã‚Œã¦ã„ãŸå ´åˆã«ãã®ä¾‹å¤–ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å–å¾—ã™ã‚‹ãŸã‚ã®é–¢æ•°`.evaluation_exception()`ãŒç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚

```cpp
void handle_contract_violation (const contract_violation& cv) {
  if (auto exptr = cv.evaluation_exception(); exptr != nullptr) {
    // ä¾‹å¤–å‡¦ç†
    ...
  }
}
```

é•åãƒãƒ³ãƒ‰ãƒ©ã‚’å‘¼ã³å‡ºã—ãŸå¥‘ç´„é•åãŒå¥‘ç´„è¿°èªãŒ`false`ã‚’è¿”ã—ãŸã“ã¨ã«ã‚ˆã£ã¦èµ·ãã¦ã„ãŸå ´åˆã€`.evaluation_exception()`ã¯`nullptr`ã‚’è¿”ã—ã¾ã™ã€‚

å¥‘ç´„é•åãŒä¾‹å¤–ã«ã‚ˆã£ã¦èµ·ããŸã‹ã©ã†ã‹ã¨ã„ã†ã“ã¨è‡ªä½“ã¯`.detection_mode()`ãŒ`std::detection_mode::evaluation_exception`ã§ã‚ã‚‹ã‹ã‚’èª¿ã¹ã‚‹ã“ã¨ã«ã‚ˆã£ã¦ã‚‚è¡Œãˆã¾ã™ã€‚ã“ã¡ã‚‰ã®å ´åˆã¯å†ã‚¹ãƒ­ãƒ¼ã‚’è¡Œã†ã“ã¨ã§ç¾åœ¨ã®ä¾‹å¤–ã‚’ã‚­ãƒ£ãƒƒãƒã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```cpp
void handle_contract_violation (const contract_violation& cv) {
  if (cv.detection_mode() == detection_mode::evaluation_exception) {
  try {
    throw;
  } catch (std::exception& e) {
    // ä¾‹å¤–å‡¦ç†
    ...
  }
}
```

ã“ã®æ–¹æ³•ã¯`.detection_mode()`ã®ãƒã‚§ãƒƒã‚¯ã‚’å¿˜ã‚ŒãŸå ´åˆã«å¤±æ•—ã™ã‚‹ã‹ã€æ‚ªã„å ´åˆã¯é–¢ä¿‚ãªã„ä¾‹å¤–ã‚’å‡¦ç†ã—ã¦ã—ã¾ã†å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ï¼ˆé•åãƒãƒ³ãƒ‰ãƒ©è‡ªä½“ã¯`catch`ç¯€ã®ä¸­ã§ã‚‚å‘¼ã°ã‚Œã‚‹ï¼‰ã€‚`.evaluation_exception()`ã¯ã“ã®ã‚ˆã†ãªå†—é•·ãªãƒã‚§ãƒƒã‚¯ã‚’å›é¿ã—ã¦ã€é•åãƒãƒ³ãƒ‰ãƒ©ã®å‘¼ã³å‡ºã—ã®åŸå› ã¨ãªã£ãŸä¾‹å¤–ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ç°¡å˜ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãŸã‚ã«è¿½åŠ ã•ã‚ŒãŸã‚‚ã®ã§ã™ã€‚

`.evaluation_exception()`ã¯`.detection_mode()`ã‚’ç”¨ã„ãŸæ–¹æ³•ã®æ§‹æ–‡ç³–è¡£ã¨ã—ã¦ææ¡ˆã•ã‚Œã¾ã—ãŸãŒã€ç¾åœ¨ã®ä¾‹å¤–ã§ã¯ãªãé•åãƒãƒ³ãƒ‰ãƒ©ã®å‘¼ã³å‡ºã—ã®åŸå› ã¨ãªã£ãŸä¾‹å¤–ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å¸¸ã«å–å¾—ã™ã‚‹ã‚‚ã®ã§ã‚ã‚Šã€ã“ã®ã“ã¨ã«å®Ÿè£…ä¸Šã®å•é¡ŒãŒã‚ã‚Šã¾ã—ãŸã€‚

```cpp
void handle_contract_violation (const contract_violation& cv) {
  // ...
  try {
    // ...
    throw X;
  } catch (...) {
    if (cv.detection_mode() == detection_mode::evaluation_exception) {
      // ç¾åœ¨ã®ä¾‹å¤–ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’Xã§ã‚ã‚Šã€å¥‘ç´„è¿°èªã‹ã‚‰é€å‡ºã•ã‚ŒãŸã‚‚ã®ã§ã¯ãªã„
      auto evaluation_exception_ptr = cv.evaluation_exception();
      // evaluation_exception_ptrã¯Xã§ã¯ãªãå…ƒã®ä¾‹å¤–ã‚’å‡¦ç†ã™ã‚‹
    }
  }
}
```

ã“ã®ã‚ˆã†ãªå‹•ä½œã‚’å®Ÿç¾ã™ã‚‹ãŸã‚ã«ã¯ã€å¥‘ç´„é•åã®åŸå› ã¨ãªã£ãŸä¾‹å¤–ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’é€šå¸¸ã®ä¾‹å¤–çŠ¶æ…‹ã‹ã‚‰é€€é¿ã—ã¦ãŠãå¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ä¸€éƒ¨ã®å®Ÿè£…ã§ã¯ãã®ãŸã‚ã«ä¾‹å¤–ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ã‚³ãƒ”ãƒ¼ã‚’è¡Œã†å¿…è¦ãŒã‚ã‚Šã€ãã®ã‚³ãƒ”ãƒ¼ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‚’é€šã—ã¦ä¾‹å¤–é€å‡ºã«ã‚ˆã‚‹å¥‘ç´„é•åã¨é•åãƒãƒ³ãƒ‰ãƒ©å‘¼ã³å‡ºã—ã®é–“ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚³ãƒ¼ãƒ‰ãŒå®Ÿè¡Œã•ã‚Œã¦ã—ã¾ã†å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

é•åãƒãƒ³ãƒ‰ãƒ©ã¯å¥‘ç´„é•åãŒèµ·ãã¦ã„ã‚‹çŠ¶æ³ï¼ˆã‚¹ã‚¿ãƒƒã‚¯ç ´æãªã©ãŒèµ·ãã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ï¼‰ã§å®Ÿè¡Œã™ã‚‹ã“ã¨ãŒæƒ³å®šã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€ãã®ã‚ˆã†ãªçŠ¶æ³ã«å¯¾ã—ã¦ã‚ã‚‹ç¨‹åº¦å …ç‰¢ã«è¨˜è¿°ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ä¸€æ–¹ã€ä¾‹å¤–ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ã‚³ãƒ”ãƒ¼ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã¯ãã†ã§ã¯ãªãã€ã‚¹ã‚¿ãƒƒã‚¯ãƒˆãƒ¬ãƒ¼ã‚¹ã‚’å–å¾—ã—ã‚ˆã†ã¨ã—ã¦ã‚¹ã‚¿ãƒƒã‚¯ã‚’èµ°æŸ»ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ãã—ã¦ã€ã“ã‚ŒãŒã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¸Šã®è„†å¼±æ€§ã«ã¤ãªãŒã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ï¼ˆç ´å£Šã•ã‚ŒãŸã‚¹ã‚¿ãƒƒã‚¯ã‚’èµ°æŸ»ã™ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’é€šã—ã¦ä»»æ„ã®å ´æ‰€ã«ã‚¸ãƒ£ãƒ³ãƒ—ã•ã›ã‚‹ã“ã¨ã§ã€ä»»æ„ã®ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ï¼‰ã€‚

Itanium ABIã‚’æ¡ç”¨ã™ã‚‹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§ã¯ä¾‹å¤–ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ã‚³ãƒ”ãƒ¼ã‚’å›é¿ã™ã‚‹å®Ÿè£…ãŒçŸ¥ã‚‰ã‚Œã¦ã„ã‚‹ä¸€æ–¹ã€Windows ABIã§ã¯ç¾æ™‚ç‚¹ã§ãã®ã‚ˆã†ãªå®Ÿè£…ã‚’ç¢ºèªã§ãã¦ã„ã¾ã›ã‚“ã€‚`.evaluation_exception()`ã‚’ä»Šã®ã¾ã¾å°å…¥ã—ã‚ˆã†ã¨ã™ã‚‹ã¨ã€ã“ã®ã‚ˆã†ãªã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒªã‚¹ã‚¯ã‚’å›é¿ã™ã‚‹ãŸã‚ã®è¦ä»¶ã‚’C++ã®ä¾‹å¤–ã‚·ã‚¹ãƒ†ãƒ ã«æ–°ãŸã«èª²ã™ã“ã¨ã«ãªã‚Šã¾ã™ã€‚

ã“ã‚Œã‚‰ã®å•é¡Œã®ãŸã‚ã€ã“ã®ææ¡ˆã§ã¯`.evaluation_exception()`ãŒå…¨ã¦ã®ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§å®‰å…¨ã«å®Ÿè£…å¯èƒ½ã§ã‚ã‚‹ã“ã¨ãŒç¢ºèªã•ã‚Œã‚‹ã¾ã§æ¨™æº–ã«å°å…¥ã—ãªã„ã‚ˆã†ã«ã™ã‚‹ã“ã¨ã‚’ææ¡ˆã—ã¦ã„ã¾ã™ã€‚

å‰è¿°ã®ã‚ˆã†ã«ã€å•é¡Œã¯ã‚ã‚‹ã‚‚ã®ã®`.detection_mode()`ã®ãƒã‚§ãƒƒã‚¯ã¨`std::current_exception()`ã¨ã„ã†ä»£æ›¿æ‰‹æ®µãŒã‚ã‚‹ãŸã‚ã€`.evaluation_exception()`ã‚’å‰Šé™¤ã—ã¦ã‚‚åŒç­‰ã®ã“ã¨ãŒã§ããªããªã‚‹ã‚ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ã“ã¡ã‚‰ã®æ–¹æ³•ã®å ´åˆã§ã‚‚ä¾‹å¤–ã®ã‚³ãƒ”ãƒ¼ã¯ç™ºç”Ÿã—ãˆã¾ã™ãŒã€ãã‚Œã¯é•åãƒãƒ³ãƒ‰ãƒ©å†…ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚³ãƒ¼ãƒ‰ã§è¦‹ãˆã¦ã„ã‚‹ç‰©ã§ã‚ã‚Šåˆ¶å¾¡å¯èƒ½ãªã‚‚ã®ã§ã™ã€‚

ã“ã®ææ¡ˆã¯NBã‚³ãƒ¡ãƒ³ãƒˆè§£æ±ºã¨ã—ã¦2025å¹´11æœˆã®å…¨ä½“ä¼šè­°ã§C++26å‘ã‘ã«æ¡æŠã•ã‚Œã€C++26ã«é©ç”¨ã•ã‚Œã¦ã„ã¾ã™ã€‚

- [P3227R1 Fixing the library API for contract violation handling - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2024å¹´12æœˆï¼‰](https://onihusube.hatenablog.com/entry/2025/05/18/195724#P3227R1-Fixing-the-library-API-for-contract-violation-handling)
- [P3819 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/2429)

### [P3820R0 Split constexpr `uncaught_exceptions` into distinct runtime and consteval functions](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3820r0.html)

â†“

### [P3820R1 Fix constexpr `uncaught_exceptions` and `current_exception`](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3820r1.html)

`std::uncaught_exceptions()`ã¨`std::current_exception()`ã‹ã‚‰`constexpr`æŒ‡å®šã‚’å‰Šé™¤ã™ã‚‹ææ¡ˆã€‚

ã“ã®ææ¡ˆã®æŒ‡æ‘˜ã™ã‚‹å•é¡Œã‚„ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã¯å°‘ã—ä¸Šã®P3818R1ã¨å…±é€šã—ã¦ã„ã‚‹ã®ã§ãã¡ã‚‰ã‚’ã”è¦§ãã ã•ã„ã€‚

ã“ã®ææ¡ˆã¯P3818R1ã¨ã¯ç•°ãªã‚Šå•é¡Œã«å¯¾ã—ã¦æ¬¡ã®è§£æ±ºç­–ã‚’ææ¡ˆã—ã¦ã„ã¾ã™

- `std::uncaught_exceptions()`ã‹ã‚‰`constexpr`æŒ‡å®šã‚’å‰Šé™¤ã™ã‚‹
- å®šæ•°å¼ã§ä½¿ç”¨ã§ãã‚‹å°‚ç”¨ã®`std::consteval_uncaught_exceptions()`ã‚’è¿½åŠ ã™ã‚‹
    - å‘¼ã³å‡ºã•ã‚ŒãŸå®šæ•°è©•ä¾¡ã®ä¸­ã§ã®ä¾‹å¤–ã‚’ã‚«ã‚¦ãƒ³ãƒˆã™ã‚‹
- `std::current_exception()`ã¯ã€å‘¼ã³å‡ºã•ã‚ŒãŸã®ã¨åŒã˜å®šæ•°è©•ä¾¡ã®ä¸­ã§é€å‡ºã•ã‚Œç¾åœ¨å‡¦ç†ä¸­ã®ä¾‹å¤–ãŒå­˜åœ¨ã™ã‚‹å ´åˆã«ã®ã¿å®šæ•°å¼ã¨ãªã‚‹ã€ã‚ˆã†ã«å¤‰æ›´
- å®šæ•°å¼ã§ä½¿ç”¨ã§ãã‚‹å°‚ç”¨ã®`std::consteval_current_exception()`ã‚’è¿½åŠ ã™ã‚‹
    - ï¼ˆå‘¼ã³å‡ºã•ã‚ŒãŸæ™‚ç‚¹ã§ã®ï¼‰ç¾åœ¨ã®å®šæ•°è©•ä¾¡å†…ã§é€å‡ºã•ã‚ŒãŸç¾åœ¨å‡¦ç†ä¸­ã®ä¾‹å¤–ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¸ã®ãƒã‚¤ãƒ³ã‚¿ã‚’è¿”ã—ã€ãã‚Œä»¥å¤–ã®å ´åˆã¯`nullptr`ã‚’è¿”ã™

ã“ã®ææ¡ˆã®å ´åˆã€`std::uncaught_exceptions()`ã¯å®šæ•°å¼ã§ä½¿ç”¨ã§ããªããªã‚Šã€å®šæ•°å¼ã§ä½¿ç”¨ã™ã‚‹ã«ã¯åå‰ã®é•ã†`std::consteval_uncaught_exceptions()`ã‚’ä½¿ã‚ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚ã“ã‚Œã«ã‚ˆã£ã¦ã€å®Ÿè¡Œæ™‚ã¨ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ã§ã‚³ãƒ¼ãƒ‰ã‚’å…±é€šã™ã‚‹å ´åˆã¯`if consteval`ã«ã‚ˆã‚‹åˆ†å²ãŒå¿…è¦ã«ãªã‚Šã¾ã™ã€‚`std::current_exception()`ã¯å°‘ã—ç•°ãªã‚Šã€å®šæ•°å¼ã§å‘¼ã°ã‚ŒãŸã¨ãã«`nullptr`ã‚’è¿”ã•ãªã„å ´åˆã«ã®ã¿å®šæ•°è©•ä¾¡å¯èƒ½ã«ãªã‚Šã¾ã™ã€‚

P3818R1ã®ã¨ã“ã‚ã§ã‚‚è¿°ã¹ãŸã‚ˆã†ã«ã€çµå±€ã©ã¡ã‚‰ã®ææ¡ˆã‚‚C++26ã®NBã‚³ãƒ¡ãƒ³ãƒˆè§£æ±ºãƒ•ã‚§ãƒ¼ã‚ºã«å°å…¥ã™ã‚‹ã«ã¯é©ã•ãªã„ã¨ã—ã¦ã€P3842R0ã«ã¦`std::uncaught_exceptions()`ã¨`std::current_exception()`ã‹ã‚‰`constexpr`ã‚’å‰Šé™¤ã™ã‚‹ã“ã¨ã®ã¿ã‚’C++26å‘ã‘ã®ä¿®æ­£ã¨ã™ã‚‹ã‚ˆã†ã§ã™ã€‚

- [P3820 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/2430)

### [P3822R0 Conditional `noexcept` specifiers in compound requirements](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3822r0.html)

è¤‡åˆè¦ä»¶ã«ãŠã„ã¦æ¡ä»¶ä»˜ã`noexcept`æŒ‡å®šã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ææ¡ˆã€‚

è¤‡åˆè¦ä»¶ã¨ã¯ã€ä¸»ã«ã‚³ãƒ³ã‚»ãƒ—ãƒˆå®šç¾©ä¸­ã®`requires`å¼å†…éƒ¨ã§åˆ¶ç´„ã‚’è¨˜è¿°ã™ã‚‹å½¢å¼ã®ä¸€ã¤ã§ã€`{expr} -> return-type;`ã®ã‚ˆã†ãªå½¢å¼ã§è¨˜è¿°ã™ã‚‹è¦ä»¶ã®äº‹ã§ã™ã€‚`{expr} noexcept -> return-type;`ã®ã‚ˆã†ã«ã™ã‚‹ã¨å¼`expr`ãŒ`noexcept`ã§ã‚ã‚‹ã“ã¨ã‚’æŒ‡å®šã§ãã¾ã™ãŒã€ã“ã“ã®`noexcept`ã«ã¯æ¡ä»¶ã‚’æŒ‡å®šã§ãã¾ã›ã‚“ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€é–¢æ•°ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§ã‚ˆãä½¿ç”¨ã•ã‚Œã‚‹æ¡ä»¶ä»˜ã`noexcept`ã‚’åˆ¶ç´„ã¨ã—ã¦ã¯è¡¨ç¾ã§ãã¾ã›ã‚“ã€‚

ã“ã®ææ¡ˆã¯ã€è¤‡åˆè¦ä»¶ã®`noexcept`åˆ¶ç´„ã«ãŠã„ã¦`noexcept(condition)`ã®å½¢å¼ã‚’è¨±å¯ã—ã¦ã€æ¡ä»¶ä»˜ã`noexcept`æŒ‡å®šã‚’åˆ¶ç´„ã§è¡¨ç¾ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã‚‚ã®ã§ã™ã€‚

<table>
<tr>
<th>ç¾åœ¨</th>
<th>ã“ã®ææ¡ˆ</th>
</tr>
<tr>
<td valign="top">

```cpp
template<typename F, bool noexc>
concept invocable = noexc
  ? requires(F f) { { f() } noexcept; }
  : requires(F f) { f(); };

template<bool noexc>
struct callable_ref {
  callable_ref(invocable<noexc> auto&& fn);
  
  ...
};
```

</td>
<td valign="top">

```cpp
template<typename F, bool noexc>
concept invocable = requires(F f) {
  { f() } noexcept(noexc);
};

template<bool noexc>
struct callable_ref {
  callable_ref(invocable<noexc> auto&& fn);
  
  ...
};
```

</td>
</tr>
</table>

`{expr} noexcept(condition) -> return-type;`ã®ã‚ˆã†ã«è¨˜è¿°ã§ãã€`condition`ãŒ`true`ã¨è©•ä¾¡ã•ã‚Œã¦ã„ã‚‹ã®ã«`expr`ãŒä¾‹å¤–ã‚’é€å‡ºã—ã†ã‚‹å ´åˆã€åˆ¶ç´„ã¯æº€ãŸã•ã‚Œã¾ã›ã‚“ã€‚`condition`ãŒ`false`ã¨è©•ä¾¡ã•ã‚Œã¦ã„ã‚‹å ´åˆã¯`expr`ã¯ä¾‹å¤–ã‚’é€å‡ºã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã“ã¨ã‚’è¡¨ç¾ã—ã¾ã™ï¼ˆã“ã®å ´åˆ`expr`ãŒä¾‹å¤–ã‚’é€å‡ºã™ã‚‹ã‹ã¯ãƒã‚§ãƒƒã‚¯ã•ã‚Œãªã„ï¼‰ã€‚

æ¡ä»¶ãªã—ã®`noexcept`ã¯`noexcept(true)`ã¨ç­‰ä¾¡ã§ã‚ã‚Šã€`noexcept(false)`ã¯`noexcept`ãªã—ã¨ç­‰ä¾¡ã§ã™ã€‚

ææ¡ˆã§ã¯`condition`ãŒæ–‡è„ˆçš„ã«`bool`ã«å¤‰æ›ã§ããªã„å ´åˆã§ã‚‚ãƒãƒ¼ãƒ‰ã‚¨ãƒ©ãƒ¼ã«ã¯ã›ãšã€å˜ã«åˆ¶ç´„ãŒæº€ãŸã•ã‚Œãªã„ã‚ˆã†ã«ã™ã‚‹ã“ã¨ã‚’ææ¡ˆã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã¯ã€ã‚³ãƒ³ã‚»ãƒ—ãƒˆã¯ã‚ªãƒ¼ãƒãƒ¼ãƒ­ãƒ¼ãƒ‰è§£æ±ºã§ä½¿ç”¨ã•ã‚Œã‚‹ãŸã‚ã€äºˆæœŸã—ãªã„å…¥åŠ›ã«å¯¾ã—ã¦ã¯ä»–ã®å€™è£œãŒè€ƒæ…®ã•ã‚Œã‚‹ã¨ã„ã†å‹•ä½œãŒæœŸå¾…ã•ã‚Œã‚‹ã‹ã‚‰ã§ã™ã€‚

- [P3822 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/2431)

### [P3823R0 Wording for US NB comment 10](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3823r0.html)

`trivially_relocatable_if_eligible`ãªã©ã®æ–‡è„ˆä¾å­˜ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å‰Šé™¤ã™ã‚‹ææ¡ˆã€‚

ã“ã‚Œã¯æå‡ºã•ã‚ŒãŸNBã‚³ãƒ¡ãƒ³ãƒˆã®ä¸€ã¤ã«å¯¾å¿œã™ã‚‹ã‚‚ã®ã§ã™ã€‚ã“ã“ã§ã®ä¸»å¼µã¯P1144ã§ã®ä¸»å¼µã®ä¸€éƒ¨ã§ã‚‚ã‚ã‚Šã¾ã™ã€‚

- [P1144R13 `std::is_trivially_relocatable`](https://onihusube.hatenablog.com/entry/2025/12/16/230316#P1144R13-stdis_trivially_relocatable)

`trivially_relocatable_if_eligible`ã‚„`replaceable_if_eligible`ã¯ãƒªãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«é–¢é€£ã—ã¦è¿½åŠ ã•ã‚ŒãŸã‚‚ã®ã§ã€ã‚¯ãƒ©ã‚¹ã®å®£è¨€ã«å¯¾ã—ã¦ä»˜ä¸ã—ã¦ã€ãã®ã‚¯ãƒ©ã‚¹ãŒãƒªãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆç‰¹ã«ãƒˆãƒªãƒ“ã‚¢ãƒ«ãªãƒªãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰ãŒå¯èƒ½ã§ã‚ã‚‹ã“ã¨ã‚’ã‚¯ãƒ©ã‚¹ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¨ã—ã¦è¿½åŠ ã™ã‚‹ã‚‚ã®ã§ã™ã€‚

```cpp
struct Y trivially_relocatable_if_eligible {};
```

ã“ã‚Œã«ã¯æ¬¡ã®ã‚ˆã†ãªå•é¡Œç‚¹ãŒæŒ‡æ‘˜ã•ã‚Œã¦ã„ã¾ã™

- åœ¨é‡ã®ä¸»è¦ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ/ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ãŠã„ã¦ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ãƒ»æ±‚ã‚ã‚‰ã‚Œã¦ã„ã‚‹æ„å‘³è«–ã¨æ•´åˆã—ãªã„ãŸã‚ã€ä½¿ç”¨ã§ããªã„
- ç¾åœ¨ãƒªãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’åˆ©ç”¨ã—ã¦ã„ã‚‹å®Ÿè£…ã¯ã€C++26ãƒ¢ãƒ¼ãƒ‰ä»¥å¤–ã§ã¯ã“ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’ä½¿ç”¨ã§ããªã„
- C++26ãƒ¢ãƒ¼ãƒ‰ã§ã‚‚ã€`optional`ã‚„`inplace_vector`ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ã«ã¯ä¸ååˆ†ãªã“ã¨ãŒåˆ†ã‹ã£ã¦ã„ã‚‹

ã“ã®ã‚ˆã†ãªç†ç”±ã‹ã‚‰ã€ã“ã‚Œã‚‰ã®æ–‡è„ˆä¾å­˜ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã¯C++26ã§ã¯ä¸€æ—¦å‰Šé™¤ã—ã¦C++29ä»¥é™ã«å‘ã‘ã¦å†æ¤œè¨ã™ã‚‹ã“ã¨ã‚’æ±‚ã‚ã‚‹ã®ãŒã€NBã‚³ãƒ¡ãƒ³ãƒˆï¼ˆUS NB comment 10ï¼‰ã®å†…å®¹ã§ã™ã€‚ãŸã ã—ã€ãƒªãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã„ã†ã‚³ã‚¢è¨€èªãŠã‚ˆã³ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ä»•æ§˜ãã®ã‚‚ã®ã‚’å‰Šé™¤ã™ã‚‹ã“ã¨ã¯ææ¡ˆã—ã¦ã„ã¾ã›ã‚“ã€‚

- [P3823 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/2432)

### [P3824R0 Static storage for braced initializers NBC examples](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3824r0.html)

åˆæœŸåŒ–å­ãƒªã‚¹ãƒˆã®è£œåŠ©é…åˆ—ã«å¯¾ã—ã¦ã€é™çš„è¨˜æ†¶åŸŸæœŸé–“ã‚’ç¾©å‹™ä»˜ã‘ã‚‹ææ¡ˆã€‚

P2752R3ã®æ¡æŠã«ã‚ˆã£ã¦ã€C++23ï¼ˆDRãªã®ã§å®Ÿè£…æ¸ˆã¿ã®ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ï¼‰ã§ã¯ãã®åˆæœŸåŒ–å­ãŒå…¨ã¦å®šæ•°ã§ã‚ã‚‹ã‚ˆã†ãªåˆæœŸåŒ–å­ãƒªã‚¹ãƒˆã®è£œåŠ©é…åˆ—ï¼ˆbacking arrayï¼‰ã‚’é™çš„ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«æ˜‡æ ¼ã•ã›ã¦ä¿æŒã—ã¦ã€é™çš„è¨˜æ†¶åŸŸæœŸé–“ã‚’ä¸ãˆã‚‹ã“ã¨ãŒ**è¨±å¯**ã•ã‚Œã¦ã„ã¾ã™ã€‚

```cpp
#include <initializer_list>

const char& first() {
  std::initializer_list<char> il = { 'h', 'w' };
  return *il.begin();
}

const char& first(std::initializer_list<char> il)
{
  return *il.begin();
}

int main() {
  const char& rilm = first();
  const char& pilm = first({ 'h', 'w' });
  return 0;
}
```

`rilm, pilm`ã¯ã©ã¡ã‚‰ã‚‚ã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ãŒå¯¾å¿œã™ã‚‹åˆæœŸåŒ–å­ãƒªã‚¹ãƒˆã‚’é™çš„ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«é…ç½®ã—ãŸå ´åˆã«ãƒ€ãƒ³ã‚°ãƒªãƒ³ã‚°å‚ç…§ã§ã¯ãªããªã‚Šã¾ã™ã€‚ã—ã‹ã—ã€P2752ã®ä»•æ§˜ã¯ã‚ãã¾ã§ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ãŒãã‚Œã‚’è¡Œã†ã“ã¨ã‚’è¨±å¯ã™ã‚‹ãŸã‚ã®ã‚‚ã®ã§ã€ã“ã‚Œã‚’ä¿è¨¼ã—ã¦ã¯ã„ã¾ã›ã‚“ã€‚

P2752ã¯`#embed`ãŒåˆæœŸåŒ–å­ãƒªã‚¹ãƒˆã‚’åˆ©ç”¨ã™ã‚‹éš›ã«ã‚¹ã‚¿ãƒƒã‚¯é ˜åŸŸã«èª­ã¿è¾¼ã‚“ã ãƒã‚¤ãƒˆåˆ—ã‚’é…ç½®ã—ã¦ã—ã¾ã†ã®ã‚’é˜²æ­¢ã™ã‚‹ãŸã‚ã®ã‚‚ã®ã§ã—ãŸã€‚

```cpp
// ã“ã†ã™ã‚‹ã¨2MBã®è£œåŠ©é…åˆ—ãŒã‚¹ã‚¿ãƒƒã‚¯ã«ç½®ã‹ã‚Œã‚‹
std::vector<char> v = {
  #embed "2mb-image.png"
};

// ã“ã†ã™ã‚‹ã¨å›é¿ã§ãã‚‹
static const char backing[] = {
  #embed "2mb-image.png"
};
std::vector<char> v = std::vector<char>(backing, std::end(backing));
```

çµå±€P2752ã®å¾Œã§ã‚‚åˆæœŸåŒ–å­ãƒªã‚¹ãƒˆã®é™çš„ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã¸ã®æ˜‡æ ¼ã¯ä¿è¨¼ã•ã‚Œã¦ã„ãªã„ãŸã‚ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒã¯ã“ã®ã‚ˆã†ãªå›é¿ç­–ã‚’æ›¸ã‹ã–ã‚‹ã‚’å¾—ã¾ã›ã‚“ã€‚ç‰¹ã«ã€ç§»æ¤å¯èƒ½ãªã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãã¨ãã¯ãã†ã§ã™ã—ã€åŒã˜ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã§ã‚‚ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§çµæœãŒå¤‰ã‚ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ãŸã‚çµå±€ã“ã†æ›¸ãã—ã‹ãªããªã‚Šã¾ã™ã€‚

ã“ã®ææ¡ˆã¯ã€P2752ã§å°å…¥ã•ã‚ŒãŸä½¿ç”¨ã‚’è¨±å¯ã§ã¯ãªãä¿è¨¼ã™ã‚‹ã“ã¨ã§ã€ã“ã‚Œã‚‰ã®å•é¡Œã‚’è§£æ¶ˆã™ã‚‹ã“ã¨ã‚’ææ¡ˆã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€æœ€åˆã®ä¾‹ã§ã¯å¸¸ã«ãƒ€ãƒ³ã‚°ãƒªãƒ³ã‚°å‚ç…§ãŒç”Ÿæˆã•ã‚Œãªããªã‚Šã€2ã¤ç›®ã®ä¾‹ã®æ§˜ãªå›é¿ç­–ã‚’æ›¸ãå¿…è¦ãŒãªããªã‚Šã¾ã™ã€‚

ã¾ãŸã€ä¸€è¦ç´ ã®åˆæœŸåŒ–å­ãƒªã‚¹ãƒˆãŒé™çš„ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«é…ç½®ã•ã‚Œã‚‹ã“ã¨ã‚’è¨±å¯ã—ã¦ã„ã‚‹å»¶é•·ã¨ã—ã¦ã€å®šæ•°ãƒªãƒ†ãƒ©ãƒ«ã§åˆæœŸåŒ–ã•ã‚Œã‚‹å˜ä¸€ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«å¯¾ã—ã¦ã‚‚åŒæ§˜ã«é™çš„ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã¸æ˜‡æ ¼ã•ã›ã‚‹ã“ã¨ã‚’ææ¡ˆã—ã¦ã„ã¾ã™ã€‚

```cpp
// P2752ã«ã‚ˆã£ã¦é™çš„ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã¸æ˜‡æ ¼ã™ã‚‹ã“ã¨ãŒè¨±å¯ã•ã‚Œã¦ã„ã‚‹
std::initializer_list<int> x1 = { 1 };

// P2752ã®é©ç”¨å¤–ã ãŒã€ã“ã‚Œã‚‰ã‚’å«ã‚ã‚‹ã“ã¨ã‚’ææ¡ˆã—ã¦ã„ã‚‹
const int& x1 = {1};
const int& x2{1};
const int& x3 = 1;

// x4ã‚’staticå¤‰æ•°ã«ã™ã‚‹ã“ã¨ã‚’ææ¡ˆã—ã¦ã„ã‚‹ã‚ã‘ã§ã¯ãªã„
const int x4{1};
```

ã“ã®å ´åˆã€é™çš„ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«æ˜‡æ ¼ã•ã‚Œã‚‹å¯¾è±¡ã¯`x1, x2, x3`ã®å‚ç…§ã«æŸç¸›ã•ã‚Œã¦ã„ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã‚ã£ã¦ã€å®šæ•°ãƒªãƒ†ãƒ©ãƒ«ã§åˆæœŸåŒ–ã•ã‚Œã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«å¯¾å¿œã™ã‚‹å¤‰æ•°ï¼ˆ`x4`ï¼‰ã‚’é™çš„ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«æ˜‡æ ¼ã™ã‚‹ã“ã¨ã‚’ææ¡ˆã—ã¦ã„ã‚‹ã‚ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚åˆæœŸåŒ–å­ãƒªã‚¹ãƒˆã‚‚æ–‡å­—åˆ—ãƒªãƒ†ãƒ©ãƒ«ã‚‚ã©ã¡ã‚‰ã‚‚å‚ç…§ã‚»ãƒãƒ³ãƒ†ã‚£ã‚¯ã‚¹ã‚’æŒã¤ã‚‚ã®ã§ã‚ã‚Šã€é™çš„ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«æ˜‡æ ¼ã•ã‚Œã‚‹ã®ã¯å‚ç…§ãã®ã‚‚ã®ã§ã¯ãªãèƒŒå¾Œã«ã‚ã‚‹å‚ç…§ã•ã‚Œã¦ã„ã‚‹ç‰©ã§ã™ã€‚

- [P2752R3 Static storage for braced initializers - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2023å¹´07æœˆï¼‰](https://onihusube.hatenablog.com/entry/2023/09/23/203644#P2752R3-Static-storage-for-braced-initializers)
- [P3824 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/2433)

### [P3827R0 Wording for US NB comment 9](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3827r0.html)

ãƒªãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ã‚ˆã£ã¦å°å…¥ã•ã‚ŒãŸ"replaceability"ã¨ã„ã†ç”¨èªã¨ãã®ä»•æ§˜ç®‡æ‰€ã‚’å‰Šé™¤ã™ã‚‹ææ¡ˆã€‚

ã“ã®ææ¡ˆã¯"replaceability"ã¨ã„ã†æ¦‚å¿µã«åå¯¾ã™ã‚‹NBã‚³ãƒ¡ãƒ³ãƒˆã«å¿œã˜ã¦æ›¸ã‹ã‚ŒãŸã‚‚ã®ã®æ§˜ã§ã™ã€‚

ã“ã®æ¦‚å¿µã¯æ—¢å­˜ã®replaceabilityã¨ã„ã†è¨€è‘‰ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã¨ã“ã‚ã¨è¨€è‘‰ãŒè¢«ã£ã¦ãŠã‚Šã€å¯¾å¿œã™ã‚‹å‹ç‰¹æ€§ã‚’é™¤ã„ã¦ãƒ©ã‚¤ãƒ–ãƒ©ãƒªæ©Ÿèƒ½ã§ã¯ä½¿ç”¨ã•ã‚Œã¦ã„ãªã„ã‚ˆã†ã§ã™ã€‚

ãƒªãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’åˆ©ç”¨ã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªå®Ÿè£…è€…ãŒä½¿ç”¨ã™ã‚‹ã“ã¨ã‚’æ„å›³ã—ã¦ã„ã‚‹ã‚ˆã†ã§ã™ãŒã€ãã®å®šç¾©ã«ã¤ã„ã¦ã‚‚å•é¡Œã‚„åå¯¾æ„è¦‹ãŒã‚ã‚‹ãŸã‚æ¦‚å¿µãŠã‚ˆã³é–¢é€£ã™ã‚‹å°‚é–€ç”¨èªã”ã¨å‰Šé™¤ã—ã‚ˆã†ã¨ã—ã¦ã„ã¾ã™ã€‚

- [P3827 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/2434)

### [P3829R0 Contracts do not belong in the language](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3829r0.pdf)

Contractsæ©Ÿèƒ½ã‚’ãã‚Œå°‚ç”¨ã«è¨­è¨ˆã™ã‚‹ã®ã§ã¯ãªãã€ã‚ˆã‚Šæ±ç”¨çš„ã«è¨­è¨ˆã•ã‚ŒãŸæ©Ÿèƒ½ã®çµ„ã¿åˆã‚ã›ã«ã‚ˆã£ã¦å®Ÿç¾ã™ã‚‹ã‚ˆã†ã«ã™ã‚‹ææ¡ˆã€‚

P2900ã§ææ¡ˆã•ã‚ŒC++26ã«å°å…¥ã•ã‚ŒãŸContractsæ©Ÿèƒ½ã®è¨€èªæ©Ÿèƒ½ã®å´é¢ã¯æ±ç”¨çš„ãªä¾¡å€¤ã‚’æŒã¤æ©Ÿèƒ½ã®ç‰¹æ®Šãªã‚±ãƒ¼ã‚¹ã¨ãªã£ã¦ã„ã‚‹ãŸã‚ã€ãã‚Œã‚‰ã‚’åˆ†è§£ã—ã¦ã‚ˆã‚Šæ±ç”¨çš„ãªå€‹åˆ¥æ©Ÿèƒ½ã¨ã—ã¦C++ã«å°å…¥ã—ã€ãã‚Œã‚’çµ„ã¿åˆã‚ã›ã¦C++ Contractsã‚’æ§‹æˆã™ã‚‹ã“ã¨ã§ã€P2900ãŒæŠ±ãˆã¦ã„ã‚‹ã‚ˆã†ãªå•é¡Œã‚’è§£æ±ºã—ã¦ã‚ˆã‚Šè±Šå¯Œãªå¥‘ç´„APIã‚’ãƒ©ã‚¤ãƒ–ãƒ©ãƒªæ©Ÿèƒ½ã¨ã—ã¦æä¾›ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã¨ã—ã¦ã„ã¾ã™ã€‚

ãã®ãŸã‚ã«C++26ã®Contractsã‚’ãƒªã‚¸ã‚§ã‚¯ãƒˆã—ã¦ã€ã“ã®ã‚ˆã†ãªæ±ç”¨æ©Ÿèƒ½ã‚’å€‹åˆ¥ä¸¦è¡Œçš„ã«è¨­è¨ˆã—C++29ã§è¿½åŠ ã—ã¦è©•ä¾¡ã™ã‚‹ã‚ˆã†ã™ã‚‹ã“ã¨ã‚’ææ¡ˆã—ã¦ã„ã¾ã™ã€‚

ã“ã®ææ¡ˆãŒæŒ™ã’ã¦ã„ã‚‹ã€ContractsãŒãã®è¦ä»¶ã«ã‚ˆã£ã¦å°å…¥ã—ã¦ã„ã‚‹å°‚ç”¨ã®è¨€èªæ©Ÿèƒ½ã§ã‚ã‚Šã€åˆ†è§£ã—ã¦ã‚ˆã‚Šæ±ç”¨çš„ãªæ©Ÿèƒ½ã¨ã—ã¦è€ƒãˆã‚‰ã‚Œã‚‹ã‚‚ã®ã¯ã¤ãã®4ã¤ã§ã™

1. ODRã®ç·©å’Œ
    - ã‚ã‚‹ãƒ˜ãƒƒãƒ€ã«è¨˜è¿°ã•ã‚ŒãŸåŒã˜é–¢æ•°ã®å®šç¾©ã®å¥‘ç´„ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ãŒã€ç¿»è¨³å˜ä½ã”ã¨ã«ç•°ãªã‚‹è©•ä¾¡ã‚»ãƒãƒ³ãƒ†ã‚£ã‚¯ã‚¹ã‚’æŒã¤ã“ã¨ã‚’è¨±å¯ã—ã¦ã„ã‚‹ï¼ˆã“ã¨ãŒODRã®ç·©å’Œ
    - P2900ã§ã¯ã“ã‚Œã«ã¤ã„ã¦å®Ÿè£…å®šç¾©ã¨ã—ã¦ã„ã‚‹ãŒã€åºƒãæœ‰ç”¨ãªãŸã‚ã“ã®ODRç·©å’Œã®ã‚»ãƒãƒ³ãƒ†ã‚£ã‚¯ã‚¹ã‚’æ˜ç¢ºã«è¦å®šã™ã‚‹å¿…è¦ãŒã‚ã‚‹
2. é–¢æ•°ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿
    - `pre/post`ã®ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ã¯é–¢æ•°å‘¼ã³å‡ºã—ã®å‰å¾Œã§å‡¦ç†ã‚’å®Ÿè¡Œã™ã‚‹å°‚ç”¨ã®æ§‹æ–‡ã«ãªã£ã¦ã„ã‚‹
    - ã“ã‚Œã¯pythonã§ã¯ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã¨ã—ã¦ã‚ˆã‚Šæ±ç”¨çš„ãªæ©Ÿèƒ½ã«ãªã£ã¦ãŠã‚Šæœ‰ç”¨ã§ã‚ã‚‹ãŸã‚ã€ã“ã®ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿æ©Ÿèƒ½ã«ã‚ˆã£ã¦`pre/post`ã®ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿç¾ã™ã‚‹
        - ç‰¹ã«ã€ãƒªãƒ•ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ©ãƒ™ãƒ«ã§Contractsã‚’æä¾›ã§ãã‚‹ã‚ˆã†ã«ãªã‚‹
3. é…å»¶è©•ä¾¡
    - å¥‘ç´„ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ã‚’é–¢æ•°ã§å®Ÿè£…ã™ã‚‹å ´åˆã€å¼•æ•°ã®è©•ä¾¡ãŒå›é¿ã§ããšã€ã“ã‚ŒãŒè¨€èªæ©Ÿèƒ½ã¨ã—ã¦ã®ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ã®å¿…è¦æ€§ã®å¤§ããªéƒ¨åˆ†ã ã£ãŸ
    - `[[lazy]]`å±æ€§ã®æ§˜ãªå¼•æ•°ã®é…å»¶è©•ä¾¡æ©Ÿèƒ½ã«ã‚ˆã£ã¦é€šå¸¸ã®é–¢æ•°ã§åˆ©ç”¨ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹
4. æ·±ã„`const`
    - P2900 Contractsã®æš—é»™`const`åŒ–ã¯æµ…ã„`const`ã§ã‚ã‚Šã€ãƒã‚¤ãƒ³ã‚¿ã®å‚ç…§å…ˆã¾ã§`const`ã«ãªã‚‰ãªã„
    - æ·±ã„`const`ã‚’å®Ÿç¾ã™ã‚‹è¨€èªæ©Ÿèƒ½ã‚’å°å…¥ã—ã¦é€šå¸¸ã®ã‚³ãƒ¼ãƒ‰ã§ã‚‚ä½¿ç”¨ã™ã‚‹ã‚ˆã†ã«ã§ãã‚‹
        - ä»®ã«ã“ã®ã‚ˆã†ãªè¨€èªæ©Ÿèƒ½ãŒå¾Œã‹ã‚‰å°å…¥ã•ã‚ŒãŸå ´åˆã€å¾Œæ–¹äº’æ›æ€§ã«ã‚ˆã£ã¦å¥‘ç´„ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚’å¤‰æ›´ã§ããªã„

é•åãƒãƒ³ãƒ‰ãƒ©ã«é–¢ã—ã¦ã¯ã€ãã‚‚ãã‚‚çµ±ä¸€çš„ãªã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒ©ã¯ä½¿ã„ã¥ã‚‰ã„ã‚‚ã®ã§ã‚ã‚‹ã¨ã—ã¦é‡è¦è¦–ã—ã¦ã„ãªã„ã‚ˆã†ã§ã™ã€‚

è­°è«–ã®éç¨‹ã¯æ˜ã‚‰ã‹ã§ã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€ã“ã®ææ¡ˆã¯ãƒªã‚¸ã‚§ã‚¯ãƒˆã•ã‚Œã¦ã„ã¾ã™ã€‚

- [ï¼»C++ï¼½C++26 Contracts](https://onihusube.hatenablog.com/entry/2025/12/25/093454)
- [P3829 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/2435)

### [P3830R0 NB-Commenting is Not a Vehicle for Redesigning `inplace_vector`](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3830r0.pdf)

NBã‚³ãƒ¡ãƒ³ãƒˆã‚’é€šã—ãŸ`inplace_vector`ã®å†è¨­è¨ˆã®è©¦ã¿ã«åå¯¾ã™ã‚‹ææ¡ˆã€‚

C++26ã¯2025å¹´6æœˆã®å…¨ä½“ä¼šè­°ã®æ™‚ç‚¹ã§æ©Ÿèƒ½è¿½åŠ ã¯çµ‚äº†ã—ã¦ãŠã‚Šã€ã‚ã¨ã¯NBã‚³ãƒ¡ãƒ³ãƒˆï¼ˆå„å›½å§”å“¡ä¼šã‹ã‚‰ã®C++26CDã¸ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚³ãƒ¡ãƒ³ãƒˆï¼‰ã¸ã®å¯¾å¿œã®ã¿ãŒå®Ÿè³ªçš„ãªå¤‰æ›´ãŒå…¥ã‚‹ãƒ•ã‚§ãƒ¼ã‚ºã¨ãªã£ã¦ã„ã¾ã™ã€‚

ãã“ã§ã€`inplace_vector`ã«å¯¾ã™ã‚‹è¨­è¨ˆå¤‰æ›´ã‚’æ±‚ã‚ã‚‹ã‚³ãƒ¡ãƒ³ãƒˆãŒã„ãã¤ã‹æ¥ã¦ã„ã‚‹ã‚ˆã†ã§ã€ã“ã®ææ¡ˆã¯ãã‚Œã‚‰ã‚’æ¡æŠã—ãªã„ã‚ˆã†ã«ã™ã‚‹ã“ã¨ã‚’å¼·ãä¸»å¼µã™ã‚‹ã‚‚ã®ã§ã™ã€‚

æ¥ã¦ã„ã‚‹NBã‚³ãƒ¡ãƒ³ãƒˆã¯ä¸»ã«æ¬¡ã®äº‹é …ã«ã¤ã„ã¦ã®ã‚‚ã®ã®æ§˜ã§ã™

- ã‚¢ãƒ­ã‚±ãƒ¼ã‚¿å¯¾å¿œ
    - P3160R2
    - è¦ç´ å‹ã«å¯¾ã—ã¦ã‚¢ãƒ­ã‚±ãƒ¼ã‚¿ã‚’ä¼æ’­ã•ã›ã‚‹Allocator awareæ€§ã‚’ã‚µãƒãƒ¼ãƒˆã•ã›ã‚‹
- ã‚­ãƒ£ãƒ‘ã‚·ãƒ†ã‚£ã‚‚å‚åŠ ã™ã‚‹æ¯”è¼ƒ
    - P3698R0
    - ç•°ãªã‚‹ã‚­ãƒ£ãƒ‘ã‚·ãƒ†ã‚£ã‚’æŒã¤`inplace_vector`ã®æ¯”è¼ƒãŒã§ããªã„ã®ã‚’ä¿®æ­£ã™ã‚‹
- `optional<T&>`ã®ä½¿ç”¨
    - P3739R4
    - `try_*_back()`ã®æˆ»ã‚Šå€¤ã‚’`T*`ã§ã¯ãªã`optional<T&>`ã«ã™ã‚‹

ã“ã®ææ¡ˆã§ã¯ã„ãšã‚Œã®è¨­è¨ˆå¤‰æ›´ã«ã¤ã„ã¦ã‚‚C++26ã®ã‚¹ã‚³ãƒ¼ãƒ—ã§ã¯åå¯¾ã—ã¦ãŠã‚Šã€LEWGã§åˆæ„æ¸ˆã¿ã®è¨­è¨ˆã‚’LEWGã§åˆæ„ã‚’å¾—ã‚‰ã‚Œãªã‹ã£ãŸè¨­è¨ˆã«ã‚ˆã£ã¦ã“ã®C++26ã‚¹ã‚³ãƒ¼ãƒ—ã®æœ€å¾Œã§å¤‰æ›´ã™ã¹ãã§ã¯ãªãã€NBã‚³ãƒ¡ãƒ³ãƒˆã‚’åˆ©ç”¨ã—ã¦ãã®ã‚ˆã†ãªå†è¨­è¨ˆã‚’ã—ã‚ˆã†ã¨ã™ã¹ãã§ã¯ãªã„ã¨ã—ã¦ã„ã¾ã™ã€‚

ã‚¢ãƒ­ã‚±ãƒ¼ã‚¿ã¨`optional<T&>`ã«ã¤ã„ã¦ã¯å¦å®šçš„ã§ã™ãŒã€æ¯”è¼ƒã®å•é¡Œã«ã¤ã„ã¦ã¯C++29ä»¥é™ã§ä¿®æ­£ã®å¯èƒ½æ€§ãŒã‚ã‚‹ã‚‚ã®ã®æ¤œè¨ã«æ™‚é–“ãŒå¿…è¦ã¨ã—ã¦ã„ã¾ã™ã€‚

- [P3160R2 An allocator-aware inplace_vector - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2024å¹´10æœˆï¼‰](https://onihusube.hatenablog.com/entry/2025/04/20/205527#P3160R2-An-allocator-aware-inplace_vector)
- [P3698R0 Cross-capacity comparisons for inplace_vector - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2025å¹´05æœˆï¼‰](https://onihusube.hatenablog.com/entry/2025/12/16/230316#P3698R0-Cross-capacity-comparisons-for-inplace_vector)
- [P3739R2 Standard Library Hardening - using `std::optional<T&>` - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2025å¹´08æœˆï¼‰](https://onihusube.hatenablog.com/entry/2026/01/18/210314#P3739R2-Standard-Library-Hardening---using-stdoptionalT)
- [P3830 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/2436)

### [P3831R0 Contract Labels Should Use Annotation Syntax](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3831r0.html)

å¥‘ç´„ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ã«å¯¾ã™ã‚‹ãƒ©ãƒ™ãƒ«ã®æŒ‡å®šã®ãŸã‚ã«ã€ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³æ§‹æ–‡ã‚’ä½¿ç”¨ã™ã‚‹ã‚ˆã†ã«ã™ã‚‹ææ¡ˆã€‚

P3400R1ã§ã¯C++29ä»¥é™ã®Contractsæ©Ÿèƒ½æ‹¡å¼µã®å¤§ããªã‚‚ã®ã®ä¸€ã¤ã¨ã—ã¦å¥‘ç´„ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ã«å¯¾ã™ã‚‹ãƒ©ãƒ™ãƒ«ã®æŒ‡å®šã‚’ææ¡ˆã—ã¦ã„ã¾ã™ã€‚å¥‘ç´„ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ã«å¯¾ã™ã‚‹ãƒ©ãƒ™ãƒ«ã¯ã€å¥‘ç´„ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚»ãƒãƒ³ãƒ†ã‚£ã‚¯ã‚¹ï¼ˆè©•ä¾¡ã‚»ãƒãƒ³ãƒ†ã‚£ã‚¯ã‚¹ã‚„é•åå‡¦ç†ãªã©ï¼‰ã‚’ã‚ˆã‚Šãƒ­ãƒ¼ã‚«ãƒ«ã«åˆ¶å¾¡ã™ã‚‹ãŸã‚ã®ã‚‚ã®ã§ã™ã€‚

```cpp
struct my_label_t {};

constexpr my_label_t my_label;

int f(int i)
    pre<my_label>(i > 0)
    post<my_label>(r: r > 0)
{
    contract_assert<my_label>(i > 0);
    // ...
}
```

P3400R1ã§ã¯`pre<my_label>(expr)`ã®ã‚ˆã†ã«ã€ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ã‚’å°å…¥ã™ã‚‹ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã«ç¶šã`<>`ã®ä¸­ã«ãƒ©ãƒ™ãƒ«ã‚’æŒ‡å®šã—ã¾ã™ã€‚ã“ã‚Œã¯å„ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³æ§‹æ–‡ã‚’é–¢æ•°ã¨è¦‹ç«‹ã¦ãŸæ™‚ã«ã€é–¢æ•°ã‚’ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«ã‚ˆã£ã¦ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åŒ–ã™ã‚‹ã“ã¨ã‚’æ¨¡å€£ã—ãŸæ§‹æ–‡ã§ã™ã€‚ã—ã‹ã—ã€ã“ã‚Œã«ã¯ã„ãã¤ã‹å•é¡ŒãŒã‚ã‚Šã¾ã™

- NTTPã«å¯¾ã™ã‚‹ã‚¯ãƒ©ã‚¹å‹ã®è¦ä»¶ã¨ãƒ©ãƒ™ãƒ«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®è¦ä»¶ãŒç•°ãªã‚‹
    - NTTPã§ã¯ã‚¯ãƒ©ã‚¹å‹ã¯æ§‹é€ çš„ãªå‹ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚‹ä¸€æ–¹ã€ãƒ©ãƒ™ãƒ«å‹ã¯å˜ã«ã‚¯ãƒ©ã‚¹å‹ã§ã‚ã‚Œã°ã‚ˆã„
    - è¦ä»¶ãŒç•°ãªã‚‹ã‚‚ã®ãŒåŒã˜æ§‹æ–‡ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã¨æ··ä¹±ã‚’æ‹›ã
- ã“ã®ãƒ©ãƒ™ãƒ«æŒ‡å®šæ§‹æ–‡ã®ã‚»ãƒãƒ³ãƒ†ã‚£ã‚¯ã‚¹ã‚’å€‹åˆ¥ã«æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã‚‹
    - ãƒ©ãƒ™ãƒ«æŒ‡å®šæ§‹æ–‡ã¨ã„ã†å¥‘ç´„ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³å°‚ç”¨ã®æ§‹æ–‡ã‚’å°å…¥ã™ã‚‹ã¨ã€ãã®ã‚»ãƒãƒ³ãƒ†ã‚£ã‚¯ã‚¹ã‚’å€‹åˆ¥ã«ç®¡ç†ã—ã€è¨€èªã®ä»–ã®éƒ¨åˆ†ã¨ã®ç›¸äº’ä½œç”¨ã‚’å¸¸ã«è€ƒãˆãªãã¦ã¯ãªã‚‰ãªããªã‚‹
- é•åãƒãƒ³ãƒ‰ãƒ©ã‹ã‚‰ãƒ©ãƒ™ãƒ«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å–å¾—ã™ã‚‹æ§‹æ–‡ãŒä½¿ã„ã¥ã‚‰ã„
    - `void* contract_violation::control_object()`ã‚’ææ¡ˆã—ã¦ã„ã‚‹ãŒã€æˆ»ã‚Šå€¤ã¯å‹æƒ…å ±ãŒæ¬ è½ã—ã¦ã„ã‚‹
    - æˆ»ã‚Šå€¤ã¯ãƒ©ãƒ™ãƒ«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒå¤šæ…‹çš„ã§ã‚ã‚‹å ´åˆã®ã¿é`nullptr`ã‚’è¿”ã—ã€`dynamic_cast`ã§å¾©å…ƒã™ã‚‹å¿…è¦ãŒã‚ã‚Šã€å±é™º
- ç’°å¢ƒãƒ©ãƒ™ãƒ«ï¼ˆambient-control objectsï¼‰ã«é–¢ã—ã¦æœªè§£æ±ºã®è¨­è¨ˆä¸Šã®å•é¡ŒãŒã‚ã‚‹

å¥‘ç´„ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ã«å¯¾ã™ã‚‹ãƒ©ãƒ™ãƒ«æŒ‡å®šã¯æœ¬è³ªçš„ã«ã€ç„¡è¦–ã§ããªã„å±æ€§æ§‹æ–‡ã‚’å°å…¥ã—ã‚ˆã†ã¨ã—ã¦ã„ã¾ã™ã€‚C++26ã«ã¯ã“ã®ãŸã‚ã®ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ãŒå°å…¥ã•ã‚Œã¦ãŠã‚Šã€ãã‚Œã¯ãƒªãƒ•ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã«ãŠã‘ã‚‹ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚

P3394R4ã§å°å…¥ã•ã‚ŒãŸãƒªãƒ•ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã«ãŠã‘ã‚‹ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã€å®£è¨€ã«ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä»˜åŠ ã—ãã‚Œã‚’èª­ã¿å–ã‚Œã‚‹ã‚ˆã†ã«ã™ã‚‹æ©Ÿèƒ½ã§ã™ã€‚ã“ã®ã‚ˆã†ãªã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã¯ãƒªãƒ•ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã«ã‚ˆã‚‹ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã«ãŠã„ã¦ä¾¿åˆ©ãªã‚‚ã®ã§ã‚ã‚Šã€å°‚ç”¨ã®æ§‹æ–‡ã¨APIã«ã‚ˆã£ã¦æ‰±ãˆã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚

```cpp
struct C {
  [[=1]]  int a;
};
```

ç„¡è¦–ã§ããªã„å±æ€§ã¨ã—ã¦ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã«ã¯æ¬¡ã®ã‚ˆã†ãªãƒ¡ãƒªãƒƒãƒˆãŒã‚ã‚Šã¾ã™

- å±æ€§æ§‹æ–‡ã®æ§‹æ–‡ã‚¹ãƒšãƒ¼ã‚¹ã‚’åˆ©ç”¨ã—ã¦ã„ã‚‹ãŸã‚ã€æ§‹æ–‡ã‚¹ãƒšãƒ¼ã‚¹ã‚’ç¢ºä¿ã™ã‚‹å¿…è¦ãŒãªã„
- ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã¯ç„¡è¦–ã§ããªã„å±æ€§ãã®ã‚‚ã®ã§ã‚ã‚‹ãŸã‚ã€å±æ€§æ§‹æ–‡ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã«ã¯å¦¥å½“æ€§ãŒã‚ã‚‹
- ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã‚¯ã‚¨ãƒªã™ã‚‹APIã¯ã™ã§ã«ç”¨æ„ã•ã‚Œã¦ã„ã‚‹ãŸã‚ãã‚Œã‚’åˆ©ç”¨ã§ãã€ãƒªãƒ•ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã®ä»–ã®éƒ¨åˆ†ã¨ã®ä¸€è²«æ€§ãŒå‘ä¸Šã™ã‚‹

ã“ã‚Œã‚‰ã«ã‚ˆã‚Šã€ã“ã®ææ¡ˆã§ã¯å¥‘ç´„ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ã«å¯¾ã™ã‚‹ãƒ©ãƒ™ãƒ«æŒ‡å®šæ§‹æ–‡ã¨ã—ã¦ç‹¬è‡ªã®æ§‹æ–‡ã‚’ç™ºæ˜ã™ã‚‹ã®ã§ã¯ãªãã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’åˆ©ç”¨ã™ã‚‹äº‹ã‚’ææ¡ˆã—ã¦ã„ã¾ã™ã€‚

<table>
<tr>
<th>P3400R1</th>
<th>ã“ã®ææ¡ˆ</th>
</tr>
<tr>
<td valign="top">

```cpp
struct my_label_t {};

constexpr my_label_t my_label;

int f(int i)
  pre<my_label>(i > 0)
  post<my_label>(r: r > 0)
{
  contract_assert<my_label>(i > 0);
  ...
}
```

</td>
<td valign="top">

```cpp
struct my_label_t {};

constexpr my_label_t my_label;

int f(int i)
  pre [[=my_label]] (i > 0)
  post [[=my_label]] (r: r > 0)
{
  contract_assert [[=my_label]] (i > 0);
  ...
}
```

</td>
</tr>
</table>

<table>
<tr>
<th>P3400R1</th>
<th>ã“ã®ææ¡ˆ</th>
</tr>
<tr>
<td valign="top">

```cpp
struct my_label_2_t {};
constexpr my_label_2_t my_label_2;

void g(int i)
  pre<my_label | my_label_2>(i > 0);
```

</td>
<td valign="top">

```cpp
struct my_label_2_t {};
constexpr my_label_2_t my_label_2;

void g(int i)
  pre [[=my_label | my_label_2]] (i > 0);
// or, optionally
  pre [[=my_label, =my_label_2]] (i > 0);
```

</td>
</tr>
</table>

é•åãƒãƒ³ãƒ‰ãƒ©ã«ãŠã‘ã‚‹ãƒ©ãƒ™ãƒ«ã®å–å¾—ã®APIã¯ã€`annotations()`ã¨ã„ã†`meta::info`ã®ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ã‚’å–å¾—ã™ã‚‹é–¢æ•°ã‚’`contract_violation`ã«è¿½åŠ ã™ã‚‹ã“ã¨ã‚’ææ¡ˆã—ã¦ã„ã¾ã™ã€‚

```cpp
namespace std::contracts {
  class contract_violation {
  public:
    ...

    consteval std::vector<std::meta::info> annotations() const noexcept;
    
    ...
  }
}
```
```cpp
struct my_dynamic_tag {
  constexpr my_dynamic_tag() = default;
};
inline constexpr my_dynamic_tag my_dynamic_label;

void handle_contract_violation(const contract_violation& violation) {
  // ãƒ©ãƒ™ãƒ«ã®å–å¾—
  constexpr auto annotations = std::define_static_array(violation.annotations());
  template for (constexpr auto annotation : annotations) {
    if constexpr (std::meta::is_same_type(
      std::meta::type_of(annotation), ^^my_dynamic_tag
    )) {
      std::cout << "Dynamic Tag!\n";
      return;
    }
  }
  std::cout << "No Dynamic Tag\n";
}
void f()
  pre<my_dynamic_label>(false)  // prints "Dynamic Tag!"
  pre(false);                   // prints "No Dynamic Tag"
```

ã•ã‚‰ã«ã€P3400R1ã®ç’°å¢ƒãƒ©ãƒ™ãƒ«ã®æŒ‡å®šï¼ˆAmbient-Control Objectsï¼‰ã«ã¤ã„ã¦ã¯æ¬¡ã®ã‚ˆã†ãªè¨­è¨ˆä¸Šã®æ±ºå®šäº‹é …ãŒæœªè§£æ±ºã§ã‚ã‚‹ã¨æŒ‡æ‘˜ã—ã¦ã„ã¾ã™

- ãƒ©ãƒ™ãƒ«ã¯å¯¾è±¡ã®å¥‘ç´„ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ©ãƒ™ãƒ«ãƒªã‚¹ãƒˆã®ã©ã“ã«è¿½åŠ ã™ã‚‹ã®ã‹ï¼Ÿ
    - `|`ã«ã‚ˆã‚‹åˆæˆãŒå¯¾ç§°çš„ã§ã¯ãªã„å ´åˆã€å•é¡Œã«ãªã‚‹
- æš—é»™ã®åˆ¶å¾¡ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå®£è¨€ï¼ˆç’°å¢ƒãƒ©ãƒ™ãƒ«ã®æ³¨å…¥å®£è¨€ï¼‰ã¯ãªãœè¤‡æ•°å›ã®å®£è¨€ãŒã§ããªã„ã®ã‹ï¼Ÿ
- åŸºåº•ã‚¯ãƒ©ã‚¹ã‚„å›²ã‚€åå‰ç©ºé–“ãªã©ã§æŒ‡å®šã•ã‚ŒãŸç’°å¢ƒãƒ©ãƒ™ãƒ«ã‚’ç¶™æ‰¿ã™ã‚‹ã“ã¨ã¯ã§ãã‚‹ã‹ï¼Ÿ

ã¾ãŸã€P3394R4ã§ã¯ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã«ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚’æŒãŸã›ã¦ã€å®£è¨€ã‹ã‚‰ãã‚Œã‚’è‡ªå‹•çš„ã«å‘¼ã³å‡ºã™ã‚ˆã†ã«ã™ã‚‹æ–¹å‘æ€§ã®æœ‰ç”¨æ€§ã«ã¤ã„ã¦è¨€åŠã•ã‚Œã¦ãŠã‚Šï¼ˆææ¡ˆã¯ã•ã‚Œã¦ã„ãªã„ï¼‰ã€ã“ã®ã‚ˆã†ãªæ©Ÿèƒ½ã¨ãƒªãƒ•ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã«ã‚ˆã‚‹ã‚³ãƒ¼ãƒ‰ç”Ÿæˆæ©Ÿèƒ½ï¼ˆC++29ä»¥é™ã®ã‚‚ã®ï¼‰ã‚’æ¤œè¨ã™ã‚‹ã¨ã€ãƒ©ãƒ™ãƒ«ã®è‡ªå‹•çš„ãªä»˜ä¸ãŒå¯èƒ½ã«ãªã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ä¾‹ãˆã°ã€åå‰ç©ºé–“ã‚„ã‚¯ãƒ©ã‚¹ãªã©ã«ç‰¹å®šã®ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆä¾‹ãˆã°`[[=attach(label1, label2)]]`ï¼‰ã‚’ä»˜åŠ ã™ã‚‹ã“ã¨ã§ã€ãã‚Œã«å±ã™ã‚‹ã™ã¹ã¦ã®å®£è¨€ã«å¯¾ã—ã¦è‡ªå‹•çš„ã«ãƒ©ãƒ™ãƒ«ã‚’ä»˜åŠ ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

ã“ã‚Œã‚‰ã®ã“ã¨ã‹ã‚‰ã€ã‚ˆã‚Šæ±ç”¨çš„ãªã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯æ©Ÿèƒ½ã‚’æ¤œè¨ã™ã‚‹ãŸã‚ã«ã€ç’°å¢ƒãƒ©ãƒ™ãƒ«ã®æŒ‡å®šã«ã¤ã„ã¦ã¯å»¶æœŸã™ã‚‹ã“ã¨ã‚’æ¨å¥¨ã—ã¦ã„ã¾ã™ã€‚

- [P3400R1 Specifying Contract Assertion Properties with Labels - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2025å¹´03æœˆï¼‰](https://onihusube.hatenablog.com/entry/2025/09/30/224815#P3400R1-Specifying-Contract-Assertion-Properties-with-Labels)
- [P3394R4 Annotations for Reflection - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2025å¹´07æœˆï¼‰](https://onihusube.hatenablog.com/entry/2026/01/16/235211#P3394R4-Annotations-for-Reflection)
- [P3831 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/2437)

### [P3832R0 Timed lock algorithms for multiple lockables](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3832r0.pdf)

ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆä»˜ãã§ãƒŸãƒ¥ãƒ¼ãƒ†ãƒƒã‚¯ã‚¹ã®ãƒ­ãƒƒã‚¯ã‚’å–å¾—ã™ã‚‹é–¢æ•°ã®ææ¡ˆã€‚

è¤‡æ•°ã®ãƒ­ãƒƒã‚¯å¯èƒ½ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼ˆãƒŸãƒ¥ãƒ¼ãƒ†ãƒƒã‚¯ã‚¹ï¼‰ã«å¯¾ã—ã¦ãƒ­ãƒƒã‚¯ã‚’ç²å¾—ã™ã‚‹å‡¦ç†ã‚’ç°¡ç´ åŒ–ã™ã‚‹ãŸã‚ã«ã€`std::lock`ãƒ»`std::try_lock`ãƒ»`std::scoped_lock`ãªã©ãŒç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚ã“ã‚Œã‚‰ã®æ“ä½œã¯`BasicLockable`ã‚„`Lockable`è¦ä»¶ã®ç¯„å›²ã§ãƒ­ãƒƒã‚¯å–å¾—ã‚’è¡Œã„ã¾ã™ãŒã€`TimedLockable`è¦ä»¶ã‚’æº€ãŸã™ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®`try_lock_*`ã«å¯¾å¿œã™ã‚‹ãƒ­ãƒƒã‚¯å–å¾—ã‚’è¡Œã†æ“ä½œãŒã‚ã‚Šã¾ã›ã‚“ã€‚

ã“ã‚Œã«ã‚ˆã‚Šã€è¤‡æ•°ã®ãƒŸãƒ¥ãƒ¼ãƒ†ãƒƒã‚¯ã‚¹ã®æ™‚é–“åˆ¶é™ä»˜ãã®ãƒ­ãƒƒã‚¯å–å¾—ã‚’è¡ŒãŠã†ã¨ã™ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã€`try_lock(), unlock()`ã¨ãƒªãƒˆãƒ©ã‚¤ã‚’ä½¿ç”¨ã—ã¦ç‹¬è‡ªã®ãƒ‡ãƒƒãƒ‰ãƒ­ãƒƒã‚¯å›é¿ãƒ­ãƒƒã‚¯å–å¾—æ“ä½œã‚’è¨˜è¿°ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

ã“ã®å¿…è¦ã‚’ãªãã™ãŸã‚ã«ã€ã“ã®ææ¡ˆã§ã¯è¤‡æ•°ã®ãƒŸãƒ¥ãƒ¼ãƒ†ãƒƒã‚¯ã‚¹ã®æ™‚é–“åˆ¶é™ä»˜ãã®ãƒ­ãƒƒã‚¯å–å¾—ã‚’è¡Œã†ãŸã‚ã®é–¢æ•°ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã‚’ææ¡ˆã—ã¦ã„ã¾ã™ã€‚

è¿½åŠ ã—ã‚ˆã†ã¨ã—ã¦ã„ã‚‹ã®ã¯æ¬¡ã®2ã¤ã®é–¢æ•°ã§ã™

```cpp
namespace std {
  template <class Clock, class Duration, class... Ls>
  int try_lock_until(const chrono::time_point<Clock, Duration>& abs_time,
                     Ls&... ls);

  template <class Rep, class Period, class... Ls>
  int try_lock_for(const chrono::duration<Rep, Period>& rel_time, Ls&... ls);
}
```

ã“ã‚Œã¯ãã‚Œãã‚Œ`TimedLockable`è¦ä»¶ã«ã‚ã‚‹æ“ä½œã®`try_lock_until()`ã¨`try_lock_for()`ã«å¯¾å¿œã™ã‚‹ã‚‚ã®ã§ã€`try_lock_until()`ã¯æŒ‡å®šã•ã‚ŒãŸæ™‚åˆ»ã¾ã§ã®é–“ã«ã™ã¹ã¦ã®ãƒŸãƒ¥ãƒ¼ãƒ†ãƒƒã‚¯ã‚¹ã«å¯¾ã—ã¦ãƒ­ãƒƒã‚¯å–å¾—ã‚’è©¦ã¿ã‚‹é–¢æ•°ã§ã€`try_lock_for()`ã¯æŒ‡å®šã•ã‚ŒãŸæ™‚é–“å†…ã§ã™ã¹ã¦ã®ãƒ­ãƒƒã‚¯å–å¾—ã‚’è©¦ã¿ã‚‹é–¢æ•°ã§ã™ã€‚æˆ»ã‚Šå€¤ã¯`std::try_lock()`ã¨åŒã˜æ„å‘³ã§ã™ã€‚

`std::lock`ã‚„`std::try_lock`ã¨ç•°ãªã‚‹ç‚¹ã¨ã—ã¦ã€å—ã‘ã‚‹ãƒŸãƒ¥ãƒ¼ãƒ†ãƒƒã‚¯ã‚¹ã®å€‹æ•°ã¯0å€‹ã‹ã‚‰ã«ãªã£ã¦ã„ã¾ã™ã€‚ã“ã‚Œã¯ã€`unique_lock`ã¨`scoped_lock`ã‚’çµ„ã¿åˆã‚ã›ãŸ`unique_multilock`ã®æ§˜ãªæ±ç”¨ã®é–¢æ•°ï¼ˆ0å€‹ä»¥ä¸Šã®ãƒŸãƒ¥ãƒ¼ãƒ†ãƒƒã‚¯ã‚¹ã‚’å–ã‚‹ï¼‰ã‚’ä½œæˆã™ã‚‹éš›ã«ç°¡å˜ã«ä½¿ç”¨ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã§ã™ã€‚

```cpp
std::timed_mutex m1, m2;
if (std::try_lock_for(100ms, m1, m2) == -1) {
  // success
  std::scoped_lock sl(std::adopt_lock, m1, m2);
  ...
} else {
  // failed to acquire within timeout
  ...
}
```

- [C++ named requirements: TimedLockable (since C++11) - cppreference.com](https://es.cppreference.com/w/cpp/named_req/TimedLockable)
- [P3832 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/2438)

### [P3834R0 Defaulting the Compound Assignment Operators](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3834r0.html)

è¤‡åˆä»£å…¥æ¼”ç®—å­ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå®Ÿè£…ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ææ¡ˆã€‚

è¤‡åˆä»£å…¥æ¼”ç®—å­ï¼ˆ`+=`ã‚„`-=`ãªã©ï¼‰ã«ã¯å¯¾å¿œã™ã‚‹äºŒé …æ¼”ç®—å­ã‚’ç”¨ã„ãŸå…¸å‹çš„ãªå®Ÿè£…ãŒåºƒãçŸ¥ã‚‰ã‚Œã¦ãŠã‚Šã€ç•°ãªã‚‹æ„å‘³ã§ã‚ªãƒ¼ãƒãƒ¼ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã‚‹ã®ã¯ç¨€ã§ã™ã€‚ãã®ãŸã‚ã€ã“ã®å…¸å‹çš„ãªå®Ÿè£…ã‚’è¨€èªã«ãŠã‘ã‚‹ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¨ã—ã¦ã€è¤‡åˆä»£å…¥æ¼”ç®—å­ã®`default`æŒ‡å®šã«ã‚ˆã‚‹å®Ÿè£…ã«åˆ©ç”¨ã—ã‚ˆã†ã¨ã„ã†ææ¡ˆã§ã™ã€‚

ä¾‹ãˆã°æ•´æ•°å‹ã®ãƒ©ãƒƒãƒ‘ã‚¯ãƒ©ã‚¹ã®å ´åˆã€å››å‰‡æ¼”ç®—ã«å¯¾å¿œã™ã‚‹æ¼”ç®—å­ã‚’ã™ã¹ã¦å®Ÿè£…ã™ã‚‹ã¨æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™

```cpp
struct int_wrapper{
  int data_;

  int_wrapper(int in) : data_{in} {}
};

int_wrapper operator+(int_wrapper lhs, int_wrapper rhs) {
  return int_wrapper{lhs.data_ + rhs.data_};
}
int_wrapper& operator+=(int_wrapper& lhs, int_wrapper rhs){
  return lhs = lhs + rhs;
}
int_wrapper operator-(int_wrapper lhs, int_wrapper rhs) {
  return int_wrapper{lhs.data_ - rhs.data_};
}
int_wrapper& operator-=(int_wrapper& lhs, int_wrapper rhs){
  return lhs = lhs - rhs;
}
int_wrapper operator*(int_wrapper lhs, int_wrapper rhs) {
  return int_wrapper{lhs.data_ * rhs.data_};
}
int_wrapper& operator*=(int_wrapper& lhs, int_wrapper rhs){
  return lhs = lhs * rhs;
}
int_wrapper operator/(int_wrapper lhs, int_wrapper rhs) {
  return int_wrapper{lhs.data_ / rhs.data_};
}
int_wrapper& operator/=(int_wrapper& lhs, int_wrapper rhs){
  return lhs = lhs / rhs;
}
int_wrapper operator%(int_wrapper lhs, int_wrapper rhs) {
  return int_wrapper{lhs.data_ % rhs.data_};
}
int_wrapper& operator%=(int_wrapper& lhs, int_wrapper rhs){
  return lhs = lhs % rhs;
}
```

ã“ã“ã§ã®è¤‡åˆä»£å…¥æ¼”ç®—å­ã®å®Ÿè£…ã¯ã™ã¹ã¦å¯¾å¿œã™ã‚‹äºŒé …æ¼”ç®—å­ã‚’ç”¨ã„ãŸå…¸å‹çš„ãªã‚‚ã®ã§ã‚ã‚Šã€ã“ã‚Œã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¨ã—ã¦`default`å®Ÿè£…ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹å ´åˆæ¬¡ã®ã‚ˆã†ã«æ›¸ãç›´ã›ã¾ã™

```cpp
struct int_wrapper{
  int data_;

  int_wrapper(int in) : data_{in} {}
};

int_wrapper operator+(int_wrapper lhs, int_wrapper rhs) {
  return int_wrapper{lhs.data_ + rhs.data_};
}
int_wrapper operator-(int_wrapper lhs, int_wrapper rhs) {
  return int_wrapper{lhs.data_ - rhs.data_};
}
int_wrapper operator*(int_wrapper lhs, int_wrapper rhs) {
  return int_wrapper{lhs.data_ * rhs.data_};
}
int_wrapper operator/(int_wrapper lhs, int_wrapper rhs) {
  return int_wrapper{lhs.data_ / rhs.data_};
}
int_wrapper operator%(int_wrapper lhs, int_wrapper rhs) {
  return int_wrapper{lhs.data_ % rhs.data_};
}

int_wrapper& operator+=(int_wrapper& lhs, int_wrapper rhs) = default;
int_wrapper& operator-=(int_wrapper& lhs, int_wrapper rhs) = default;
int_wrapper& operator*=(int_wrapper& lhs, int_wrapper rhs) = default;
int_wrapper& operator/=(int_wrapper& lhs, int_wrapper rhs) = default;
int_wrapper& operator%=(int_wrapper& lhs, int_wrapper rhs) = default;
```

ã“ã®ææ¡ˆã¯ã€è¤‡åˆä»£å…¥æ¼”ç®—å­ã«ã¤ã„ã¦ã“ã®ã‚ˆã†ãª`default`å®Ÿè£…ã‚’å¯èƒ½ã«ã™ã‚‹ã“ã¨ã‚’ææ¡ˆã—ã¦ã„ã¾ã™ã€‚

ã“ã®ææ¡ˆã«ãŠã‘ã‚‹è¤‡åˆä»£å…¥æ¼”ç®—å­ï¼ˆä»¥ä¸‹`+=`ã§ä»£è¡¨ï¼‰ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå®Ÿè£…ã§ã¯ã€æ¬¡ã®ã‚·ã‚°ãƒãƒãƒ£ã‚’è¨±å®¹ã—ã¾ã™

```cpp
// Aã¨Bã¯åŒã˜å‹ã§ã‚ã£ã¦ã‚‚ã‚ˆã„
A& operator+=(A& lhs, const B& rhs) = default;
A& operator+=(A& lhs, B rhs)        = default;
A& operator+=(A& lhs, B&& rhs)      = default;

// P2953ãŒç¦æ­¢ã—ã‚ˆã†ã¨ã—ã¦ã„ã‚‹ã‚·ã‚°ãƒãƒãƒ£ï¼ˆã²ã¨ã¾ãšã‚µãƒãƒ¼ãƒˆã‚’ææ¡ˆ
A& operator+=(A&& lhs, const B& rhs) = default;
A& operator+=(A&& lhs, B rhs)        = default;
A& operator+=(A&& lhs, B&& rhs)      = default;
```

ã“ã‚Œã‚‰ã®ã‚·ã‚°ãƒãƒãƒ£ã¯ãã‚Œãã‚Œæ„å‘³ãŒç•°ãªã‚‹ãŸã‚ã€ã‚ã‚‹å‹`A`ã«å¯¾ã—ã¦åŒæ™‚ã«å®šç¾©ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã„ãšã‚Œã®ã‚·ã‚°ãƒãƒãƒ£ã«ãŠã„ã¦ã‚‚ã€ãã®é–¢æ•°æœ¬ä½“ã¯æ¬¡ã®ã‚ˆã†ãªå®Ÿè£…ã¨åŒç­‰ã«ãªã‚Šã¾ã™

```cpp
{
  return lhs = std::move(lhs) + std::move(rhs);
}
```

ã“ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå®£è¨€ã¯é€šå¸¸ã®ãƒ¡ãƒ³ãƒé–¢æ•°ã€ãƒ•ãƒªãƒ¼é–¢æ•°ã€æ˜ç¤ºçš„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå¼•æ•°ã‚’å–ã‚‹é–¢æ•°ã€ã§ã‚µãƒãƒ¼ãƒˆã™ã‚‹ã“ã¨ã‚’ææ¡ˆã—ã¦ã„ã¾ã™ã€‚

```cpp
struct S1{
  int value_;
  S1 operator+(S1 rhs) const { /*...*/ }
  S1& operator+=(S1 rhs) = default; // ãƒ¡ãƒ³ãƒé–¢æ•°
};

struct S2{
  int value_;
  S2 operator+(S2 rhs) const { /*...*/ }
  S2& operator+=(this S2& lhs, S2 rhs) = default; // æ˜ç¤ºçš„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå¼•æ•°ã‚’å–ã‚‹é–¢æ•° 
                                                  // å¼•æ•°å‹ã¯ãã®ã‚¯ãƒ©ã‚¹ã¨åŒã˜å‹ï¼ˆã®CVå‚ç…§ä¿®é£¾ï¼‰ã§ãªã‘ã‚Œã°ãªã‚‰ãªã„
};

struct S3{
  int value_;
  S3 operator+(S3 rhs) const { /*...*/ }
};
S3& operator+=(S3& lhs, S3 rhs) = default;  // ãƒ•ãƒªãƒ¼é–¢æ•°
```

ã“ã®ã‚ˆã†ãªè¤‡åˆæ¼”ç®—å­ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå®Ÿè£…ã«ä½¿ç”¨ã•ã‚Œã‚‹å¯¾å¿œã™ã‚‹äºŒé …æ¼”ç®—å­ã¯ã€ã“ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå®Ÿè£…ï¼ˆã®é–¢æ•°æœ¬ä½“ã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆï¼‰ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã§ã‚ã‚Œã°ã‚ˆãã€éãƒ¡ãƒ³ãƒã‚„ãƒ¡ãƒ³ãƒãªã©å®šç¾©æ–¹æ³•ã‚’å•ã„ã¾ã›ã‚“ã€‚

ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå®Ÿè£…ã«ãŠã‘ã‚‹ä¸€ç•ªå³å´ã®ä»£å…¥æ¼”ç®—å­ã®æˆ»ã‚Šå€¤å‹ãŒ`A&`ï¼ˆç¬¬ä¸€å¼•æ•°ã®ç´ ã®å‹ã®å·¦è¾ºå€¤å‚ç…§å‹ï¼‰ã§ã¯ãªã„å ´åˆã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå®Ÿè£…ã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã§`A`ãƒ»`B`ã®ã©ã¡ã‚‰ã‹ãŒå®Œå…¨å‹ã§ã¯ãªã„å ´åˆã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã¨ãªã‚Šã¾ã™ã€‚ã¾ãŸã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå®Ÿè£…ã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‹ã‚‰äº’æ›æ€§ã®ã‚ã‚‹å¼•æ•°å‹ã‚’æŒã¤å¯¾å¿œã™ã‚‹äºŒé …æ¼”ç®—å­ãŒè¦‹ã¤ã‹ã‚‰ãªã„ï¼ˆã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„ï¼‰å ´åˆã€ãã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå®Ÿè£…ã¯æš—é»™çš„ã«`delete`ã•ã‚Œã¾ã™ã€‚ã“ã‚Œã‚‰ã®äº‹ã¯ã€é€šå¸¸ã®ä»£å…¥æ¼”ç®—å­ã®`default`å®Ÿè£…ã®è¦å‰‡ã¨ä¸€è‡´ã—ã¦ã„ã¾ã™ã€‚

- [P3668R2 Defaulting Postfix Increment and Decrement Operations - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2025å¹´07æœˆï¼‰](https://onihusube.hatenablog.com/entry/2026/01/16/235211#P3668R2-Defaulting-Postfix-Increment-and-Decrement-Operations)
- [P3834 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/2439)

### [P3835R0 Contracts make C++ less safe -- full stop](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3835r0.html)

ç¾çŠ¶ã®Contractsæ©Ÿèƒ½ã¯å®‰å…¨æ€§ã‚’ä½ä¸‹ã•ã›ã‚‹ã®ã§C++26ã‹ã‚‰å‰Šé™¤ã™ã‚‹ææ¡ˆã€‚

C++26ã®Contractsæ©Ÿèƒ½ã«ã¯ã‚»ãƒãƒ³ãƒ†ã‚£ã‚¯ã‚¹ã‚’å€‹åˆ¥ã«åˆ¶å¾¡ã™ã‚‹æ–¹æ³•ãŒãªãã€ç‰¹å®šã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆç¿»è¨³å˜ä½ï¼‰ã«ã ã‘ç‰¹å®šã®ã‚»ãƒãƒ³ãƒ†ã‚£ã‚¯ã‚¹ã‚’æŒãŸã›ã‚‹ã¨ã„ã†ã“ã¨ãŒã§ãã¾ã›ã‚“ã€‚ãã‚Œã«ã‚ˆã‚Šã€ã‚ã‚‹ãƒ—ãƒ­ã‚°ãƒ©ãƒ å†…ã§å¥‘ç´„ãƒã‚§ãƒƒã‚¯ã‚’ç¢ºå®Ÿã«è¡ŒãŠã†ã¨ã™ã‚‹æ™‚ã§ã‚‚ã€ç¿»è¨³å˜ä½ã‚’è·¨ã„ã åˆ¥ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚„å…±æœ‰ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¾ã§ãã‚Œã‚’å¼·åˆ¶ã™ã‚‹æ–¹æ³•ãŒã‚ã‚Šã¾ã›ã‚“ã€‚

ã“ã‚Œã«ã‚ˆã‚Šã€ãƒ©ã‚¤ãƒ–ãƒ©ãƒªå‡ºè·å´ãŒå¥‘ç´„ãƒã‚§ãƒƒã‚¯ã‚’æœ‰åŠ¹åŒ–ã—ã¦å‡ºè·ã—ã¦ãŠã‚Šç‰¹å®šã®å¥‘ç´„é•åãŒæ¤œå‡ºã•ã‚Œã‚‹ã“ã¨ã‚’æœŸå¾…ã—ã¦ã„ã‚‹å ´åˆã§ã‚‚åˆ©ç”¨è€…å´ãŒå¥‘ç´„ãƒã‚§ãƒƒã‚¯ã‚’ã‚ªãƒ•ã«ã—ã¦ã„ã‚Œã°æ¤œå‡ºã•ã‚Œãªããªã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

ã“ã®ææ¡ˆã§ã¯ã“ã®ã“ã¨ã«ã‚ˆã£ã¦å¥‘ç´„æ©Ÿèƒ½ã«ã‚ˆã‚ŠC++ã‚³ãƒ¼ãƒ‰ã®å®‰å…¨æ€§ãŒã‚€ã—ã‚ä½ä¸‹ã™ã‚‹ã¨ã—ã¦ã€C++26ã‹ã‚‰å‰Šé™¤ã™ã‚‹ã“ã¨ã‚’ææ¡ˆã—ã¦ã„ã¾ã™ã€‚

è­°è«–ã®éç¨‹ã¯æ˜ã‚‰ã‹ã§ã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€ã“ã®ææ¡ˆã¯ãƒªã‚¸ã‚§ã‚¯ãƒˆã•ã‚Œã¦ã„ã¾ã™ã€‚

- [P3835 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/2440)

### [P3836R0 Make `optional<T&>` trivially copyable](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3836r0.html)

`std::optional<T&>`ãŒãƒˆãƒªãƒ“ã‚¢ãƒ«ã‚³ãƒ”ãƒ¼å¯èƒ½ã§ã‚ã‚‹ã“ã¨ã‚’è¦å®šã™ã‚‹ææ¡ˆã€‚

C++26ã«å°å…¥ã•ã‚ŒãŸ`std::optional<T&>`ã¯`std::optional`ã®éƒ¨åˆ†ç‰¹æ®ŠåŒ–ã¨ã—ã¦åˆ¥ã«å®Ÿè£…ã•ã‚Œã€ç‰¹ã«ãƒã‚¤ãƒ³ã‚¿ã®ãƒ©ãƒƒãƒ‘ã¨ã—ã¦å®Ÿè£…ã•ã‚Œã‚‹ã“ã¨ãŒæƒ³å®šã•ã‚Œã¾ã™ã€‚ãã®ãŸã‚`std::optional<T&>`ã¯ãƒˆãƒªãƒ“ã‚¢ãƒ«ã‚³ãƒ”ãƒ¼å¯èƒ½ã§ã‚ã‚‹ã¯ãšã§ã™ãŒã€æ˜ç¢ºã«è¦å®šã•ã‚Œã¦ã¯ã„ã¾ã›ã‚“ã€‚

æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®æ¦‚è¦ã§ã¯æ¬¡ã®ã‚ˆã†ãªã‚¯ãƒ©ã‚¹å‹ã¨ã—ã¦èª¬æ˜ã•ã‚Œã¦ã„ã¾ã™

```cpp
namespace std {
  template<class T>
  class optional;

  template<class T>
  class optional<T&> {
    ...

    public:
      // [optional.ref.ctor], constructors
      constexpr optional() noexcept = default;
      
      ...

      constexpr ~optional() = default;

      ...

    private:
      T* val = nullptr; // exposition only
  };
}
```

ã“ã‚Œã¯ã‚ãã¾ã§èª¬æ˜ã®ãŸã‚ã®ä¾‹ã§ã‚ã‚Šã€å®Ÿè£…ã¯ã“ã“ã«ãƒ¡ãƒ³ãƒã‚’è¿½åŠ ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ãŸã‚ã€ç´”ç²‹ãª`T*`ã®ãƒ©ãƒƒãƒ‘ã¨ãªã‚Šãƒˆãƒªãƒ“ã‚¢ãƒ«ã‚³ãƒ”ãƒ¼å¯èƒ½æ€§ãŒæº€ãŸã•ã‚Œã‚‹ã‹ã¯å®Ÿè£…ã®è£é‡ã«ã‚ˆã‚Šã¾ã™ã€‚ã¨ã¯ã„ãˆã€ãã‚Œã‚’è¦æ±‚ã™ã‚‹ã“ã¨ã¯éå‰°ãªåˆ¶ç´„ã«ã¯ãªã‚‰ãªã„ã¯ãšã§ã™ã€‚

ã“ã‚Œã¯å˜ã«ä»•æ§˜ã®è¦‹è½ã¨ã—ã§ã‚ã‚‹ã¨æ€ã‚ã‚Œã‚‹ãŸã‚ã€`std::optional<T&>`ãŒãƒˆãƒªãƒ“ã‚¢ãƒ«ã‚³ãƒ”ãƒ¼å¯èƒ½ã§ã‚ã‚‹ã“ã¨ã‚’è¦å®šã—ä¿è¨¼ã—ã‚ˆã†ã¨ã™ã‚‹ææ¡ˆã§ã™ã€‚

ã“ã‚Œã«ã¯

- ãƒ—ãƒ©ã‚¤ãƒãƒªãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§ã‚ã‚‹`std::optional<T>`ã¨ã®ä¸€è²«æ€§ãŒä¿ãŸã‚Œã‚‹
- ãƒˆãƒªãƒ“ã‚¢ãƒ«ã‚³ãƒ”ãƒ¼å¯èƒ½æ€§ã«ã‚ˆã‚Šã€`std::optional<T&>`ã‚’ãƒ—ãƒ­ã‚»ã‚¹é–“ã‚„CPUã¨GPUé–“ã§ã‚³ãƒ”ãƒ¼ã•ã‚Œã‚‹æ§‹é€ ä½“ã«æ ¼ç´ã§ãã‚‹
- ãƒˆãƒªãƒ“ã‚¢ãƒ«ã‚³ãƒ”ãƒ¼å¯èƒ½æ€§ã«ã‚ˆã‚Šã€`std::optional<T&>`ã¯æš—é»™çš„ãªç”Ÿå­˜æœŸé–“ã‚’æŒã¤å‹ï¼ˆ*implicit-lifetime class type*ï¼‰ã«ãªã‚Šã€ä»£å…¥æ¼”ç®—å­ã‚’ç”¨ã„ã¦å…±ç”¨ä½“å†…ã§ç”Ÿå­˜æœŸé–“ã‚’é–‹å§‹ã§ãã‚‹ã‚ˆã†ã«ãªã‚‹

ãªã©ã®ãƒ¡ãƒªãƒƒãƒˆãŒã‚ã‚Šã¾ã™ã€‚

ã“ã®å•é¡Œã«ã¯å¯¾å¿œã™ã‚‹NBã‚³ãƒ¡ãƒ³ãƒˆãŒæå‡ºã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚

- [P3836 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/2441)

### [P3838R0 Restoring Private Module Fragments](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3838r0.pdf)

ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒ•ãƒ©ã‚°ãƒ¡ãƒ³ãƒˆã®å®£è¨€ãŒæ–‡æ³•é•åã«ãªã‚‰ãªã„ã‚ˆã†ã«ã™ã‚‹ææ¡ˆã€‚

ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒ•ãƒ©ã‚°ãƒ¡ãƒ³ãƒˆã¯ä¸€ã¤ã®ãƒ•ã‚¡ã‚¤ãƒ«ã§ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã¨å®Ÿè£…ã‚’è¨˜è¿°ã™ã‚‹ãŸã‚ã®æ©Ÿèƒ½ã§ã€ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒ•ãƒ©ã‚°ãƒ¡ãƒ³ãƒˆå®£è¨€ã«ã‚ˆã£ã¦ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹éƒ¨ã¨å®Ÿè£…éƒ¨ã«åˆ†å‰²ã—ã¾ã™ã€‚

```cpp
module M;

...

module : private; // ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒ•ãƒ©ã‚°ãƒ¡ãƒ³ãƒˆå®£è¨€

...
```

P3034R1ã§ã¯ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åã¨ã—ã¦ãƒã‚¯ãƒ­ã‚’ä½¿ç”¨ã§ããªã„ã‚ˆã†ã«ãƒ—ãƒªãƒ—ãƒ­ã‚»ãƒƒã‚µã®æ–‡æ³•èª¿æ•´ãŒè¡Œã‚ã‚Œã¾ã—ãŸãŒã€ã“ã®æ™‚ã®æ–‡æ³•èª¿æ•´ã«ã‚ˆã£ã¦ã“ã®ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒ•ãƒ©ã‚°ãƒ¡ãƒ³ãƒˆã®å®£è¨€ãŒåå‰ã®ç„¡ã„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã¨ã—ã¦è§£é‡ˆã•ã‚Œã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã—ãŸã€‚

```cpp
module M:part;  // ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã®å®£è¨€
```

ç„¡åã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯è¨±å¯ã•ã‚Œãªã„ãŸã‚ã€ã“ã‚Œã¯ãƒ—ãƒªãƒ—ãƒ­ã‚»ãƒƒã‚µã‚ˆã‚Šå¾Œã®ç¿»è¨³ãƒ•ã‚§ãƒ¼ã‚ºã«ãŠã„ã¦ã‚¨ãƒ©ãƒ¼ã«ãªã‚Šã¾ã™ã€‚

ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å®£è¨€ã¯ãƒ—ãƒªãƒ—ãƒ­ã‚»ãƒƒã‚µã§ç‰¹åˆ¥ã«å‡¦ç†ã•ã‚ŒãŸå¾Œãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¨˜è¿°ã§ããªã„ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã«ã‚ˆã‚‹å®£è¨€ã«ç½®ãæ›ãˆã‚‰ã‚Œã¦C++ã‚³ãƒ¼ãƒ‰ã¨ã—ã¦ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã•ã‚Œã¾ã™ã€‚P3034R1ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å®£è¨€ã®ãƒ—ãƒªãƒ—ãƒ­ã‚»ãƒƒã‚µæ–‡æ³•ã¯ãŠãŠã‚€ã­æ¬¡ã®ã‚ˆã†ãªã‚‚ã®ã§ã—ãŸ

```
pp-module:
  export(opt) module pp-tokens(opt) ; new-line
```

ã“ã®`pp-tokens`ã®éƒ¨åˆ†ã¯æ¬¡ã®ã‚ˆã†ãªæ–‡æ³•ã§ã™

```
pp-module-name pp-module-partition(opt) pp-tokens(opt)

pp-module-partition:
  : pp-module-name-qualifier(opt) identifier
```

ã“ã®å®šç¾©ã«ç…§ã‚‰ã™ã¨ã€`module : private`ã¯åå‰ãŒç„¡ã„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã¨ã—ã¦ãƒ—ãƒªãƒ—ãƒ­ã‚»ãƒƒã‚µã§ã¯è§£é‡ˆã•ã‚Œã¦ã—ã¾ã„ã¾ã™ã€‚ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒ•ãƒ©ã‚°ãƒ¡ãƒ³ãƒˆã«ã¯å°‚ç”¨ã®ãƒ—ãƒªãƒ—ãƒ­ã‚»ãƒƒã‚·ãƒ³ã‚°ãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–å®šç¾©ãŒç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ãŒã€æ–‡æ³•çš„ã«ã¯ã“ã¡ã‚‰ã«ã‹ã‹ã£ã¦ã—ã¾ã†ã‚ˆã†ã§ã™ã€‚

ã“ã®ææ¡ˆã¯ã“ã®å•é¡Œã®è§£æ±ºã®ãŸã‚ã«æ–‡æ³•ã‚’èª¿æ•´ã—ã‚ˆã†ã¨ã™ã‚‹ã‚‚ã®ã§ã™ã€‚

ä¿®æ­£ã¯ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åã¨ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³åã®æ–‡æ³•å®šç¾©ã‚’åˆ†å‰²ã™ã‚‹ã“ã¨ã«ã‚ˆã£ã¦è¡Œã‚ã‚Œã¦ã„ã¾ã™

```
pp-module:
  export(opt) module pp-module-name(opt) pp-module-partition(opt) pp-tokens(opt) ; new-line
```

ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åãŒå¿…é ˆã§ã‚ã‚‹ã“ã¨ã¯`pp-module-name`ã®æ–‡æ³•ã§å®šç¾©ã—ã¦ã„ã¾ã™ã€‚

ãªãŠã€ã“ã®ææ¡ˆã¯ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åã‚„ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³åã‚’ãƒã‚¯ãƒ­ã§å°å…¥ã§ãã‚‹ã‚ˆã†ã«ã¯ã—ã¦ã„ã¾ã›ã‚“ã€‚

ç†ç”±ã¯æ˜ç¢ºã§ã¯ãªã„ã§ã™ãŒã€ã“ã®ææ¡ˆã¯ãƒªã‚¸ã‚§ã‚¯ãƒˆã•ã‚ŒãŸã‚ˆã†ã§ã™ã€‚

- [P3034R1 Module Declarations Shouldn't be Macros - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2024å¹´04æœˆï¼‰](https://onihusube.hatenablog.com/entry/2024/08/31/233056#P3034R1-Module-Declarations-Shouldnt-be-Macros)
- [P3838 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/2442)

### ãŠã‚ã‚Š

[ã“ã®è¨˜äº‹ã®Markdownã‚½ãƒ¼ã‚¹](https://github.com/onihusube/blog/blob/master/2026/20260131_wg21_papers_202509.md)
