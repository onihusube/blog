# ï¼»C++ï¼½WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2025å¹´07æœˆï¼‰

æ–‡æ›¸ã®ä¸€è¦§

- [JTC1/SC22/WG21 - Papers mailing2025-07](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/#mailing2025-07)

å…¨éƒ¨ã§143æœ¬ã‚ã‚Šã¾ã™ã€‚

ã‚‚ãã˜

[:contents]

### [N5012 WG21 2025-06 Sofia Admin telecon minutes](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/n5012.pdf)
### [N5016 WG21 June 2025 Sofia Hybrid meeting Minutes of Meeting](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/n5016.pdf)
### [P0085R2 Oo... adding a coherent character sequence to begin octal-literals](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p0085r2.html)
### [P0085R3 Oo... adding a coherent character sequence to begin octal-literals](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p0085r3.html)
### [P0260R18 C++ Concurrent Queues](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p0260r18.html)
### [P0260R19 C++ Concurrent Queues](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p0260r19.html)
### [P0870R6 A proposal for a type trait to detect narrowing conversions](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p0870r6.html)
### [P0870R7 A proposal for a type trait to detect narrowing conversions](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p0870r7.html)
### [P0876R21 fiber_context - fibers without scheduler](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p0876r21.pdf)
### [P1040R8 std::embed and #depend](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p1040r8.html)
### [P1306R5 Expansion statements](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p1306r5.html)
### [P2079R9 Parallel Scheduler](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p2079r9.html)
### [P2079R10 Parallel Scheduler](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p2079r10.html)
### [P2319R5 Prevent path presentation problems](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p2319r5.html)
### [P2414R8 Pointer lifetime-end zap proposed solutions](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p2414r8.pdf)
### [P2414R9 Pointer lifetime-end zap proposed solutions](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p2414r9.pdf)
### [P2664R11 Proposal to extend std::simd with permutation API](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p2664r11.html)
### [P2781R9 std::constexpr_wrapper](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p2781r9.html)
### [P2876R3 Proposal to extend std::simd with more constructors and accessors](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p2876r3.html)
### [P2929R1 simd_invoke](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p2929r1.html)
### [P2996R13 Reflection for C++26](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p2996r13.html)
### [P3008R6 Atomic floating-point min/max](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3008r6.html)
### [P3044R2 sub-string_view from string](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3044r2.pdf)
### [P3045R6 Quantities and units library](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3045r6.html)
### [P3060R3 Add std::views::indices(n)](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3060r3.html)
### [P3091R4 Better lookups for map , unordered_map, and flat_map](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3091r4.html)
### [P3096R10 Function Parameter Reflection in Reflection for C++26](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3096r10.pdf)
### [P3096R11 Function Parameter Reflection in Reflection for C++26](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3096r11.pdf)
### [P3096R12 Function Parameter Reflection in Reflection for C++26](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3096r12.pdf)
### [P3100R3 Implicit contract assertions](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3100r3.pdf)
### [P3104R4 Bit permutations](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3104r4.html)
### [P3111R7 Atomic Reduction Operations](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3111r7.html)
### [P3111R8 Atomic Reduction Operations](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3111r8.html)
### [P3149R11 async_scope -- Creating scopes for non-sequential concurrency](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3149r11.html)
### [P3179R9 C++ parallel range algorithms](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3179r9.html)
### [P3211R1 views::flat_map](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3211r1.html)
### [P3216R1 views::slice](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3216r1.html)
### [P3220R1 views::take_before](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3220r1.html)
### [P3223R2 Making std::istream::ignore less surprising](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3223r2.html)
### [P3248R4 Require [u]intptr_t](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3248r4.html)
### [P3290R3 Integrating Existing Assertions With Contracts](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3290r3.pdf)
### [P3293R3 Splicing a base class subobject](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3293r3.html)
### [P3347R3 Invalid/Prospective Pointer Operations](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3347r3.pdf)
### [P3348R4 C++26 should refer to C23 not C17](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3348r4.pdf)
### [P3383R3 mdspan.at()](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3383r3.html)
### [P3394R4 Annotations for Reflection](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3394r4.html)
### [P3411R3 any_view](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3411r3.html)
### [P3433R1 Allocator Support for Operation States](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3433r1.pdf)
### [P3439R3 Chained comparisons: Safe, correct, efficient](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3439r3.pdf)
### [P3440R1 Add n_elements named constructor to std::simd](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3440r1.html)
### [P3480R6 std::simd is a range](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3480r6.pdf)
### [P3481R4 std::execution::bulk() issues](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3481r4.html)
### [P3481R5 std::execution::bulk() issues](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3481r5.html)
### [P3491R3 define_static_{string,object,array}](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3491r3.html)
### [P3503R3 Make type-erased allocator use in promise and packaged_task consistent](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3503r3.html)
### [P3540R2 #embed Parameter offset](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3540r2.html)
### [P3552R3 Add a Coroutine Task Type](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3552r3.html)
### [P3557R3 High-Quality Sender Diagnostics with Constexpr Exceptions](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3557r3.html)
### [P3560R2 Error Handling in Reflection](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3560r2.html)
### [P3566R2 You shall not pass char* - Safety concerns working with unbounded null-terminated strings](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3566r2.pdf)
### [P3570R2 optional variants in sender/receiver](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3570r2.html)
### [P3601R0 Slides for P3407R1](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3601r0.pdf)

P3407R1ã®ç´¹ä»‹ã‚¹ãƒ©ã‚¤ãƒ‰ã€‚

P3407R1ã«ã¤ã„ã¦ã¯ä»¥å‰ã®è¨˜äº‹ã‚’å‚ç…§

- [P3407R1 Make idiomatic usage of `offsetof` well-defined - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2024å¹´10æœˆï¼‰](https://onihusube.hatenablog.com/entry/2025/08/30/234243#P3407R1-Make-idiomatic-usage-of-offsetof-well-defined)

P34701R1ã®ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ãªã©ãŒç°¡å˜ã«ç´¹ä»‹ã•ã‚Œã¦ã„ã¾ã™ã€‚

### [P3642R1 Carry-less product: std::clmul](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3642r1.html)
### [P3642R2 Carry-less product: std::clmul](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3642r2.html)
### [P3647R0 Slides for P3642R1](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3647r0.html)

P3642R1ã®ç´¹ä»‹ã‚¹ãƒ©ã‚¤ãƒ‰ã€‚

P3642R1(R2)ã«é–¢ã—ã¦ã¯ã™ãä¸Šã‚’ã”è¦§ãã ã•ã„ã€‚

ã‚­ãƒ£ãƒªãƒ¼ãƒ¬ã‚¹ä¹—ç®—æ©Ÿèƒ½ã®ã®å¿…è¦æ€§ãªã©ãŒç°¡å˜ã«èª¬æ˜ã•ã‚Œã¦ã„ã¾ã™ã€‚

### [P3655R2 zstring_view](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3655r2.html)
### [P3663R2 Future-proof submdspan-mapping](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3663r2.html)
### [P3668R2 Defaulting Postfix Increment and Decrement Operations](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3668r2.html)
### [P3669R2 Non-Blocking Support for std::execution](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3669r2.html)
### [P3687R1 Final Adjustments to C++26 Reflection](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3687r1.html)
### [P3688R1 ASCII character utilities](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3688r1.html)
### [P3690R1 Consistency fix: Make simd reductions SIMD-generic](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3690r1.pdf)
### [P3691R1 Reconsider naming of the namespace for "std::simd"](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3691r1.pdf)
### [P3692R1 How to Avoid OOTA Without Really Trying](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3692r1.pdf)
### [P3697R1 Minor additions to C++26 standard library hardening](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3697r1.html)
### [P3699R1 Rename conqueue_errc](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3699r1.html)
### [P3705R1 A Sentinel for Null-Terminated Strings](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3705r1.html)
### [P3705R2 A Sentinel for Null-Terminated Strings](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3705r2.html)
### [P3709R1 Reconsider parallel ranges::rotate_copy and ranges::reverse_copy](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3709r1.html)
### [P3709R2 Reconsider parallel ranges::rotate_copy and ranges::reverse_copy](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3709r2.html)
### [P3711R1 Safer StringViewLike Functions for Replacing char* strings](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3711r1.pdf)
### [P3713R0 2025-05 Library Evolution Poll Outcomes](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3713r0.html)

2025å¹´5æœˆã«è¡Œã‚ã‚ŒãŸã€LEWGã«ãŠã‘ã‚‹æŠ•ç¥¨ã®çµæœã€‚

æ¬¡ã®ææ¡ˆãŒæŠ•ç¥¨ã«ã‹ã‘ã‚‰ã‚Œã€C++29ã«ã‚€ã‘ã¦LWGã«è»¢é€ã•ã‚Œã¾ã—ãŸã€‚

- [P3391R0 constexpr std::format](https://wg21.link/P3391R0)

### [P3718R0 Fixing Lazy Sender Algorithm Customization, Again](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3718r0.html)

`std::excecution`ã«å¯¾ã™ã‚‹P2999R3ã®å•é¡Œç‚¹ã‚’ä¿®æ­£ã™ã‚‹ææ¡ˆã€‚

P2999ã«ã¤ã„ã¦ã¯ä»¥å‰ã®è¨˜äº‹ã‚’å‚ç…§

- [P2999R3 Sender Algorithm Customization - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2023å¹´12æœˆï¼‰](https://onihusube.hatenablog.com/entry/2024/02/29/191439#P2999R3-Sender-Algorithm-Customization)

ã“ã“ã§ã¯ä¸»ã«ã€`continues_on`ã¨`schedule_from`ã®æ‰±ã†ãƒ‰ãƒ¡ã‚¤ãƒ³ï¼ˆ`sender`ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ãŒã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã®æ¢ç´¢ã‚’è¡Œã†ç¯„å›²ãƒ»ç’°å¢ƒã€ã‚ã‚‹ã„ã¯`sender`ã®å®Œäº†åœ°ç‚¹ã®å®£è¨€ãã®ã‚‚ã®ï¼‰ã«é–¢ã™ã‚‹å•é¡Œã®ä¿®æ­£ãŒææ¡ˆã•ã‚Œã¦ã„ã¾ã™ã€‚

1. `get-domain-late()`ã«ãŠã‘ã‚‹`continues_on`ã¨`schedule_from`ã®å–ã‚Šé•ãˆ
    - ãã®èª¬æ˜ã®ä¸­ã§`continues_on`ã¨`schedule_from`ã®å½¹å‰²ãŒé€†ã«ãªã£ã¦æ‰±ã‚ã‚Œã¦ã„ã‚‹
2. é…å»¶ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã®å ´åˆã®ãƒ‰ãƒ¡ã‚¤ãƒ³ã®å•ã„åˆã‚ã›å…ˆã®é–“é•ã„
    - ã‚ã‚‹`sender`ãŒ`connect`ã•ã‚ŒãŸæ™‚ã€ãƒ‰ãƒ¡ã‚¤ãƒ³ã®å•ã„åˆã‚ã›å…ˆã‚’ãã®`sender`ã«å¯¾ã—ã¦è¡Œã£ã¦ã„ãŸ
    - ã‚ã‚‹`sender`è‡ªèº«ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ã¨å…ˆè¡Œ`sender`ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ãŒä¸€è‡´ã™ã‚‹å ´åˆã¯å•é¡Œãªã„ã‚‚ã®ã®ä¸€è‡´ã—ãªã„å ´åˆã«å•é¡Œã«ãªã‚‹
        - `continues_on`ã¯è‡ªèº«ã®å®Œäº†åœ°ç‚¹ã¨å…ˆè¡Œ`sender`ã®å®Œäº†åœ°ç‚¹ãŒç•°ãªã‚‹ï¼ˆ=ãƒ‰ãƒ¡ã‚¤ãƒ³ãŒç•°ãªã‚‹ï¼‰å¯èƒ½æ€§ãŒã‚ã‚‹ãŸã‚ã€å•é¡ŒãŒèµ·ã“ã‚Šã†ã‚‹
3. `get-domain-late()`ãŒå„ªå…ˆä½¿ç”¨ã™ã‚‹ãƒ‰ãƒ¡ã‚¤ãƒ³ãŒèª¤ã£ã¦ã„ã‚‹
    -  `get-domain-late()`ã¯æ¸¡ã•ã‚ŒãŸ`sender`ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’ã€`receiver`ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚ˆã‚Šã‚‚å„ªå…ˆã™ã‚‹
    -  `sender`ã¯è‡ªèº«ãŒã©ã“ã§å®Œäº†ã™ã‚‹ã‹ã‚’çŸ¥ã‚‹ã“ã¨ãŒã§ãã€`receiver`ã¯å‡¦ç†ï¼ˆå¾Œç¶š`sender`ï¼‰ãŒã©ã“ã§é–‹å§‹ã•ã‚Œã‚‹ã‹ã‚’çŸ¥ã£ã¦ã„ã‚‹
    -  `sender`ãŒé–‹å§‹ã•ã‚Œã‚‹å ´æ‰€ã«åŸºã¥ã„ã¦ãƒ‡ã‚£ã‚¹ãƒ‘ãƒƒãƒã‚’è¡Œã†å ´åˆã€`sender`ã§ã¯ãªã`receiver`ã«å•ã„åˆã‚ã›ã‚‹ã¹ã

`continues_on`ã¨`schedule_from`ã¯ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã®é·ç§»ã‚’æ‰±ã†`sender`ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã§ã‚ã‚‹ãŸã‚ã€ãƒ‰ãƒ¡ã‚¤ãƒ³ã®å–å¾—ã«é–¢ã—ã¦ä»–ã®ä¸€èˆ¬ã®`sender`ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¨ç•°ãªã‚‹ç‰¹åˆ¥ãªå¯¾å¿œãŒå¿…è¦ã«ãªã‚Šã¾ã™ã€‚

ã“ã“ã§ã¯æ¬¡ã®è§£æ±ºç­–ã‚’ææ¡ˆã—ã¦ã„ã¾ã™

1. ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå®Ÿè£…ã‚’æŒãŸãªã„éè»¢é€ã®ã‚¯ã‚¨ãƒªã‚’è¡Œã†ã€`get_domain_override`ã‚¯ã‚¨ãƒªã‚’è¿½åŠ 
2. `get_scheduler`ã‚¯ã‚¨ãƒªã«æ„å‘³ã‚’æŒãŸã›ã‚‹ãŸã‚ã€æ“ä½œã®ä½œæˆã«ä½¿ç”¨ã—ãŸ`receiver`ã®ç’°å¢ƒã«é–¢é€£ä»˜ã‘ã‚‰ã‚ŒãŸ`scheduler`ã®å®Ÿè¡Œã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆä¸Šã§æ“ä½œã‚’é–‹å§‹ã™ã‚‹ã“ã¨ã‚’è¦æ±‚ã™ã‚‹
3. `SCHED-ATTRS`ã¨`SCHED-ENV`ã®å®šç¾©ã‚’èª¿æ•´ã—ã€`get_domain`ã‚¯ã‚¨ãƒªã®è»¢é€ã‚’å›é¿ã™ã‚‹
4. èª¬æ˜å°‚ç”¨ã®`completion-domain`ãƒ˜ãƒ«ãƒ‘ã®å®šç¾©ã‚’ã‚’ç°¡ç´ åŒ–ã—ã€è¨­å®šå¯èƒ½ãªãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚’ä¸è¦ã«ã™ã‚‹
5. `get_domain_override(get_env(schedule_from(sch, sndr)))`ãŒ`sch`ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’è¿”ã™ã“ã¨ã‚’è¦å®š
6. `get_domain_override(get_env(continues_on(sndr, sch)))`ãŒ`sndr`ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’è¿”ã™ã“ã¨ã‚’è¦å®š
7. `get_domain_override(get_env(starts_on(sch, sndr)))`ãŒ`sch`ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’è¿”ã™ã“ã¨ã‚’è¦å®š
8. `get-domain-late(sndr, env, def)`ã¯æ¬¡ã®ã„ãšã‚Œã‹ã¨ç­‰ä¾¡ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚‹
    - `get_domain_override(get_env(sndr))`: ã“ã®å¼ãŒwell-formedã®å ´åˆ
    - `get_domain(env)`: ãã†ã§ã¯ãªãã€ã“ã®å¼ãŒwell-formedã®å ´åˆ
    - `get_domain(get_scheduler(env))`: ãã†ã§ã¯ãªãã€ã“ã®å¼ãŒwell-formedã®å ´åˆ
    - ãã‚Œä»¥å¤–ã®å ´åˆ: `def`
9.  `sync_wait`ãŠã‚ˆã³`sync_wait_with_variant`ã¯ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã‚’æ¢ç´¢ã™ã‚‹éš›ã«`get-domain-late(sndr, sync-wait-env{}, get-domain-early(sndr))`ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã‚’æŒ‡å®š

ã“ã‚Œã‚‰ã®äº‹ã¯ã€NVIDIAã®CCCLã¨ã„ã†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªå‘ã‘ã®GPUã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ©ã‚’å†å®Ÿè£…ã—ã¦ã„ã‚‹éš›ã«ç™ºè¦‹ã•ã‚ŒãŸã‚‚ã®ã®ã‚ˆã†ã§ã€CCCLãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŠã‚ˆã³stdexecã«ãŠã„ã¦ã“ã‚Œã‚‰ã®è¨­è¨ˆã¯å®Ÿè£…æ¸ˆã¿ã§ã‚ã‚‹ã‚ˆã†ã§ã™ã€‚

- [P3718 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/2350)

### [P3719R0 `std::is_vector_bool_reference`](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3719r0.html)

`std::vector<bool>`ã‚’æ¤œå‡ºã™ã‚‹å‹ç‰¹æ€§ã‚’è¿½åŠ ã™ã‚‹ææ¡ˆã€‚

ä¾‹ãˆã°æ¬¡ã®ã‚ˆã†ã«ã‚ã‚‹é–¢æ•°ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ­ãƒ¼ãƒ‰ã‚’ç‰¹å®šã®å‹ã”ã¨ã«ç”¨æ„ã—ãªã‘ã‚Œã°ãªã‚‰ãªã„å ´åˆ

```cpp
// ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºãƒ©ã‚¤ãƒ–ãƒ©ãƒªãªã©ã€å‹ã”ã¨ã®read()é–¢æ•°ã‚ªãƒ¼ãƒãƒ¼ãƒ­ãƒ¼ãƒ‰ãŒå¤§é‡ã«ã‚ã‚‹
void read(bool& b);
void read(int& b);
void read(long& b);
void read(long long& b);
// ... many more
```

ã“ã®ã¨ãã€`std::vector<bool>`ï¼ˆã®è¦ç´ å‹ï¼‰ã«ã‚‚å¯¾å¿œã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã“ã¨ã«æ°—ã¥ãã¾ã™ã€‚ç§»æ¤æ€§ã®ã‚ã‚‹æ–¹æ³•ã¨ã—ã¦æ¬¡ã®ã‚ˆã†ã«æ›¸ãã¨ãŠãŠã‚€ã­ã†ã¾ãã„ãã¾ã™

```cpp
void read(std::vector<bool>::reference b);
```

ã—ã‹ã—ã€ã‚¢ãƒ­ã‚±ãƒ¼ã‚¿ãŒã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã•ã‚ŒãŸ`std::vector<bool, MyAllocator>`ã®ã‚ˆã†ãªã‚‚ã®ã«ã“ã‚Œã§ã¯å¯¾å¿œã§ããªã„ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚ãªãœãªã‚‰ã€`std::vector<bool, MyAllocator>::reference`ã¨`std::vector<bool>::reference`ãŒå®Ÿè£…ã«ã‚ˆã£ã¦ã¯ç•°ãªã‚‹å‹ã§ã‚ã‚‹å ´åˆã‚‚ãã†ã§ãªã„å ´åˆã‚‚ã‚ã‚‹ãŸã‚ã§ã™ã€‚å®Ÿéš›ã€libstdc++ã§ã¯åŒã˜å‹ã§ã‚ã‚Šã€MSVC STLã§ã¯ç•°ãªã‚‹å‹ã«ãªã‚Šã¾ã™ã€‚

ã“ã®ã‚ˆã†ãªå ´åˆã«ã‚¢ãƒ­ã‚±ãƒ¼ã‚¿ã‚’ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆåŒ–ã™ã‚‹ã ã‘ã§ã¯ã“ã‚Œã‚’è§£æ±ºã§ãã¾ã›ã‚“ã€‚

```cpp
template <typename Alloc>
void read(std::vector<bool, Alloc>::reference b);
```

ã“ã®ã‚ˆã†ãªé–¢æ•°ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«ãŠã„ã¦ã¯ã€`Alloc`ã¯æ¨è«–ã§ããªã„ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã«ã‚ã‚‹ãŸã‚æ¨è«–ã«å¤±æ•—ã—ã¾ã™ã€‚

ã“ã®ææ¡ˆã§ã¯ã€`std::vector<bool>::reference`ã‚’ã‚¢ãƒ­ã‚±ãƒ¼ã‚¿å‹ã«ã‚ˆã‚‰ãšã«è­˜åˆ¥ã™ã‚‹ãŸã‚ã«ã€`std::is_vector_bool_reference<T>`å‹ç‰¹æ€§ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã‚’ææ¡ˆã—ã¦ã„ã¾ã™ã€‚ã“ã®ã‚ˆã†ãªå‹ç‰¹æ€§ã¯æ¨™æº–ã«ãŠã„ã¦ã‚‚èª¬æ˜å°‚ç”¨ã®`is-vector-bool-reference`ã¨ã—ã¦å­˜åœ¨ã—ã¦ã„ã‚‹ãŸã‚ã€ã“ã‚Œã‚’ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒä½¿ç”¨ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã ã‘ã§ã™ã€‚

`std::is_vector_bool_reference<T>`ã¯ã€`T`ãŒä»»æ„ã®ã‚¢ãƒ­ã‚±ãƒ¼ã‚¿å‹`Alloc`ã«å¯¾ã™ã‚‹`std::vector<bool, Alloc>::reference`å‹ã‚’ç¤ºã—ã¦ãŠã‚Šã€ã‹ã¤`std::vector<bool, Alloc>`ãŒãƒ—ãƒ­ã‚°ãƒ©ãƒ å®šç¾©ã®ç‰¹æ®ŠåŒ–ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼å®šç¾©ç‰¹æ®ŠåŒ–ï¼‰ã§ã¯ãªã„å ´åˆã«`true`ã‚’è¿”ã™ã‚‚ã®ã§ã™ã€‚

ã“ã‚Œã‚’ç”¨ã„ã‚‹ã¨ã€å…ˆã»ã©ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ­ãƒ¼ãƒ‰ã®å•é¡Œã¯ã‚·ãƒ³ãƒ—ãƒ«ã«æ›¸ãã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™

```cpp
template <typename BitReference>
    requires std::is_vector_bool_reference_v<BitReference>
void read(BitReference b);
```

- [P3719 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/2351)

### [P3721R0 Slides for P3639R0](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3721r0.html)

P3639R0ã®ç´¹ä»‹ã‚¹ãƒ©ã‚¤ãƒ‰ã€‚

P3639R0ã«ã¤ã„ã¦ã¯ä»¥å‰ã®è¨˜äº‹ã‚’å‚ç…§

- [P3639R0 The _BitInt Debate - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2025å¹´03æœˆï¼‰](https://onihusube.hatenablog.com/entry/2025/09/30/224815#P3639R0-The-_BitInt-Debate)

P3639R0ã®å†…å®¹ãŒç°¡å˜ã«è§£èª¬ã•ã‚Œã¦ã„ã¾ã™ã€‚

### [P3722R0 Slides for P3568R1](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3722r0.html)

P3568R1ã®ç´¹ä»‹ã‚¹ãƒ©ã‚¤ãƒ‰ã€‚

- [P3568R1 break label; and continue label; - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2025å¹´03æœˆï¼‰](https://onihusube.hatenablog.com/entry/2025/09/30/224815#P3568R1-break-label-and-continue-label)

ä¸»ã«æ§‹æ–‡å€™è£œã®é¸æŠéç¨‹ï¼ˆWG14 N3355ã‚’æ¡ç”¨ï¼‰ã¨ã€ãã®æ§‹æ–‡ã®å•é¡Œç‚¹ã®è§£æ¶ˆï¼ˆé‡è¤‡ãƒ©ãƒ™ãƒ«ã®è¨±å¯ï¼‰ã«ã¤ã„ã¦ã‚’èª¬æ˜ã—ã¦ã„ã¾ã™ã€‚

### [P3724R0 Integer division](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3724r0.html)

å•†ã¨å‰°ä½™ã‚’æ§˜ã€…ãªä¸¸ã‚ãƒ¢ãƒ¼ãƒ‰ã§è¨ˆç®—ã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªé–¢æ•°ã®ææ¡ˆã€‚

C++ã®ç¾åœ¨ã®`/`ã¯åˆ‡ã‚Šæ¨ã¦é™¤ç®—ã‚’è¡Œã„ã¾ã™ã€‚ã—ã‹ã—ã€ä¸¸ã‚ãƒ¢ãƒ¼ãƒ‰ã¯åˆ‡ã‚Šæ¨ã¦ã ã‘ã§ã¯ãªãä»–ã®ã‚‚ã®ã‚‚æœ‰ç”¨ã¨æ€ã‚ã‚Œã¾ã™ã€‚ã¾ãŸã€æ¨™æº–ã®ä¸¸ã‚æ–¹æ³•ã§ã¯å‰²ã‚‰ã‚Œã‚‹æ•°ãŒè² ã®å ´åˆãªã©ã«å‰°ä½™ãŒè² ã®å€¤ã«ãªã‚‹å ´åˆã‚‚ã‚ã‚Šã€ã“ã®å‹•ä½œã‚‚æœ›ã¾ã—ãã‚ã‚Šã¾ã›ã‚“ã€‚

ã“ã®ã‚ˆã†ãªå•é¡Œã‚’å›é¿ã™ã‚‹ã®ã¯éå¸¸ã«å˜ç´”ã«æ€ãˆã¾ã™ãŒã€å®Ÿéš›ã«ã¯`/`ã«å­˜åœ¨ã™ã‚‹æœªå®šç¾©å‹•ä½œã‚’å›é¿ã—ãªãŒã‚‰ä¸¸ã‚æ–¹æ³•ã‚’å¤‰æ›´ã™ã‚‹ã®ã¯é©šãã»ã©é›£ã—ãã€å°‘ã—èª¿ã¹ã¦å‡ºã¦ãã‚‹ã‚ˆã†ãªæ–¹æ³•ã¯ã»ã¨ã‚“ã©ãŒé–“é•ã£ã¦ã„ã‚‹ã‹ã€å•é¡Œã‚’æŠ±ãˆã¦ã„ã¾ã™ï¼ˆææ¡ˆæ–‡æ›¸ã«ã¯ãã®ä¾‹ãŒã„ãã¤ã‹æ²è¼‰ã•ã‚Œã¦ã„ã¾ã™ï¼‰ã€‚ã•ã‚‰ã«ã€å‰°ä½™ã«é–¢ã—ã¦ã‚‚æ•´æ•°ã‚ªãƒ¼ãƒãƒ¼ãƒ•ãƒ­ãƒ¼ã‚’å›é¿ã™ã‚‹å¿…è¦æ€§ã«ã‚ˆã£ã¦ã‚»ãƒ­æ–¹å‘ä»¥å¤–ã®ä¸¸ã‚ãƒ¢ãƒ¼ãƒ‰ã§æ­£ã—ãè¨ˆç®—ã™ã‚‹ã®ã¯å›°é›£ã§ã™ã€‚

ã“ã®ææ¡ˆã¯ä¸¸ã‚æ–¹æ³•ã‚’æŒ‡å®šã—ã¦å•†ã¨å‰°ä½™ã‚’æ±‚ã‚ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªé–¢æ•°ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã§ã€ç¾åœ¨ã®`/`ãŠã‚ˆã³`%`ã«ä»£ã‚ã£ã¦æ‰€æœ›ã®ä¸¸ã‚æ–¹æ³•ã§å•†ã¨å‰°ä½™ã‚’æ±‚ã‚ã‚‹æ–¹æ³•ã‚’æä¾›ã—ã‚ˆã†ã¨ã™ã‚‹ã‚‚ã®ã§ã™ã€‚

ææ¡ˆæ–‡æ›¸ã‚ˆã‚Šã€ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰

```cpp
const int bucket_size = 1000;
int elements = 100;

int buckets_required = elements / bucket_size; // WRONG, zero
int buckets_required = std::div_to_inf(elements, bucket_size); // OK, one bucket
```

ææ¡ˆã—ã¦ã„ã‚‹é–¢æ•°ã¯ã€ãã®åå‰ãŒå•†ã‚’è¨ˆç®—ã™ã‚‹ã‚‚ã®ã¯`div_`ã€å‰°ä½™ã‚’è¨ˆç®—ã™ã‚‹ã‚‚ã®ã¯`div_rem_`ã§å§‹ã¾ã‚Šã€ãã‚Œã«ç¶šã„ã¦ä¸¸ã‚æ–¹æ³•ãŒæŒ‡å®šã•ã‚Œã‚‹å½¢ã®å‘½åã«ãªã£ã¦ã„ã¾ã™ã€‚

```cpp
namespace std {
  template<class T>
    constexpr T div_to_zero(T x, T y);
  template<class T>
    constexpr T div_away_zero(T x, T y);
  template<class T>
    constexpr T div_to_inf(T x, T y);
  template<class T>
    constexpr T div_to_neg_inf(T x, T y);
  template<class T>
    constexpr T div_to_odd(T x, T y);
  template<class T>
    constexpr T div_to_even(T x, T y);
  template<class T>
    constexpr T div_ties_to_zero(T x, T y);
  template<class T>
    constexpr T div_ties_away_zero(T x, T y);
  template<class T>
    constexpr T div_ties_to_inf(T x, T y);
  template<class T>
    constexpr T div_ties_to_neg_inf(T x, T y);
  template<class T>
    constexpr T div_ties_to_odd(T x, T y);
  template<class T>
    constexpr T div_ties_to_even(T x, T y);

  template<class T>
    constexpr div_result<T> div_rem_to_zero(T x, T y);
  template<class T>
    constexpr div_result<T> div_rem_away_zero(T x, T y);
  template<class T>
    constexpr div_result<T> div_rem_to_inf(T x, T y);
  template<class T>
    constexpr div_result<T> div_rem_to_neg_inf(T x, T y);
  template<class T>
    constexpr div_result<T> div_rem_to_odd(T x, T y);
  template<class T>
    constexpr div_result<T> div_rem_to_even(T x, T y);
  template<class T>
    constexpr div_result<T> div_rem_ties_to_zero(T x, T y);
  template<class T>
    constexpr div_result<T> div_rem_ties_away_zero(T x, T y);
  template<class T>
    constexpr div_result<T> div_rem_ties_to_inf(T x, T y);
  template<class T>
    constexpr div_result<T> div_rem_ties_to_neg_inf(T x, T y);
  template<class T>
    constexpr div_result<T> div_rem_ties_to_odd(T x, T y);
  template<class T>
    constexpr div_result<T> div_rem_ties_to_even(T x, T y);
}
```

`div_rem_`é–¢æ•°ã®æˆ»ã‚Šå€¤å‹ã®`div_result<T>`ã¯å•†ã¨å‰°ä½™ã®å€¤ã‚’åŒæ™‚ã«ä¿æŒã—ã¦ã„ã‚‹é›†æˆä½“å‹ã§ã™ã€‚

```cpp
namespace std {
  template<class T>
  struct div_result {
    T quotient;
    T remainder;

    friend auto operator<=>(const div_result&, const div_result&) = default;
  };
}
```

éå¸¸ã«ãŸãã•ã‚“ã®é–¢æ•°ãŒã‚ã‚Šã¾ã™ãŒã€`div_`ã¨`div_rem_`ã§å¤‰ç¨®ã¯å…±é€šã—ã¦ãŠã‚Šã€ãã‚Œã¯ã™ã¹ã¦ä¸¸ã‚ãƒ¢ãƒ¼ãƒ‰ã®é•ã„ã§ã™ã€‚

- `to_zero`
    - ã‚¼ãƒ­æ–¹å‘ä¸¸ã‚
    - `/`ã¨åŒã˜å‹•ä½œ
- `away_zero`
    - ã‚¼ãƒ­ã¨é€†æ–¹å‘ã¸ã®ä¸¸ã‚
- `to_inf`
    - æ­£ã®ç„¡é™å¤§æ–¹å‘ã¸ã®ä¸¸ã‚ï¼ˆåˆ‡ã‚Šä¸Šã’
- `to_neg_inf`
    - è² ã®ç„¡é™å¤§æ–¹å‘ã¸ã®ä¸¸ã‚ï¼ˆåˆ‡ã‚Šæ¨ã¦
- `to_odd`
    - å¥‡æ•°ä¸¸ã‚
- `to_even`
    - å¶æ•°ä¸¸ã‚
- `ties_to_zero`
    - æœ€è¿‘æ¥ä¸¸ã‚ï¼ˆæœ€ã‚‚è¿‘ã„æ•´æ•°ã¸ã®ä¸¸ã‚
    - æœ€ã‚‚è¿‘ã„æ•´æ•°ãŒ2ã¤ã‚ã‚‹å ´åˆã¯ã‚¼ãƒ­æ–¹å‘ï¼ˆçµ¶å¯¾å€¤ã®å°ã•ã„ã»ã†ï¼‰ã¸ä¸¸ã‚ã‚‹
- `ties_away_zero`
    - æœ€è¿‘æ¥ä¸¸ã‚
    - æœ€ã‚‚è¿‘ã„æ•´æ•°ãŒ2ã¤ã‚ã‚‹å ´åˆã¯çµ¶å¯¾å€¤ã®å¤§ãã„ã»ã†ã¸ä¸¸ã‚ã‚‹
- `ties_to_inf`
    - æœ€è¿‘æ¥ä¸¸ã‚
    - æœ€ã‚‚è¿‘ã„æ•´æ•°ãŒ2ã¤ã‚ã‚‹å ´åˆã¯æ­£ã®ç„¡é™å¤§æ–¹å‘ï¼ˆå¤§ãã„ã»ã†ï¼‰ã¸ä¸¸ã‚ã‚‹
- `ties_to_neg_inf`
    - æœ€è¿‘æ¥ä¸¸ã‚
    - æœ€ã‚‚è¿‘ã„æ•´æ•°ãŒ2ã¤ã‚ã‚‹å ´åˆã¯è² ã®ç„¡é™å¤§æ–¹å‘ï¼ˆå°ã•ã„ã»ã†ï¼‰ã¸ä¸¸ã‚ã‚‹
- `ties_to_odd`
    - æœ€è¿‘æ¥ä¸¸ã‚
    - æœ€ã‚‚è¿‘ã„æ•´æ•°ãŒ2ã¤ã‚ã‚‹å ´åˆã¯å¥‡æ•°ã®ã»ã†ã¸ä¸¸ã‚ã‚‹
- `ties_to_even`
    - æœ€è¿‘æ¥ä¸¸ã‚
    - æœ€ã‚‚è¿‘ã„æ•´æ•°ãŒ2ã¤ã‚ã‚‹å ´åˆã¯å¶æ•°ã®ã»ã†ã¸ä¸¸ã‚ã‚‹

ã“ã‚Œã«åŠ ãˆã¦ã€é™¤ç®—ã®å‰°ä½™ã‚’å¸¸ã«è² ã®ç„¡é™å¤§æ–¹å‘ã¸ä¸¸ã‚ã‚‹`std::mod()`ã‚‚ç”¨æ„ã—ã¦ã„ã¾ã™ã€‚

```cpp
namespace std{
  template<class T>
    constexpr T mod(T x, T y);
}
```

ã“ã‚Œã¯ã€å‰°ä½™ã®ç¬¦å·ãŒå‰²ã‚‹æ•°ã¨åŒã˜ã«ãªã‚Šã€ãƒ¢ã‚¸ãƒ¥ãƒ©ãƒ¼æ¼”ç®—ã‚’æ„å›³ã™ã‚‹ã¨ã“ã‚ã§æœ‰åŠ¹ã«ä½¿ç”¨ã§ãã‚‹ãŸã‚å°‚ç”¨ã®é–¢æ•°ã¨ã—ã¦ç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚

- [P3724 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/2354)

### [P3725R0 Filter View Extensions for Input Ranges](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3725r0.pdf)

â†“

### [P3725R1 Filter View Extensions for Input Ranges](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3725r1.pdf)

`views::filter`ã®å•é¡Œç‚¹ã‚’è»½æ¸›ã—ã‚ˆã†ã¨ã™ã‚‹ææ¡ˆã€‚

P3329R0ã§æŒ‡æ‘˜ã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ã«ã€`views::filter`ã«ã¯è½ã¨ã—ç©´ãŒã„ãã¤ã‹ã‚ã‚Šã¾ã™ã€‚

- [P3329R0 Healing the C++ Filter View - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2024å¹´12æœˆï¼‰](https://onihusube.hatenablog.com/entry/2025/05/18/195724#P3329R0-Healing-the-C-Filter-View)

ã“ã®ææ¡ˆã§ã‚‚ã„ãã¤ã‹æ–°ã—ã„ã‚µãƒ³ãƒ—ãƒ«ãŒæä¾›ã•ã‚Œã¦ã„ã¾ã™ãŒã€ã“ã®ææ¡ˆã¯ãã‚Œã‚‰ã®å•é¡Œã‚’ç·©å’Œã—ã‚ˆã†ã¨ã™ã‚‹ã‚‚ã®ã§ã™ã€‚

ã“ã“ã§ã®å¤‰æ›´ã¯

- `filter_view`ã«`begin()/end()`ã®`const`ã‚ªãƒ¼ãƒãƒ¼ãƒ­ãƒ¼ãƒ‰ã‚’è¿½åŠ 
    - ä½¿ç”¨å¯èƒ½ãªã®ã¯ã€å…¥åŠ›ç¯„å›²ï¼ˆ`const`åŒ–ã—ãŸã‚‚ã®ï¼‰ãŒ`input_range`ã§ã—ã‹ãªã„å ´åˆ
- `views::filter`ã®å…¥åŠ›ç¯„å›²ãŒ`input_range`ã§ã—ã‹ãªã„å ´åˆã¯ã€ãƒ•ã‚£ãƒ«ã‚¿çµæœè¦ç´ ã®å¤‰æ›´ã‚’è¨±å¯ã™ã‚‹
    - ç¾åœ¨ã¯æœªå®šç¾©å‹•ä½œ
- `views::input_filter`ã‚¢ãƒ€ãƒ—ã‚¿ã®è¿½åŠ 
    - å…¥åŠ›ç¯„å›²ã«`views::to_input`ã‚’é©ç”¨ã—ã¦ä½¿ç”¨ã™ã‚‹`views::filter`
    - ä»–ã®å¤‰æ›´ã¨åˆã‚ã›ã¦ã€`input_range`ã«ã—ã‹ãªã‚‰ãªã„ã“ã¨ã§è¦ç´ ã®å¤‰æ›´ï¼ˆãƒ ãƒ¼ãƒ–ï¼‰ã‚’è¨±å¯ã™ã‚‹ãªã©ã€æ—¢çŸ¥ã®å•é¡Œã‚’ç·©å’Œã™ã‚‹

ãªã©ã§ã™ã€‚

ææ¡ˆæ–‡æ›¸ã‚ˆã‚Šã€ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰

```cpp
auto large = [](const auto& s) { return s.size() > 5; }; 
auto sub = coll1 | std::views::filter(large) 
                 | std::views::reverse 
                 | std::views::as_rvalue 
                 | std::ranges::to<std::vector>(); 
```

ã“ã®ã‚³ãƒ¼ãƒ‰ã¯ã€`as_rvalue`ã«ã‚ˆã£ã¦ãƒ•ã‚£ãƒ«ã‚¿å¾Œè¦ç´ ã‚’ãƒ ãƒ¼ãƒ–ã—ã¦ã„ã‚‹ã“ã¨ã«ã‚ˆã£ã¦æœªå®šç¾©å‹•ä½œã¨ãªã£ã¦ã„ã¾ã™ã€‚å®Ÿè£…ãŒåŒã˜ãƒ•ã‚£ãƒ«ã‚¿å¾Œã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã‚’2å›ä»¥ä¸Šé–“æ¥å‚ç…§ã—ãŸã‚Šã™ã‚‹ã¨å•é¡ŒãŒèµ·ã“ã‚Šã¾ã™ã€‚

```cpp
auto large = [](const auto& s) { return s.size() > 5; }; 
auto sub = coll1 | std::views::input_filter(large) 
                 | std::views::reverse 
                 | std::views::as_rvalue 
                 | std::ranges::to<std::vector>();  // ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼
```

`views::filter`ã‚’ä½¿ç”¨ã—ãŸã¾ã¾ã§ã¯ã“ã®ææ¡ˆã§ã‚‚ã“ã®å•é¡Œã¯ç·©å’Œã•ã‚Œã¾ã›ã‚“ãŒã€`views::input_filter`ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã¨ã—ã¦å•é¡ŒãŒå ±å‘Šã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

```cpp
void constIterate(const auto& coll);  // å¼•æ•°ã‚’constã§å—ã‘ã‚‹

std::vector<std::string> coll3{"Amsterdam", "Berlin", "Cologne", "LA"};

auto large = [](const auto& s) { return s.size() > 5; };
constIterate(coll3 | std::views::filter(large));  // ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼
```

ç¾åœ¨ã®`views::filter`ã¯const-iterableã§ã¯ãªã„ãŸã‚ã‚¨ãƒ©ãƒ¼ã«ãªã‚Šã¾ã™ãŒã€`views::input_filter`ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ä½¿ç”¨ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

SG9ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ã«ãŠã„ã¦ã¯å¤§ããªåå¯¾æ„è¦‹ã¯ãªã‹ã£ãŸã‚ˆã†ã§ã€LEWGã«è»¢é€ã•ã‚Œã‚‹ã“ã¨ãŒæŠ•ç¥¨ã§å¯æ±ºã•ã‚Œã¦ã„ã¾ã™ã€‚

- [P3725 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/2355)

### [P3726R0 Adjustments to Union Lifetime Rules](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3726r0.html)

ãƒˆãƒªãƒ“ã‚¢ãƒ«ãªå…±ç”¨ä½“ã‚’å®šæ•°å¼ã§ä½¿ç”¨å¯èƒ½ã«ã™ã‚‹ãŸã‚ã«åˆ¶é™ã‚’ç·©å’Œã™ã‚‹ææ¡ˆã€‚

P3074R7ã§ã¯ã€å…±ç”¨ä½“ã‚’ä½¿ç”¨ã—ãŸæ¬¡ã®ã‚ˆã†ãªå®Ÿè£…ã«ã‚ˆã‚‹`inplace_vector`ã‚’å®šæ•°å¼ã§ä½¿ç”¨å¯èƒ½ã«ã™ã‚‹ãŸã‚ã®å…±ç”¨ä½“ã®ãƒ«ãƒ¼ãƒ«ã®èª¿æ•´ãŒè¡Œã‚ã‚Œã¾ã—ãŸã€‚

```cpp
template <typename T, size_t N>
struct FixedVector {
  union { T storage[N]; };
  size_t size = 0;

  constexpr FixedVector() = default;

  constexpr ~FixedVector() {
    std::destroy(storage, storage + size);
  }

  constexpr auto push_back(T const& v) -> void {
    ::new (storage + size) T(v);
    ++size;
  }
};

constexpr auto silly_test() -> size_t {
  FixedVector<std::string, 3> v;
  v.push_back("some sufficiently longer string");
  return v.size;
}

static_assert(silly_test() == 1);
```

ã“ã“ã§ã®`union { T storage[N]; };`ã®å½¹å‰²ã¯å®šæ•°å¼ã§ä½¿ç”¨å¯èƒ½ãªé…å»¶åˆæœŸåŒ–ç”¨ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã§ã™ã€‚ä»¥å‰ã¯ã“ã‚ŒãŒå®šæ•°å¼ã§ä½¿ç”¨å¯èƒ½ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸãŒã€P3074R7ã«ã¦å®šæ•°å¼ã§ä½¿ç”¨å¯èƒ½ã«ãªã‚‹ã‚ˆã†ã«ã„ãã¤ã‹ã®èª¿æ•´ãŒåŠ ãˆã‚‰ã‚Œã€C++26ã§åˆ©ç”¨å¯èƒ½ã«ãªã£ã¦ã„ã¾ã™ã€‚

P3074R7ã®å¤‰æ›´ã¯ãŠãŠã‚€ã­æ¬¡ã®ã‚‚ã®ã§ã™

- å…±ç”¨ä½“ã«ãƒˆãƒªãƒ“ã‚¢ãƒ«ãªãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã¨ãƒˆãƒªãƒ“ã‚¢ãƒ«ãªãƒ‡ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‚’æš—é»™çš„ã«å®šç¾©ã•ã›ã‚‹
- å…±ç”¨ä½“ã®æœ€åˆã®ãƒ¡ãƒ³ãƒãŒimplicit-lifetime typeã§ã‚ã‚‹å ´åˆã€ãã®ãƒ¡ãƒ³ãƒã®ç”Ÿå­˜æœŸé–“ã‚’æš—é»™çš„ã«é–‹å§‹ã™ã‚‹

ã—ã‹ã—ã€ãã®å¾Œå¯„ã›ã‚‰ã‚ŒãŸãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã«ã‚ˆã£ã¦ã“ã‚Œã ã‘ã§ã¯ç›®çš„ã‚’é”æˆã§ããªã„ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã—ãŸã€‚

å•é¡Œã¯ã€æ¬¡ã®ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ãŒP3074R7ã«ã‚ˆã£ã¦æŒ¯ã‚‹èˆã„ãŒå¤‰ã‚ã‚‹ã“ã¨ã§ã™

```cpp
union U { int a, b; };

template<U u>
class X {};

constexpr U make() { U u; return u; }

void f(X<make()>) {}
```

P3047R7ä»¥å‰ã¯ã€`X<make()>`ã®NTTPã¯ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ¡ãƒ³ãƒã‚’æŒãŸãªã„å…±ç”¨ä½“ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã ã£ãŸã®ã§NTTPã¨ã—ã¦æœ‰åŠ¹ã§ã—ãŸã€‚ã—ã‹ã—ã€P3074R7ã®å¤‰æ›´ã«ã‚ˆã£ã¦ã“ã®`u`ã¯æœ€åˆã®ãƒ¡ãƒ³ãƒã®ç”Ÿå­˜æœŸé–“æš—é»™çš„çš„ã«é–‹å§‹ã•ã‚Œã‚‹ã“ã¨ã«ã‚ˆã£ã¦ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ¡ãƒ³ãƒã‚’æŒã¤ãŸã‚ã€NTTPã¨ã—ã¦ä½¿ç”¨ã§ããšã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã¨ãªã‚Šã¾ã™ã€‚

ã¾ãŸã€ä»®ã«ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ãŒé€šã£ãŸã¨ã™ã‚‹ã¨ã€ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ¡ãƒ³ãƒã‚’æŒã¤ã“ã¨ã‹ã‚‰ãƒãƒ³ã‚°ãƒ«åã‚’å¤‰æ›´ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ãŸã‚ã€ABIç ´æå¼•ãèµ·ã“ã™å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ¡ãƒ³ãƒã‚’æŒã¤ã‚ˆã†ã«ãªã‚‹ã¨NTTPã¨ã—ã¦é©æ ¼ã§ãªããªã‚‹ã®ã¯å°‘ã—è¤‡é›‘ã§ã™ãŒã€ã¾ãš[expr.const]ã«ã‚ã‚‹å®šæ•°å¼ã®åˆ¶é™ã®ã†ã¡ã€*prvalue*å¼ã®çµæœã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®æ§‹æˆè¦ç´ ã®å€¤ï¼ˆ*constituent value*ï¼‰ã«ã¤ã„ã¦ã®åˆ¶é™ãŒã‚ã‚Šã€ãã“ã§ã¯ã‚¹ã‚«ãƒ©å‹ã®æ§‹æˆè¦ç´ ã®å€¤ã¯ä¸å®šå€¤ã‚‚ã—ãã¯erroneous valueã‚’æŒã£ã¦ã„ã¦ã¯ãªã‚‰ãªã„ã€ã¨ã„ã†è¦å®šãŒã‚ã‚Šã¾ã™ã€‚

ãã—ã¦ã€ã“ã®æ§‹æˆè¦ç´ ã®å€¤ã®å®šç¾©ã¯æ¬¡ã®ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™

> The constituent values of an object `o` are
> 
>   - if `o` has scalar type, the value of `o`;
>   - otherwise, the constituent values of any direct subobjects of `o` other than inactive union members.

å•é¡Œã¯2ã¤ç›®ã®æ¡ä»¶ã§ã€å…±ç”¨ä½“å‹ã‚’å«ã‚€ã‚¯ãƒ©ã‚¹å‹ã®å ´åˆã€æ§‹æˆè¦ç´ ã®å€¤ã¨ã¯ãã®ã‚µãƒ–ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®æ§‹æˆè¦ç´ ã®å€¤ã®é›†åˆã®äº‹ã‚’è¨€ã£ã¦ãŠã‚Šã€ãã“ã«ã¯å…±ç”¨ä½“ã®éã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ¡ãƒ³ãƒã¯å«ã¾ã‚Œã¾ã›ã‚“ã€‚

å…±ç”¨ä½“å…ˆé ­ã®implicit-lifetime typeãƒ¡ãƒ³ãƒã®ç”Ÿå­˜æœŸé–“ãŒé–‹å§‹ã•ã‚Œã‚‹ã¨ãã®ãƒ¡ãƒ³ãƒãŒã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ¡ãƒ³ãƒã«ãªã‚‹ã‚‚ã®ã®ã€ãã®å€¤ã¯åˆæœŸåŒ–ã•ã‚Œã¦ã„ãªã„ãŸã‚ä¸å®šå€¤ã‚’æŒã¤ã“ã¨ã«ãªã‚Šã¾ã™ã€‚

ã“ã‚Œã«ã‚ˆã£ã¦ã€ã‚¹ã‚«ãƒ©å‹ãƒ¡ãƒ³ãƒã®ã¿ã§æ§‹æˆã•ã‚Œã¦ã„ã‚‹å…±ç”¨ä½“ãŒNTTPï¼ˆã¨ã„ã†ã‹å®šæ•°å¼å†…*prvalue*ï¼‰ã¨ã—ã¦ä½¿ç”¨ã•ã‚Œã‚‹éš›ã®æŒ¯ã‚‹èˆã„ãŒå¤‰åŒ–ã—ã¦ã„ã¾ã™ã€‚

ã“ã®ãŸã‚ã€P3047R7ã®ç›®çš„ã¯ã¾ãŸé”æˆã•ã‚Œã¦ã„ã¾ã›ã‚“

```cpp
constexpr std::inplace_vector<int, 4> v = {1, 2}; // ng
```

ã“ã®ã‚³ãƒ¼ãƒ‰ã¯å…ˆã»ã©ã®`FixedVector`ã®å®Ÿè£…ã¨åŒã˜å®Ÿè£…ã«ãªã‚‹å ´åˆã€`union { int storage[4]; }`ãŒä½¿ç”¨ã•ã‚Œã‚‹ã‚‚ã®ã®ã€æœ€åˆã®2ã¤ã®è¦ç´ ã ã‘ãŒåˆæœŸåŒ–ã•ã‚Œã¦æ®‹ã‚Šã®è¦ç´ ã¯åˆæœŸåŒ–ã•ã‚Œãªã„ã“ã¨ã§ä¸å®šå€¤ã‚’æŒã¡ã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã«ãªã‚Šã¾ã™ã€‚

ã“ã“ã§ã®å•é¡Œã¯æ¬¡ã®2ç‚¹ã§ã™

1. å…±ç”¨ä½“ãŒå®šæ•°å¼ã§æ„å›³ã—ãªã„ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ¡ãƒ³ãƒã‚’æŒã£ã¦ã—ã¾ã†ã“ã¨
2. æ§‹æˆè¦ç´ ã®å€¤ã®åˆ¶é™

ã“ã®ææ¡ˆã¯ã“ã‚Œã‚‰2ã¤ã®å•é¡Œã‚’ãã‚Œãã‚Œè§£æ±ºã—ã‚ˆã†ã¨ã™ã‚‹ã‚‚ã®ã§ã™ã€‚

1ã¤ç›®ã®å•é¡Œã«ã¤ã„ã¦ã¯P3047R7ã®å¤‰æ›´ã‚’revertã—ã€ãƒˆãƒªãƒ“ã‚¢ãƒ«ãªå…±ç”¨ä½“ã®implicit-lifetime typeãƒ¡ãƒ³ãƒã®ç”Ÿå­˜æœŸé–“ãŒè‡ªå‹•é–‹å§‹ã•ã‚Œã‚‹ãƒã‚¤ãƒ³ãƒˆã‚’placment newã¾ã§é…å»¶ã—ã¾ã™ã€‚


```cpp
template <typename T, size_t N>
struct FixedVector {
  union { T storage[N]; };  // P3047R7ã¯ã“ã“ã§æš—é»™çš„ã«storageã®ç”Ÿå­˜æœŸé–“ãŒé–‹å§‹ã•ã‚Œã¦ã„ãŸ
  size_t size = 0;

  constexpr FixedVector() = default;

  constexpr ~FixedVector() {
    std::destroy(storage, storage + size);
  }

  constexpr auto push_back(T const& v) -> void {
    ::new (storage + size) T(v);  // ã“ã®ææ¡ˆã§ã¯ã€ã“ã®ã‚¢ã‚¯ã‚»ã‚¹æ™‚ã«æš—é»™çš„ã«storageã®ç”Ÿå­˜æœŸé–“ã‚’é–‹å§‹ã™ã‚‹
    ++size;
  }
};

constexpr auto silly_test() -> size_t {
 FixedVector<std::string, 3> v;
 v.push_back("some sufficiently longer string");
 return v.size;
}

static_assert(silly_test() == 1);
```

å…ƒã€…ã®å•é¡Œã®ä¸€éƒ¨ã¯ã€placement newã®éš›ã«`storage`ãƒ¡ãƒ³ãƒã«ã‚¢ã‚¯ã‚»ã‚¹ã—ãŸã¨ãã«ãã®ç”Ÿå­˜æœŸé–“ãŒé–‹å§‹ã•ã‚Œã¦ã„ãªã„äº‹ã ã£ãŸã®ã§ã€placement newã‚¢ã‚¯ã‚»ã‚¹æ™‚ã«ãã‚ŒãŒæš—é»™çš„ã«è¡Œã‚ã‚Œã‚‹ã‚ˆã†ã«ãªã‚‹ã“ã¨ã§å…ƒã®å•é¡Œã‚’è§£æ±ºã§ãã¾ã™ã€‚ãã—ã¦ã€`union U { int a, b; };`ã®æ§˜ãªå…±ç”¨ä½“ã¯å†ã³ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ¡ãƒ³ãƒã‚’æŒãŸãªããªã‚Šã¾ã™ã€‚

2ã¤ç›®ã®å•é¡Œã«ã¤ã„ã¦ã¯ã€æ§‹æˆè¦ç´ ã®å€¤ã®å®šç¾©ã‚’å¤‰æ›´ã—ã¦ã€å…±ç”¨ä½“å†…é…åˆ—ã®å„è¦ç´ ã®åˆæœŸåŒ–çŠ¶æ…‹ã«ã¤ã„ã¦æ­¯æŠœã‘ã‚’è¨±å®¹ã™ã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€å…±ç”¨ä½“å†…é…åˆ—ã®ã©ã“ã‹ã®è¦ç´ ãŒåˆæœŸåŒ–ã•ã‚Œã¦ã„ãªãã¦ã‚‚ã€ãã‚Œã¯éã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ¡ãƒ³ãƒã¨åŒæ§˜ã«æ§‹æˆè¦ç´ ã®å€¤ã¨ã—ã¦ã‚«ã‚¦ãƒ³ãƒˆã•ã‚Œç„¡ããªã‚‹ãŸã‚ã€é…åˆ—ãã®ã‚‚ã®ã®ç”Ÿå­˜æœŸé–“ãŒé–‹å§‹ã•ã‚Œã¦ã„ã‚‹å ´åˆã«ã‚‚å…±ç”¨ä½“ã®æ§‹æˆè¦ç´ ã®å€¤å†…ã«ä¸å®šå€¤ãŒå«ã¾ã‚Œãªããªã‚Šã¾ã™ã€‚

ã“ã‚Œã‚‰ã®ä¿®æ­£ï¼ˆç‰¹ã«2ã¤ç›®ï¼‰ã«ã‚ˆã£ã¦ã€å…ˆã»ã©ã®`inplace_vector`ã®ä¾‹ã¯å®šæ•°å¼ã§å‹•ä½œã™ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

```cpp
constexpr std::inplace_vector<int, 4> v = {1, 2}; // okã€ã“ã®ææ¡ˆå¾Œ
```

ã“ã®ææ¡ˆã¯ã“ã®è¨˜äº‹åŸ·ç­†æ™‚ç‚¹ï¼ˆC++26ã®æ©Ÿèƒ½å‡çµå¾Œï¼‰ã§ã‚‚ã¾ã æ¡æŠå‰ã§ã™ãŒã€ãƒˆãƒªãƒ“ã‚¢ãƒ«ãªå…±ç”¨ä½“ã«ã¤ã„ã¦å¤šæ•°ã®NBã‚³ãƒ¡ãƒ³ãƒˆãŒå¯„ã›ã‚‰ã‚Œã¦ãŠã‚Šã€ãã®è§£æ±ºã®ãŸã‚ã«é…ã‚Œã¦C++26ã«æ¡æŠã•ã‚Œã‚‹äºˆå®šã§ã™ã€‚

- [P3074R7 trivial unions (was `std::uninitialized<T>`) - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2025å¹´03æœˆï¼‰](https://onihusube.hatenablog.com/entry/2025/09/30/224815#P3074R7-trivial-unions-was-stduninitialized)
- [P3726 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/2356)

### [P3727R0 Update Annex E based on Unicode 15.1 UAX #31](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3727r0.pdf)

C++æ¨™æº–æ–‡æ›¸ã®Annex Eï¼ˆUAX31ã¸ã®å‚ç…§ï¼‰ã®è¨˜è¿°ã‚’ã‚’Unicode 15.1ã«åˆã‚ã›ã¦æ›´æ–°ã™ã‚‹ææ¡ˆã€‚

èƒŒæ™¯ç­‰ã¯P3717R0ã‚’å‚ç…§

- [P3717R0 Update Annex E onto Unicode 16 - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2025å¹´05æœˆï¼‰](https://onihusube.hatenablog.com/entry/2025/12/16/230316#P3717R0-Update-Annex-E-onto-Unicode-16)

ã“ã®ææ¡ˆã§ã¯ã€P3717ã¨ã¯ç•°ãªã‚Šã€Unicode 16ã§ã¯ãªãUnicode 15.1ã§ã®UAX31ã®å½¢å¼ã«åˆã‚ã›ã¦æ›´æ–°ã—ã‚ˆã†ã¨ã—ã¦ã„ã¾ã™ã€‚ä¸»ãªå¤‰æ›´ã¯P3717åŒæ§˜ã«ã€ŒUAX31-R1a Restricted Format Charactersã€ã«é–¢ã™ã‚‹è¨˜è¿°ã‚’å‰Šé™¤ã™ã‚‹ã“ã¨ã§ã€ã“ã¡ã‚‰ã®ææ¡ˆã¯[CWG Issue 2843](https://cplusplus.github.io/CWG/issues/2843.html)ã®è§£æ±ºã®ã¿ã‚’ï¼ˆUnicode 15.1ã§ï¼‰è¡Œã†ã“ã¨ã‚’æ„å›³ã—ãŸã‚‚ã®ã®æ§˜ã§ã™ã€‚

SG16ãªã©ã§ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®çµæœã€çµå±€[CWG Issue 2843](https://cplusplus.github.io/CWG/issues/2843.html)ã®å¤‰æ›´ã‚’æ¡ç”¨ã™ã‚‹ã“ã¨ã«ãªã£ãŸã‚ˆã†ã§ã™ã€‚

- [CWG Issue 2843. Undated reference to Unicode makes C++ a moving target](https://cplusplus.github.io/CWG/issues/2843.html)
- [P3727 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/2357)

### [P3729R0 Aligning span and string_view](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3729r0.pdf)

`std::span`ã¨`std::string_view`ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å…±é€šåŒ–ã‚’å›³ã‚‹ææ¡ˆã€‚

`std::span`ã¨`std::string_view`ã¯ãã‚Œãã‚Œã€é…åˆ—/æ–‡å­—åˆ—ã®ãƒ“ãƒ¥ãƒ¼ã¨ãªã‚‹ã‚¯ãƒ©ã‚¹ã§ã™ã€‚ã¨ã¯ã„ãˆã€`std::string_view`ãŒæ–‡å­—åˆ—ã«ç‰¹åŒ–ã—ã¦ã„ã‚‹ã ã‘ã§ã€äºŒã¤ã®ã‚¯ãƒ©ã‚¹ã®å®Ÿè£…ã¯ã»ã¼åŒã˜ã«ãªã‚Šã€ãã®æ‰±ã„ã‚„æ€§è³ªã‚‚ã‹ãªã‚Šå…±é€šã—ã¦ã„ã¾ã™ã€‚

ã—ã‹ã—ã€`std::span`ã¨`std::string_view`ã¯æ¨™æº–ã‚³ãƒ³ãƒ†ãƒŠã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã«æº–æ‹ ã—ãŸã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã«ã¤ã„ã¦ã¯å…±é€šã—ã¦ã„ã‚‹ã‚‚ã®ã®ã€ãã‚Œä»¥å¤–ã®éƒ¨åˆ†ã¯ãã‚Œã»ã©å…±é€šã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã«ã¯ãªã£ã¦ã„ã¾ã›ã‚“ã€‚

ã“ã®ææ¡ˆã¯ã€`std::span`ã¨`std::string_view`ã‹ã‚‰ãã‚Œãã‚Œã«ã ã‘ã—ã‹ãªã„ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã«ã¤ã„ã¦ã€ç‰¹ã«ã‚µãƒ–ã‚»ãƒƒãƒˆåŒ–APIã®å…±é€šåŒ–ã‚’è¡ŒãŠã†ã¨ã™ã‚‹ã‚‚ã®ã§ã™ã€‚

ææ¡ˆã™ã‚‹ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®è¿½åŠ ã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™

```cpp
template<typename charT, typename traits = char_traits<charT>> 
struct basic_string_view { 
  ...

  // runtime subsetting: 
  constexpr basic_string_view substr(size_type pos = 0, size_type n = npos) const; 
  constexpr basic_string_view subview(size_type pos = 0, size_type n = npos) const; 
  constexpr basic_string_view first(size_type count) const; // ã“ã®ææ¡ˆ
  constexpr basic_string_view last(size_type count) const;  // ã“ã®ææ¡ˆ
  
  // in place shrinking: 
  constexpr void remove_prefix(size_type n); 
  constexpr void remove_suffix(size_type n); 

  ...
};

template<typename T, size_type E = dynamic_extent> 
struct span { 
  ...

  // compile-time subsetting: 
  template<size_t Offset, size_t Count = dynamic_extent> 
  constexpr span<T, /*see below*/> subspan() const; 
  template<size_t Count> 
  constexpr span<T, Count> first() const; 
  template<size_t Count> 
  constexpr span<T, Count> last() const; 

  // runtime subsetting: 
  constexpr span subspan(size_type pos = 0, size_type n = dynamic_extent) const; 
  constexpr span first(size_type count) const; 
  constexpr span last(size_type count) const; 

  // in place shrinking: 
  constexpr void remove_prefix(size_type n) requires(E == dynamic_extent); // ã“ã®ææ¡ˆ
  constexpr void remove_suffix(size_type n) requires(E == dynamic_extent); // ã“ã®ææ¡ˆ

  ...
};
```

ã™ãªã‚ã¡ã€`std::span` -> `std::string_view`ã«ã¯

- `.first(n)` : å…ˆé ­`n`æ–‡å­—ã®`string_view`ã‚’è¿”ã™
- `.last(n)` : å¾Œã‚`n`æ–‡å­—ã®`string_view`ã‚’è¿”ã™

ãŒç§»æ¤ã•ã‚Œã€`std::string_view` -> `std::span`ã«ã¯

- `.remove_prefix(n)` : å…ˆé ­`n`è¦ç´ ã®`span`ã‚’è¿”ã™
- `.remove_suffix(n)` : å¾Œã‚`n`è¦ç´ ã®`span`ã‚’è¿”ã™

ãŒç§»æ¤ã•ã‚Œã¾ã™ã€‚

ã•ã‚‰ã«ã€`std::string_view`ã«é–¢ã™ã‚‹å¤‰æ›´ã¯`std::string`ã«å¯¾ã—ã¦ã‚‚é©ç”¨ã•ã‚Œã¾ã™

```cpp
template<typename charT, typename traits = char_traits<charT>, typename Allocator = allocator<charT>> 
struct basic_string { 
  ...

  //runtime subsetting: 
  constexpr basic_string substr(size_type pos = 0, size_type n = npos) const; 
  constexpr basic_string_view<charT, traits> subview(size_type pos = 0, size_type n = npos) const; 
  constexpr basic_string_view<charT, traits> first(size_type count) const; // ã“ã®ææ¡ˆ
  constexpr basic_string_view<charT, traits> last(size_type count) const;  // ã“ã®ææ¡ˆ
  
  ...
};
```

`std::string_view v`ã€`std::span<T> p`ã€`std::string s`ãŒã‚ã‚‹ã¨ã—ã¦

<table>
<tr>
<th>ç¾åœ¨</th>
<th>ã“ã®ææ¡ˆ</th>
</tr>
<tr>
<td valign="top">

```cpp
// removing leading elements 
v.remove_prefix(5); 
p = p.subspan(5); 
s.erase(s.begin(), s.begin() + 5); 

// removing trailing elements 
v.remove_suffix(3); 
p = p.subspan(0, p.size() - 3); 
s.erase(s.end() - 3, s.end());
```

</td>
<td valign="top">

```cpp
// removing leading elements 
v.remove_prefix(5); 
p.remove_prefix(5); 
//s.remove_prefix(5); ææ¡ˆã—ãªã„

// removing trailing elements 
v.remove_suffix(3); 
p.remove_suffix(3); 
//s.remove_suffix(3); ææ¡ˆã—ãªã„
```

</td>
</tr>
</table>

<table>
<tr>
<th>ç¾åœ¨</th>
<th>ã“ã®ææ¡ˆ</th>
</tr>
<tr>
<td valign="top">

```cpp
// getting leading elements 
auto l4v = v.subview(0, 4);
auto l4p = p.first(4);
auto l4s = s.subview(0, 4);

// getting trailing elements 
auto t2v = v.subview(v.size() - 2);
auto t2p = p.last(2);
auto t2s = s.subview(s.size() - 2);
```

</td>
<td valign="top">

```cpp
// getting leading elements 
auto l4v = v.first(4);
auto l4p = p.first(4);
auto l4s = s.first(4);

// getting trailing elements 
auto t2v = v.last(2);
auto t2p = p.last(2);
auto t2s = s.last(2);
```

</td>
</tr>
</table>

- [P3729 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/2358)

### [P3730R0 Slides for P3104R3](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3730r0.html)

P3104R3ã®ç´¹ä»‹ã‚¹ãƒ©ã‚¤ãƒ‰ã€‚

- [P3104R3 Bit permutations - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2025å¹´03æœˆï¼‰](https://onihusube.hatenablog.com/entry/2025/09/30/224815#P3104R3-Bit-permutations)

P3104R3ã§ææ¡ˆã•ã‚Œã¦ã„ã‚‹4ã¤ã®ãƒ“ãƒƒãƒˆæ“ä½œé–¢æ•°ã®ç°¡å˜ãªèª¬æ˜ãŒè¡Œã‚ã‚Œã¦ã„ã¾ã™ã€‚

### [P3731R0 `#embed` Preprocessor Parameter Order](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3731r0.html)

`#embed`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ã®å¼•æ•°æŒ‡å®šã«ã¤ã„ã¦é †ç•ªã‚’æŒ‡å®šã™ã‚‹ã‚ˆã†ã«ã™ã‚‹ææ¡ˆã€‚

`#embed`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ã¯èª­ã¿è¾¼ã‚€ãƒã‚¤ãƒŠãƒªãƒªã‚½ãƒ¼ã‚¹ã«ã¤ã„ã¦ã€èª­ã¿è¾¼ã¿ã®ä»•æ–¹ãªã©ã«ã¤ã„ã¦ã‚’æŒ‡å®šã™ã‚‹4ã¤ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒã‚ã‚Šã¾ã™ã€‚ãã®ã†ã¡`limit`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯èª­ã¿è¾¼ã‚€ã‚µã‚¤ã‚ºã‚’åˆ¶é™ã™ã‚‹ã‚‚ã®ã§ã™ã€‚

```cpp
constexpr const unsigned char sound_signature[] = {
// a hypothetical resource
#embed <sdk/jump.wav> limit(2+2)
};
```

ã¾ãŸã€P3540ã§ææ¡ˆä¸­ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¨ã—ã¦`offset`ãŒã‚ã‚Šã€ã“ã‚Œã¯èª­ã¿å–ã‚‹ãƒã‚¤ãƒŠãƒªãƒªã‚½ãƒ¼ã‚¹ã®é–‹å§‹ä½ç½®ã‚’æŒ‡å®šã™ã‚‹ã‚‚ã®ã§ã™ã€‚

```cpp
constexpr const unsigned char truncated_sound_signature[] = {
// a hypothetical resource
#embed <sdk/jump.wav> offset(2) limit(2)
};
```

ã“ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯æ’ä»–çš„ã§ã¯ãªãã€åŒæ™‚ã«æŒ‡å®šã—ã¦åŠ¹æœã‚’é‡è¤‡ã•ã›ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ãã®éš›ã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®æŒ‡å®šé †ã«ã¯æ„å‘³ãŒãªãã€ã©ã®ã‚ˆã†ãªé †åºã§æŒ‡å®šã—ã¦ã‚‚åŒã˜å‹•ä½œã‚’ã—ã¾ã™ã€‚

ã—ã‹ã—ã€ï¼ˆãŠãã‚‰ãP3540ã®è­°è«–ä¸­ã«ï¼‰ã“ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®æŒ‡å®šé †åºã€ç‰¹ã«`limit`ã¨`offset`ã®é †åºãŒæ··ä¹±ã‚’ã‚‚ãŸã‚‰ã™å¯èƒ½æ€§ãŒã‚ã‚‹ã¨ã®æŒ‡æ‘˜ãŒã‚ã£ãŸã‚ˆã†ã§ã™ã€‚ãã®éš›å¯„ã›ã‚‰ã‚ŒãŸæ„è¦‹ã®ä¸­ã«ã¯ã€`limit`ã®å¾Œã«`offset`ã‚’æŒ‡å®šã•ã‚ŒãŸå ´åˆã«ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã‚’å‡ºã™ã¹ãã€ã¨ã„ã†ã‚‚ã®ã‚‚ã‚ã£ãŸã‚ˆã†ã§ã™ã€‚

ã“ã®ææ¡ˆã¯ãã‚Œã‚’å—ã‘ã¦ã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®é †ç•ªã‚’è¦å®šã™ã‚‹ãŸã‚ã®æ–‡è¨€ã‚’æä¾›ã—ã‚ˆã†ã¨ã™ã‚‹ã‚‚ã®ã§ã™ã€‚ã“ã“ã§ã¯ã€æ¬¡ã®äºŒç¨®é¡ã®æ–‡è¨€ãŒç”¨æ„ã•ã‚Œã¦ã„ã¾ã™

1. ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®é †ç•ªã‚’è¦å®šã—ã€é•åã‚’ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã¨ã™ã‚‹æ–‡è¨€
2. ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®é †ç•ªã‚’è¦å®šã—ã€é•åã‚’è­¦å‘Šã¨ã™ã‚‹ã“ã¨ã‚’æ¨å¥¨ã™ã‚‹æ–‡è¨€

ææ¡ˆã§ã¯ã“ã®é¸æŠã‚’å§”å“¡ä¼šã®æ±ºå®šã«å§”ã­ã¦ã„ã¾ã™ã€‚

ã„ãšã‚Œã®æ–‡è¨€ã§ã‚‚ã€ã“ã“ã§ææ¡ˆã—ã¦ã„ã‚‹é †åºä»˜ã‘ã¯æ¬¡ã®ã‚ˆã†ãªã‚‚ã®ã§ã™

- `offset`ã¯`limit`ã®å‰
- `limit`ã¯`if_empty, prefix, suffix`ã®å‰
- `limit`ãŒãªã„å ´åˆã§ã‚‚ã€`offset`ã¯`if_empty, prefix, suffix`ã®å‰

`#embed`ã¯C23ã§å…ˆã‚“ã˜ã¦æ¡æŠã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€clang/gccã®æ–°ã—ã„ã‚‚ã®ã§ã‚ã‚Œã°å®Ÿè£…æ¸ˆã¿ã§ã™ã€‚ã•ã‚‰ã«ãã“ã§ã¯ã€å®Ÿè£…å®šç¾©ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¨ã—ã¦`offset`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼ˆ`gnu::offset`/`clang::offset`ï¼‰ãŒå®Ÿè£…ã•ã‚Œã¦ã„ã¾ã™ãŒã€ç¾åœ¨ã®`#embed`ãŒæ„å›³ã™ã‚‹ã‚ˆã†ã«ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®æŒ‡å®šé †ã«ã‚ˆã‚‰ãšæ­£ã—ãå‹•ä½œã—ã¦ã„ã¾ã™ã€‚

- [P3540R1 #embed Parameter offset - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2025å¹´03æœˆï¼‰](https://onihusube.hatenablog.com/entry/2025/09/30/224815#P3540R1-embed-Parameter-offset)
- [#embedãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ– - yohhoyã®æ—¥è¨˜](https://yohhoy.hatenadiary.jp/entry/20220915/p1)
- [P3731 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/2360)

### [P3732R0 Numeric Range Algorithms](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3732r0.html)
### [P3733R0 More named universal character escapes](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3733r0.html)

åå‰ä»˜ããƒ¦ãƒ‹ãƒãƒ¼ã‚µãƒ«æ–‡å­—åã®ã‚¨ã‚¤ãƒªã‚¢ã‚¹åã«ã¤ã„ã¦ã€C++ã§ä½¿ç”¨å¯èƒ½ã§ã¯ãªã„ã‚‚ã®ã‚’ä½¿ç”¨ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ææ¡ˆã€‚

C++23ã§ã¯æ–‡å­—/æ–‡å­—åˆ—ãƒªãƒ†ãƒ©ãƒ«ã«ãŠã‘ã‚‹ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—æ–‡å­—ã®ä¸€ç¨®ã¨ã—ã¦`\N{NO-BREAK SPACE}`ã®ã‚ˆã†ã«ãƒ¦ãƒ‹ã‚³ãƒ¼ãƒ‰æ–‡å­—ã®åå‰ã‚’æŒ‡å®šã™ã‚‹å½¢ã®ãƒ¦ãƒ‹ãƒãƒ¼ã‚µãƒ«æ–‡å­—åãŒä½¿ç”¨å¯èƒ½ã«ãªã£ã¦ã„ã¾ã™ã€‚ã“ã®åå‰ã¯ãƒ¦ãƒ‹ã‚³ãƒ¼ãƒ‰æ¨™æº–ã§è¦å®šã•ã‚Œã¦ã„ã‚‹ã‚‚ã®ã§ã€ä¸€éƒ¨ã®æ–‡å­—ã«å¯¾ã—ã¦ã¯ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã¨ã—ã¦è¤‡æ•°ã®åå‰ãŒå¯¾å¿œã™ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚

```cpp
static_assert(u8'\N{LINE FEED}' == u8'\N{NEW LINE}'); // âœ…
```

ã“ã®ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã‚‚ãƒ¦ãƒ‹ã‚³ãƒ¼ãƒ‰æ¨™æº–ã§è¦å®šã•ã‚Œã¦ã„ã‚‹ã‚‚ã®ã§ã€ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã«ã¯ã„ãã¤ã‹ã®ç¨®é¡ãŒã‚ã‚Šã¾ã™

- correction Aliases : èª¤ã£ãŸæ–‡å­—åãŒå‰²ã‚Šå½“ã¦ã‚‰ã‚Œã¦ã—ã¾ã£ãŸå ´åˆã®ä»£æ›¿è¡¨è¨˜
- control Aliases : åˆ¶å¾¡æ–‡å­—ã®ã‚¨ã‚¤ãƒªã‚¢ã‚¹
- alternate Aliases : åºƒãä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ä»£æ›¿åã®ã‚¨ã‚¤ãƒªã‚¢ã‚¹
- figment Aliases : æ–‡æ›¸åŒ–ã•ã‚ŒãŸã‚‚ã®ã®æ¨™æº–ã§ã¯æ¡ç”¨ã•ã‚Œãªã‹ã£ãŸã‚¨ã‚¤ãƒªã‚¢ã‚¹
    - ç¾åœ¨æ¬¡ã®3ã¤ã®ã¿
    - U+0080 PADDING CHARACTER
    - U+0081 HIGH OCTET PRESET
    - U+0099 SINGLE GRAPHIC CHARACTER INTRODUCER
- abbreviation Aliases : ä¸€èˆ¬çš„ãªç•¥èªã«ã‚ˆã‚‹ã‚¨ã‚¤ãƒªã‚¢ã‚¹

ãƒ¦ãƒ‹ã‚³ãƒ¼ãƒ‰æ¨™æº–ã®æ„å›³ã¨ã—ã¦ã€ä¸€åº¦å…¬é–‹ã—ãŸåå‰ã¯ãŸã¨ãˆãã‚ŒãŒé–“é•ã£ã¦ã„ã‚‹ã‚‚ã®ã ã£ãŸã¨ã—ã¦ã‚‚å¤‰æ›´ã›ãšã€ä»£ã‚ã‚Šã®ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã‚’æä¾›ã™ã‚‹ã“ã¨ã«ã‚ˆã£ã¦ä¿®æ­£ã™ã‚‹ã¨ã„ã†æ–¹é‡ãŒã‚ã‚Šã¾ã™ï¼ˆã™ãªã‚ã¡ã€å®‰å®šæ€§ã‚’å¼·ãä¿è¨¼ã—ã¦ã„ã‚‹ï¼‰ã€‚correctionã‚¨ã‚¤ãƒªã‚¢ã‚¹ã¯ãã®ãŸã‚ã«ã‚ã‚‹ã‚‚ã®ã§ã™ã€‚

ã“ã‚Œã‚‰ã®ã†ã¡ã€C++æ¨™æº–ã§ã¯figmentã¨abbreviationã®ã‚¨ã‚¤ãƒªã‚¢ã‚¹ãŒé™¤å¤–ã•ã‚Œã¦ãŠã‚Šã€ä½¿ç”¨ã§ãã¾ã›ã‚“ã€‚ã“ã®ææ¡ˆã¯ã€ã“ã‚Œã‚‰ã®ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã‚’ä½¿ç”¨å¯èƒ½ã«ã™ã‚‹ã“ã¨ã‚’ææ¡ˆã—ã¦ã„ã¾ã™ã€‚

ãªãœã“ã®ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹ã‹ã¨ã„ã†ã¨ã€P2071R2ï¼ˆãƒ¦ãƒ‹ã‚³ãƒ¼ãƒ‰æ–‡å­—åã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã®ææ¡ˆï¼‰ã®è­°è«–ã¨æ¡æŠã®å½“æ™‚ã®C++ãŒå‚ç…§ã—ã¦ã„ãŸãƒ¦ãƒ‹ã‚³ãƒ¼ãƒ‰æ¨™æº–ãŒå¤ã‹ã£ãŸãŸã‚ï¼ˆæ­£ç¢ºã«ã¯å‚ç…§å…ˆãŒç•°ãªã£ãŸãŸã‚ï¼‰ã€ã“ã‚Œã‚‰ã®ã‚¨ã‚¤ãƒªã‚¢ã‚¹ãŒå«ã¾ã‚Œã¦ã„ãªã‹ã£ãŸã‹ã‚‰ã®æ§˜ã§ã™ã€‚

ã—ã‹ã—ãã®å¾ŒP2736R2ã®æ¡æŠã«ã‚ˆã£ã¦å‚ç…§å…ˆãŒæ›´æ–°ã•ã‚ŒãŸãŸã‚ã“ã®ã‚ˆã†ãªåˆ¶é™ã¯ç„¡ããªã£ã¦ãŠã‚Šã€C++æ¨™æº–ã®æ–‡æ›¸ã®å¤‰æ›´ã®ã¿ã§ã“ã‚Œã‚‰ã®ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã«å¯¾å¿œã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ã“ã®ææ¡ˆã§ä½¿ç”¨å¯èƒ½ã«ãªã‚‹ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã®ä¾‹

```cpp
using namespace std::literals;

// U+007F
static_assert(u8'\N{DELETE}' == u8'\N{DEL}'); // `DEL`ã¯abbreviationã‚¨ã‚¤ãƒªã‚¢ã‚¹

// U+0081
static_assert(u8"\u{0081}"sv == u8"\N{HIGH OCTET PRESET}"sv); // `HIGH OCTET PRESET`ã¯figmentã‚¨ã‚¤ãƒªã‚¢ã‚¹
```

- [C++23 åå‰ä»˜ããƒ¦ãƒ‹ãƒãƒ¼ã‚µãƒ«ã‚­ãƒ£ãƒ©ã‚¯ã‚¿å [P2071R2] - cpprefjp](https://cpprefjp.github.io/lang/cpp23/named_universal_character_escapes.html)
- [Unicode alias names and abbreviations - Wikipedia](https://en.wikipedia.org/wiki/Unicode_alias_names_and_abbreviations)
- [P2736R2 Referencing the Unicode Standard - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2023å¹´02æœˆï¼‰](https://onihusube.hatenablog.com/entry/2023/03/19/184146#P2736R2-Referencing-the-Unicode-Standard)
- [P3733 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/2362)

### [P3734R0 Not all predicates must be regular](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3734r0.html)

è¿°èªã‚’ä½¿ç”¨ã™ã‚‹ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã«å¯¾ã™ã‚‹ã€ãã®è¿°èªãŒè¦ç´ ã‚’å¤‰æ›´ã—ãªã„ã¨ã„ã†è¦ä»¶ã‚’ç·©å’Œã™ã‚‹ææ¡ˆã€‚

`std::find_if`ãªã©ï¼ˆãã®`range`ç‰ˆã‚‚å«ã‚ã¦ï¼‰è¿°èªã‚’å—ã‘å–ã‚‹ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã«ãŠã„ã¦è¿°èªã¯`regular_invocable`ã«ã‚ˆã£ã¦åˆ¶ç´„ã•ã‚Œã¦ãŠã‚Šï¼ˆ`indirect_unary_predicate` -> `predicate`ã‚’é€šã—ã¦ï¼‰ã€ãã‚Œã«ã‚ˆã£ã¦è¿°èªã®å‘¼ã³å‡ºã—ã‚’é€šã˜ãŸç¯„å›²è¦ç´ ã®å¤‰æ›´ã‚„ãã®ä»–å‰¯ä½œç”¨ãŒç¦æ­¢ã•ã‚Œã¦ã„ã¾ã™ã€‚

ã—ã‹ã—ã€ç¯„å›²ã®ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä¸€å›ã§æ¸ˆã¾ã›ã‚‹ã“ã¨ã‚’æ„å›³ã—ã¦ã“ã‚Œã‚‰ã®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®è¡“èªã«ãŠã„ã¦è¦ç´ ã‚’å¤‰æ›´ã—ãŸã„å ´åˆãŒã‚ã‚Šã€ç‰¹ã«è¦ç´ ã‚’ä¸€å›ã—ã‹å‚ç…§ã—ãªã„ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã§ã¯ãã‚Œã‚’è¡Œã£ãŸã¨ã—ã¦ã‚‚å‹•ä½œã«ã¯å½±éŸ¿ãŒãªã„ã¯ãšã§ã™ã€‚

`ranges::remove_if`ã«ã‚ˆã‚‹ä¾‹

```cpp
bool allowed_in_id(char c) {
  return c >= 'a' && c <= 'z';
}

void sanitize_id(std::string& id) {
  auto removed_range = std::ranges::remove_if(id, [](char& c) {
    if (c == ' ') {
      c = '-';  // ğŸ‘ˆ ã“ã“ã§è¦ç´ ã‚’å¤‰æ›´ã—ã¦ã„ã‚‹
      return false;
    }
    return not allowed_in_id(c);
  });

  id.erase(removed_range.begin(), removed_range.end());
}
```

ã“ã®ã‚³ãƒ¼ãƒ‰ã¯`"abc //def"`ã®æ§˜ãªæ–‡å­—åˆ—å…¥åŠ›ã‚’`"abc-def"`ã®ã‚ˆã†ã«å¤‰æ›ã™ã‚‹ã‚‚ã®ã§ã™ã€‚ã“ã‚Œã¯`[a-z]`ã¨ã‚¹ãƒšãƒ¼ã‚¹ä»¥å¤–ã®æ–‡å­—ã‚’`remove_if`ã—ãŸå¾Œã§ã‚¹ãƒšãƒ¼ã‚¹ã‚’`-`ã«ç½®ãæ›ãˆã‚‹ã‚ˆã†ãª2å›ã®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’ä¼´ã†ã‚³ãƒ¼ãƒ‰ã‚ˆã‚Šã‚‚åŠ¹ç‡çš„ãªã‚‚ã®ã§ã™ã€‚ã—ã‹ã—ã€å‰è¿°ã®ã‚ˆã†ã«`remove_if`ï¼ˆ`ranges`ç‰ˆã§ãªãã¦ã‚‚ï¼‰ã¯ãã®è¿°èªãŒè¦ç´ ã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ã‚’è¨±å¯ã—ã¦ãŠã‚‰ãšã€é•åã™ã‚‹ã¨æœªå®šç¾©å‹•ä½œã¨ãªã‚‹ãŸã‚ã“ã®ã‚³ãƒ¼ãƒ‰ã¯åˆæ³•ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

ã—ã‹ã—ä¸€æ–¹ã§ã€`remove_if`ã¯ãã®å‹•ä½œã«å½“ãŸã£ã¦è¦ç´ ã‚’ä¸€å›ã—ã‹å‚ç…§ã—ãªã„ãŸã‚ã€ãã®ä¸€å›ã®å‚ç…§æ™‚ã«ãã®è¦ç´ ã‚’å¤‰æ›´ã—ãŸã¨ã—ã¦ã‚‚ãã®å‹•ä½œãŒãŠã‹ã—ããªã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ä¸Šè¨˜ã®ä¾‹ã¯ãã®ã“ã¨ã‚’ä»®å®šã—ã¦ãŠã‚Šã€æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®è¤‡é›‘ãªè¦ä»¶ã‚’è‰¯ãçŸ¥ã‚‰ãªã„ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã¨ã£ã¦ã¯è‡ªç„¶ãªæ¨è«–ã¨ãªã‚‹ã¯ãšã§ã™ã€‚

ã“ã®ææ¡ˆã¯ã€è¿°èªã‚’å—ã‘å–ã‚‹ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®ã†ã¡è¦ç´ ã‚’ä¸€åº¦ã—ã‹å‚ç…§ã—ãªã„ãªã©ã®äº‹ã‹ã‚‰è¦ç´ ã‚’å¤‰æ›´ã—ã¦ã‚‚å•é¡Œãªã„ã‚‚ã®ã«ã¤ã„ã¦ã¯ã€è¿°èªã«å¯¾ã™ã‚‹`regular_invocable`ã®è¦ä»¶ã‚’ç·©å’Œã™ã‚‹ã“ã¨ã‚’ææ¡ˆã™ã‚‹ã‚‚ã®ã§ã™ã€‚

ã“ã“ã§ã®å¯¾è±¡ã¯æ¬¡ã®ã‚‚ã®ã§ã™

- `all_of`
- `any_of`
- `none_of`
- `find`ç³»
- `find_last`ç³»
- `count`ç³»
- `mismatch`
- `equal`
- `starts_with`
- `copy_if`
- `replace`ç³»
- `remove`ç³»
- `is_partitioned`/`partition`

`regular_invocable`ã®åˆ¶ç´„ã¯æ„å‘³è«–çš„ãªã‚‚ã®ã§ã‚ã‚Šã€ã“ã®ææ¡ˆãŒæ¡æŠã•ã‚Œã¦ã‚‚å®Ÿè£…ã‚’ä½•ã‹å¤‰æ›´ã™ã‚‹å¿…è¦ã¯ãªã„ã¯ãšã§ã™ï¼ˆåˆ¶ç´„ã‚’é™¤ã„ã¦ï¼‰ã€‚

ã“ã®ã‚ˆã†ãªå¤‰æ›´ã«å¯¾ã™ã‚‹æ‡¸å¿µã®ä¸€ã¤ã¯ã“ã‚Œã‚‰ç¯„å›²ã‚’å¤‰æ›´ã—ãªã„ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®å†ªç­‰æ€§ãŒå¤±ã‚ã‚Œã‚‹ã¨ã„ã†ã‚‚ã®ã ã¨æ€ã‚ã‚Œã¾ã™ãŒã€å®Ÿéš›ã«ã¯ç¾çŠ¶ã§ã‚‚ãã®ä¿è¨¼ã¯ç„¡ãã€æœªå®šç¾©å‹•ä½œã®ä¸Šã«æˆã‚Šç«‹ã£ã¦ã„ã‚‹æ·¡ã„æœŸå¾…ã®ã¿ã§ã‚ã‚Šã€å®Ÿè£…ã«ã‚ˆã£ã¦ä½•ã‹é™çš„ãƒ»å‹•çš„ã«ãƒã‚§ãƒƒã‚¯ã•ã‚Œã¦ã„ã‚‹ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ç¯„å›²ã‚’å¤‰æ›´ã™ã‚‹è¿°èªã‚’æ¸¡ã•ãªã„é™ã‚Šç¾åœ¨ã®æ¨è«–ãŒå¤±ã‚ã‚Œã‚‹ã‚‚ã®ã§ã‚‚ãªã„ãŸã‚ã€ç¾çŠ¶ã‚ˆã‚Šæ‚ªããªã‚‹ã‚‚ã®ã§ã¯ãªã„ã¨ã—ã¦ã„ã¾ã™ã€‚

- [P3734 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/2363)

### [P3735R0 `partial_sort_n`, `nth_element_n`](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3735r0.html)

ä¸­é–“ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã‚’æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã«ã¤ã„ã¦ã€ãã®å¿…è¦ã®ãªã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’è¿½åŠ ã™ã‚‹ææ¡ˆã€‚

`partial_sort`ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¯ã€ç¯„å›²ã®`N`è¦ç´ åˆ†ã®éƒ¨åˆ†ã‚½ãƒ¼ãƒˆã‚’è¡Œã†ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã§ã‚ã‚Šã€å®Ÿè¡Œå¾Œã®ç¯„å›²ã¯å…ˆé ­`N`å€‹ãŒã‚½ãƒ¼ãƒˆã•ã‚ŒãŸçŠ¶æ…‹ã«ãªã‚Šã¾ã™ã€‚ã“ã®æ™‚ã€ã“ã®`N`ã¯æ•°å€¤ã§æŒ‡å®šã™ã‚‹ã®ã§ã¯ãªãã€ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã§æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

```cpp
#include <ranges>
#include <algorithm>
#include <vector>
#include <print>

int main() {
  constexpr int N = 5;
  std::vector vec = {5, 3, 10, 4, 1, 11, 0, 9};

  std::println("before: {}", vec);

  std::ranges::partial_sort(vec, vec.begin() + N);

  std::println("afeter: {}", vec);
}
```
```
before: [5, 3, 10, 4, 1, 11, 0, 9]
afeter: [0, 1, 3, 4, 5, 11, 10, 9]
```

`partial_sort`ã§éƒ¨åˆ†ã‚½ãƒ¼ãƒˆã—ãŸã„è¦ç´ æ•°`N`ã‚’ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã§æŒ‡å®šã™ã‚‹éš›ã¯ã€`begin() + N`ã®ã‚ˆã†ãªã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã®é€²ã‚æ–¹ãŒãªã•ã‚Œã‚‹ã“ã¨ãŒå¤šã€…ã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã¯å½“ç„¶ã€`N`ãŒç¯„å›²ã®é•·ã•ã‚’è¶…ãˆã¦ã„ã‚Œã°æœªå®šç¾©å‹•ä½œã¨ãªã‚Šã¾ã™ã€‚ç­†è€…ã®æ–¹ã®çµŒé¨“ã«ã‚ˆã‚Œã°ã€ã“ã®ã‚ˆã†ã«æœªå®šç¾©å‹•ä½œã«é™¥ã£ã¦ã„ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’ä½•åº¦ã‚‚è¦‹ã¦ããŸã¨ã®ã“ã¨ã§ã™ã€‚

å®‰å…¨ã«æ›¸ãæ–¹æ³•ã¨ã—ã¦ã¯`std::ranges::next()`ã‚’ä½¿ç”¨ã™ã‚‹æ–¹æ³•ãŒã‚ã‚Šã¾ã™

```cpp
std::ranges::partial_sort(vec, std::ranges::next(vec.begin(), N, vec.end()));
```

ã—ã‹ã—ã“ã‚Œã¯ã‚ã¾ã‚Šã«ã‚‚å†—é•·ã§ã€ãƒã‚°ã®æœ¬è³ªçš„åŸå› ã‚’è§£æ±ºã™ã‚‹ã‚‚ã®ã§ã‚‚ã‚ã‚Šã¾ã›ã‚“ã€‚ã“ã®ãƒã‚°ã¯ã€ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ãŒãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã®å¯ç®—ã‚’å¼·ã„ã¦ã„ã‚‹ã“ã¨ãŒåŸå› ã§ã™ã€‚ãã®ãŸã‚ã€`N`ã‚’ç›´æ¥ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã«æŒ‡å®šã§ãã‚Œã°è§£æ±ºã•ã‚Œã‚‹ã¯ãšã§ã™ã€‚

```cpp
std::ranges::partial_sort(vec, N);
```

ã“ã®ææ¡ˆã¯ã€`partial_sort`ã®æ§˜ã«ä¸­é–“ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã‚’ã¨ã‚‹ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã«ã¤ã„ã¦ã“ã®ã‚ˆã†ã«å‡¦ç†æ•°`N`ã‚’ç›´æ¥æŒ‡å®šã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹`~_n`ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’è¿½åŠ ã—ã‚ˆã†ã¨ã™ã‚‹ã‚‚ã®ã§ã™ã€‚ã“ã“ã§ææ¡ˆã—ã¦ã„ã‚‹ã®ã¯æ¬¡ã®2ç¨®é¡ã®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã§ã™

- `partial_sort_n` : `partial_sort`
- `nth_element_n` : `nth_element`

ä»–ã®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¯ãƒ©ãƒ³ãƒ€ãƒ ã‚¢ã‚¯ã‚»ã‚¹ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã‚’ä½¿ç”¨ã—ã¦ã„ãªã„ãªã©ã®å•é¡Œã‹ã‚‰ã“ã“ã§ã¯å¯¾è±¡ã«ã—ã¦ã„ã¾ã›ã‚“ã€‚ã¾ãŸã€å¤‰æ›´ã¯`range`ç‰ˆã ã‘ã§ãªãæ—§æ¥ã®é`range`ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã«å¯¾ã—ã¦ã‚‚è¡Œã†ã“ã¨ã‚’ææ¡ˆã—ã¦ã„ã¾ã™ã€‚

SG9ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ã§ã¯ã“ã®ææ¡ˆã®æ–¹å‘æ€§ãŒå¥½ã¾ã‚ŒãŸã‚ˆã†ã§ã€ãŠãŠã‚€ã­å—ã‘å…¥ã‚Œã‚‰ã‚Œã¦LEWGã«è»¢é€ã•ã‚Œã¦ã„ã¾ã™ã€‚ãŸã ã—ã€å‘½åã«ã¤ã„ã¦ã¯`_n`ã§ã¯ãªã`_at_most`ãŒå¥½ã¾ã‚ŒãŸã‚ˆã†ã§ã™ã€‚

- [`std::partial_sort` - cpprefjp](https://cpprefjp.github.io/reference/algorithm/partial_sort.html)
- [P3735 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/2364)

### [P3736R0 Slides against P2971R3 - No implication for C++](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3736r0.html)

P2971ã«åå¯¾ã™ã‚‹ã“ã¨ã‚’èª¬æ˜ã™ã‚‹ã‚¹ãƒ©ã‚¤ãƒ‰ã€‚

P2971ã«ã¤ã„ã¦ã¯ä»¥å‰ã®è¨˜äº‹ã‚’å‚ç…§

- [P2971R3 Implication for C++ - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2025å¹´01æœˆï¼‰](https://onihusube.hatenablog.com/entry/2025/08/30/234243#P2971R3-Implication-for-C)

P2971ã§ææ¡ˆã•ã‚Œã¦ã„ã‚‹`=>`æ¼”ç®—å­ã«åå¯¾ã™ã‚‹ã„ãã¤ã‹ã®ç†ç”±ãŒèª¬æ˜ã•ã‚Œã¦ã„ã¾ã™ã€‚

### [P3737R0 `std::array` is a wrapper for an array!](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3737r0.html)

`std::array`ã®å®Ÿè£…è‡ªç”±åº¦ã‚’åˆ¶é™ã™ã‚‹ææ¡ˆã€‚

`std::array`ã®å®Ÿè£…ã«ã¤ã„ã¦ã¯æ¨™æº–ã¯ã‚ã¾ã‚Šå¤šãã‚’èªã£ã¦ã„ãªã„ã‚‚ã®ã®ç”Ÿé…åˆ—ã‚’ãƒ©ãƒƒãƒ—ã—ãŸé›†æˆä½“å‹ã«ã‚ˆã‚‹ã‚‚ã®ã¨ç†è§£ã•ã‚Œã¦ãŠã‚Šã€ç¾åœ¨ã®æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªå®Ÿè£…ã¯ãã®ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚ãã®å®Ÿè£…æ–¹æ³•ã«ã¤ã„ã¦ã¯ã»ã¼ä»–ã®é¸æŠè‚¢ãŒç„¡ã„ã®ã§ã™ãŒã€ã‚ˆã‚Šç´°ã‹ã„å®Ÿè£…ã«ã¤ã„ã¦ã¯æŒ‡å®šã—ã¦ã„ãªã„éƒ¨åˆ†ã‚‚å¤šãã€ä¾‹ãˆã°æ¬¡ã®ã‚ˆã†ãªå®Ÿè£…ãŒæº–æ‹ å®Ÿè£…ã¨ãªã‚Šã¾ã™

```cpp
struct alignas(1024) malice_and_evil {
  constexpr malice_and_evil() { }
  malice_and_evil(const malice_and_evil&) { }
};

template <typename T, size_t N>
struct array {
  T __array[N];
  malice_and_evil evil;
};
```

ã“ã®ã‚ˆã†ã«å®Ÿè£…ã•ã‚ŒãŸ`std::array`ã¯ã‚³ãƒ”ãƒ¼ãŒå®šæ•°å¼ã«ãªã‚‰ãšã€è¦ç´ å‹ã«é–¢ã‚ã‚‰ãšãƒˆãƒªãƒ“ã‚¢ãƒ«ã‚³ãƒ”ãƒ¼å¯èƒ½ã§ã¯ãªãã€ã‚µã‚¤ã‚ºã¨ã‚¢ãƒ©ã‚¤ãƒ¡ãƒ³ãƒˆã¯`T[N]`ã‚ˆã‚Šã‚‚å¤§ãããªã‚Šã¾ã™ã€‚

ã“ã®ææ¡ˆã¯ã€`std::array`ã®å®Ÿè£…è‡ªç”±åº¦ã‚’åˆ¶é™ã™ã‚‹ã“ã¨ã§ã“ã®ã‚ˆã†ãªãŠã‹ã—ãªæº–æ‹ å®Ÿè£…ã‚’æ’é™¤ã—ã€`std::array`ãŒç”Ÿé…åˆ—ã®å˜ç´”ãªãƒ©ãƒƒãƒ‘ã¨ãªã‚‹ã‚ˆã†ã«ã—ã‚ˆã†ã¨ã™ã‚‹ã‚‚ã®ã§ã™ã€‚ã¾ãŸã€`std::array<T, 0>`ã®å®Ÿè£…ã«ã¤ã„ã¦ã‚’ç´°ã‹ãè¦å®šã™ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚è¦ç´ æ•°ãŒã‚¼ãƒ­ã®`std::array`ã«ã¤ã„ã¦ã¯å®Ÿè£…ã‚‚ãã‚Œãã‚Œå¾®å¦™ã«ç•°ãªã£ã¦ã„ã‚‹ã‚ˆã†ã€ã“ã®ææ¡ˆã§ã¯`std::array<T, 0>`ãŒæº€ãŸã™ã¹ãå®Ÿè£…ã®åˆ¶ç´„ã«ã¤ã„ã¦ã‚’è¿½åŠ ã—ã¦ã„ã¾ã™ã€‚

- `T`ãŒãƒˆãƒªãƒ“ã‚¢ãƒ«ã‚³ãƒ”ãƒ¼å¯èƒ½ãƒ»æ¨™æº–ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãƒ»æ§‹é€ çš„ãªå‹ã€ã®ã„ãšã‚Œã‹ï¼ˆã‚‚ã—ãã¯ã™ã¹ã¦ï¼‰ã§ã‚ã‚‹ãªã‚‰ã€`std::array`ã‚‚ãã†ãªã‚‹
- `std::array`ã¯åŸºåº•ã‚¯ãƒ©ã‚¹ã‚’æŒãŸãšã€å˜ä¸€ã®å…¬é–‹é`static`ãƒ¡ãƒ³ãƒã¨ã—ã¦`N`è¦ç´ ã®ç”Ÿé…åˆ—ã‚’æŒã¤
- `std::array<T, 0>`
    - é…åˆ—ãƒ¡ãƒ³ãƒå¤‰æ•°ã‚’æŒãŸãªã„
      - ä»£ã‚ã‚Šã«ã€æœªè¦å®šã®ãƒˆãƒªãƒ“ã‚¢ãƒ«ã‚³ãƒ”ãƒ¼å¯èƒ½ã§æ¨™æº–ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãªç©ºã®é›†æˆä½“å‹`U`ã®é`static`ãƒ¡ãƒ³ãƒå¤‰æ•°ã‚’æŒã¤
      - `U`ã®ã‚µã‚¤ã‚ºã¨ã‚¢ãƒ©ã‚¤ãƒ¡ãƒ³ãƒˆã¯`1 ~ sizeof(T)`ã®é–“ã§å®Ÿè£…å®šç¾©
    - å€¤è¡¨ç¾ã¯ç©º
    - ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿å–å¾—é–¢æ•°ã¯ã™ã¹ã¦å€¤åˆæœŸåŒ–ã•ã‚ŒãŸçµæœã‚’è¿”ã™
    - `fill()/swap()`ã¯é–¢æ•°æœ¬ä½“ãŒç©ºã§ä¾‹å¤–ã‚’é€å‡ºã—ãªã„
    - `[], front(), back()`ã®æœ«å°¾ã«å®Ÿè¡ŒãŒåˆ°é”ã™ã‚‹ã¨`std::terminate`

ãªã©ã®åˆ¶é™ã‚’åŠ ãˆã‚‹ã“ã¨ã‚’ææ¡ˆã—ã¦ã„ã¾ã™ã€‚

- [P3737 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/2366)

### [P3738R0 Make `std::make_from_tuple` SFINAE friendly](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3738r0.pdf)

`std::make_from_tuple`ã‚’SFINAE friendlyã«ã™ã‚‹ææ¡ˆã€‚

[LWG Issue 3528](https://cplusplus.github.io/LWG/issue3528)ã®æ¡æŠã«ã‚ˆã£ã¦ã€`std::make_from_tuple()`ã®èª¬æ˜å°‚ç”¨é–¢æ•°ã§ã‚ã‚‹`make-from-tuple-impl()`ã«å¯¾ã—ã¦`requires`ç¯€ã«ã‚ˆã‚‹åˆ¶ç´„ãŒè¿½åŠ ã•ã‚Œã¾ã—ãŸã€‚

```cpp
template<class T, class Tuple, size_t... I>
  requires is_constructible_v<T, decltype(get<I>(declval<Tuple>()))...> // ğŸ‘ˆ ã“ã‚ŒãŒè¿½åŠ 
constexpr T make-from-tuple-impl(Tuple&& t, index_sequence<I...>) {
  return T(get<I>(std::forward<Tuple>(t))...);
}
```

ã—ã‹ã—ã€ã“ã‚Œã«ã‚ˆã£ã¦`std::make_from_tuple()`ãŒå‘¼ã³å‡ºã—å¯èƒ½ã‹ã©ã†ã‹ã‚’SFINAEã«ã‚ˆã£ã¦èª¿ã¹ã‚‹ã‚³ãƒ¼ãƒ‰ãŒãƒãƒ¼ãƒ‰ã‚¨ãƒ©ãƒ¼ã‚’èµ·ã“ã™ã‚ˆã†ã«ãªã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚

```cpp
template <typename T, typename Tuple, typename = void>
inline constexpr bool has_make_from_tuple = false;

template <typename T, typename Tuple>
inline constexpr bool has_make_from_tuple<
  T, Tuple,
  std::void_t<decltype(std::make_from_tuple<T>(std::declval<Tuple>()))>> = true;

struct A {
  int a;
};

// make_fron_tuple()å‘¼ã³å‡ºã—ã«ãŠã„ã¦é›†æˆä½“åˆæœŸåŒ–ã¯è€ƒæ…®ã•ã‚Œãªã„
static_assert(!has_make_from_tuple<int*, std::tuple<A*>>);  // ngã€`static_assert`ã§ã¯ãªã„ç†ç”±ã«ã‚ˆã£ã¦ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹
```

ã“ã‚Œã¯ã€`std::make_from_tuple()`ã®å®Ÿè£…ãŒå†…éƒ¨ã§`make-from-tuple-impl()`ã¨åŒç­‰ã®é–¢æ•°ã‚’å‘¼ã³å‡ºã™ã‚ˆã†ã«ã—ã¦ã„ã‚‹å ´åˆã€è¿½åŠ ã•ã‚ŒãŸåˆ¶ç´„ã‚’æº€ãŸã•ãªã„å ´åˆã«`std::make_from_tuple()`é–¢æ•°å®šç¾©å†…ã§ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ã“ã¨ã§ãƒãƒ¼ãƒ‰ã‚¨ãƒ©ãƒ¼ã«ãªã£ã¦ã—ã¾ã£ã¦ã„ã¾ã™ã€‚

```cpp
template<class T, class Tuple, size_t... I>
  requires is_constructible_v<T, decltype(get<I>(declval<Tuple>()))...> // A
constexpr T make-from-tuple-impl(Tuple&& t, index_sequence<I...>) {
  return T(get<I>(std::forward<Tuple>(t))...);
}

template<class T, class Tuple, size_t... I>
constexpr T make_from_tuple(Tuple&& t, index_sequence<I...>) {
  return make-from-tuple-impl(std::forward<Tuple>(t));  // Aã®åˆ¶ç´„ãŒæº€ãŸã•ã‚Œãªã„å ´åˆã€ã“ã“ã§ã‚¨ãƒ©ãƒ¼ã«ãªã£ã¦ã—ã¾ã†
}
```

ã“ã®ææ¡ˆã¯ã€ã“ã®`make-from-tuple-impl()`ã«è¿½åŠ ã•ã‚ŒãŸåˆ¶ç´„ã‚’`std::make_from_tuple()`ã®å®£è¨€ã«ç§»ã™ã“ã¨ã§ã€åˆ¶ç´„ãŒæº€ãŸã•ã‚Œãªã„å ´åˆã«`std::make_from_tuple()`ã®å®£è¨€ã§ç½®æ›å¯èƒ½ãªã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ã‚ˆã†ã«ã—ã‚ˆã†ã¨ã™ã‚‹ã‚‚ã®ã§ã™ã€‚

- [LWG Issue 3528. make_from_tuple can perform (the equivalent of) a C-style cast](https://cplusplus.github.io/LWG/issue3528)
- [P3737 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/2367)

### [P3739R0 Standard Library Hardening - using `std::optional`](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3739r0.html)

â†“

### [P3739R1 Standard Library Hardening - using `std::optional`](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3739r1.html)

`std::inplace_vector`ã«ãŠã„ã¦ã€`std::optional<T&>`ã‚’åˆ©ç”¨ã—ã¦å …ç‰¢åŒ–ãƒ¢ãƒ¼ãƒ‰ã‚’å°å…¥ã™ã‚‹ææ¡ˆã€‚

ã“ã®ææ¡ˆã§ã¯ã€`std::inplace_vector`ç‰¹æœ‰ã®ãƒ¡ãƒ³ãƒé–¢æ•°ã§ç¾åœ¨ãƒã‚¤ãƒ³ã‚¿ã‚’è¿”ã—ã¦ã„ã‚‹ã‚‚ã®ã«ã¤ã„ã¦`std::optional<T&>`ã‚’ä»£ã‚ã‚Šã«è¿”ã™ã‚ˆã†ã«ã™ã‚‹ã“ã¨ã§ã€`std::optional<T&>`ã®ãƒ¢ãƒŠãƒ‰/`range`ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’åˆ©ç”¨ã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã¨ã¨ã‚‚ã«ã€ä¸€éƒ¨ã®å®‰å…¨ã§ã¯ãªã„ã‚¢ã‚¯ã‚»ã‚¹ã‚‚å …ç‰¢åŒ–ãƒ¢ãƒ¼ãƒ‰ã«ã‚ˆã‚‹nullãƒã‚§ãƒƒã‚¯ã•ã‚Œã‚‹ã“ã¨ã«ã‚ˆã‚Šå®‰å…¨æ€§ã‚’é«˜ã‚ã‚ˆã†ã¨ã™ã‚‹ã‚‚ã®ã§ã™ã€‚

ææ¡ˆã—ã¦ã„ã‚‹ã®ã¯ã€ã‚³ãƒ³ãƒ†ãƒŠã®æœ«å°¾è¦ç´ ã‚’è¿½åŠ ã‚’è©¦è¡Œã™ã‚‹`try_~`ç³»ã®3ã¤ã®é–¢æ•°ã§ã™

```cpp
namespace std {
  template<class T, size_t N>
  class inplace_vector {
  
    ...

    // ç¾åœ¨ã®å®£è¨€
    template<class... Args>
    constexpr pointer try_emplace_back(Args&&... args);

    constexpr pointer try_push_back(const T& x);
    
    constexpr pointer try_push_back(T&& x);

    // ã“ã®ææ¡ˆ
    template<class... Args>
    constexpr optional<T&> try_emplace_back(Args&&... args);

    constexpr optional<T&> try_push_back(const T& x);
    
    constexpr optional<T&> try_push_back(T&& x);

  };
}
```

ã“ã‚Œã‚‰ã®é–¢æ•°ã¯`inplace_vector`ã®æœ«å°¾ã«è¦ç´ ã‚’è¿½åŠ ã‚’è©¦ã¿ã¦ã€ãã®ã‚­ãƒ£ãƒ‘ã‚·ãƒ†ã‚£ä½™è£•ãŒç„¡ã„å ´åˆã«`nullptr`ã‚’è¿”ã™ã‚‚ã®ã§ã™ã€‚ã“ã®ææ¡ˆã§ã¯ãƒã‚¤ãƒ³ã‚¿ã®ä»£ã‚ã‚Šã«`optional<T&>`ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã“ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’ã‚ˆã‚Šå®‰å…¨ã«ã—ã‚ˆã†ã¨ã—ã¦ã„ã¾ã™ã€‚

```cpp
int main() {
  std::inplace_vector<int, 5> vec = {1, 2, 3, 4, 5};

  // ç¾åœ¨
  if (auto ptr = vec.push_back(); ptr != nullptr) {
    // æˆåŠŸã—ãŸæ™‚ã®å‡¦ç†
  }

  // ã“ã®ææ¡ˆ
  vec.push_back().and_then([](int& n) {
    // æˆåŠŸã—ãŸæ™‚ã®å‡¦ç†
  });
}
```

- [P3739 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/2368)

### [P3740R0 Last chance to fix `std::nontype`](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3740r0.html)

â†“

### [P3740R1 Last chance to fix `std::nontype`](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3740r1.html)

`std::nontype`ã®ä½¿ç”¨ã‚’å†è€ƒã™ã‚‹ææ¡ˆã€‚

`std::nontype`ã¯`std::function_ref`ã®ãƒ¡ãƒ³ãƒé–¢æ•°ãƒã‚¤ãƒ³ã‚¿å¯¾å¿œã‚’è¡Œã†ãŸã‚ã«è¿½åŠ ã•ã‚ŒãŸãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã§ã€ãƒ¡ãƒ³ãƒé–¢æ•°ãƒã‚¤ãƒ³ã‚¿ã‚’NTTPã¨ã—ã¦æŒã£ã¦ãŠãã“ã¨ã§æœ¬æ¥é–¢æ•°ãƒã‚¤ãƒ³ã‚¿ã‚’ä¿å­˜ã™ã‚‹ãŸã‚ã®ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚’å¯¾å¿œã™ã‚‹`this`ã‚’ä¿å­˜ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã‚‚ã®ã§ã™ã€‚

```cpp
void f(std::fuction_ref<int(int)> func);

struct S {
  int m(int) {
    ...
  }
};

int main() {
  S s{};

  f({std::nontype<&S::m>, s});  // okã€function_refã§ãƒ¡ãƒ³ãƒé–¢æ•°ãƒã‚¤ãƒ³ã‚¿ã¨å¯¾å¿œã™ã‚‹thisã‚’æŸç¸›ã™ã‚‹
}
```

`std::nontype`ãŒãªã„å ´åˆã€åˆ¥é€”ãƒ•ã‚¡ã‚¯ãƒˆãƒªé–¢æ•°ã¨å°‚ç”¨ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‚’ç”¨æ„ã—ã¦å¯¾å¿œã™ã‚‹å¿…è¦ãŒã‚ã‚‹ãªã©ã€`std::nontype`ã¨æ¯”è¼ƒã™ã‚‹ã¨è¤‡é›‘ãªã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’ã¨ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã—ãŸã€‚

ã—ã‹ã—ã€C++26ã®ä»–ã®æ©Ÿèƒ½ã®å°å…¥ãªã©ã®çµæœã¨ã—ã¦ã€ã“ã®`std::nontype`ã«ã¯ã„ãã¤ã‹ã®å•é¡ŒãŒç”Ÿã˜ã¦ã„ã¾ã™ã€‚

- `std::constant_wrapper`ã¨æ©Ÿèƒ½ãŒé‡è¤‡ã™ã‚‹ï¼ˆP2781
- non-type template parameterã¨ã„ã†è¨€è‘‰ã¯constant template parameterã«å¤‰æ›´ã•ã‚ŒãŸï¼ˆP2841

ã©ã¡ã‚‰ã‚‚æœ€çµ‚çš„ã«ã¯C++26ã«å°å…¥ã•ã‚Œã¦ã„ã¾ã™ï¼ˆã“ã®ææ¡ˆã®æå‡ºæ™‚ç‚¹ã§ã¯P2781ã¯ã¾ã å…¥ã£ã¦ã„ã¾ã›ã‚“ã§ã—ãŸï¼‰ã€‚ãã®ãŸã‚ã€`std::nontype`ã®åå‰ã‚’å¤‰æ›´ã™ã‚‹ã®ã‹ã€`std::constant_wrapper`ã§ç½®ãæ›ãˆã‚‹ã®ã‹ã€ã‚ã‚‹ã„ã¯ã“ã®ã¾ã¾ã„ãã®ã‹ã€ã‚’æ±ºã‚ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚

ã“ã“ã§ã¯`std::nontype`ã®å¿…è¦æ€§ãªã©ã‹ã‚‰åˆã‚ã¦æ§˜ã€…ãªé¸æŠè‚¢ã‚’æ¤œè¨ã—ãŸçµæœ

- `std::nontype`ã‚’`std::constant_wrapper`ã§ç½®ãæ›ãˆã‚‹
- `std::nontype`ã‚’ãƒªãƒãƒ¼ãƒ ã™ã‚‹

ã®ã©ã¡ã‚‰ã‹ãŒè‰¯ã„ã¨ã—ã¦ã€ä¸¡æ–¹ã«å¯¾å¿œã™ã‚‹æ–‡è¨€å¤‰æ›´ã‚’ææ¡ˆã—ã¦ã„ã¾ã™ã€‚

- [P2511R0 Beyond operator(): NTTP callables in type-erased call wrappers - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2022å¹´01æœˆï¼‰](https://onihusube.hatenablog.com/entry/2022/02/19/181101#P2511R0-Beyond-operator-NTTP-callables-in-type-erased-call-wrappers)
- [P2472R1 make function_ref more functional - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2022å¹´02æœˆï¼‰](https://onihusube.hatenablog.com/entry/2022/03/19/224729#P2472R1-make-function_ref-more-functional)
- [P3740 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/2369)

### [P3741R0 views::set_operations](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3741r0.html)

é›†åˆæ¼”ç®—ã‚’è¡Œã†Rangeã‚¢ãƒ€ãƒ—ã‚¿ã®ææ¡ˆã€‚

ã‚½ãƒ¼ãƒˆæ¸ˆã¿ç¯„å›²ã‚’é›†åˆã¨è¦‹ç«‹ã¦ã¦å·®é›†åˆã‚„å…±é€šéƒ¨åˆ†ãªã©ã®é›†åˆæ¼”ç®—ã‚’è¡Œã†æ“ä½œã¯ã€ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¨ã—ã¦ã¯å­˜åœ¨ã—ã¦ã„ã¾ã™ã€‚ã—ã‹ã—ã€ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®å ´åˆã¯å‡ºåŠ›ã®ç¯„å›²ã‚’åˆ¥ã«ç”¨æ„ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

ä¸€æ–¹ã€Rangeã‚¢ãƒ€ãƒ—ã‚¿ã¨ã—ã¦ã“ã‚Œã‚’å®Ÿè¡Œã§ãã‚Œã°ã€é…å»¶è©•ä¾¡ã•ã‚Œã‚‹ã“ã¨ã«ã‚ˆã£ã¦å‡ºåŠ›ç”¨ã®ç¯„å›²ã¯å¿…è¦ãªããªã‚Šã€ã‚ªãƒ³ã‚¶ãƒ•ãƒ©ã‚¤ã§é›†åˆæ¼”ç®—ã‚’å®Ÿè¡Œã§ãã¾ã™ã€‚

```cpp
// ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã«ã‚ˆã‚‹é›†åˆæ¼”ç®—
std::vector<int> diff;
ranges::set_difference(v1, v2, std::back_inserter(diff));

// Rangeã‚¢ãƒ€ãƒ—ã‚¿ã«ã‚ˆã‚‹é›†åˆæ¼”ç®—
auto diff = v1 | views::set_difference(v2);
```

ã“ã®ææ¡ˆã¯ã€æ—¢å­˜ã®é›†åˆæ¼”ç®—ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã«å¯¾å¿œã™ã‚‹é›†åˆæ¼”ç®—ã‚’è¡Œã†Rangeã‚¢ãƒ€ãƒ—ã‚¿ã‚’ææ¡ˆã™ã‚‹ã‚‚ã®ã§ã™ã€‚ã“ã“ã§ã¯ã€`std::include`ã‚’é™¤ã„ãŸ4ã¤ã®é›†åˆæ¼”ç®—

- `std::set_union`
- `std::set_intersection`
- `std::set_difference`
- `std::set_symmetric_difference`

ã«å¯¾å¿œã™ã‚‹Rangeã‚¢ãƒ€ãƒ—ã‚¿

- `views::set_union`
- `views::set_intersection`
- `views::set_difference`
- `views::set_symmetric_difference`

ã‚’ææ¡ˆã—ã¦ã„ã¾ã™ã€‚

ã“ã‚Œã‚‰ã®Rangeã‚¢ãƒ€ãƒ—ã‚¿ã¯ãã‚Œãã‚Œå°‚ç”¨ã®`view`å‹ã‚’æŒã¡ã¾ã™ãŒã€ãã‚Œãã‚Œã®é›†åˆæ¼”ç®—ã®æ€§è³ªã‚’è¸ã¾ãˆã¦åˆ¶ç´„ç­‰ã¯å¤§ãã2ã¤ã®ã‚¿ã‚¤ãƒ—ã«åˆ†ã‹ã‚Œã¾ã™

```cpp
// set_intersectionã¨set_differenceã®viewå‹ã®åˆ¶ç´„
template<view V1, view V2>
  requires input_range<V1> && input_range<V2> &&
           indirect_strict_weak_order<ranges::less, iterator_t<V1>, iterator_t<V2>>
class set_[intersection|difference]_view;
```
```cpp
// set_unionã¨set_symmetric_differenceã®viewå‹ã®åˆ¶ç´„
template<view V1, view V2>
  requires input_range<V1> && input_range<V2> &&
           indirect_strict_weak_order<ranges::less, iterator_t<V1>, iterator_t<V2>> &&
           concatable<V1, V2>
class set_[union|symmetric_difference]_view;
```

å‰è€…ã¯ç‰‡æ–¹ã®ç¯„å›²ï¼ˆ`V1`ï¼‰ã®è¦ç´ å‹ã‚’çµæœã¨ã™ã‚Œã°ã‚ˆã„ã®ã«å¯¾ã—ã¦ã€å¾Œè€…ã¯ä¸¡æ–¹ã®ç¯„å›²ã®è¦ç´ å‹ã‚’çµæœã¨ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ãŸã‚ã€`concatable<V1, V2>`ã®é•ã„ãŒã‚ã‚Šã¾ã™ã€‚

ã©ã®ã‚¢ãƒ€ãƒ—ã‚¿ã‚‚ç¯„å›²`v1, v2`ã«å¯¾ã—ã¦`v1 | views::set_xxx(v2)`ã®æ§˜ã«ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³è¨˜æ³•ã§è¨˜è¿°ã§ãã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚

4ã¤ã®ã‚¢ãƒ€ãƒ—ã‚¿ï¼ˆ`view`ï¼‰ã„ãšã‚Œã®å ´åˆã§ã‚‚ãã®ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã«ã‚ˆã£ã¦æ¼”ç®—ãŒè¡Œã‚ã‚Œã¾ã™ã€‚ã¾ãšã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ãŒæ§‹ç¯‰ã•ã‚Œã‚‹ã¨`satisfy()`é–¢æ•°ï¼ˆãã®é›†åˆæ¼”ç®—ã«å¯¾å¿œã—ãŸè¦ç´ åˆ¤å®šé–¢æ•°ï¼‰ã«ã‚ˆã£ã¦æœ€åˆã®å‡ºåŠ›è¦ç´ ãŒç‰¹å®šã•ã‚Œã€ãã®å¾Œã¯`++`ã§ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ãŒé€²ã‚€ã”ã¨ã«æ¬¡ã®é›†åˆè¦ç´ ã‚’ç‰¹å®šã—ã¦ã„ãã¾ã™ã€‚å‹•ä½œã¨ã—ã¦ã¯`views::filter`ã«è¿‘ã„ã§ã™ã€‚

ã“ã®`satisfy()`é–¢æ•°ã§ã¯2ã¤ã®å…¥åŠ›ç¯„å›²ã®ä¸¡æ–¹ã‚’é †ç•ªã«é€²ã‚ã¦ã„ãå¿…è¦ãŒã‚ã‚‹ãŸã‚ã€ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã¯2ã¤ã®å…¥åŠ›ç¯„å›²ã®ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã¨ç•ªå…µã‚’å…±ã«ä¿æŒã—ã¦ã„ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

```cpp
// set_intersectionã®viewã®ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã®å®Ÿè£…ã‚¤ãƒ¡ãƒ¼ã‚¸
class set_intersection_view::iterator {
  iterator_t<V1> current1_;
  sentinel_t<V1> end1_;
  iterator_t<V2> current2_;
  sentinel_t<V2> end2_;

  constexpr void satisfy() {
    while (current1_ != end1_ && current2_ != end2_) {
      // V1ã®ä¸­ã‹ã‚‰æ¬¡ã®æœ‰åŠ¹ãªè¦ç´ ã‚’æ¢ã™å‡¦ç†
      ...
    }
  }

  constexpr iterator(iterator_t<V1> current1, sentinel_t<V2> end1,
                     iterator_t<V1> current2, sentinel_t<V2> end2)
    : current1_(std::move(current1)), end1_(end1),
      current2_(std::move(current2)), end2_(end2) {
    satisfy();
  } 

public:
  constexpr decltype(auto) operator*() const { return *current1_; }

  constexpr iterator&
  operator++() {
    ++current1_;
    ++current2_;
    satisfy();
    return *this;
  }

  friend constexpr bool operator==(const iterator& x, default_sentinel_t) {
    return x.current1_ == x.end1_ || x.current2_ == x.end2_;
  }
};
```

åŸºæœ¬çš„ã«ã¯ã“ã®ã‚ˆã†ãªã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿å®Ÿè£…ã®ç´°éƒ¨ã‚’å°‘ã—ã¥ã¤èª¿æ•´ã™ã‚‹ã“ã¨ã§4ã¤ã®`view`ã‚’å®Ÿè£…ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚`set_union`/`set_symmetric_difference`ã®å ´åˆã¯ä¸¡æ–¹ã®ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã‹ã‚‰å€¤ã‚’èª­ã¿å–ã‚‹å¿…è¦ãŒã‚ã‚‹ãŸã‚ã€ã‚ã‚‹æ™‚ç‚¹ã§ã©ã¡ã‚‰ã®ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã‚’ä½¿ç”¨ã™ã‚‹ã¹ãã‹ã‚’è¡¨ã™ãƒ•ãƒ©ã‚°ãŒä¸€ã¤å¿…è¦ã«ãªã‚Šã¾ã™ã€‚

ãã®ä»–ã®æ€§è³ªã¯æ¬¡ã®ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™

- `range`ã‚«ãƒ†ã‚´ãƒª: ã‚‚ã£ã¨ã‚‚å¼·ãã¦ã‚‚`forward_range`
- `common_range`: Ã—
- `borrowed_range`: `V1`ã¨`V2`ãŒã¨ã‚‚ã«`borrowed_range`ãªã‚‰
- `const-iterable`
    - `set_union`: ã€‡
    - ãã‚Œä»¥å¤–: Ã—
        - `begin()`ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®å¿…è¦ãŒã‚ã‚‹

ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰

```cpp
int main() {
  const auto v1 = std::views::iota(1, 6);
  const std::vector v2 = {1, 3, 5, 7};

  auto uni = v1 | views::set_union(v2);
  // [1, 2, 3, 4, 5, 7]
  
  auto intersection = v1 | views::set_intersection(v2);
  // [1, 5]
  
  auto difference = v1 | views::set_difference(v2);
  // [2, 4]
  
  auto symmetric_difference = v1 | views::set_symmetric_difference(v2);
  // [2, 4, 7]
}
```

- [P3740 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/2370)

### [P3742R0 C++ Standard Library Ready Issues to be moved in Sofia, Jun. 2025](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3742r0.html)

6æœˆã«è¡Œã‚ã‚ŒãŸSofiaä¼šè­°ã§WDã«é©ç”¨ã•ã‚ŒãŸãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«å¯¾ã™ã‚‹Issueå ±å‘Šã®ä¸€è¦§

- [4198. schedule_from isn't starting the schedule sender if decay-copying results throws](https://cplusplus.github.io/LWG/issue4198)
- [4202. enable-sender should be a variable template](https://cplusplus.github.io/LWG/issue4202)
- [4203. Constraints on get-state functions are incorrect](https://cplusplus.github.io/LWG/issue4203)
- [4204. specification of as-sndr2(Sig) in [exec.let] is incomplete](https://cplusplus.github.io/LWG/issue4204)
- [4205. let_[*].transform_env is specified in terms of the let_* sender itself instead of its child](https://cplusplus.github.io/LWG/issue4205)
- [4208. Wording needs to ensure that in connect(sndr, rcvr) that rcvr expression is only evaluated once](https://cplusplus.github.io/LWG/issue4208)
- [4209. default_domain::transform_env should be returning FWD-ENV(env)](https://cplusplus.github.io/LWG/issue4209)
- [4188. ostream::sentry destructor should handle exceptions](https://cplusplus.github.io/LWG/issue4188)
- [4200. The operation_state concept can be simplified](https://cplusplus.github.io/LWG/issue4200)
- [4201. with-await-transform::await_transform should not use a deduced return type](https://cplusplus.github.io/LWG/issue4201)
- [4217. Clarify mdspan layout mapping requirements for rank == 0](https://cplusplus.github.io/LWG/issue4217)
- [4222. expected constructor from a single value missing a constraint](https://cplusplus.github.io/LWG/issue4222)
- [4224. Philox engines should be freestanding](https://cplusplus.github.io/LWG/issue4224)
- [4227. Missing noexcept operator in [exec.when.all]](https://cplusplus.github.io/LWG/issue4227)
- [4231. datapar::chunk<N> should use simd-size-type instead of size_t](https://cplusplus.github.io/LWG/issue4231)
- [4232. datapar::resize does not resize](https://cplusplus.github.io/LWG/issue4232)
- [4233. The helper lambda of std::erase for hive should specify return type as](https://cplusplus.github.io/LWG/issue4233)
- [4234. Including <hive> doesn't provide std::begin/end](https://cplusplus.github.io/LWG/issue4234)
- [4235. cache_latest_view and to_input_view miss reserve_hint](https://cplusplus.github.io/LWG/issue4235)
- [4236. chunk_view::outer-iterator::value_type should provide reserve_hint](https://cplusplus.github.io/LWG/issue4236)
- [4239. flat_map's transparent comparator no longer works for string literals](https://cplusplus.github.io/LWG/issue4239)
- [4242. ranges::distance does not work with volatile iterators](https://cplusplus.github.io/LWG/issue4242)
- [4245. Operators that interact with counted_iterator and default_sentinel_t should be noexcept](https://cplusplus.github.io/LWG/issue4245)
- [4247. Header <stdbit.h> is not yet freestanding](https://cplusplus.github.io/LWG/issue4247)

### [P3745R0 Rebuttal to P1144R13](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3745r0.pdf)

P1144R13ã«å¯¾ã—ã¦åè«–ã‚’è¡Œã†ã‚¹ãƒ©ã‚¤ãƒ‰ã€‚

P1144R13ã«ã¤ã„ã¦ã¯ä»¥å‰ã®è¨˜äº‹ã‚’å‚ç…§

- [P1144R13 `std::is_trivially_relocatable`](https://onihusube.hatenablog.com/entry/2025/12/16/230316#P1144R13-stdis_trivially_relocatable)

P1144R13ã¯P2786R13ã«å¯¾ã—ã¦åå¯¾ã‚’è¡¨æ˜ã™ã‚‹ã‚‚ã®ã§ã™ãŒã€ã“ã‚Œã¯ã•ã‚‰ã«P1144R13ã®ä¸»å¼µã«åè«–ã™ã‚‹ã‚‚ã®ã§ã™ã€‚

ã‚¹ãƒ©ã‚¤ãƒ‰ã§ã¯ã€é–¢é€£ã™ã‚‹ææ¡ˆã®æå‡ºã‚¿ã‚¤ãƒŸãƒ³ã‚°ç­‰ã«ã¤ã„ã¦ã®èª¬æ˜ã‚’è¡Œã£ãŸå¾Œã€P1144R13ã®ä¸»å¼µï¼ˆã®ä¸€éƒ¨ï¼‰ã«å¯¾ã—ã¦ä¸€ã¤ä¸€ã¤åè«–ã‚’è¡Œã£ã¦ã„ã¾ã™ã€‚

### [P3746R0 LEWG Slides for P3637R0 Inherit `std::meta::exception` from `std::exception`](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3746r0.pdf)

P3637R0ã®ç´¹ä»‹ã‚¹ãƒ©ã‚¤ãƒ‰ã€‚

- [P3637R0 Inherit `std::meta::exception` from `std::exception` - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2025å¹´03æœˆï¼‰](https://onihusube.hatenablog.com/entry/2025/09/30/224815#P3637R0-Inherit-stdmetaexception-from-stdexception)

`std::meta::exception`ãŒ`std::exception`ã‚’ç¶™æ‰¿ã—ãªã„ã“ã¨ã®åŸå› ãŒç¾åœ¨å•é¡Œã§ã¯ãªã„ã“ã¨ã‚’èª¬æ˜ã—ã€ãã†ã™ã‚‹ã“ã¨ã®åˆ©ç‚¹ãªã©ã‚’ç°¡å˜ã«èª¬æ˜ã—ã¦ã„ã¾ã™ã€‚

### [P3747R0 Call side return type deduction](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3747r0.pdf)

å¼ã®æˆ»ã‚Šå€¤ã®å‹ã‚’å–å¾—ã™ã‚‹æ§‹æ–‡ã®ææ¡ˆã€‚

`std::numeric_limits`ã‚„`std::numbers`ãªã©ã®åˆ©ç”¨æ™‚ã«ã¯ã€æ•°å€¤å‹ã‚’æŒ‡å®šã—ã¦å€¤ã‚’å–å¾—ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

```cpp
double i = std::numeric_limits<double>::max();

float pi = std::numbers::pi_v<float>;
```

ã“ã®ã‚ˆã†ãªå ´åˆã€åˆæœŸåŒ–å…ˆã®å‹ã¨ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®å‹ãŒä¸€è‡´ã—ã¦ãŠã‚Šã€å†—é•·ã«æŒ‡å®šã—ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚ã“ã®æ™‚ã«ã€ã“ã®åˆæœŸåŒ–å…ˆã®å‹ã‚’åˆæœŸåŒ–ã—ã¦ã„ã‚‹å¼ã§å–å¾—ã§ãã‚‹ã¨å†—é•·ãªå‹ã®æŒ‡å®šã‚’çœç•¥ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```cpp
double i = std::numeric_limits<deduce>::max();  // deduceã¯doubleãŒå–å¾—ã•ã‚Œã‚‹

float pi = std::numbers::pi_v<deduce>;  // deduceã¯floatãŒå–å¾—ã•ã‚Œã‚‹
```

ã“ã®ææ¡ˆã¯ã€ã“ã®ã‚ˆã†ã«åˆæœŸåŒ–å¼ã®åˆæœŸåŒ–å…ˆã®å‹ã‚’å–å¾—ã™ã‚‹ã“ã¨ã®ã§ãã‚‹è¨€èªæ©Ÿèƒ½ã‚’ææ¡ˆã™ã‚‹ã‚‚ã®ã§ã™ã€‚ã“ã®ææ¡ˆã§ã¯ã“ã‚Œã‚’ä»®ã«`deduce`ã¨ã—ã¦ã„ã¾ã™ã€‚

ä¸Šè¨˜ã®ã‚ˆã†ãªå¤‰æ•°åˆæœŸåŒ–ã§ã‚ã‚Œã°ã€å¤‰æ•°ã®å®£è¨€ã®æ–¹ã‚’`auto`ã«ã—ã¦ãŠã‘ã°å‹ã‚’2å›æŒ‡å®šã™ã‚‹å¿…è¦ã¯ç„¡ããªã‚Šã¾ã™ãŒã€`auto`ã‚’ä½¿ç”¨ã§ããªã„æ‰€ã§ã¯2å›æŒ‡å®šã—ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚

```cpp
// ãƒ¡ãƒ³ãƒå¤‰æ•°å®šç¾©ã§ã®åˆ©ç”¨ã®ä¾‹
struct S {
  // ã“ã‚Œã¯ã§ããªã„
  auto i = std::numeric_limits<int>::max();

  // ã“ã®ææ¡ˆ
  int i = std::numeric_limits<deduce>::max();
};
```
```cpp
// ã“ã‚Œã¯é–¢æ•°ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«ãªã£ã¦ã—ã¾ã†
void func(auto i = std::numeric_limits<int>::max());

// ã“ã®ææ¡ˆ
void func(int i = std::numeric_limits<decude>::max());
```
```cpp
// Double/Float ã‚’ double/float ã®å¼·ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã¨ã™ã‚‹
Double func(Double);

Float f = 1;

func(f); // ngã€å¤‰æ›ã§ããªã„
func(static_cast<deduce>(f)); // è‡ªå‹•ã‚­ãƒ£ã‚¹ãƒˆ
```

ã“ã®ã‚ˆã†ãªåˆæœŸåŒ–å…ˆã®å‹ã®å–å¾—ã¯ã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå‹å¤‰æ›æ¼”ç®—å­ã«ãŠã„ã¦ç¾åœ¨ã§ã‚‚é™å®šçš„ã«åˆ©ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã—ã‹ã—ã€`std::numbers`ãªã©ã®æ—¢å­˜ã®ã‚‚ã®ã‚’ä»Šã‹ã‚‰ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå‹å¤‰æ›æ¼”ç®—å­ã‚’å‚™ãˆãŸå‹ã«å¤‰æ›´ã™ã‚‹ã“ã¨ã¯å¾Œæ–¹äº’æ›æ€§ã‚’ä¿ã¦ãªã„ï¼ˆABIç ´å£Šã«ãªã‚‹ï¼‰ãŸã‚ã«ä¸å¯èƒ½ã§ã™ã€‚ã“ã®ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã§ã‚ã‚Œã°ã€ä»–ã®éƒ¨åˆ†ã«ã»ã¨ã‚“ã©å½±éŸ¿ã‚’ä¸ãˆã‚‹ã“ã¨ãªãå°å…¥ã§ãã¾ã™ã€‚

- [P3747 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/2345)

### [P3748R0 Inspecting exception_ptr works should be constexpr.](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3748r0.html)

`std::exception_ptr_cast()`ã‚’`constexpr`æŒ‡å®šã™ã‚‹ææ¡ˆã€‚

C++26ã§å®šæ•°å¼ã§ã®ä¾‹å¤–é€å‡ºå¯¾å¿œã‚’å—ã‘ã¦ã€`<exception>`ãƒ˜ãƒƒãƒ€ã®`exception_ptr`é–¢é€£ã®ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã¯`constexpr`æŒ‡å®šã•ã‚Œã¦å®šæ•°å¼ã§åˆ©ç”¨å¯èƒ½ãªã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚

ã—ã‹ã—ã€åŒã˜ãC++26ã§è¿½åŠ ã•ã‚ŒãŸ`std::exception_ptr_cast()`ã¯ãã†ãªã£ã¦ã„ã¾ã›ã‚“ã€‚

ã“ã®é–¢æ•°ã®å®Ÿè£…ã«ã‚ãŸã£ã¦å®šæ•°å¼ã§å®Ÿè¡Œã§ããªã„ã‚ˆã†ãªéšœå®³ã¯ãªã„ã¯ãšã ã¨ã—ã¦ã€ã“ã®ææ¡ˆã§ã¯ã“ã®é–¢æ•°ã«`constexpr`ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã‚’ææ¡ˆã—ã¦ã„ã¾ã™ã€‚

- [P3748 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/2375)

### [P3749R0 Slides in response to P3655R2 - Concerns regarding `std::zstring_view`](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3749r0.html)

P3655R2ï¼ˆ`zstring_vew`ææ¡ˆï¼‰ã¸ã®æ‡¸å¿µã‚’èª¬æ˜ã—ãŸã‚¹ãƒ©ã‚¤ãƒ‰ã€‚

P3655ã«ã¤ã„ã¦ã¯ä»¥å‰ã®è¨˜äº‹ã‚’å‚ç…§

- [P3655R1 `zstring_view` - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2025å¹´05æœˆï¼‰](https://onihusube.hatenablog.com/entry/2025/12/16/230316#P3655R1-zstring_view)

ä¸»ã«ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®æ¤œè¨ãŒè¶³ã‚Šãªã„äº‹ã€`std::string_view`ã‚’æŒŸã‚€ã¨å¤‰æ›ã§ããªããªã‚‹ã“ã¨ã€å‘½åãŒåˆ†ã‹ã‚Šã¥ã‚‰ã„ã“ã¨ã€ã«ã¤ã„ã¦ã®æ‡¸å¿µã‚’è¡¨æ˜ã—ã¦ã„ã¾ã™ã€‚

### [P3752R0 Core Language Working Group "ready" Issues for the June, 2025 meeting](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3752r0.html)
### [P3753R0 Slides for P3740R0 <../2025/p3740r0.html> - Last chance to fix std::nontype](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3753r0.html)
### [P3753R1 Slides for P3740R1 <../2025/p3740r1.html> - Last chance to fix std::nontype](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3753r1.html)
### [P3754R0 Slides for P3100R2 <../2025/p3100r2.pdf> presentation to EWG](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3754r0.pdf)
### [P3757R0 Remove value-type invocability requirement from indirect unary callable concepts](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3757r0.html)

`indirectly_unary_invocable`ã‚³ãƒ³ã‚»ãƒ—ãƒˆã‹ã‚‰ã€ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã®å€¤å‹ã«ã‚ˆã£ã¦å‘¼ã³å‡ºã—å¯èƒ½ã§ã‚ã‚‹ã“ã¨ã‚’è¦æ±‚ã™ã‚‹åˆ¶ç´„ã‚’å‰Šé™¤ã™ã‚‹ææ¡ˆã€‚

`indirectly_unary_invocable<F, I>`ã‚³ãƒ³ã‚»ãƒ—ãƒˆã¯ã€`I`å‹ã®ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿çµŒç”±ã§å€¤ã‚’å–å¾—ã—ã¦ãã®å€¤ã«ã‚ˆã£ã¦`F`ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒå‘¼ã³å‡ºã—å¯èƒ½ã§ã‚ã‚‹ã“ã¨ã‚’è¡¨ç¾ã™ã‚‹ã‚³ãƒ³ã‚»ãƒ—ãƒˆã§ã™ã€‚ã“ã®ã‚³ãƒ³ã‚»ãƒ—ãƒˆå®šç¾©ä¸­ã§ã¯ã€ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã®å‚ç…§å‹ï¼ˆé–¢ç¯€å‚ç…§çµæœï¼‰ã ã‘ã§ãªãå€¤å‹ã«å¯¾ã—ã¦ã‚‚å‘¼ã³å‡ºã—å¯èƒ½ã§ã‚ã‚‹ã“ã¨ã‚’è¦æ±‚ã—ã¦ã„ã¾ã™ã€‚

```cpp
template<class F, class I>
  concept indirectly_unary_invocable =
    indirectly_readable<I> &&
    copy_constructible<F> &&
    invocable<F&, indirect-value-t<I>> && // ğŸ‘ˆ
    invocable<F&, iter_reference_t<I>> &&
    common_reference_with<
      invoke_result_t<F&, indirect-value-t<I>>, // ğŸ‘ˆ
      invoke_result_t<F&, iter_reference_t<I>>>;
```

`indirect-value-t<I>`ã¯å°„å½±ã®çµæœã‚’åæ˜ ã—ã¦å€¤å‹ã‚’å–å¾—ã™ã‚‹ã‚³ãƒ³ã‚»ãƒ—ãƒˆã§ã™ãŒã€å°„å½±ã‚’è€ƒæ…®ã—ãªã„å ´åˆã¯`std::iter_value_t<T>&`ãŒä½¿ç”¨ã•ã‚Œã¾ã™ã€‚ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã®å€¤å‹ã¯å¤šãã®å ´åˆç´ ã®*prvalue*ãªå‹ã§ã‚ã‚‹ãŸã‚ã€ã“ã®åˆ¶ç´„ã«ã‚ˆã£ã¦å®Ÿéš›ã«ã¯å·¦è¾ºå€¤å‚ç…§ã§å‘¼ã³å‡ºã•ãªã„ã‚ˆã†ãªå ´åˆã«ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚

```cpp
vector<string> v;
ranges::for_each(v | views::as_rvalue, [](string&& s) { /* */ }); // ngã€å³è¾ºå€¤ã§å‘¼ã³å‡ºã—ã§ãã‚Œã°ååˆ†ã ã‘ã©ãƒ»ãƒ»ãƒ»
```

ã¾ãŸã€ã“ã®å€¤å‹ã®å‘¼ã³å‡ºã—è¦æ±‚ã«ä¼´ã†`common_reference`è¦ä»¶ã«ã‚ˆã£ã¦ã€ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã®å‚ç…§çµæœã‚’ãƒ ãƒ¼ãƒ–ä¸å¯èƒ½ãªå‹ã«å°„å½±ã™ã‚‹ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œãªããªã£ã¦ã„ã¾ã™ï¼ˆ`common_reference_with`ã‚³ãƒ³ã‚»ãƒ—ãƒˆå†…ã§å¤‰æ›å¯èƒ½æ€§ãŒãƒã‚§ãƒƒã‚¯ã•ã‚Œã‚‹ãŸã‚ï¼‰ã€‚

æ­´å²ã‚’ç´è§£ãã¨ã€`indirectly_unary_invocable`ã‚³ãƒ³ã‚»ãƒ—ãƒˆã®ã“ã®ã‚ˆã†ãªè¦ä»¶ã¯ã€ãã®äºŒé …ç‰ˆã‚³ãƒ³ã‚»ãƒ—ãƒˆã§ã‚ã‚‹`indirect_binary_predicate`ã‚„`indirect_equivalence_relation`ã«ãŠã‘ã‚‹åŒæ§˜ã®åˆ¶ç´„ã‹ã‚‰æ¥ã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚ã“ã‚Œã‚‰ã®äºŒé …ç‰ˆã‚³ãƒ³ã‚»ãƒ—ãƒˆã§ã¯ç¢ºã‹ã«ã€ãã‚Œã‚’ä½¿ç”¨ã™ã‚‹ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã«ãŠã„ã¦ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã®å€¤å‹ã¸ã®ã‚³ãƒ”ãƒ¼ã¨ãã‚Œã‚’ç”¨ã„ãŸé–¢æ•°å‘¼ã³å‡ºã—ãŒç™ºç”Ÿã™ã‚‹ãŸã‚ã“ã‚Œã¯å¿…è¦ãªåˆ¶ç´„ã§ã™ï¼ˆ`ranges::unique_copy`ãªã©ï¼‰ã€‚

å˜é …ç‰ˆã®ã‚³ãƒ³ã‚»ãƒ—ãƒˆã¯äºŒé …ç‰ˆã‹ã‚‰ãã‚Œã‚’ç¶™æ‰¿ã—ã¦ã“ã®ã‚ˆã†ãªåˆ¶ç´„ã‚’ã‚‚ã£ã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚ã—ã‹ã—ã€å˜é …ç‰ˆã‚³ãƒ³ã‚»ãƒ—ãƒˆã®ä½¿ç”¨å ´æ‰€ã‚’è¦‹ã¦ã¿ã‚‹ã¨ãã‚Œã¯ã©ã†ã‚„ã‚‰ä¸è¦ãªåˆ¶ç´„ã§ã‚ã‚‹ã‚ˆã†ã§ã€ã“ã®ææ¡ˆã§ã¯ã“ã®åˆ¶ç´„ã‚’å‰Šé™¤ã—ã‚ˆã†ã¨ã—ã¦ã„ã¾ã™ã€‚

`indirectly_unary_invocable`ã‚³ãƒ³ã‚»ãƒ—ãƒˆã‚’ç›´æ¥çš„/é–“æ¥çš„ã«ä½¿ç”¨ã—ã¦ã„ã‚‹ã‚‚ã®

- `ranges::for_each`ç³»
- `ranges::all_of, any_of, none_of`
- `ranges::find`ç³»
- `ranges::count_if`
- `ranges::copy_if, replace_if, replace_copy_if, remove_if, remove_copy_if`
- `ranges::is_partitioned`
- `ranges::partition, stable_partition, partition_copy, partition_point`
- `ranges::filter_view, take_while_view, drop_while_view`
- `std::projected<I, Proj>`
- `std::projected_value_t<I, Proj>`

ã“ã®ã†ã¡ã€æœ€å¾Œã®`std::projected_value_t`ã ã‘ã¯å®Ÿéš›ã«å€¤å‹ã®ã“ã®ã‚ˆã†ãªåˆ¶ç´„ãŒé‡è¦ãªæ„å‘³ã‚’æŒã£ã¦ã„ã¾ã™ã€‚ãã®ãŸã‚ã€`std::projected_value_t`ã«ã¯ã“ã®ææ¡ˆã®å¤‰æ›´ã®å½±éŸ¿ã‚’å—ã‘ãªã„ã‚ˆã†ã«ä¿®æ­£ã—ã¦ã„ã¾ã™ã€‚

ã“ã®ææ¡ˆå¾Œã®`indirectly_unary_invocable`ã‚³ãƒ³ã‚»ãƒ—ãƒˆã®å®šç¾©

```cpp
template<class F, class I>
  concept indirectly_unary_invocable =
    indirectly_readable<I> &&
    copy_constructible<F> &&
    invocable<F&, iter_reference_t<I>>;
```

ã¾ãŸã€ã“ã‚Œã¨åŒã˜å¤‰æ›´ã‚’åŒç¨®ã®`indirectly_regular_unary_invocable`ã¨`indirect_unary_predicate`ã«ã‚‚é©ç”¨ã—ã¦ã„ã¾ã™ã€‚

- [P3757 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/2380)

### [P3760R0 Presentation: constexpr 'Parallel' Algorithms](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3760r0.pdf)
### [P3763R0 Remove redundant reserve_hint members from view classes](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3763r0.html)

æ¨™æº–ã®`view`å‹ãŒ`size()`ã‚’æä¾›ã—ã¦ã„ã‚‹å ´åˆã«`reserve_hint`ã‚’å‰Šé™¤ã™ã‚‹ææ¡ˆã€‚

P2846R6ã®æ¡æŠã«ã‚ˆã£ã¦`reserve_hint`CPOãŠã‚ˆã³ã€å„æ¨™æº–`view`å‹ï¼ˆRangeã‚¢ãƒ€ãƒ—ã‚¿å®Ÿè£…ã‚¯ãƒ©ã‚¹ï¼‰ã«`reserve_hint`ãƒ¡ãƒ³ãƒé–¢æ•°ãŒå®šç¾©ã•ã‚Œã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚ã“ã‚Œã¯ã€`size()`ãŒåˆ©ç”¨ã§ããªã„å ´åˆã«ç¯„å›²ã‚µã‚¤ã‚ºã®è¦‹ç©ã‚‚ã‚Šã‚’ä¼é”ã™ã‚‹ã‚‚ã®ã§ã€`ranges::to`ã‚„ä¸€éƒ¨ã®æ¨™æº–ã‚³ãƒ³ãƒ†ãƒŠã®`from_range`ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãªã©ã§æ´»ç”¨ã•ã‚Œã¦ã„ã¾ã™ã€‚

ã“ã‚Œã«ã¤ã„ã¦å®šç¾©ã‚’ã‚ˆãè¦‹ã‚‹ã¨ã€å°‘ã—ãŠã‹ã—ãªã¨ã“ã‚ãŒã‚ã‚Šã¾ã™ã€‚

ã¾ãšã€`sized_range`ã‚³ãƒ³ã‚»ãƒ—ãƒˆã¯`approximately_sized_range`ã‚³ãƒ³ã‚»ãƒ—ãƒˆï¼ˆ`reserve_hint`CPOãŒä½¿ç”¨å¯èƒ½ã‹ã©ã†ã‹ã‚’è¡¨ã™ï¼‰ã«ã‚ˆã£ã¦`reserve_hint`ãŒåˆ©ç”¨å¯èƒ½ã‹ã©ã†ã‹ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ã„ã¾ã™ã€‚

```cpp
template<class T>
concept sized_range =
  approximately_sized_range<T> && requires(T& t) { ranges::size(t); };
```

æ¬¡ã«ã€å„`view`å‹ã§ã¯`sized_range`ã‚³ãƒ³ã‚»ãƒ—ãƒˆã¨`approximately_sized_range`ã‚³ãƒ³ã‚»ãƒ—ãƒˆã‚’ä½¿ç”¨ã—ã¦`.size()`/`.reserve_hint()`ã‚’å®šç¾©ã—ã¦ã„ã¾ã™ã€‚

```cpp
template<range R>
struct some_view : public view_interface<some_view<R>> {
  [â€¦]
  constexpr auto size()               requires sized_range<R>
  constexpr auto size() const         requires sized_range<const R>
  constexpr auto reserve_hint()       requires approximately_sized_range<R>
  constexpr auto reserve_hint() const requires approximately_sized_range<const R>
  [â€¦]
};
```

ãã—ã¦ã€`ranges::reserve_hint`CPOã¯`.size()`ãŒåˆ©ç”¨å¯èƒ½ã§ã‚ã‚Œã°`.reserve_hint()`ã‚ˆã‚Šã‚‚ãã¡ã‚‰ã‚’å„ªå…ˆã—ã¦ä½¿ç”¨ã—ã¾ã™ã€‚

ã™ãªã‚ã¡ã€å„`view`å‹ã¯`.size()`ã‚’æŒã¤å ´åˆã¯å¿…ãš`.reserve_hint()`ã‚‚æŒã¡ã¾ã™ãŒã€ç¯„å›²ã®æ­£ç¢ºãªã‚µã‚¤ã‚ºï¼ˆ`.size()`ï¼‰ãŒåˆ©ç”¨å¯èƒ½ãªå ´åˆã«ã‚µã‚¤ã‚ºã®è¦‹ç©ã‚‚ã‚Šï¼ˆ`.reserve_hint()`ï¼‰ã‚’æä¾›ã—ã¦ã‚‚å®Ÿç”¨çš„ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªå†…ã§ã¯`ranges::reserve_hint`CPOã‚’ä»‹ã—ã¦ã‚µã‚¤ã‚ºè¦‹ç©ã‚‚ã‚Šã‚’å–å¾—ã™ã‚‹ãŸã‚ã€ã“ã‚Œã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

ã“ã®ææ¡ˆã§ã¯ã€`reserve_hint`ã¯æ­£ç¢ºãªã‚µã‚¤ã‚ºãŒå¾—ã‚‰ã‚Œãªã„å ´åˆã«ã®ã¿æä¾›ã•ã‚Œã‚‹ã¹ãã§ã‚ã‚Šã€`.size()`ãŒåˆ©ç”¨å¯èƒ½ãªå ´åˆã¯ä¸è¦ã§ã‚ã‚‹ãŸã‚å‰Šé™¤ã™ã‚‹ã“ã¨ã‚’ææ¡ˆã—ã¦ã„ã¾ã™ã€‚

ã“ã‚Œã‚’æ®‹ã—ã¦ãŠãã¨ã€ä¸è¦ãªã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰ï¼ˆã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚é–“å¢—å¤§ï¼‰ã«ã‚‚ã¤ãªãŒã‚Šã¾ã™ã€‚

ææ¡ˆã§ã¯ã€`view`å‹ã®`.reserve_hint()`ãƒ¡ãƒ³ãƒé–¢æ•°ã®åˆ¶ç´„ã‚’ä¿®æ­£ã—ã¦ã€`approximate_sized_range`ãŒæº€ãŸã•ã‚Œã¦`sized_range`ãŒæº€ãŸã•ã‚Œã¦ã„ãªã„å ´åˆã«ã®ã¿å®šç¾©ã•ã‚Œã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚

- [P2846R6 reserve_hint: Eagerly reserving memory for not-quite-sized lazy ranges - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2025å¹´03æœˆï¼‰](https://onihusube.hatenablog.com/entry/2025/09/30/224815#P2846R6-reserve_hint-Eagerly-reserving-memory-for-not-quite-sized-lazy-ranges)
- [P3763 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/2382)

### [P3764R0 A utility function for propagating the most significant bit](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3764r0.html)

æ•´æ•°ã®æœ€ä¸Šä½ãƒ“ãƒƒãƒˆã ã‘ã‚’æ®‹ã—ãŸãƒ“ãƒƒãƒˆãƒã‚¹ã‚¯å€¤ã‚’ç”Ÿæˆã™ã‚‹é–¢æ•°`std::msb_to_mask`ã®ææ¡ˆã€‚

ãƒ“ãƒƒãƒˆæ“ä½œã«ãŠã„ã¦ã¯ã€ç¬¦å·ä»˜æ•´æ•°å€¤ã®æœ€ä¸Šä½ãƒ“ãƒƒãƒˆï¼ˆã™ãªã‚ã¡ç¬¦å·ãƒ“ãƒƒãƒˆï¼‰ã‚’ãã®ä»–ã™ã¹ã¦ã®ãƒ“ãƒƒãƒˆã«ä¼æ’­ã•ã›ãŸãƒ“ãƒƒãƒˆãƒã‚¹ã‚¯ã‚’ä½œæˆã—ã¦ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒå¤šã€…ã‚ã‚Šã€ã“ã‚Œã‚’ç”¨ã„ã‚‹ã¨æ•´æ•°ãŒæ­£ã‹è² ã‹ã§åˆ†å²ã™ã‚‹å¿…è¦ã®ã‚ã‚‹å‡¦ç†ã«ãŠã„ã¦åˆ†å²ç„¡ã—ã®å®Ÿè£…ãŒå¯èƒ½ã«ãªã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚

```cpp
// ãƒŠã‚¤ãƒ¼ãƒ–ãªmodå®Ÿè£…
int mod_naive(int x, int y) {
  int rem = x % y;
  if (rem < 0) rem += y;
  return rem;
}

// åˆ†å²ç„¡ã—ã®å®Ÿè£…
int mod_branchless(int x, int y) {
  int rem = x % y;
  rem += y & (rem >> (INT_WIDTH - 1)); // ğŸ‘ˆ
  return rem;
}
```

ã“ã®ã‚ˆã†ãªæœ€é©åŒ–ã¯ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ãŒå„ªç§€ã§ã‚ã‚Œã°è‡ªå‹•ã§é©ç”¨ã—ã¦ãã‚Œã‚‹å ´åˆã‚‚ã‚ã‚‹ã‚ˆã†ã§ã™ãŒã€ã‚³ãƒ¼ãƒ‰ãŒè¤‡é›‘åŒ–ã—ãŸã‚Šã™ã‚‹ã¨ãã®ä¿¡é ¼æ€§ã¯ä½ä¸‹ã—ã¾ã™ã€‚ã¾ãŸã€ã“ã®ã‚ˆã†ãªå½¢ã®ãƒ“ãƒƒãƒˆãƒã‚¹ã‚¯ã®ç”Ÿæˆã¯å°‘ã—é¢å€’ã§ã‚ã‚Šã€ç¬¦å·ä»˜/ç¬¦å·ãªã—æ•´æ•°å‹ã®ä¸¡æ–¹ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ã‚ˆã†ãªæ±ç”¨å®Ÿè£…ã§ã¯æ­£ã—ã„è¨˜è¿°ãŒå°‘ã—é›£ã—ããªã‚Šã¾ã™ã€‚ãã—ã¦ã€ã“ã®ã‚ˆã†ãªé–¢æ•°ã®ä½¿ç”¨ä¾‹ã¯githubã«ãŠã„ã¦å¤šæ•°è¦‹ã¤ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ã“ã®ææ¡ˆã¯ã€ã“ã®ã‚ˆã†ãªç¬¦å·ãƒ“ãƒƒãƒˆã‹ã‚‰ã®ãƒ“ãƒƒãƒˆãƒã‚¹ã‚¯ç”Ÿæˆã‚’è¡Œã†ãƒ“ãƒƒãƒˆæ¼”ç®—é–¢æ•°`std::msb_to_mask()`ã‚’`<bit>`ã«è¿½åŠ ã™ã‚‹ææ¡ˆã§ã™ã€‚

`std::msb_to_mask()`ã¯æ¬¡ã®ã‚ˆã†ãªé–¢æ•°ã§ã™

```cpp
namespace std {
  template<class T>
  constexpr T msb_to_mask(T x) noexcept;
}
```

`T`ã¨ã—ã¦ã¯ç¬¦å·ä»˜æ•´æ•°å‹ã¨ç¬¦å·ãªã—æ•´æ•°å‹ã®ä¸¡æ–¹ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã™ã€‚ã¾ãŸã€`std::simd`ã‚ªãƒ¼ãƒãƒ¼ãƒ­ãƒ¼ãƒ‰ã‚‚è¿½åŠ ã™ã‚‹ã“ã¨ã‚’ææ¡ˆã—ã¦ã„ã¾ã™ã€‚

å‘¼ã³å‡ºã™ã¨ã€å¼•æ•°`x`ã®ç¬¦å·ãƒ“ãƒƒãƒˆã‚’ãã‚Œä»¥ä¸‹ã®å…¨ã¦ã®ãƒ“ãƒƒãƒˆã«ä¼æ’­ã•ã›ãŸãƒ“ãƒƒãƒˆãƒã‚¹ã‚¯ã«å¯¾å¿œã™ã‚‹æ•´æ•°å€¤ã‚’è¿”ã—ã¾ã™ã€‚

ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰

```cpp
int main() {
  std::println("{:032b}", std::bit_cast<std::uint32_t>(10));
  std::println("{:032b}", std::bit_cast<std::uint32_t>(msb_to_mask(10)));
  std::println("{:032b}", std::bit_cast<std::uint32_t>(-10));
  std::println("{:032b}", std::bit_cast<std::uint32_t>(msb_to_mask(-10)));
  std::println("{:032b}", 10u);
  std::println("{:032b}", msb_to_mask(10u));
}
```

å‡ºåŠ›ä¾‹

```
00000000000000000000000000001010
00000000000000000000000000000000
11111111111111111111111111110110
11111111111111111111111111111111
00000000000000000000000000001010
00000000000000000000000000000000
```

å‡¦ç†ã®ç‰¹æ€§ä¸Šã€ç¬¦å·ãªã—æ•´æ•°å‹ã«å¯¾ã—ã¦ã¯å¸¸ã«0ã‚’è¿”ã—ã¾ã™ï¼ˆã¯ãšã§ã™ï¼‰ã€‚

ææ¡ˆæ–‡æ›¸ã‚ˆã‚Šã€å®Ÿè£…ä¾‹ã€‚

```cpp
namespace std {
  template<signed-or-unsigned-integer T>
    constexpr T msb_to_mask(T x) noexcept {
      using S = make_signed_t<T>;
      return static_cast<T>(static_cast<S>(x) >> numeric_limits<S>::digits);
    }
}
```

CPUã«ã‚ˆã£ã¦ã¯ã“ã‚Œã‚’è¡Œã†å‘½ä»¤ã‚’å‚™ãˆã¦ã„ã‚‹å ´åˆãŒã‚ã‚‹ã‚ˆã†ã§ã™ã€‚

- [P3764 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/2383)

### [P3765R0 Deprecate implicit conversion from bool to character types](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3765r0.html)

`bool`ã‹ã‚‰æ–‡å­—å‹ã¸ã®æš—é»™å¤‰æ›ã‚’éæ¨å¥¨ã«ã™ã‚‹ææ¡ˆã€‚

ä¾‹ãˆã°æ¬¡ã®ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ã«ãŠã„ã¦ã€`bool`ã‹ã‚‰`char`å‹ã¸ã®æš—é»™å¤‰æ›ãŒç™ºç”Ÿã—ã¦ã„ã¾ã™ãŒã€ã“ã‚Œã¯è­¦å‘Šãªã©ãŒç™ºç”Ÿã‚‰ã‚Œã‚‹ã“ã¨ã‚‚ãªãã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã•ã‚Œã€å®Ÿè¡Œã§ãã¦ã—ã¾ã„ã¾ã™ã€‚

```cpp
std::string_view str = /* ... */;
if (str.ends_with('\n' || str.ends_with('\r'))) {
//                   ^^
  ...
}
```

ã“ã®ã‚³ãƒ¼ãƒ‰ã§ã¯`'\n'`ã®å¾Œã«ã‹ã£ã“ã‚’å…¥ã‚Œå¿˜ã‚ŒãŸã†ãˆã§åˆ¥ã®å ´æ‰€ã«ã‹ã£ã“ã‚’æŒ¿å…¥ã—ã¦ã—ã¾ã£ã¦ã„ã‚‹ä¾‹ã§ã™ã€‚ã“ã®ã‚³ãƒ¼ãƒ‰ã«ãŠã‘ã‚‹`'\n' || str.ends_with('\r')`ã¯å…¨ä½“ã¨ã—ã¦å¸¸ã«`true`ã«ãªã‚Šã¾ã™ã€‚

ã¾ãšã€çµ„ã¿è¾¼ã¿`||`ã®ã‚ªãƒšãƒ©ãƒ³ãƒ‰ã¯`bool`ã§ãªã‘ã‚Œã°ãªã‚‰ãªã„ãŸã‚ã€`'\n'`ã¯`bool`ã«å¤‰æ›ã•ã‚Œã¾ã™ã€‚ã“ã‚Œã¯`char(0)`ã§ã¯ãªã„ãŸã‚`bool`å€¤ã¨ã—ã¦ã¯å¸¸ã«`true`ã«ãªã‚‹ãŸã‚ã€`str.ends_with('\r')`ã®çµæœãŒãªã‚“ã§ã‚ã‚Œ`true || str.ends_with('\r')`ã¯`true`ã«ãªã‚Šã¾ã™ã€‚ãã—ã¦ã€ãã®çµæœã‚’ç”¨ã„ãŸ`str.ends_with(true)`ã®å‘¼ã³å‡ºã—ã¯`bool`å‹ã‹ã‚‰`char`ã¸ã®æš—é»™å¤‰æ›ã«ã‚ˆã£ã¦`str.ends_with(char)`ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ­ãƒ¼ãƒ‰ã‚’å‘¼ã³å‡ºã—ã¾ã™ã€‚

ã—ã‹ã—å½“ç„¶ã€ã“ã®ã‚³ãƒ¼ãƒ‰ã¯ã»ã¨ã‚“ã©ã®å ´åˆã«æ„å›³é€šã‚Šã«å‹•ä½œã—ãªã„ã§ã—ã‚‡ã†ã€‚

ã“ã®ã‚ˆã†ãªå¤‰æ›ã¯æ„å‘³ã®ã‚ã‚‹ã‚‚ã®ã¨ã¯æ€ãˆãšã€ä¸Šè¨˜ä¾‹ã®ã‚ˆã†ã«ãƒã‚°ã®å…ƒã«ã—ã‹ãªã‚‰ãªã„ãŸã‚ã€ã“ã®ææ¡ˆã§ã¯ã“ã®å¤‰æ›ã‚’éæ¨å¥¨ã«ã—ã‚ˆã†ã¨ã—ã¦ã„ã¾ã™ã€‚

ææ¡ˆã—ã¦ã„ã‚‹ã®ã¯ã€`bool`å‹ã‹ã‚‰æ–‡å­—å‹ã€ã™ãªã‚ã¡`char, wchar_t, char8_t, char16_t, char32_t`å‹ã¸ã®æš—é»™å¤‰æ›ã‚’éæ¨å¥¨ã¨ã™ã‚‹ã“ã¨ã§ã™ã€‚å‰Šé™¤ã™ã‚‹ã“ã¨ã¯ææ¡ˆã—ã¦ãŠã‚‰ãšã€`bool`å‹ã‹ã‚‰`signed char`/`unsigned char`å‹ã¸ã®æš—é»™å¤‰æ›ã¯å¯¾è±¡ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

```cpp
int x = /* ... */, z;
unsigned char y = x % 2 != 0; // okã€ææ¡ˆå¾Œã‚‚éæ¨å¥¨ã§ã¯ãªã„
z += y;
```

ã¾ãŸã€æ˜ç¤ºçš„å¤‰æ›ã‚‚éæ¨å¥¨ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

```cpp
bool b = /* ... */;

char d1 = b;                    // deprecated
char d2(b);                     // deprecated
char d3{b};                     // deprecated
char d4 = {b};                  // deprecated
char d5 = char{b};              // deprecated

char k1 = char(b);              // OK
char k2 = (char)b;              // OK
char k3 = static_cast<char>(b); // OK

'a' + b;                        // OK

char d6 = +b;                   // OK
```

ã“ã®ææ¡ˆã¯EWGã®è­°è«–ã«ã¦ã‚ˆã‚Šæ™‚é–“ã‚’ã‹ã‘ã‚‹ã“ã¨ã«åˆæ„ã‚’å¾—ã‚‰ã‚Œãšã€ãƒªã‚¸ã‚§ã‚¯ãƒˆã•ã‚Œã¦ã„ã¾ã™ã€‚

- [P3765 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/2384)

### [P3769R0 Clarification of placement new deallocation](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3769r0.html)

é…ç½®`new`å¼ã«ãŠã‘ã‚‹`delete`æ¼”ç®—å­ã®é¸æŠã«é–¢ã™ã‚‹ä»•æ§˜ã‚’æ˜ç¢ºåŒ–ã™ã‚‹ææ¡ˆã€‚

P3492ã§ã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼å®šç¾©é…ç½®`new`æ¼”ç®—å­ã‚’å‘¼ã³å‡ºã™`new`å¼ã«ãŠã„ã¦ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆåˆæœŸåŒ–å¤±æ•—æ™‚ã«å‘¼ã³å‡ºã•ã‚Œã‚‹`delete`æ¼”ç®—å­ã«å¯¾ã—ã¦ç¢ºä¿ã—ãŸã‚µã‚¤ã‚ºã«é–¢ã™ã‚‹æƒ…å ±ã‚’æ¸¡ã›ã‚‹ã‚ˆã†ã«ã—ã‚ˆã†ã¨ã™ã‚‹ã‚‚ã®ã§ã™ã€‚ã“ã®ä»•æ§˜ã®ç­–å®šãƒ»æ¤œè¨æ™‚ã«ã€é…ç½®`new`å¼ã«ãŠã„ã¦ã©ã®`delete`æ¼”ç®—å­ãŒé¸æŠã•ã‚Œã‚‹ã‹ã«ã¤ã„ã¦ã®ä»•æ§˜ãŒä¸ååˆ†ã§ã‚ã£ãŸã“ã¨ãŒç™ºè¦šã—ã€P3492R2ã§ã¯ãã®ä¿®æ­£ã‚‚å«ã‚ã‚‹å½¢ã®æ–‡è¨€ãŒææ¡ˆã•ã‚Œã¦ã„ã¾ã—ãŸã€‚

ã—ã‹ã—ã€ãã‚Œã¯P3492ã®ä¸»ãŸã‚‹ææ¡ˆã¨ã¯å°‘ã—å¤–ã‚ŒãŸã¨ã“ã‚ã«ã‚ã‚Šã€å¤‰æ›´ç‚¹ã‚’æ˜ç¢ºã«ã™ã‚‹ãŸã‚ã«åˆ¥ã®ææ¡ˆã«åˆ†é›¢ã•ã‚Œã‚‹ã“ã¨ã«ãªã‚Šã€ã“ã‚ŒãŒãã®ææ¡ˆã§ã™ã€‚

ã“ã“ã§ã¯ã€æ¬¡ã®ææ¡ˆã‹ã‚‰é–¢é€£ã™ã‚‹æ–‡è¨€ã‚’åˆ†é›¢ã—ã¦ãã¦ã„ã¾ã™

- P3492R2
- P2719R5

ã¾ãŸã€ã“ã®ææ¡ˆã®å†…å®¹ã¯DRã¨ã™ã‚‹ã“ã¨ã‚’ææ¡ˆã—ã¦ã„ã¾ã™ã€‚

ã“ã®ææ¡ˆã«ãŠã„ã¦ã€ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ã‚³ãƒ¼ãƒ—ã§`new`å¼ã«å¯¾å¿œã™ã‚‹`delete`æ¼”ç®—å­ãŒæ¢ç´¢ã•ã‚Œã‚‹å ´åˆã€æ¬¡ã®ã‚ˆã†ã«é¸æŠã•ã‚Œã¾ã™

1. å€™è£œãŒé–¢æ•°ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§ã‚ã‚‹å ´åˆã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå¼•æ•°æ¨è«–ã‚’ç”¨ã„ã¦å€™è£œé–¢æ•°ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ç‰¹æ®ŠåŒ–ã‚’ç”Ÿæˆã™ã‚‹ã€‚æ¨è«–ã«ä½¿ç”¨ã•ã‚Œã‚‹å¼•æ•°ã¯ã€æœ€åˆã®å¼•æ•°ã¨ãã‚Œã«ç¶šãå¼•æ•°ã€‚
2. ä»®å¼•æ•°å®£è¨€ãŒçœç•¥è¨˜å·ï¼ˆ`...`ï¼‰ã§çµ‚äº†ã™ã‚‹é–¢æ•°ã¯ã€ï¼ˆé¸æŠã•ã‚Œã¦ã„ã‚‹ï¼‰`new`æ¼”ç®—å­ã®ä»®å¼•æ•°å®£è¨€ãŒåŒæ§˜ã«çœç•¥è¨˜å·ã§çµ‚äº†ã—ã¦ã„ãªã„å ´åˆã€ä»¥é™ã®æ¤œè¨å€™è£œã‹ã‚‰å¤–ã™ã€‚
3. ä»®å¼•æ•°å®£è¨€ãŒçœç•¥è¨˜å·ï¼ˆ`...`ï¼‰ã§çµ‚äº†ã—ãªã„ã‚‚ã®ã®ã€ï¼ˆé¸æŠã•ã‚Œã¦ã„ã‚‹ï¼‰`new`æ¼”ç®—å­ã®ä»®å¼•æ•°å®£è¨€ãŒçœç•¥è¨˜å·ã§çµ‚äº†ã—ã¦ã„ã‚‹å ´åˆã€ä»¥é™ã®æ¤œè¨å€™è£œã‹ã‚‰å¤–ã™ã€‚
4. å¼•æ•°ã®æ•°ãŒï¼ˆé¸æŠã•ã‚Œã¦ã„ã‚‹ï¼‰`new`æ¼”ç®—å­ã®å¼•æ•°ã®æ•°ã¨ç­‰ã—ããªã„å ´åˆã€ä»¥é™ã®æ¤œè¨å€™è£œã‹ã‚‰å¤–ã™ã€‚
5. å¼•æ•°ã®å¤‰æ›ã®å¾Œã®é–¢æ•°å¼•æ•°ã®å‹ãŒã€ãã‚Œãã‚Œã®æœ€åˆã®å¼•æ•°ã‚’é™¤ã„ã¦ã€ï¼ˆé¸æŠã•ã‚Œã¦ã„ã‚‹ï¼‰`new`æ¼”ç®—å­ã®å¼•æ•°ã®å‹ã¨ä¸€è‡´ã—ãªã„å ´åˆã€ä»¥é™ã®æ¤œè¨å€™è£œã‹ã‚‰å¤–ã™ã€‚
6. ï¼ˆã“ã“ã¾ã§ã®é¸åˆ¥ã®å¾Œã§ï¼‰é–¢æ•°ãŒä¸€ã¤ã ã‘æ®‹ã£ã¦ã„ã‚‹å ´åˆã€ãã‚Œã‚’é¸æŠã—ã¦é¸æŠãƒ—ãƒ­ã‚»ã‚¹ã‚’çµ‚äº†ã™ã‚‹ã€‚
7. ãã‚Œä»¥å¤–ã®å ´åˆã€é–¢æ•°ã‚’é¸æŠã›ãšã«é¸æŠãƒ—ãƒ­ã‚»ã‚¹ã¯çµ‚äº†ã™ã‚‹ã€‚

ã“ã®é¸æŠã®éç¨‹ï¼ˆç‰¹ã«4~5ï¼‰ã«ãŠã„ã¦ã€`delete`é–¢æ•°æœ«å°¾ã«ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå¼•æ•°ã‚’æŒ‡å®šã™ã‚‹å½¢ã§è¿½åŠ ã•ã‚Œã¦ã„ã‚‹å¼•æ•°ã§ã‚‚ãã‚Œã«ã‚ˆã£ã¦çœç•¥ã•ã‚ŒãŸã‚Šã›ãšã«ã€å³å¯†ã«ãƒãƒƒãƒãƒ³ã‚°ã•ã‚Œã¾ã™ã€‚

```cpp
struct A {};
struct T {};

void* operator new(std::size_t s, A& al); // #1

template<int = 0>
void operator delete(void* p, A& al); // #2

A al;
new (al) T(); // okã€#1ã¨#2ã®ãƒšã‚¢ã‚’ä½¿ç”¨ã™ã‚‹
```
```cpp
template<int I>
struct A {};
struct T {};

void* operator new(std::size_t s, A& al); // #1

template<int I>
void operator delete(void* p, A<I>& al); // #2
void operator delete(void* p, A<0>& al); // #3

A<0> al;
new (al) T(); // okã€#1ã‚’ä½¿ç”¨ï¼ˆdeleteã¯é¸æŠã•ã‚Œãªã„
```
```cpp
struct A {};
struct T {};

void* operator new(std::size_t s, A& al);
void operator delete(void* p, A& al) = delete;

A al;
new (al) T(); // ngã€å‰Šé™¤ã•ã‚ŒãŸé–¢æ•°ãŒé¸æŠã•ã‚ŒãŸ
```

- [P3492R2 Sized deallocation for placement new - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2025å¹´03æœˆï¼‰](https://onihusube.hatenablog.com/entry/2025/09/30/224815#P3492R2-Sized-deallocation-for-placement-new)
- [P2719R5 Type-aware allocation and deallocation functions - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2025å¹´05æœˆï¼‰](https://onihusube.hatenablog.com/entry/2025/12/16/230316#P2719R5-Type-aware-allocation-and-deallocation-functions)
- [P3769 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/2385)

### [P3771R0 constexpr mutex, locks, and condition variable](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3771r0.html)

æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒŸãƒ¥ãƒ¼ãƒ†ãƒƒã‚¯ã‚¹ã‚„æ¡ä»¶å¤‰æ•°é–¢é€£ã®ã‚‚ã®ã‚’å®šæ•°å¼ã§ä½¿ç”¨å¯èƒ½ã«ã™ã‚‹ææ¡ˆã€‚

ã“ã®ææ¡ˆã¯ä»¥å‰ã«`std::atomic`é–¢é€£ã®ã‚‚ã®ã‚’å®šæ•°å¼å¯¾å¿œã•ã›ãŸææ¡ˆï¼ˆP3309R3ï¼‰ã®å»¶é•·ã§ã‚ã‚Šã€ãã‚Œã«ç¶šã„ã¦ãƒŸãƒ¥ãƒ¼ãƒ†ãƒƒã‚¯ã‚¹ã¨ãƒ­ãƒƒã‚¯ã€ãã—ã¦æ¡ä»¶å¤‰æ•°ã‚’å®šæ•°å¼ã§ä½¿ç”¨å¯èƒ½ã«ã—ã‚ˆã†ã¨ã™ã‚‹ã‚‚ã®ã§ã™ã€‚ãŸã ã—ã€ãã®å‹•æ©Ÿã¯å®Ÿè¡Œæ™‚ã¨ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ã§åŒã˜ã‚³ãƒ¼ãƒ‰ã‚’ä½¿ç”¨å¯èƒ½ã«ã™ã‚‹ã“ã¨ã«ã‚ã‚Šã€å®šæ•°å¼ã§ä¸¦è¡Œå‡¦ç†ã‚’è¡ŒãŠã†ã¨ã™ã‚‹ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

`if consteval`ã«ã‚ˆã£ã¦ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚å‡¦ç†ã®ãŸã‚ã®åˆ†å²ã¯å¯èƒ½ã«ãªã£ã¦ã„ã¾ã™ãŒã€ã“ã‚Œã¯ã‚³ãƒ¼ãƒ‰ã«ä½™åˆ†ãªåˆ†å²ã¨é‡è¤‡ã‚’ã‚‚ãŸã‚‰ã—ã€è¨˜è¿°ã—ã‚„ã™ã•ã¨å¯èª­æ€§ã‚’ä½ä¸‹ã•ã›ã¾ã™ã€‚æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã«ã¤ã„ã¦ã¯`constexpr`å¯¾å¿œã•ã›ã¦ãŠãã“ã¨ã§ã€åˆ©ç”¨å´ã®ã‚³ãƒ¼ãƒ‰ã¯ä½•ã‚‚ã›ãšã«å®šæ•°å¼ã¨å®Ÿè¡Œæ™‚ã®ä¸¡æ–¹ã§å‹•ä½œã™ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

ã“ã®ææ¡ˆã§`constexpr`æŒ‡å®šã‚’è¿½åŠ ã—ã‚ˆã†ã¨ã—ã¦ã„ã‚‹ã®ã¯

- `std::mutex`
- `std::recursive_mutex`
- `std::timed_mutex`
- `std::recursive_timed_mutex`
- `std::shared_mutex`
- `std::shared_timed_mutex`
- `std::lock_guard`
- `std::scoped_lock`
- `std::unique_lock`
- `std::shared_lock`
- `std::call_once`
- `std::condition_variable`
- `std::condition_variable_any`
- `std::notify_all_at_thread_exit`

ä¸€éƒ¨ã®ãƒŸãƒ¥ãƒ¼ãƒ†ãƒƒã‚¯ã‚¹å‹ãŒå‚™ãˆã¦ã„ã‚‹ã€`.try_lock_until()`ãªã©ã®æ™‚é–“æŒ‡å®šã§ãƒ­ãƒƒã‚¯å–å¾—ã‚’è©¦ã¿ã‚‹é–¢æ•°ã¯ã€å®šæ•°å¼ã«ãŠã„ã¦ã¯å³å‡¦ç†ã‚’è¿”ã™ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ã“ã®æ™‚ã€å¯¾è±¡ã®ãƒŸãƒ¥ãƒ¼ãƒ†ãƒƒã‚¯ã‚¹ãŒã™ã§ã«ãƒ­ãƒƒã‚¯ã•ã‚Œã¦ã„ãŸã‚‰å³æ™‚ã«å¤±æ•—ã™ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã¯ã€å®šæ•°å¼ã«ãŠã„ã¦ã¯æ™‚é–“è¨ˆæ¸¬ã®æ–¹æ³•ãŒãªã„ã“ã¨ã¨ã€å®Ÿè¡ŒãŒã‚·ãƒ³ã‚°ãƒ«ã‚¹ãƒ¬ãƒƒãƒ‰ã§ã‚ã‚‹ã“ã¨ã«ã‚ˆã‚‹å‹•ä½œã®é¸æŠã§ã™ã€‚

ã¾ãŸã€ã„ãšã‚Œã«ãŠã„ã¦ã‚‚`.native_handle()`ã¯`constexpr`æŒ‡å®šã•ã‚Œã¾ã›ã‚“ã€‚

å®šæ•°å¼ã«ãŠã„ã¦ã¯æœªå®šç¾©å‹•ä½œã¯ç¦æ­¢ï¼ˆã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ï¼‰ã§ã‚ã‚Šã€ãƒ‡ãƒƒãƒ‰ãƒ­ãƒƒã‚¯ã®ç™ºç”Ÿã¯æœªå®šç¾©å‹•ä½œã¨ãªã‚‹ãŸã‚ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã¨ãªã‚Šã¾ã™ï¼ˆã‚·ãƒ³ã‚°ãƒ«ã‚¹ãƒ¬ãƒƒãƒ‰å‹•ä½œæ™‚ã®ãã‚Œã¯åŒã˜ãƒŸãƒ¥ãƒ¼ãƒ†ãƒƒã‚¯ã‚¹ã«å¯¾ã—ã¦2åº¦ãƒ­ãƒƒã‚¯ã‚’å–å¾—ã™ã‚‹ã“ã¨ã§ã‚ã‚‹ãŸã‚ã€æ¤œå‡ºã¯å¯èƒ½ãƒ»ãƒ»ãƒ»ï¼Ÿï¼‰ã€‚

- [P3309R3 constexpr `atomic` and `atomic_ref` - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2024å¹´12æœˆï¼‰](https://onihusube.hatenablog.com/entry/2025/05/18/195724#P3309R3-constexpr-atomic-and-atomic_ref)
- [P3771 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/2386)

### [P3772R0 `std::simd` overloads for bit permutations](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3772r0.html)

`<bit>`ã®ãƒ“ãƒƒãƒˆç½®æ›ç³»æ“ä½œAPIã®`std::simd`ã‚ªãƒ¼ãƒãƒ¼ãƒ­ãƒ¼ãƒ‰ã‚’è¿½åŠ ã™ã‚‹ææ¡ˆã€‚

P3104R3ã§ã¯ã€C++29å‘ã‘ã«ãƒ“ãƒƒãƒˆç½®æ›ç³»ã®ãƒ“ãƒƒãƒˆæ¼”ç®—ã«å¯¾å¿œã™ã‚‹é–¢æ•°ã‚’è¿½åŠ ã—ã‚ˆã†ã¨ã—ã¦ã„ã¾ã™ã€‚ä¸€æ–¹ã€C++26ã§è¿½åŠ ã•ã‚Œã‚‹`std::simd`ã«å¯¾ã—ã¦ã¯P2933R4ã§`<bit>`ã«ã™ã§ã«ã‚ã‚‹ãƒ“ãƒƒãƒˆæ“ä½œé–¢æ•°ã«ã¤ã„ã¦`std::simd`å¯¾å¿œãŒãªã•ã‚Œã¦ã„ã¾ã™ã€‚

ã“ã®ææ¡ˆã¯ã€P3104R3ã§è¿½åŠ ã•ã‚Œã‚‹ãƒ“ãƒƒãƒˆæ“ä½œé–¢æ•°ã«ã¤ã„ã¦ã‚‚`std::simd`å¯¾å¿œã—ã¦ãŠã“ã†ã¨ã™ã‚‹ã‚‚ã®ã§ã™ã€‚

- [P3104R3 Bit permutations - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2025å¹´03æœˆï¼‰](https://onihusube.hatenablog.com/entry/2025/09/30/224815#P3104R3-Bit-permutations)
- [P2933R4 Extend header function with overloads for `std::simd` - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2025å¹´03æœˆï¼‰](https://onihusube.hatenablog.com/entry/2025/09/30/224815#P2933R4-Extend-header-function-with-overloads-for-stdsimd)
- [P3772 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/2387)

### [P3774R0 Rename `std::nontype`, and make it broadly useful](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3774r0.html)

`std::nontype`ã‚’`std::fn`ã«ãƒªãƒãƒ¼ãƒ ã™ã‚‹ææ¡ˆã€‚

P3740R1ï¼ˆå°‘ã—ä¸Šï¼‰ã®LEWGã§ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ã«ãŠã„ã¦ã¯ã€`std::nontype`ã‚’`std::constant_arg`ã«ãƒªãƒãƒ¼ãƒ ã™ã‚‹ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒæœ€ã‚‚æ”¯æŒã‚’é›†ã‚ã¾ã—ãŸãŒã€LWGã®æ™‚é–“ä¸è¶³ã‚‚ã‚ã‚ŠC++26ã«æ¡æŠã—ãªã„ã¨ã„ã†æ±ºå®šãŒãªã•ã‚ŒãŸã‚ˆã†ã§ã™ã€‚

ã“ã®ææ¡ˆã¯ã€ãã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®æ–¹å‘æ€§ã«ãŠã„ã¦ã€`std::nontype`ã‚’`std::fn`ã«ãƒªãƒãƒ¼ãƒ ã™ã‚‹ã“ã¨ã‚’ææ¡ˆã—ã¦ã„ã¾ã™ã€‚

`std::constant_arg`ã§ã¯ãªã`std::fn`ã¨ã™ã‚‹ã®ã¯ã€åŒæ™‚ã«C++29ä»¥é™ã®æ‹¡å¼µã¨ã—ã¦ææ¡ˆã—ã¦ã„ã‚‹ãƒ¡ãƒ³ãƒã®è¿½åŠ ã«ã‚ˆã£ã¦ã€`std::fn`ãŒé–¢æ•°ãƒã‚¤ãƒ³ã‚¿ã‚’å‹ã‚·ã‚¹ãƒ†ãƒ ã«æŒã¡ä¸Šã’ã‚‹å½¹å‰²ã‚’æ‹…ã†ã‚ˆã†ãªãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã«ãªã‚‹ã“ã¨ã‚’è¦‹è¶Šã—ã¦ã®äº‹ã§ã™ã€‚

ã“ã®ææ¡ˆã§ã¯ã€C++29ä»¥é™ã®æ‹¡å¼µã¨ã—ã¦`std::fn`ã«é–¢æ•°å‘¼ã³å‡ºã—æ¼”ç®—å­ã¨é–¢æ•°ãƒã‚¤ãƒ³ã‚¿ã¸ã®å¤‰æ›æ¼”ç®—å­ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã‚’ææ¡ˆã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã£ã¦ã€`std::fn`ã¯é–¢æ•°ãƒã‚¤ãƒ³ã‚¿ã«å¯¾ã—ã¦ãƒ©ãƒ ãƒ€å¼ã‚„`std::function_ref`ãªã©ã¨åŒç­‰ã®é–¢æ•°ãƒ©ãƒƒãƒ‘ã¨ã—ã¦åƒãã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

`std::fn<f>`ï¼ˆ`std::nontype<f>`ï¼‰ã¯é–¢æ•°`f`ã®é–¢æ•°ãƒã‚¤ãƒ³ã‚¿ã‚’NTTPå€¤ã¨ã—ã¦ä¿æŒã™ã‚‹ãŸã‚ã€é–¢æ•°ãƒã‚¤ãƒ³ã‚¿ä¿æŒã®ãŸã‚ã«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸é ˜åŸŸã‚’ä½¿ç”¨ã—ã¾ã›ã‚“ã€‚ã•ã‚‰ã«ã€`std::fn<f>`ã¯ç•°ãªã‚‹`f`ã«å¯¾ã—ã¦ç•°ãªã‚‹ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–ã‚’ã‚‚ãŸã‚‰ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã£ã¦ã€æ¨™æº–ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã«ãŠã„ã¦é–¢æ•°ãƒã‚¤ãƒ³ã‚¿ã‚’ä½¿ç”¨ã—ãŸæ™‚ã§ã‚‚ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³å±•é–‹ã—ã‚„ã™ããªã‚Šã¾ã™ã€‚

```cpp
void f(int);
std::ranges::for_each(r, f);                           // ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³å±•é–‹ã‚’å¦¨ã’ã‚‹ãŸã‚æ¨å¥¨ã•ã‚Œãªã„
std::ranges::for_each(r, [](int x) { return f(x); });  // æ­£ã—ã„ãŒé¢å€’
std::ranges::for_each(r, std::fn<f>);                  // æ­£ã—ãã€ç°¡æ½”
```

ã¾ãŸã€é–¢æ•°ãƒã‚¤ãƒ³ã‚¿ã¸ã®å¤‰æ›æ¼”ç®—å­ã¯ã‚ã‚‹ç¨‹åº¦ã®è‡ªç”±åº¦ã‚’æŒãŸã›ã¦ãŠãã“ã¨ã§ã€å¼•æ•°å‹ã®å¤‰æ›ã‚’è€ƒæ…®ã—ãŸé–¢æ•°ãƒã‚¤ãƒ³ã‚¿ã®å¤‰æ›æ©Ÿèƒ½ã‚’æä¾›ã§ãã¾ã™ã€‚

```cpp
bool is_prime(long long x);

bool(*p)(int) = std::fn<&is_prime>;
```

ã“ã®ã‚ˆã†ã«ã€`std::fn<f>`ã¯`f`ã®ã‚¢ãƒ‰ãƒ¬ã‚¹å€¤ã‚’å‹åã«å–ã‚Šè¾¼ã‚€ã“ã¨ã«ã‚ˆã£ã¦é–¢æ•°ãƒã‚¤ãƒ³ã‚¿ã‚’å‹ã‚·ã‚¹ãƒ†ãƒ ã«æŒã¡ä¸Šã’ã‚‹å½¹å‰²ã‚’æ‹…ã†ã‚ˆã†ã«ãªã‚‹ãŸã‚ã€ã‚ˆã‚ŠçŸ­ãé©åˆ‡ãªå‘½åã¨ã—ã¦`std::constant_arg`ã‚ˆã‚Šã‚‚`std::fn`ã‚’é¸æŠã—ã¦ã„ã¾ã™ã€‚

ææ¡ˆæ–‡æ›¸ã‚ˆã‚Šã€`std::fn`ã®å®Ÿè£…ä¾‹

```cpp
template<auto f>
struct fn_t
{
  using type = decltype(f);

  static constexpr bool is_function_ptr = std::is_function_v<std::remove_pointer_t<type>>;

  template<bool Noex, typename Ret, typename... Args>
  using func_type = Ret(*)(Args...) noexcept(Noex);

  constexpr operator type() const noexcept
    requires is_function_ptr
  { 
    return f;
  }

  template<bool Noex, typename Ret, typename... Args>
    requires (Noex ? std::is_nothrow_invocable_v<Ret, type const&, Args...> 
                   : std::is_invocable_r_v<Ret, type const&, Args...>)
  constexpr operator func_type<Noex, Ret, Args...>() const
  {
    if constexpr (is_function_ptr && std::is_convertible_v<type, func_type<Noex, Ret, Args...>>)
      return f;
    else
      return [](Args... args) noexcept(Noex) -> Ret {
        return std::invoke(f, std::forward<Args>(args)...);
      };
  }

  template<typename... Args>
    requires (!is_function_ptr)
  static constexpr std::invoke_result_t<type const&, Args...> operator()(Args&&... args)
    noexcept(std::is_nothrow_invocable_v<type const&, Args...>)
  { 
    return std::invoke(f, std::forward<Args>(args)...);
  }
};

template<auto f>
constexpr fn_t<f> fn;
```

ã“ã®ææ¡ˆã®C++26éƒ¨åˆ†ï¼ˆãƒªãƒãƒ¼ãƒ ã®ã¿ï¼‰ã«é–¢ã—ã¦ã¯NBã‚³ãƒ¡ãƒ³ãƒˆå¯¾å¿œã¨ã—ã¦C++26ã«æ¡æŠã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã¨ã—ã¦ãŠã‚Šã€å®Ÿéš›ã«å¯¾å¿œã™ã‚‹NBã‚³ãƒ¡ãƒ³ãƒˆãŒ2ä»¶æå‡ºã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚

- [é–¢æ•°ã¸ã®ãƒã‚¤ãƒ³ã‚¿ã«ã‚ˆã‚‹ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚’ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³åŒ–ã™ã‚‹ - Cry's Blog](https://blog.cryolite.net/entry/01000831/p1)
- [P3772 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/2452)

### [P3778R0 Fixing `type_order` template definition](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3778r0.html)

`std::type_order`ã«ã‚ˆã‚‹æ¯”è¼ƒçµæœã®è¡¨ç¾æ–¹æ³•ã‚’ä¿®æ­£ã™ã‚‹ææ¡ˆã€‚

P2830R10ã§ã¯2ã¤ã®å‹ã‚’å®Ÿè£…å®šç¾©ã®å…¨é †åºã®ä¸Šã§æ¯”è¼ƒã™ã‚‹ãŸã‚ã®ãƒ¡ã‚¿é–¢æ•°`std::type_order`ãŒææ¡ˆã•ã‚Œã€ã“ã‚Œã¯C++26ã«æ¡æŠã•ã‚Œã¦ã„ã¾ã™ã€‚`std::type_order`ã¯`std::type_order_v<T, U>`ã®ã‚ˆã†ã«ä½¿ç”¨ã—ã¦ã€2ã¤ã®å‹`T, U`ã®å®Ÿè£…å®šç¾©ã®`<`æ¯”è¼ƒã®çµæœã‚’`std::strong_ordering`ã®å€¤ã§å¾—ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ã“ã®`std::type_order`ã®å®Ÿè£…ã¯æ¬¡ã®ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™

```cpp
template <class T, class U>
struct type_order : integral_constant<strong_ordering, see below> {};

template <class T, class U>
constexpr strong_ordering type_order_v = type_order<T, U>::value;
```

ã“ã®ã‚ˆã†ã«`integral_constant`ï¼ˆç‰¹ã«`std::bool_constant`ï¼‰ã‚’ä½¿ç”¨ã—ã¦ãƒ¡ã‚¿é–¢æ•°ã®å®Ÿè£…ã‚’ã‚ã‚‹ç¨‹åº¦ç°¡ç•¥åŒ–ã™ã‚‹ã®ã¯ä»–ã®ãƒ¡ã‚¿é–¢æ•°ã§ã‚‚ã‚ˆãã‚„ã‚‰ã‚Œã¦ã„ã‚‹ã“ã¨ã§ã™ã€‚ã—ã‹ã—ã€`std::strong_ordering`ãŒNTTPã¨ã—ã¦ä½¿ç”¨ã§ããªã„ãŸã‚ã€ã“ã®å®Ÿè£…ã¯ä¸å¯èƒ½ã§ã—ãŸã€‚

NTTPã¨ã—ã¦ä½¿ç”¨å¯èƒ½ãªå‹ã¯æ§‹é€ çš„ãªå‹ï¼ˆstructural typeï¼‰ã¨ã„ã†å‹ã®ã‚«ãƒ†ã‚´ãƒªã§å®šç¾©ã•ã‚Œã¦ãŠã‚Šã€ã‚¯ãƒ©ã‚¹å‹ã®å ´åˆã¯é›†æˆä½“å‹ã®ã‚ˆã†ã«ã™ã¹ã¦ã®ãƒ¡ãƒ³ãƒå¤‰æ•°ãŒ`public`ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã—ã‹ã—ã€`std::strong_ordering`ã¯é€šå¸¸ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ¡ãƒ³ãƒã‚’æŒã¤å½¢ã§å®Ÿè£…ã•ã‚Œã‚‹ãŸã‚ã€NTTPã¨ã—ã¦ä½¿ç”¨ã§ãã¾ã›ã‚“ã€‚

ã“ã®ææ¡ˆã¯ã€`std::type_order`ã‚’`std::integral_constant`ã‚’ä½¿ã‚ãªã„ã‚ˆã†ã«ä¿®æ­£ã™ã‚‹ã“ã¨ã§ã“ã®å•é¡Œã‚’è§£æ±ºã—ã‚ˆã†ã¨ã™ã‚‹ã‚‚ã®ã§ã™ã€‚

`std::type_order`ã®å®Ÿè£…ãŒå…ˆã»ã©ã®ä¾‹ã®ã‚ˆã†ã«`std::integral_constant`ã‚’ä½¿ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã®ã¯ã€*Cpp17BinaryTypeTrait*ã¨ã„ã†è¦ä»¶ã«å¾“ã†ã‚ˆã†ã«æŒ‡å®šã•ã‚Œã¦ã„ã‚‹ã‹ã‚‰ã§ã™ã€‚ã“ã®è¦ä»¶ã®æ„å›³ã™ã‚‹ã¨ã“ã‚ã¯æ¬¡ã®ã‚ˆã†ãªã‚‚ã®ã®æ§˜ã§ã™

1. `std::integral_constant<T, v>`ã¸ã®æš—é»™å¤‰æ›ã‚’è¡Œã†ã“ã¨ã§ã€ãƒ¡ã‚¿é–¢æ•°ã®å¼•æ•°å‹ã‚’éš è”½ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚
    - æ„å›³çš„ã«ä½¿ç”¨ã™ã‚‹ã¨ã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–æ•°ã‚’æ¸›å°‘ã•ã›ã‚‰ã‚Œã‚‹
2. `::type`ãƒ¡ãƒ³ãƒã¯1ã‚’æ˜ç¤ºçš„ã«å®Ÿè¡Œã™ã‚‹ã®ã«ä½¿ç”¨ã§ãã‚‹
3. ãƒ¡ã‚¿é–¢æ•°ã®çµæœã¨ã—ã¦`::value`ãƒ¡ãƒ³ãƒã‚’æä¾›ã™ã‚‹
4. `value_type`ãƒ¡ãƒ³ãƒã«ã‚ˆã£ã¦`::value`ã®å‹ã‚’å–å¾—ã§ãã‚‹
5. åˆ©ä¾¿æ€§å‘ä¸Šã®ãŸã‚ã®ã€`constexpr`æš—é»™å¤‰æ›æ¼”ç®—å­ï¼ˆ`::value`ã¸å¤‰æ›ï¼‰
6. `constexpr operator()`ã¯é–¢æ•°å‘¼ã³å‡ºã—ã‚’æœŸå¾…ã™ã‚‹ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‹ã‚‰å€¤ã‚’å–å¾—ã™ã‚‹ã®ã«å½¹ç«‹ã¤

ã“ã‚Œã‚‰ã®æ€§è³ªã‚’å®Ÿç¾ã™ã‚‹ã®ã«`std::integral_constant`ã‚’ä½¿ç”¨ã™ã‚‹ã®ã¯æœ€ã‚‚ç°¡å˜ãªãŸã‚ã€ç¾åœ¨ã®å®šç¾©ã¯ãã†ã—ã¦ã„ã¾ã™ã€‚ã“ã®ææ¡ˆã§ã¯ã€ã“ã‚Œã‚‰ã®æ€§è³ªã‚’ç¶­æŒã—ä»–ã®ãƒ¡ã‚¿é–¢æ•°ã¨ã»ã¼åŒã˜å‹•ä½œã‚’ã•ã›ãªãŒã‚‰ã‚‚`std::integral_constant`ã‚’ä½¿ç”¨ã—ãªã„ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã«ã€`std::type_order`ã®æ§‹é€ ä½“ã‚’ç‹¬è‡ªã‹ã¤å…·ä½“çš„ã«å®šç¾©ã™ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚

å¤‰æ›´å¾Œã®å®šç¾©ã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™

```cpp
template<class T, class U>
struct type_order {
  static constexpr strong_ordering value = TYPE-ORDER(T, U);

  using value_type = strong_ordering;

  constexpr operator value_type() const noexcept { return value; }
  constexpr value_type operator()() const noexcept { return value; }
};
```

ãã—ã¦ã€`std::type_order`ã®*Cpp17BinaryTypeTrait*ã¸ã®é©åˆã®è¦å®šã‚’å‰Šé™¤ã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã£ã¦ã€ä¸Šè¨˜æ€§è³ªã®1ã¨2ä»¥å¤–ã®ã‚‚ã®ã¯ç¶­æŒã•ã‚ŒãŸã¾ã¾ã§ã€`std::strong_ordering`ã‚’æ¯”è¼ƒçµæœã«ä½¿ç”¨ã—ã¤ã¤å®Ÿè£…å¯èƒ½ã«ãªã‚Šã¾ã™ã€‚

ã“ã®ææ¡ˆã¯ã€2025å¹´11æœˆã®å…¨ä½“ä¼šè­°ã‚’é€šéã—ã€C++26ã«æ¡æŠã•ã‚Œã¦ã„ã¾ã™ã€‚

- [P2830R10 Standardized Constexpr Type Ordering - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2025å¹´03æœˆï¼‰](https://onihusube.hatenablog.com/entry/2025/09/30/224815#P2830R10-Standardized-Constexpr-Type-Ordering)
- [P2830R7 Standardized Constexpr Type Ordering - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2024å¹´12æœˆï¼‰](https://onihusube.hatenablog.com/entry/2025/05/18/195724#P2830R7-Standardized-Constexpr-Type-Ordering)
- [std::type_orderã«ã‚ˆã‚‹å‹ãƒªã‚¹ãƒˆã®æ­£è¦åŒ– - zenn](https://zenn.dev/yaito3014/articles/type-order-and-canonicalization)
- [C++20 éå‹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ã—ã¦ã‚¯ãƒ©ã‚¹å‹ã‚’è¨±å¯ã™ã‚‹ [P0732R2]](https://cpprefjp.github.io/lang/cpp20/class_types_in_non-type_template_parameters.html)
- [P3778 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/2389)

### [P3780R0 Detecting bitwise trivially relocatable types](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3780r0.html)

ãƒˆãƒªãƒ“ã‚¢ãƒ«ãƒªãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³å¯èƒ½ãªå‹ãŒã€`memcpy`ã«ã‚ˆã£ã¦ãƒˆãƒªãƒ“ã‚¢ãƒ«ãƒªãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³å¯èƒ½ã§ã‚ã‚‹ã‹ã‚’èª¿ã¹ã‚‹å‹ç‰¹æ€§ã‚’è¿½åŠ ã™ã‚‹ææ¡ˆã€‚

P2786ã§ã¯ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å†é…ç½®ï¼ˆãƒªãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰ã¨ã„ã†æ“ä½œã‚’ãƒ©ã‚¤ãƒ–ãƒ©ãƒªå®Ÿè£…ã§ä½¿ç”¨å¯èƒ½ã«ã™ã‚‹ãŸã‚ã®è¨€èªã®èª¿æ•´ã¨æœ€ä½é™ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªæ©Ÿèƒ½ãŒæä¾›ã•ã‚Œã¾ã™ã€‚ãƒªãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³æ“ä½œã¯é€šå¸¸ãƒ ãƒ¼ãƒ–+ãƒ‡ã‚¹ãƒˆãƒ©ã‚¯ã‚¿å‘¼ã³å‡ºã—ã®è¤‡åˆæ“ä½œã¨ãªã‚Šã¾ã™ãŒã€ä¸€éƒ¨ã®æ¡ä»¶ã‚’æº€ãŸã—ãŸæ–¹ã¯ã‚‚ã£ã¨å˜ç´”ã«`memcpy`ã«ã‚ˆã‚‹ãƒ“ãƒƒãƒˆã‚³ãƒ”ãƒ¼ã«ã‚ˆã£ã¦ãƒªãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¡Œã†ã“ã¨ãŒã§ãã¾ã™ã€‚

ã“ã®`memcpy`ã«ã‚ˆã‚‹ãƒªãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒå¯èƒ½ãªå‹ã®äº‹ã‚’ãƒˆãƒªãƒ“ã‚¢ãƒ«ãƒªãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³å¯èƒ½ï¼ˆ*trivially relocatable*ï¼‰ãªå‹ã¨å‘¼ã³ã€P2786ã¯å°‚ã‚‰ã“ã‚Œã‚’æ­£å¼ã«C++ã‚³ãƒ¼ãƒ‰ä¸Šã§åˆ©ç”¨å¯èƒ½ã«ã™ã‚‹ã“ã¨ã‚’ç›®çš„ã¨ã—ã¦ã„ã¾ã™ã€‚

ãƒˆãƒªãƒ“ã‚¢ãƒ«ãƒªãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³å¯èƒ½ãªå‹ã¨ã¯ã€ã‚¹ã‚«ãƒ©å‹ã‚„ãƒã‚¤ãƒ³ã‚¿å‹ãªã©ã®ãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–å‹ã¯å½“ç„¶å«ã¾ã‚Œã¾ã™ãŒã€æ™®é€šã®ã‚¯ãƒ©ã‚¹å‹ã§ã‚‚ãƒˆãƒªãƒ“ã‚¢ãƒ«ãƒªãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³å¯èƒ½ã¨ãªã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚ä¾‹ãˆã°ã€é€šå¸¸ã®å®Ÿè£…ã®`std::vector`ã¯ãƒˆãƒªãƒ“ã‚¢ãƒ«ãƒªãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³å¯èƒ½ã«ãªã‚Šã¾ã™ã€‚

P2786ã«ã‚ˆã‚‹ãƒˆãƒªãƒ“ã‚¢ãƒ«ãƒªãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³å¯èƒ½ã®å®šç¾©ã§ã¯ã€å¤šæ…‹çš„ãªå‹ï¼ˆ*polymorphic type*ï¼‰ã‚‚ãƒˆãƒªãƒ“ã‚¢ãƒ«ãƒªãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³å¯èƒ½ã§ã‚ã‚‹ã¨ã•ã‚Œã¾ã™ã€‚ã“ã‚Œã¯ã€å¤šæ…‹çš„ãªå‹ã¯éš ã‚ŒãŸéé™çš„ãƒ¡ãƒ³ãƒå¤‰æ•°ã¨ã—ã¦ãƒã‚¤ãƒ³ã‚¿ï¼ˆä»®æƒ³é–¢æ•°ãƒ†ãƒ¼ãƒ–ãƒ«ã¸ã®ãƒã‚¤ãƒ³ã‚¿ï¼‰ã‚’æŒã£ã¦ã„ã‚‹ã¨ã¿ãªã™ã“ã¨ãŒã§ãã€ãƒã‚¤ãƒ³ã‚¿å‹ã¯ãƒˆãƒªãƒ“ã‚¢ãƒ«ãƒªãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³å¯èƒ½ã§ã‚ã‚‹ãŸã‚ã€å¤šæ…‹çš„ãªå‹ã¯ãã®ç¶™æ‰¿æ§‹é€ ã«é–¢ã‚ã‚‰ãšãƒˆãƒªãƒ“ã‚¢ãƒ«ãƒªãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³å¯èƒ½ã¨ãªã‚Šã¾ã™ã€‚

ã—ã‹ã—ã€ä¸€éƒ¨ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚„ABIã«ãŠã„ã¦ã¯ãƒã‚¤ãƒ³ã‚¿ã®ç½²åãŒè¡Œã‚ã‚Œã‚‹å ´åˆãŒã‚ã‚Šã€ç½²åã«ã‚ˆã‚‹èªè¨¼ã«å¤±æ•—ã™ã‚‹ã¨ãƒã‚¤ãƒ³ã‚¿ã‚¢ã‚¯ã‚»ã‚¹ã«å¤±æ•—ã™ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ä¾‹ãˆã°ARM64eã§ã¯Pointer Authentication Codeï¼ˆPACï¼‰ã¨å‘¼ã°ã‚Œã‚‹æ‹¡å¼µå‘½ä»¤ã‚’å‚™ãˆã¦ã„ã¾ã™ã€‚ãã—ã¦ã€ä»®æƒ³é–¢æ•°ãƒ†ãƒ¼ãƒ–ãƒ«ã¸ã®ãƒã‚¤ãƒ³ã‚¿ãŒã“ã®ç½²åã®å¯¾è±¡ã«ãªã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚

ã“ã®ãƒã‚¤ãƒ³ã‚¿ã®ç½²åã«ã¯ãƒã‚¤ãƒ³ã‚¿ã®å‚ç…§å…ˆã‚¢ãƒ‰ãƒ¬ã‚¹ã¨ãƒã‚¤ãƒ³ã‚¿è‡ªä½“ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ãŒå°‘ãªãã¨ã‚‚ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ãƒã‚¤ãƒ³ã‚¿ç½²åã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ï¼ˆ+ä»®æƒ³é–¢æ•°ãƒ†ãƒ¼ãƒ–ãƒ«ã¸ã®ãƒã‚¤ãƒ³ã‚¿ã®èªè¨¼ã‚’è¡Œã†ï¼‰ã‚ˆã†ãªç’°å¢ƒã«ãŠã„ã¦ã¯ã€å¤šæ…‹çš„ãªå‹ã‚’å˜ç´”ãª`memcpy`ã«ã‚ˆã£ã¦ãƒªãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã—ã¦ã—ã¾ã†ã¨ã†ã¾ãå‹•ä½œã—ãªããªã‚Šã¾ã™ï¼ˆä»®æƒ³é–¢æ•°ãƒ†ãƒ¼ãƒ–ãƒ«ã¸ã®ãƒã‚¤ãƒ³ã‚¿ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ãŒå¤‰åŒ–ã™ã‚‹ã“ã¨ã§ãƒã‚¤ãƒ³ã‚¿èªè¨¼ã«å¤±æ•—ã—ã¦ã—ã¾ã†ï¼‰ã€‚

P2786ã§ã¯ã“ã‚ŒãŒè€ƒæ…®ã•ã‚Œã¦ãŠã‚Šã€`std::trivially_relocate()`é–¢æ•°ã‚’ç”¨ã„ã¦ãƒˆãƒªãƒ“ã‚¢ãƒ«ãƒªãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¡Œã†ã“ã¨ã§ã€ã“ã®é–¢æ•°å†…ã§ãƒã‚¤ãƒ³ã‚¿ç½²åã®å†ç½²åã‚’è¡Œãˆã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚

çµå±€ã€P2786ã®ãƒˆãƒªãƒ“ã‚¢ãƒ«ãƒªãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³å¯èƒ½ãªå‹ã®å®šç¾©ã«ãŠã„ã¦ã¯ã€å¤šæ…‹çš„ãªå‹ã‚‚ãƒˆãƒªãƒ“ã‚¢ãƒ«ãƒªãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³å¯èƒ½ã¨ãªã£ã¦ã„ã¾ã™ã€‚ã—ã‹ã—ã€ãã‚Œã¯å¿…ãšã—ã‚‚ãƒ“ãƒƒãƒˆã‚³ãƒ”ãƒ¼ã«ã‚ˆã£ã¦ãƒˆãƒªãƒ“ã‚¢ãƒ«ãƒªãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³å¯èƒ½ã§ã‚ã‚‹ã“ã¨ã‚’æ„å‘³ã—ã¦ã„ã¾ã›ã‚“ã€‚ã“ã®ã“ã¨ã¯ã€å¤šæ…‹çš„ãªå‹ã‚’ãƒã‚¤ãƒˆåˆ—ã¨ã—ã¦å†…éƒ¨çš„ã«ä¿æŒã—ã†ã‚‹ã‚ˆã†ãªãƒ©ãƒƒãƒ‘å‹ã®å®Ÿè£…æ™‚ã«å•é¡Œã¨ãªã‚Šã¾ã™ã€‚

ä¾‹ãˆã°æ¬¡ã®ã‚ˆã†ãªãƒ©ãƒƒãƒ‘å‹ã‚’è€ƒãˆã¾ã™

```cpp
class Wrapper {
  // ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‹ã€ãƒ’ãƒ¼ãƒ—ã¸ã®ãƒã‚¤ãƒ³ã‚¿ã‚’æ ¼ç´ã™ã‚‹ãƒã‚¤ãƒˆé…åˆ—
  alignas(A) std::byte storage[N];
  /* ... other data ... */

public:
  Wrapper();

  // ãƒ‡ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã¨ãƒ ãƒ¼ãƒ–ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãŒãƒ¦ãƒ¼ã‚¶ãƒ¼å®šç¾©ã•ã‚Œã‚‹
  ~Wrapper();
  Wrapper(Wrapper &&);
  /* other special member functions, rest of the API, etc. */
};
```

ã“ã‚Œã‚’P2786ã®ãƒˆãƒªãƒ“ã‚¢ãƒ«ãƒªãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®æ çµ„ã¿ã«ã‚¢ãƒ€ãƒ—ãƒˆã•ã›ã‚‹ã¨æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™

```cpp
class Wrapper trivially_relocatable_if_eligible {
  // ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‹ã€ãƒ’ãƒ¼ãƒ—ã¸ã®ãƒã‚¤ãƒ³ã‚¿ã‚’æ ¼ç´ã™ã‚‹ãƒã‚¤ãƒˆé…åˆ—
  alignas(A) std::byte storage[N];
  /* ... other data ... */

public:
  Wrapper();
  
  // ãƒ‡ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã¨ãƒ ãƒ¼ãƒ–ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãŒãƒ¦ãƒ¼ã‚¶ãƒ¼å®šç¾©ã•ã‚Œã‚‹
  ~Wrapper();
  Wrapper(Wrapper &&);
  /* other special member functions, rest of the API, etc. */
};
```

ã“ã®ã‚ˆã†ãªå‹ã®å…·ä½“ä¾‹ã¨ã—ã¦ã¯`std::any`ãŒã‚ã‚Šã€`optional`ã‚„`inplace_vector`ã®å®Ÿè£…ã®ä¸€ã¤ã¨ã—ã¦ä¸€èˆ¬çš„ãªã‚‚ã®ã§ã™ã€‚

`storage`ä»¥å¤–ã®ãƒ¡ãƒ³ãƒã¯é€šå¸¸æ•´æ•°ã‚„ãƒã‚¤ãƒ³ã‚¿ç­‰ã®ãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–å‹ã—ã‹å¿…è¦ãªã„ãŸã‚ã€ã“ã®å‹ã¯ãƒˆãƒªãƒ“ã‚¢ãƒ«ãƒªãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³å¯èƒ½ã¨ãªã‚Šã¾ã™ã€‚ãŸã ã—ãã®ãŸã‚ã«ã¯ã€`storage`ã«ä¿å­˜ã™ã‚‹å‹ã‚‚ã¾ãŸãƒˆãƒªãƒ“ã‚¢ãƒ«ãƒªãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³å¯èƒ½ã§ãªã‘ã‚Œã°ãªã‚‰ãšã€ãã†ã§ã¯ãªã„å ´åˆã¯æ§‹ç¯‰ã‚’ç¦æ­¢ã™ã‚‹ã‹ãƒ’ãƒ¼ãƒ—ã«é…ç½®ã—ã¦ãã®ãƒã‚¤ãƒ³ã‚¿ã‚’ï¼ˆ`storage`ã«ï¼‰ä¿å­˜ã™ã‚‹ã‚ˆã†ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

ãã®ã‚ˆã†ã«å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ã¨ã—ã¦ã€ã“ã®`Wrapper`ã‚¯ãƒ©ã‚¹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ãƒªãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆ`std::trivially_relocate()`ï¼‰ã™ã‚‹éš›ã«å˜ç´”ãª`memcpy`ã«ã‚ˆã£ã¦å®Ÿè¡Œã—ã¦ã‚‚å¤§ä¸ˆå¤«ã§ã—ã‚‡ã†ã‹ï¼Ÿç‰¹ã«å¤šæ…‹çš„ãªå‹ï¼ˆå‰è¿°ã®ã‚ˆã†ã«ã“ã‚Œã¯ãƒˆãƒªãƒ“ã‚¢ãƒ«ãƒªãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³å¯èƒ½ï¼‰ã‚’ä¿æŒã—ã¦ã„ã‚‹ï¼ˆ`storage`ã«æ ¼ç´ã•ã‚Œã¦ã„ã‚‹ï¼‰å ´åˆã«`memcpy`ã«ã‚ˆã‚‹ãƒªãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯å®‰å…¨ã§ã—ã‚‡ã†ã‹ï¼Ÿ

å‰è¿°ã®ã‚ˆã†ã«ã€ãƒã‚¤ãƒ³ã‚¿èªè¨¼ã‚’è¡Œã†ç’°å¢ƒã«ãŠã„ã¦ã¯ã€å¤šæ…‹çš„ãªå‹ã‚’ä¿æŒã™ã‚‹`Wrapper`ã‚¯ãƒ©ã‚¹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’`memcpy`ã«ã‚ˆã£ã¦ãƒªãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã™ã‚‹ã¨ãƒã‚¤ãƒ³ã‚¿èªè¨¼ã«å¤±æ•—ã™ã‚‹ãƒã‚¤ãƒ³ã‚¿ãŒç”Ÿæˆã•ã‚Œã¦ã—ã¾ã†ãŸã‚å®‰å…¨ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚`std::trivially_relocate()`ã«ã‚ˆã£ã¦ãƒªãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¡Œã†ã¨ãã§ã‚‚ã€`std::trivially_relocate()`ã¯`Wrapper`ã‚¯ãƒ©ã‚¹ã®å®Ÿè£…ã«ã¤ã„ã¦ã®çŸ¥è­˜ã‚’æŒãŸãªã„ãŸã‚ã€å˜ç´”ãª`memcpy`ã§ãƒªãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã—ã¦ã„ã„ã®ã‹ãƒã‚¤ãƒ³ã‚¿å†èªè¨¼ãŒå¿…è¦ãªã®ã‹ï¼ˆãã—ã¦ãã®ãƒã‚¤ãƒ³ã‚¿ã¯ã©ã“ã«ã‚ã‚‹ã®ã‹ï¼‰ã¯åˆ†ã‹ã‚Šã¾ã›ã‚“ã€‚

ãã®ãŸã‚ã€ã“ã®ãƒˆãƒªãƒ“ã‚¢ãƒ«ãƒªãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³å¯èƒ½ãª`Wrapper`å‹ã«ç›´æ¥æ ¼ç´ã§ãã‚‹å‹ã®è¦ä»¶ã¯ãƒˆãƒªãƒ“ã‚¢ãƒ«ãƒªãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³å¯èƒ½ã¨ã„ã†ã ã‘ã§ã¯ãªãã€`memcpy`ã«ã‚ˆã£ã¦ãƒªãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³å¯èƒ½ã§ã‚ã‚‹ã¨ã„ã†è¦ä»¶ã‚‚å¿…è¦ã«ãªã‚Šã¾ã™ã€‚ã“ã‚Œã¯P2786ã§ã‚‚æä¾›ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ã“ã®ææ¡ˆã¯ã€ã“ã‚Œã‚’æ¤œå‡ºã™ã‚‹å‹ç‰¹æ€§ã‚’ææ¡ˆã™ã‚‹ã‚‚ã®ã§ã™ã€‚

ãƒã‚¤ãƒ³ã‚¿èªè¨¼ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ã‹ã¯ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã«ã‚ˆã£ã¦ç•°ãªã‚Šã€ã¾ãŸå‹ãŒå¤šæ…‹çš„ã§ã‚ã‚‹ã‹ã©ã†ã‹ã¨ã„ã†ã“ã¨ã¯ã“ã®å•é¡Œã®æœ¬è³ªã§ã¯ãªã„ãŸã‚ã€`std::is_polymorphic`ã§ã¯ã“ã®å•é¡Œã®è§£æ±ºã«ã¯é©ã•ãªã„ãŸã‚ã€å°‚ç”¨ã®å‹ç‰¹æ€§ãŒå¿…è¦ã¨ãªã‚Šã¾ã™ã€‚

ã“ã®ææ¡ˆã§ã¯ã€ã“ã®å‹ç‰¹æ€§ã‚’`std::is_bitwise_trivially_relocatable`ã¨ã—ã¦ææ¡ˆã—ã¦ã„ã¾ã™ã€‚

`Wrapper`ã‚¯ãƒ©ã‚¹ã§ã¯ã€ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‚„ä»£å…¥æ¼”ç®—å­ãªã©ã§ã“ã®å‹ç‰¹æ€§ã‚’ä½¿ã£ã¦æ ¼ç´ã—ã‚ˆã†ã¨ã—ã¦ã„ã‚‹å‹ã‚’å†…éƒ¨ãƒãƒƒãƒ•ã‚¡ï¼ˆ`storage`ï¼‰ã«é…ç½®ã™ã¹ãã‹ãƒ’ãƒ¼ãƒ—ã«é…ç½®ã—ã¦ãƒã‚¤ãƒ³ã‚¿ã‚’ä¿æŒã™ã¹ãã‹ã‚’æ±ºå®šã™ã‚‹ã‚ˆã†ã«ã™ã‚‹ã“ã¨ã§ã€ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã«ã‚ˆã‚‰ãšå®‰å…¨ãªãƒˆãƒªãƒ“ã‚¢ãƒ«ãƒªãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³å¯¾å¿œã‚’é”æˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ã¾ãŸã€ã“ã®`memcpy`ã«ã‚ˆã£ã¦ãƒªãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³å¯èƒ½ã§ã‚ã‚‹ã¨ã„ã†è¦ä»¶ã¯ã€å‹•ä½œã™ã‚‹UBã®ä¸Šã§ã™ã§ã«ãƒªãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ´»ç”¨ã—ã¦ã„ã‚‹æ—¢å­˜ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªå®Ÿè£…ãŒæƒ³å®šã—ã¦ã„ã‚‹å®šç¾©ã§ã‚‚ã‚ã‚Šã¾ã™ã€‚æ—¢å­˜ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®è¦ä»¶ã¨åˆè‡´ã™ã‚‹å‹ç‰¹æ€§ã‚’è¿½åŠ ã—ã¦ãŠãã“ã¨ã§C++26ãƒªãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¸ã®ç§»è¡Œã‚’ä¿ƒã—ã‚„ã™ããªã‚‹åŠ¹æœã‚‚ã‚ã‚Šã¾ã™ã€‚

- [P3780 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/2390)

### [P3781R0 `is_*_type` should imply `is_type`](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3781r0.html)

ãƒªãƒ•ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆ`std::meta::info`ï¼‰ãŒä½•ã‚‰ã‹ã®ã‚«ãƒ†ã‚´ãƒªã®å‹ã‚’åæ˜ ã—ã¦ã„ã‚‹ã‹ã‚’å–å¾—ã™ã‚‹é–¢æ•°ç¾¤ã«ã¤ã„ã¦ã€å‹ã§ã¯ãªã„ãƒªãƒ•ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã®å…¥åŠ›ãŒã‚¨ãƒ©ãƒ¼ã«ãªã‚‰ãªã„ã‚ˆã†ã«ã™ã‚‹ææ¡ˆã€‚

ãƒªãƒ•ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã¨ã—ã¦ã‹ãªã‚Šä¸€èˆ¬çš„ã«ãªã‚‹ã¨äºˆæƒ³ã•ã‚Œã‚‹ã“ã¨ã®ä¸€ã¤ã¯ä½•ã‚‰ã‹ã®ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã‚’ä½œæˆã™ã‚‹ã“ã¨ã ã¨äºˆæƒ³ã•ã‚Œã¾ã™ã€‚ãã®éš›ã€å¯¾è±¡ãŒé–¢æ•°ãªã®ã‹ã‚¯ãƒ©ã‚¹ãªã®ã‹ã«ã‚ˆã£ã¦å‡¦ç†ãŒå¤‰ã‚ã‚‹ã“ã¨ãŒã‚ã‚‹ã¨äºˆæƒ³ã•ã‚Œã€ãã®å ´åˆã¯ãã‚Œã‚’åˆ¤å®šã—ã¦åˆ†å²ã™ã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚ä¾‹ãˆã°æ¬¡ã®ã‚ˆã†ãªå˜ç´”ãªä¾‹ãŒè€ƒãˆã‚‰ã‚Œã¾ã™

```cpp
// åå‰ç©ºé–“fooã®ãƒªãƒ•ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’å–å¾—
constexpr auto namespace_info = ^^foo;

// fooåå‰ç©ºé–“ä»¥ä¸‹ã®ã‚‚ã®ã®ãƒªãƒ•ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’å–å¾—ã—ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã™ã‚‹
for (int i = 0; auto element : std::meta::members_of(namespace_info, std::meta::access_context::current()))
{
  // elemntãŒã‚¯ãƒ©ã‚¹ã‹ã‚’åˆ¤å®š
  if (std::meta::is_class_type(element))
  {
    // ã‚¯ãƒ©ã‚¹ã«å¯¾ã™ã‚‹å‡¦ç†ã‚’ã“ã“ã§è¡Œã†
    classes[i++] = std::meta::identifier_of(element);
  }
}
```

ã©ã®ã‚ˆã†ãªãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã‚’ä½œæˆã™ã‚‹ã‹ã¯ç½®ã„ã¦ãŠã„ã¦ã€ä½•ã‹ã—ã‚‰ã®å¯¾è±¡ï¼ˆã“ã“ã§ã¯åå‰ç©ºé–“ï¼‰ã®ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®å‡¦ç†ã¯ä¾‹ãˆã°ã“ã®ã‚ˆã†ã«ãªã‚‹ã§ã—ã‚‡ã†ã€‚ã—ã‹ã—ã“ã®ã‚³ãƒ¼ãƒ‰ã¯å®Ÿéš›ã«ã¯æœŸå¾…é€šã‚Šã«å‹•ä½œã—ã¾ã›ã‚“ã€‚ãªãœãªã‚‰ã€`std::meta::is_class_type(element)`ã¯`element`ãŒå‹ã®ãƒªãƒ•ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯ãªã„å ´åˆã«`false`ã‚’è¿”ã™ã®ã§ã¯ãªãã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ãŸã‚ã§ã™ã€‚ã“ã®ä¾‹ã§ã¯åå‰ç©ºé–“ã®ãƒ¡ãƒ³ãƒã«ã¤ã„ã¦ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã—ã¦ã„ã‚‹ã®ã§ã€é–¢æ•°ã‚„åå‰ç©ºé–“ãŒå‡ºã¦ããŸã¨ã“ã‚ã§ã‚¨ãƒ©ãƒ¼ã«ãªã‚Šã¾ã™ã€‚

æ­£ã—ãã¯ã€`std::meta::is_type`ã§`element`ãŒå‹ã®ãƒªãƒ•ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã§ã‚ã‚‹ã‹ã©ã†ã‹ã‚’å…ˆã«åˆ¤å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

```cpp
  // elemntãŒã‚¯ãƒ©ã‚¹ã‹ã‚’åˆ¤å®š
  if (std::meta::is_type(element) && std::meta::is_class_type(element))
```

ã¨ã¯ã„ãˆã“ã‚Œã¯ç›´æ„Ÿçš„ã§ã¯ãªãå†—é•·ã§ã™ã€‚

`std::meta::is_*_type`ã¨ã„ã†é–¢æ•°ã¯å¤šæ•°ã‚ã‚Šã„ãšã‚Œã‚‚åŒæ§˜ã®å•é¡ŒãŒã‚ã‚Šã¾ã™ã€‚`is_*_type`ã¨ã„ã†å‘½åã‹ã‚‰ã¯ã€ãã‚ŒãŒå‹ã‹ã©ã†ã‹ã‚’`bool`å€¤ã§è¿”ã™ã‚‚ã®ã§ã‚ã‚‹ã¨ã„ã†å¦¥å½“ãªæ¨æ¸¬ãŒç«‹ã¡ã€å‹ã§ã¯ãªã„ã‚‚ã®ã«ã¤ã„ã¦ã‚¯ã‚¨ãƒªã—ãŸã¨ãã«`false`ã§ã¯ãªãã‚¨ãƒ©ãƒ¼ã‚’è¿”ã™ã®ã¯ç›´æ„Ÿçš„ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

ã“ã®ãŸã‚ã€ã“ã®ææ¡ˆã§ã¯`std::meta::is_*_type`ç³»ã®é–¢æ•°ã«ãŠã„ã¦`std::meta::is_type`ã«ã‚ˆã‚‹åˆ¤å®šã‚’ã¾ãšè¡Œã†ã‚ˆã†ã«ã™ã‚‹ã“ã¨ã‚’ææ¡ˆã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ä¸Šè¨˜ã®ä¾‹ã§ã¯`std::meta::is_class_type(element)`ã ã‘ã§æ„å›³é€šã‚Šã«å‹•ä½œã™ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

ãŸã ã—ã€`std::meta::is_*_type`ç³»ã®é–¢æ•°ã®ã†ã¡ã€2é …ã§å‹ä»¥å¤–ã®å…¥åŠ›ãŒæ„å‘³ã‚’æŒãŸãªã„ã‚‚ã®ã«ã¤ã„ã¦ã¯é™¤å¤–ã—ã¦ã„ã¾ã™ã€‚é™¤å¤–ã™ã‚‹é–¢æ•°ã¯æ¬¡ã®ã‚‚ã®ã§ã™

```cpp
// associated with [meta.unary.prop], type properties
consteval bool is_assignable_type(info type_dst, info type_src);
consteval bool is_trivially_assignable_type(info type_dst, info type_src);
consteval bool is_nothrow_assignable_type(info type_dst, info type_src);

consteval bool is_swappable_with_type(info type_dst, info type_src);
consteval bool is_nothrow_swappable_with_type(info type_dst, info type_src);

// associated with [meta.rel], type relations
consteval bool is_same_type(info type1, info type2);
consteval bool is_base_of_type(info type_base, info type_derived);
consteval bool is_virtual_base_of_type(info type_base, info type_derived);
consteval bool is_convertible_type(info type_src, info type_dst);
consteval bool is_nothrow_convertible_type(info type_src, info type_dst);
consteval bool is_layout_compatible_type(info type1, info type2);
consteval bool is_pointer_interconvertible_base_of_type(info type_base, info type_derived);

template <reflection_range R = initializer_list<info>>
consteval bool is_invocable_r_type(info type_result, info type, R&& type_args);

template <reflection_range R = initializer_list<info>>
consteval bool is_nothrow_invocable_r_type(info type_result, info type, R&& type_args);
```

ã“ã‚Œã‚‰ã®é–¢æ•°ã§ã¯ã©ã¡ã‚‰ã‹ã®å¼•æ•°ã«å‹ä»¥å¤–ã®ã‚‚ã®ã‚’å…¥ã‚ŒãŸæ™‚ã«`false`ã‚’è¿”ã™ã¨èª¤è§£ã‚’æ‹›ãå¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ä¾‹ãˆã°ã€`is_same_type(r1, r2)`ã¯ä¸€æ–¹ã‚‚ã—ãã¯ä¸¡æ–¹ã®å¼•æ•°ãŒå‹ã‚’åæ˜ ã—ãŸã‚‚ã®ã§ãªã„å ´åˆã«`false`ã‚’è¿”ã™ã¨å‹ã¨ã—ã¦ä¸€è‡´ã—ã¦ã„ãªã‹ã£ãŸã®ã‹å¼•æ•°ãŒå‹ã§ã¯ãªã‹ã£ãŸã®ã‹ã‚ã‹ã‚‰ãªããªã‚Šã¾ã™ã€‚

- [P3781 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/2391)

### [P3784R0 range-if](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3784r0.pdf)

ç¯„å›²`if`æ–‡ã®ææ¡ˆã€‚

ç¯„å›²ãŒç©ºã§ã‚ã‚‹ã‹ã«ã‚ˆã£ã¦å‡¦ç†ã‚’åˆ†å²ã—ãŸã„å ´åˆã¨ã„ã†ã“ã¨ã¯è‰¯ãã‚ã‚Šã¾ã™ã€‚å˜ç´”ã«ã¯`ranges::empty`ã‚’ä½¿ç”¨ã—ã¦åˆ†å²ã™ã‚Œã°ã‚ˆã„ã®ã§ã™ãŒã€çœŸã«ã‚¸ã‚§ãƒãƒªãƒƒã‚¯ã«è¨˜è¿°ã—ã‚ˆã†ã¨ã™ã‚‹ã¨ã€`empty`ãŒä½¿ç”¨ã§ããªã„å ´åˆãŒã‚ã‚Šå¾—ã‚‹ãŸã‚ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã‚’ä½¿ç”¨ã—ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚

```cpp
// ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’ä½¿ç”¨ã™ã‚‹ãªã©ã—ã¦ç”Ÿæˆã•ã‚Œã¦ã„ã‚‹ä½•ã‹ç¯„å›²
auto && r = a-view-pipeline; 

if(!r.empty()) { // âŒ ã™ã¹ã¦ã®ãƒ“ãƒ¥ãƒ¼å‹ãŒempty()ã‚’æä¾›ã™ã‚‹ã‚ã‘ã§ã¯ãªã„
  for(auto & x : r) { 
    â€¦ 
  } 
} else { 
  // ç¯„å›²ãŒç©ºã®å ´åˆã®å‡¦ç†
}
```
```cpp
auto && r = a-view-pipeline;

// ğŸ˜¬ æ˜ç¤ºçš„ã«ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã‚’ä½¿ç”¨ã™ã‚‹
if(auto it{r.begin()}; it != r.end()) { 
  for(; it != r.end(); ++it) { // å†—é•·ãªãƒã‚§ãƒƒã‚¯
    auto & x{*it}; 
    â€¦ 
  } 
} else { 
  // ç¯„å›²ãŒç©ºã®å ´åˆã®å‡¦ç†
}
```

ã“ã®ç”¨é€”ã«ç¯„å›²`for`ã‚’ä½¿ç”¨ã§ããªã„ã®ã¯ã€`else`ç¯€ã«ç›¸å½“ã™ã‚‹ã‚‚ã®ãŒç„¡ã„ãŸã‚ã§ã™ã€‚

ç¯„å›²`for` + ãƒ•ãƒ©ã‚°ã¨ã„ã†æ–¹æ³•ã‚‚ã‚ã‚Šã¾ã™ãŒã€ãƒ•ãƒ©ã‚°ã®æ‰±ã„ãã®ã‚‚ã®ã‚„ãã®ã‚¹ã‚³ãƒ¼ãƒ—ã«ã¤ã„ã¦ãªã©ã®å•é¡ŒãŒã‚ã‚Šãƒ™ã‚¹ãƒˆãªè§£æ±ºç­–ã¨ã¯è¨€ãˆã¾ã›ã‚“ã€‚

```cpp
// ğŸ˜¬ ç©ºã‹ã©ã†ã‹ã®ãƒ•ãƒ©ã‚°
auto empty{true}; 
for(auto & x : a-view-pipeline) { 
  empty = false; 
  â€¦ 
} 

if(empty) { 
  // ç¯„å›²ãŒç©ºã®å ´åˆã®å‡¦ç†
}
```

ã“ã®ææ¡ˆã¯ã€ç¯„å›²`for`ã«å¯¾å¿œã™ã‚‹ç¯„å›²`if`æ–‡ã«ã‚ˆã£ã¦ã“ã®ã‚ˆã†ãªå ´åˆã®è¨˜è¿°ã®å•é¡Œã‚’è¨€èªæ©Ÿèƒ½ã§è§£æ±ºã—ã‚ˆã†ã¨ã™ã‚‹ã‚‚ã®ã§ã™ã€‚

ææ¡ˆã—ã¦ã„ã‚‹æ§‹æ–‡ã¯é€šå¸¸ã®`if`æ–‡ã«å¯¾ã—ã¦ã€æ¡ä»¶ã‚’è¨˜è¿°ã™ã‚‹ã¨ã“ã‚ã«ç¯„å›²`for`ã®ã‚ˆã†ã«è¨˜è¿°ã™ã‚‹æ§‹æ–‡ã§ã™

```cpp
if (auto & x : a-view-pipeline) { 
  // ç¯„å›²ã®ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å‡¦ç†
  // ã“ã“ã¯ãƒ«ãƒ¼ãƒ—ã™ã‚‹
} else { 
  // ç¯„å›²ãŒç©ºã®å ´åˆã®å‡¦ç†
  // ã“ã“ã¯ä¸€å›ã§æŠœã‘ã‚‹
}
```

ã“ã‚Œã¯ç¯„å›²`for`ã«ã‹ãªã‚Šè¿‘ã„ã‚‚ã®ã§ã€ãã‚Œã¨åŒã˜ã‚ˆã†ã«å±•é–‹ã•ã‚Œã¾ã™

```
if constexpr(opt)(init-statementopt for-range-declaration : for-range-initializer) 
statement1 else statement2
```

ã®æ§˜ãªæ–‡ã¯

```cpp
{
  init-statement(opt); 
  auto && range = for-range-initializer; 
  auto begin = begin-expr; 
  auto end = end-expr; 
  if constexpropt(begin != end) 
    do { 
      for-range-declaration = *begin; 
      statement1 
    } while(((void)++begin), begin != end); 
  else 
    do { statement2 } while(false); 
}
```

ã®ã‚ˆã†ã«å±•é–‹ã•ã‚Œã¾ã™ã€‚

ã“ã®ç¯„å›²`if`ã§ã¯ãƒ«ãƒ¼ãƒ—éƒ¨ã¨`else`ç¯€ã®ä¸¡æ–¹ã§`break`ã‚„`continue`ã‚’ä½¿ç”¨å¯èƒ½ã«ã™ã‚‹ã“ã¨ã‚’æ„å›³ã—ã¦ãŠã‚Šã€ãã®ãŸã‚ã«`else`å´ï¼ˆ`statement2`ï¼‰ã‚‚ãƒ€ãƒŸãƒ¼ãƒ«ãƒ¼ãƒ—ã§å›²ã‚ã‚Œã¾ã™ã€‚

- [P3784 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/2392)

### [P3785R0 Library Wording Changes for Defaulted Postfix Increment and Decrement Operators](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3785r0.html)

P3668ã®å¾Œç½®ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ãƒˆ/ãƒ‡ã‚¯ãƒªãƒ¡ãƒ³ãƒˆæ¼”ç®—å­ã®`default`å®šç¾©ã‚’åˆ©ç”¨ã—ã¦æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®è¦å®šã‚’å¤‰æ›´ã‚’ã™ã‚‹ææ¡ˆã€‚

P3668ã§ã¯å¾Œç½®ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ãƒˆ/ãƒ‡ã‚¯ãƒªãƒ¡ãƒ³ãƒˆæ¼”ç®—å­ãŒå¯¾å¿œã™ã‚‹å‰ç½®æ¼”ç®—å­ã‚’ç”¨ã„ã¦å…¸å‹çš„ã«è¨˜è¿°ã§ãã‚‹ã“ã¨ã‚’åˆ©ç”¨ã—ã¦ã€ãã®ã‚ˆã†ãªå®Ÿè£…ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¨ã™ã‚‹`default`å®šç¾©ã§ãã‚‹ã‚ˆã†ã«ã—ã‚ˆã†ã¨ã—ã¦ã„ã¾ã™ã€‚

P3668ã«ã¤ã„ã¦ã¯ä»¥å‰ã®è¨˜äº‹ã‚’å‚ç…§

- [P3668R1 Defaulting Postfix Increment and Decrement Operations - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2025å¹´05æœˆï¼‰](https://onihusube.hatenablog.com/entry/2025/12/16/230316#P3668R1-Defaulting-Postfix-Increment-and-Decrement-Operations)

ã“ã®ææ¡ˆã¯ã€æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªä¸­ã§å¾Œç½®ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ãƒˆ/ãƒ‡ã‚¯ãƒªãƒ¡ãƒ³ãƒˆæ¼”ç®—å­ã‚’å®šç¾©ã—ã¦ã„ã‚‹éƒ¨åˆ†ã§ã“ã®`default`æŒ‡å®šã‚’ä½¿ç”¨ã™ã‚‹ã‚ˆã†ã«ã™ã‚‹ã“ã¨ã§ã€æ¨™æº–ã®è¦å®šã‚’åœ§ç¸®ã—ã‚ˆã†ã¨ã™ã‚‹ã‚‚ã®ã§ã™ã€‚

ã“ã®ææ¡ˆã«ã‚ˆã‚‹å¤‰æ›´ã¯æ—¢å­˜ã®å‹•ä½œã‚’å¤‰æ›´ã—ãŸã‚Šã™ã‚‹ã‚‚ã®ã§ã¯ãªãã€æ¨™æº–ã®æ–‡è¨€ã‚’ç°¡ç´ åŒ–ã™ã‚‹ã“ã¨ã«ã‚ã‚Šã¾ã™ã€‚ãã®ãŸã‚ã€ã“ã®å¤‰æ›´ã¯ç·¨é›†ä¸Šã®ã‚‚ã®ã¨ã—ã¦LWGã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ã«ã‹ã‘ã‚‹ã“ã¨ã‚’ææ¡ˆã—ã¦ã„ã¾ã™ã€‚

å¤‰æ›´ã®å€™è£œã¯å…¨éƒ¨ã§53å€‹ã‚ã‚Šã€è¡¨è¨˜ã®æºã‚Œã¯ã‚ã‚‹ã‚‚ã®ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå®Ÿè£…ã¨ä¸€è‡´ã™ã‚‹è¦å®šã‚’æŒã¤ã‚‚ã®ã¨ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå®Ÿè£…ã¨ä¸€è‡´ã—ã¦ã„ã‚‹ã‚‚ã®ã®ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ã®åˆ†å²ã‚’ä¼´ã†ç‰©ã‚„äº‹å‰æ¡ä»¶ã‚„åˆ¶ç´„ã‚’æŒã¤ã‚‚ã®ã®å¤§ãã2ç¨®é¡ã«åˆ†ã‘ã¦ã€ãã®æ–‡è¨€ã¨ã¨ã‚‚ã«ãƒªã‚¹ãƒˆã‚¢ãƒƒãƒ—ã—ã¦ã„ã¾ã™ã€‚

- [P3785 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/2393)

### [P3787R0 Adjoints to "Enabling list-initialization for algorithms": uninitialized_fill](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3787r0.html)

P2248R8ã§ã®å¤‰æ›´ã‚’`uninitialized_fill`ã«ã‚‚é©ç”¨ã™ã‚‹ææ¡ˆã€‚

P2248ã«ã¤ã„ã¦ã¯ä»¥å‰ã®è¨˜äº‹ã‚’å‚ç…§

- [P2248R8 Enabling list-initialization for algorithms - WG21æœˆæ¬¡ææ¡ˆæ–‡æ›¸ã‚’çœºã‚ã‚‹ï¼ˆ2024å¹´04æœˆï¼‰](https://onihusube.hatenablog.com/entry/2024/08/31/233056#P2248R8-Enabling-list-initialization-for-algorithms)

P2248R8ã§ã¯å€¤ã‚’å–ã‚‹ã‚¿ã‚¤ãƒ—ã®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã«ãŠã„ã¦ã€ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã‹ã‚‰å–å¾—ã—ãŸå€¤å‹ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã§`{}`ã®æŒ‡å®šãŒã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚ã—ã‹ã—ã€`uninitialized_fill`ã¯ãã“ã‹ã‚‰æ¼ã‚Œã¦ã„ãŸã‚ˆã†ã§ãã®å¤‰æ›´ãŒé©ç”¨å¯èƒ½ã§ã‚ã‚‹ã®ã«é©ç”¨ã•ã‚Œã¦ã„ãªã„ãŸã‚ã€ç‰¹ã«`fill`ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®ä»•æ§˜ã¨ä¸€è‡´ã™ã‚‹ã‚ˆã†ã«`uninitialized_fill`ã‚‚å¤‰æ›´ã—ã‚ˆã†ã¨ã™ã‚‹ææ¡ˆã§ã™ã€‚

```cpp
int main() {
  std::array<int, 10> arr;  // æœªåˆæœŸåŒ–é…åˆ—

  std::ranges::uninitialized_fill(arr, {}); // ã“ã®ææ¡ˆå¾Œok
}
```

- [P3787 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/2394)

### [P3788R0 Fixing `std::complex` binary operators](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3788r0.html)

`std::complex`ã®äºŒé …æ¼”ç®—ã«ãŠã„ã¦æš—é»™å¤‰æ›ãŒè€ƒæ…®ã•ã‚Œãªã„ã“ã¨ã‚’ä¿®æ­£ã™ã‚‹ææ¡ˆã€‚

`std::complex<T>`ã¯`T`ã«æš—é»™å¤‰æ›å¯èƒ½ãªæ•°å€¤å‹ã‹ã‚‰æ§‹ç¯‰ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ä¸€æ–¹ã§ã€`std::complex<T>`ã‚’ç”¨ã„ãŸäºŒé …æ¼”ç®—ã«ãŠã„ã¦ã¯æ•°å€¤ã¨ã—ã¦ä½¿ç”¨å¯èƒ½ãªã®ã¯`T`å‹ãã®ã‚‚ã®ã®ã¿ã§ã€`T`ã«æš—é»™å¤‰æ›å¯èƒ½ãªå‹ã‚’ä½¿ç”¨ã§ãã¾ã›ã‚“ã€‚

```cpp
long double ld = 2.5;
std::complex<float> c = 3.14;           // OK!!!

auto res1 = c * 3.14f;                  // OK
auto res2 = c * 3.14;                   // DOES NOT COMPILE!!!
auto res3 = c * ld;                     // DOES NOT COMPILE!!!
auto res4 = c * static_cast<float>(ld); // OK but verbose

if (c == 3.14f) {                       // OK
  // ...
}
if (c == 3.14) {                        // DOES NOT COMPILE!!!
  // ...
}
```

ã“ã‚Œã¯`std::complex<T>`ã®äºŒé …æ¼”ç®—ã®æ¼”ç®—å­ã‚ªãƒ¼ãƒãƒ¼ãƒ­ãƒ¼ãƒ‰ã®å®šç¾©ã®ã•ã‚Œæ–¹ã«å•é¡ŒãŒã‚ã‚Šã¾ã™ã€‚ä¾‹ãˆã°ã€äºŒé …`*`æ¼”ç®—å­ã‚ªãƒ¼ãƒãƒ¼ãƒ­ãƒ¼ãƒ‰ã¯æ¬¡ã®ã‚ˆã†ã«å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚

```cpp
template<class T>
constexpr complex<T> operator*(const complex<T>&, const complex<T>&);

template<class T>
constexpr complex<T> operator*(const complex<T>&, const T&);

template<class T>
constexpr complex<T> operator*(const T&, const complex<T>&);
```

ã“ã®æ¼”ç®—å­ï¼ˆãŠã‚ˆã³ã»ã‹ã®äºŒé …æ¼”ç®—å­ï¼‰ã¯éãƒ¡ãƒ³ãƒã®é`friend`é–¢æ•°ã¨ã—ã¦å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚ä¸‹äºŒã¤ã®æ¼”ç®—å­å®šç¾©ã«ãŠã„ã¦ã€`std::complex`ã§ã¯ãªã„å€¤ã‚’å—ã‘å–ã‚‹å¼•æ•°ã®å¼•æ•°å‹ãŒ`std::complex<T>`ã®`T`ã‚’ç›´æ¥ä½¿ç”¨ã—ã¦ã—ã¾ã£ã¦ã„ã‚‹ã“ã¨ã«å•é¡ŒãŒã‚ã‚Šã¾ã™ã€‚ã“ã®`T`ã¯ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå¼•æ•°æ¨è«–ã®å¯¾è±¡ã§ã‚ã‚Šã€ä¸¡æ–¹ã®ã‚ªãƒšãƒ©ãƒ³ãƒ‰ã‹ã‚‰æ¨è«–ã—ãŸå‹ãŒä¸€è‡´ã—ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚ãã®çµæœã€`T`ã«å¯¾ã—ã¦ã¯ã»ã¨ã‚“ã©ã™ã¹ã¦ã®å¤‰æ›ã¯è¡Œã‚ã‚Œãšã€`std::complex<T>`ã«å¯¾ã—ã¦ä¸åº¦`T`å‹ã®å€¤ã—ã‹æ¸¡ã™ã“ã¨ãŒã§ãã¾ã›ã‚“ã€‚ä¾‹ãˆã°ã€`std::complex<float>`ã¨`double`ã‚’å—ã‘å–ã‚Œã‚‹`*`ã¯å­˜åœ¨ã—ã¾ã›ã‚“ã€‚

ã¾ãŸã€ä¸¡æ–¹ã®ã‚ªãƒšãƒ©ãƒ³ãƒ‰ãŒ`std::complex`ã§ã‚ã‚‹å ´åˆã§ã‚‚ã€ãã®æ•°å€¤å‹ãŒç•°ãªã‚‹ã¨ã‚„ã¯ã‚Šåˆ©ç”¨ã§ãã‚‹æ¼”ç®—å­ãŒãªããªã‚Šã¾ã™ï¼ˆ`std::complex<double>`ã¨`std::complex<float>`ãªã©ï¼‰ã€‚

ã“ã‚Œã¨åŒã˜ã“ã¨ãŒä»–ã®äºŒé …æ¼”ç®—å­ã«ãŠã„ã¦ã‚‚èµ·ãã¦ã„ã‚‹ãŸã‚ã€`std::complex`ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã®ä½¿ç”¨æ„Ÿã‚’æã­ã¦ã„ã¾ã™ã€‚ç‰¹ã«ã€`std::complex`ã¯æ•°å¼ã‚’ã‚³ãƒ¼ãƒ‰ã«èµ·ã“ã™å ´åˆã«ä½¿ç”¨ã•ã‚Œã‚‹ã“ã¨ãŒå¤šãã€ãã®ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ã‚’å‹•ä½œã•ã›ã‚‹ãŸã‚ã«ã‚­ãƒ£ã‚¹ãƒˆãŒå¤šãå¿…è¦ã«ãªã‚‹ã¨å…ƒã®æ•°å¼ã¨ä¹–é›¢ã™ã‚‹ã“ã¨ã§å¯èª­æ€§ãŒä½ä¸‹ã—ã¾ã™ã€‚

ã“ã®ææ¡ˆã¯ã€ã“ã‚Œã‚’ä¿®æ­£ã—ã¦`std::complex<T>`ã®äºŒé …æ¼”ç®—ã§`T`ã«æš—é»™å¤‰æ›å¯èƒ½ãªå‹ã®å€¤ã‚’ä½¿ç”¨ã§ãã‚‹ã‚ˆã†ã«ã—ã‚ˆã†ã¨ã™ã‚‹ã‚‚ã®ã§ã™ã€‚

å¾Œæ–¹äº’æ›æ€§ã‚’é‡è¦–ã—ã¦ã€ã“ã®ææ¡ˆã§ã¯`T`ã‚’ç›´æ¥å–ã£ã¦ã„ãŸã¨ã“ã‚ã‚’`std::complex<T>::value_type`ã‚’ä½¿ç”¨ã™ã‚‹ã‚ˆã†ã«å¤‰æ›´ã™ã‚‹ã“ã¨ã‚’ææ¡ˆã—ã¦ã„ã¾ã™ã€‚

```cpp
template<class T>
constexpr complex<T> operator*(const complex<T>&, const complex<T>&);

template<class T>
constexpr complex<T> operator*(const complex<T>&, const typename complex<T>::value_type&);

template<class T>
constexpr complex<T> operator*(const typename complex<T>::value_type&, const complex<T>&);
```

ã“ã®ã‚ˆã†ã«ã™ã‚‹ã“ã¨ã§ã€ä¸‹äºŒã¤ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ­ãƒ¼ãƒ‰ã®é`std::complex`å¼•æ•°ã¯ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®æ¨è«–ã«å¯„ä¸ã—ãªããªã‚Šã€`std::comple<T>`å¼•æ•°ã‹ã‚‰`T`ãŒæ±ºå®šã•ã‚ŒãŸå¾Œã§`T`ã«å¯¾ã™ã‚‹å¤‰æ›ãŒåŠ¹ãã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

ã“ã‚Œã¨åŒã˜ã“ã¨ã‚’ã€ä»–ã®äºŒé …æ¼”ç®—ï¼ˆ`+ - * / ==`ï¼‰ã«å¯¾ã—ã¦ã‚‚é©ç”¨ã—ã¾ã™ã€‚

ã“ã®å¤‰æ›´ã¯æ—¢å­˜ã®å‹•ä½œã—ã¦ã„ã‚‹ã‚³ãƒ¼ãƒ‰ã«å¯¾ã—ã¦ã¯å½±éŸ¿ãŒãªãã€ã‚ªãƒ¼ãƒãƒ¼ãƒ­ãƒ¼ãƒ‰è§£æ±ºçµæœã‚‚å¤‰æ›´ã•ã‚Œã¾ã›ã‚“ã€‚å‹•ä½œã—ã¦ã„ãªã‹ã£ãŸã‚³ãƒ¼ãƒ‰ãŒå‹•ä½œã™ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

- [P3788 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/2395)

### [P3790R0 Pointer lifetime-end zap proposed solutions: Bag-of-bits pointer class](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3790r0.pdf)
### [P3791R0 constexpr deterministic random](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3791r0.html)

æ±ºå®šè«–çš„ãªã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã«ã‚ˆã‚‹ä¹±æ•°ç”Ÿæˆå™¨ã¨ã€ä¹±æ•°ç”Ÿæˆå™¨ã‚’ä½¿ç”¨ã™ã‚‹ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’`constexpr`æŒ‡å®šã™ã‚‹ææ¡ˆã€‚

ã“ã®ææ¡ˆã§ã¯æ±ºå®šè«–çš„ãªã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã«ã‚ˆã‚‹ä¹±æ•°ç”Ÿæˆå™¨ã€ã™ãªã‚ã¡ç–‘ä¼¼ä¹±æ•°ç”Ÿæˆå™¨ã®å…¨ã¦ã«å¯¾ã—ã¦`constexpr`æŒ‡å®šã—ã‚ˆã†ã¨ã—ã¦ã„ã¾ã™ã€‚ãã‚Œã«åŠ ãˆã¦ã€`shuffle`ã¨`sample`ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚‚`constexpr`æŒ‡å®šã—ã‚ˆã†ã¨ã—ã¦ã„ã¾ã™ã€‚

```cpp
constexpr sample_to_sketch(std::span<const T> items, sketch<T> & sk) noexcept {
	auto engine = std::mt19937_64{/* default seed is fine*/}; // ã“ã®ææ¡ˆå¾Œok
	std::ranges::sample(items, std::insert_iterator(sk), sk.capacity(), engine);  // ã“ã®ææ¡ˆå¾Œok
}
```

ãŸã ã—ã€`std::random_device`ãªã©éæ±ºå®šè«–çš„ãªä¹±æ•°ç”Ÿæˆã‚’ä¼´ã†ã‚‚ã®ã«ã¤ã„ã¦ã¯å¯¾è±¡ã«ã—ã¦ã„ã¾ã›ã‚“ã€‚

ã“ã®å‹•æ©Ÿã«ã¤ã„ã¦ã¯ä»–ã®`constexpr`å¯¾å¿œã¨åŒæ§˜ã«ã€å®Ÿè¡Œæ™‚ã¨ã®ã‚³ãƒ¼ãƒ‰å…±é€šåŒ–ã‚„å®šæ•°å¼ã§ã®ãƒ†ã‚¹ãƒˆã‚’å¯èƒ½ã«ã™ã‚‹ã“ã¨ã§UBæ¤œå‡ºæ©Ÿèƒ½ä»˜ãã§ãƒ†ã‚¹ãƒˆã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã“ã¨ãªã©ã‚’æŒ™ã’ã¦ã„ã¾ã™ã€‚

- [P3791 é€²è¡ŒçŠ¶æ³](https://github.com/cplusplus/papers/issues/2397)

### [P3792R0 Why constant_wrapper is not a usable replacement for nontype](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3792r0.html)
### [P3793R0 Better shifting](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3793r0.html)
### [P3794R0 An idea or two on renaming the nontype tag](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3794r0.html)
### [P3795R0 Miscellaneous Reflection Cleanup](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3795r0.html)
### [P3796R0 Coroutine Task Issues](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3796r0.html)
### [P3798R0 The unexpected in std::expected](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3798r0.html)
### [P3799R0 2025-07 Library Evolution Polls](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3799r0.html)
### [P3801R0 Concerns about the design of std::execution::task](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3801r0.html)
### [P3802R0 Poor Functions](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2025/p3802r0.pdf)
